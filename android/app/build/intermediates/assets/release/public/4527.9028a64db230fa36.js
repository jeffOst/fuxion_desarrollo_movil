"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4527,5719,1973,3384,9915],{719:(D,C,l)=>{l.d(C,{G:()=>f});const f={FRONT:"front",BACK:"back"}},947:(D,C,l)=>{l.d(C,{mR:()=>f});var O=l(7423);l(719);const f=(0,O.fo)("BarcodeScanner",{web:()=>l.e(2155).then(l.bind(l,2155)).then(d=>new d.BarcodeScannerWeb)})},5719:(D,C,l)=>{l.d(C,{Z:()=>T});var O=l(4053),E=l(8256),f=l(529);let T=(()=>{class t{constructor(o){this.httpClient=o,this.urlApiProd=O.N.UrlDomainLocal+"aw_modulos/prod/api/CAtencionServicios.php"}ListDatos(o,n,r,a){let s=JSON.stringify({s:o,acc:1,tipo:n,idtablet:r,idmenu:a});return this.httpClient.post(this.urlApiProd,s).toPromise().then(h=>h)}FUpdateEstadoServicio(o,n,r,a,s,h){let g=JSON.stringify({idofpterminado:o,acc:2,value:n,id_usuario_local:r,id_dispositivo:a,avatar:s,idasignaestacionof:h});return this.httpClient.post(this.urlApiProd,g).toPromise().then(P=>P)}ListSolsexQr(o,n,r,a,s){let h=JSON.stringify({idofpterminado:o,acc:2,value:n,id_usuario_local:r,id_dispositivo:a,avatar:s});return this.httpClient.post(this.urlApiProd,h).toPromise().then(g=>g)}load_cbos_pieza_material_maquina(o,n,r){let a=JSON.stringify({acc:3,id_usuario_local:n,id_dispositivo:r,idtipserv:o});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}ListFindPersonal(o,n,r){let a=JSON.stringify({acc:4,s:o,idusu:n,iddevice:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}ListFindServiciosByPieza(o,n,r,a,s,h){let g=JSON.stringify({acc:5,s:o,idpieza:n,tipServicio:r,idusu:a,iddevice:s,nomclase:h});return this.httpClient.post(this.urlApiProd,g).toPromise().then(P=>P)}ListFindPiezaByActividad(o,n,r,a,s,h,g,P){let u=JSON.stringify({acc:6,s:o,idpieza:n,tipServicio:r,idusu:a,iddevice:s,idclase:h,idsubfamilia:g,nomsubfam:P});return this.httpClient.post(this.urlApiProd,u).toPromise().then(m=>m)}SaveInicioActividad(o){let n=JSON.stringify(o);return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}ListFindActividades(o,n,r){let a=JSON.stringify({acc:9,s:o,idusu:n,iddevice:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}ListFindClaseByPieza(o,n,r,a,s){let h=JSON.stringify({acc:10,s:o,idpieza:n,tipServicio:r,idusu:a,iddevice:s});return this.httpClient.post(this.urlApiProd,h).toPromise().then(g=>g)}ListFindOfByClase(o,n,r,a,s,h){let g=JSON.stringify({acc:11,s:o,idsubfamilia:n,idclase:r,tipServicio:a,idusu:s,iddevice:h});return this.httpClient.post(this.urlApiProd,g).toPromise().then(P=>P)}ListFindQrByOf(o,n,r,a,s,h){let g=JSON.stringify({acc:12,s:o,idpieza:n,tipServicio:r,idusu:a,iddevice:s,nomclase:h});return this.httpClient.post(this.urlApiProd,g).toPromise().then(P=>P)}SaveControlCalidadByOf(o){let n=JSON.stringify(o);return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}ListFindSolicitudQcByOf(o,n,r,a){let s=JSON.stringify({acc:14,s:o,idofpterminado:n,idusu:r,iddevice:a});return this.httpClient.post(this.urlApiProd,s).toPromise().then(h=>h)}load_cbos_ma00(){let o=JSON.stringify({acc:15});return this.httpClient.post(this.urlApiProd,o).toPromise().then(n=>n)}FCreaCorrelativo(){let o=JSON.stringify({acc:16});return this.httpClient.post(this.urlApiProd,o).toPromise().then(n=>n)}SaveReporteFalla(o){let n=JSON.stringify(o);return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}SaveRelevo(o){let n=JSON.stringify(o);return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}FCreaCorrelativoRelevo(){let o=JSON.stringify({acc:18});return this.httpClient.post(this.urlApiProd,o).toPromise().then(n=>n)}load_cbo_subprocesos(o,n,r){let a=JSON.stringify({acc:20,idmaquina:o,nom_pieza:n,servicio:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}load_cbos_any_edit_ini_actvidad(o,n,r){let a=JSON.stringify({acc:22,id_usuario_local:n,id_dispositivo:r,idtipserv:o});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}ListActividadesxTecnico(o,n,r){let a=JSON.stringify({iduser:o,acc:23,horainicio_filtro:n,horafin_filtro:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}SaveResumenDia(o,n){let r=JSON.stringify(n);return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}LoadFormDejarPiezasCalidad(o){let n=JSON.stringify({idpt:o,acc:25});return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}LoadFormIniciaActividad(o,n){let r=JSON.stringify({idpt:o,avatar:n,acc:26});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}}return t.\u0275fac=function(o){return new(o||t)(E.LFG(f.eN))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},4527:(D,C,l)=>{l.r(C),l.d(C,{ProdListActiProgramadaPage:()=>P});var O=l(5861),E=l(6895),f=l(433),d=l(5562),y=l(947),T=l(3646),t=l(8256),N=l(5719),o=l(1407),n=l(849);const r=["idinputsearch_equipo"];function a(u,m){1&u&&t._UZ(0,"ion-icon",21)}function s(u,m){1&u&&t._UZ(0,"ion-icon",22)}function h(u,m){if(1&u){const i=t.EpF();t.TgZ(0,"ion-item",23)(1,"ion-card",24)(2,"ion-item",23)(3,"ion-item",25),t.NdJ("click",function(){const _=t.CHM(i).$implicit,p=t.oxw(2);return t.KtG(p.FSetEstado(_))}),t.TgZ(4,"ion-label",23)(5,"strong")(6,"div"),t._uU(7),t.qZA()(),t.TgZ(8,"p"),t._uU(9),t.TgZ(10,"ion-text",26),t._uU(11),t.qZA(),t.TgZ(12,"ion-text",27),t._uU(13),t.qZA(),t._uU(14),t.TgZ(15,"ion-badge",28),t._uU(16),t.qZA()()()(),t.TgZ(17,"ion-item")(18,"ion-button",29),t.NdJ("click",function(){const _=t.CHM(i).$implicit,p=t.oxw(2);return t.KtG(p.FIniciarActvividad(_))}),t._UZ(19,"ion-icon",30),t.qZA()()()()()}if(2&u){const i=m.$implicit,e=t.oxw(2);t.Q6J("hidden",e.scanActive),t.xp6(1),t.Q6J("hidden",e.scanActive),t.xp6(1),t.Q6J("hidden",e.scanActive),t.xp6(2),t.Q6J("hidden",e.scanActive),t.xp6(2),t.Jzz("color:",i.color_reproceso,";"),t.xp6(1),t.Oqu(i.descripcion_pt),t.xp6(2),t.hij(" ",i.EQUIPOID," "),t.xp6(2),t.hij("",i.cantidad," \xa0"),t.xp6(2),t.Oqu(i.correorden),t.xp6(1),t.hij("\xa0 ",i.fcreacion_ofpt," "),t.xp6(2),t.Oqu(i.prioridad_aof),t.xp6(3),t.Q6J("hidden",e.scanActive)}}function g(u,m){if(1&u&&(t.TgZ(0,"ion-item-group")(1,"ion-item-divider",17),t.YNc(2,a,1,0,"ion-icon",18),t.YNc(3,s,1,0,"ion-icon",19),t._uU(4),t.qZA(),t.YNc(5,h,20,14,"ion-item",20),t.qZA()),2&u){const i=m.$implicit,e=t.oxw();t.xp6(1),t.Q6J("hidden",e.scanActive),t.xp6(1),t.Q6J("ngIf","ASIGNADO"==i.key),t.xp6(1),t.Q6J("ngIf","COMPLETADO"==i.key),t.xp6(1),t.hij(" ",i.key," "),t.xp6(1),t.Q6J("ngForOf",i.values)}}let P=(()=>{class u{constructor(i,e,c,_,p,S,A){this.loadingController=i,this.prodGestionServicioService=e,this.router=c,this.navCtrl=_,this.changeRef=p,this.alertController=S,this.storage=A,this.switchButtonSegmento="",this.search_term_equipo="",this.TituloDinamico="",this.idMenu="",this.scanActive=!1;try{let v=this.router.getCurrentNavigation().extras.queryParams;console.log("navParams 00",this.router.getCurrentNavigation()),console.log("navParams 1",v),v&&(console.log("navParams 2",v[0]),this.TituloDinamico=v[1],this.idMenu=v[0])}catch{}}ngOnInit(){let i;this.changeRef.detectChanges(),this.storage.get("USER_INFO").then(e=>{i=e,console.log("localStorage_user",i),this.NombresUsuarioLocal=i.user_name,console.log("ngoninit",this.NombresUsuarioLocal),""==this.NombresUsuarioLocal&&this.navCtrl.navigateForward("login")}).catch(e=>{console.log("errrr",e)})}asigna_titulo(i){this.TituloDinamico=i,this.load_list_principal(),console.log("asigna_titulo",this.TituloDinamico)}ionViewDidLoad(){let i=this.router.getCurrentNavigation();console.log("ionViewDidLoad::",i)}ionViewWillLeave(){let i=this.router.getCurrentNavigation();console.log("ionViewWillLeave::",i)}ionViewDidLeave(){let i=this.router.getCurrentNavigation();console.log("ionViewDidLeave::",i)}ionViewWillUnload(){let i=this.router.getCurrentNavigation();console.log("ionViewWillUnload::",i)}ionViewCanLeave(){let i=this.router.getCurrentNavigation();console.log("ionViewCanLeave::",i)}ionViewDidEnter(){console.log(this.TituloDinamico);let i=this.router.getCurrentNavigation();console.log("ionViewDidEnter",i)}ionViewWillEnter(){this.changeRef.detectChanges(),this.load_list_principal()}ionViewCanEnter(){let i=this.router.getCurrentNavigation();console.log("ionViewCanEnter",i)}start_scan_qr(i){var e=this;return(0,O.Z)(function*(){if(e.idinputsearch_equipo.getInputElement().then(_=>{_.blur()}),yield e.checkPermiso()){e.scanActive=!0;const _=yield y.mR.startScan();_.hasContent&&(console.log(_),e.search_term_equipo=_.content,console.log("result.hasContent:::",_.hasContent),e.scanActive=!1,e.idinputsearch_equipo.readonly=!1)}})()}checkPermiso(){var i=this;return(0,O.Z)(function*(){return new Promise(function(){var e=(0,O.Z)(function*(c,_){const p=yield y.mR.checkPermission({force:!0});p.granted?c(!0):p.denied?yield(yield i.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{y.mR.openAppSettings(),c(!1)}}]})).present():c(!1)});return function(c,_){return e.apply(this,arguments)}}())})()}stopScanner(){y.mR.stopScan(),this.scanActive=!1}load_list_principal(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(e=>{e.present(),this.prodGestionServicioService.ListDatos(this.search_term_equipo,this.switchButtonSegmento,"1",this.idMenu).then(c=>{this.MultiArrayServicios=c;let _=this.MultiArrayServicios;console.log(_),this.MultiArrayServicios=this.groupByArray(_,"estado","estado"),console.log(this.MultiArrayServicios)}).finally(()=>{this.loadingController.dismiss()})})}FIniciarActvividad(i){i.maquina=this.TituloDinamico,this.navCtrl.navigateForward(["addserviciostodet"],{state:i})}FNuevaActvividadNp(){let i;i={},i.CONCOMPONENTE=1,this.navCtrl.navigateForward(["addserviciostodet"],{state:i})}FListarActvidades(){this.navCtrl.navigateForward(["prod-ate-serv-list-actividades"],{state:{idmenu:this.idMenu,menu:this.TituloDinamico}})}FSetEstado(i){i.maquina=this.TituloDinamico,this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],{state:i})}groupByArray(i,e,c){return i.reduce(function(_,p){let S=e instanceof Function?e(p):p[e],A=_.find(v=>v&&v.key===S);return A?(A.values.push(p),A.values.sort(function(v,L){return v[c].toLowerCase().localeCompare(L[c].toLowerCase())})):_.push({key:S,values:[p]}),_},[])}sortArray(i,e,c){return c=c||1,i.sort(function(p,S){let A=0;return p[e]>S[e]?A=1*c:p[e]<S[e]&&(A=-1*c),A}),i}}return u.\u0275fac=function(i){return new(i||u)(t.Y36(d.HT),t.Y36(N.Z),t.Y36(o.F0),t.Y36(d.SH),t.Y36(t.sBO),t.Y36(d.Br),t.Y36(n.K))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-prod-list-acti-programada"]],viewQuery:function(i,e){if(1&i&&t.Gf(r,5),2&i){let c;t.iGM(c=t.CRH())&&(e.idinputsearch_equipo=c.first)}},standalone:!0,features:[t.jDz],decls:23,vars:3,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],[3,"titulo"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros",3,"ngModel","ngModelChange","ionChange"],["idinputsearch_equipo",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["title","Nueva Actividad",3,"click"],["name","grid-outline"],["mode","ios",2,"align-items","center"],["fill","clear","expand","block",2,"width","50%",3,"click"],["color","primary",2,"font","size 6px"],["color","light",3,"hidden"],["name","ellipse","color","warning","slot","start",4,"ngIf"],["name","ellipse","color","success","slot","start",4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf"],["name","ellipse","color","warning","slot","start"],["name","ellipse","color","success","slot","start"],[3,"hidden"],["expand","full","color","light","size","large","button","true",3,"hidden"],[2,"width","100%",3,"click"],["color","secondary"],["color","primary"],["color","warning"],["expand","block","color","white","size","small","slot","end","title","Iniciar Actividad",3,"click"],["expand","block","color","dark","size","small","name","play-forward",3,"hidden"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),t._UZ(4,"app-header",3),t.qZA(),t.TgZ(5,"ion-col",4),t._UZ(6,"ion-label",5),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-item")(9,"ion-searchbar",6,7),t.NdJ("ngModelChange",function(_){return e.search_term_equipo=_})("ionChange",function(){return e.load_list_principal()}),t.qZA(),t.TgZ(11,"ion-icon",8,9),t.NdJ("click",function(){return e.load_list_principal()}),t.qZA()(),t.YNc(13,g,6,5,"ion-item-group",10),t.TgZ(14,"ion-fab",11)(15,"ion-fab-button",12),t.NdJ("click",function(){return e.FNuevaActvividadNp()}),t._UZ(16,"ion-icon",13),t.qZA()()(),t.TgZ(17,"ion-footer")(18,"ion-card",14)(19,"ion-button",15),t.NdJ("click",function(){return e.FListarActvidades()}),t.TgZ(20,"ion-label",16),t._UZ(21,"ion-icon",13),t._uU(22," Tabla de actividades "),t.qZA()()()()),2&i&&(t.xp6(4),t.s9C("titulo",e.TituloDinamico),t.xp6(5),t.Q6J("ngModel",e.search_term_equipo),t.xp6(4),t.Q6J("ngForOf",e.MultiArrayServicios))},dependencies:[d.Pc,d.yp,d.YG,d.PM,d.wI,d.W2,d.IJ,d.W4,d.fr,d.jY,d.gu,d.Ie,d.rH,d.Ub,d.Q$,d.Nd,d.VI,d.yW,d.sr,d.j9,E.ez,E.sg,E.O5,f.u5,f.JJ,f.On,T.G],styles:['ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.scanner-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:100px;width:100vw;height:50px;z-index:11}.scan-box[_ngcontent-%COMP%]{border:2px solid #fff;box-shadow:0 0 0 100vmax #00000080;content:"";display:block;left:50%;height:300px;position:absolute;top:50%;transform:translate(-50%,-50%);width:300px}']}),u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);