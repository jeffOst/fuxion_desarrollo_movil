"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[402],{6101:(T,C,p)=>{p.d(C,{J:()=>E});var u=p(5861),O=p(4053),c=p(8256),t=p(529),A=p(849);let E=(()=>{class m{constructor(i,e){this.httpClient=i,this.storage=e,this.urlApiProd=O.N.UrlDomainLocal+"aw_modulos/mante/api/CApiInformeTecnico.php",this.confirmRequest=""}ListFindOts(i,e,r){let o=JSON.stringify({acc:1,s:i,idusu:e,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}SaveCheckListCab(i,e,r){let o=JSON.stringify({acc:2,id_orden_trab_cab:i,idusu:e,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}FormFindPaso1(i,e,r){let o=JSON.stringify({acc:3,idchecklistcab:i,idusu:e,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}FLoadPiezasAcordion(i,e){let r=JSON.stringify({acc:7,id:i,p2:e});return this.httpClient.post(this.urlApiProd,r).toPromise().then(o=>o)}FLoadServiciosxPiezas(i,e){let r=JSON.stringify({acc:8,id:i,p2:e});return this.httpClient.post(this.urlApiProd,r).toPromise().then(o=>o)}GuardarFormPaso1(i){var e=this;return(0,u.Z)(function*(){console.log("Dentro::GuardarFormulario::>",i);let o=e.urlApiProd,s=JSON.stringify(i);return e.httpClient.post(o+"?acc=4",s).toPromise()})()}GuardarFormPaso2(i,e,r,o,s,l){var h=this;return(0,u.Z)(function*(){let n,_=h.urlApiProd,g=JSON.stringify({idservicio:i,idpapa:e,idhijo:r,idusuario:o,acc:9,idclase:s,ck:l});return h.httpClient.post(_+"?acc=6",g).toPromise().then(d=>{console.log(d),n=d,h.confirmSaveBd=n[0].o_nres,h.confirmRequest=n},d=>{console.log(d,"Error- something is wrong!")})})()}FormFindPaso3(i,e,r){let o=JSON.stringify({acc:7,idchecklistcab:i,idusu:e,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}GuardarFormPaso3(i){var e=this;return(0,u.Z)(function*(){let r,o=e.urlApiProd,s=JSON.stringify(i);return e.httpClient.post(o+"?acc=8",s).toPromise().then(l=>{console.log(l),r=l,e.confirmSaveBd=r[0].o_nres,e.confirmRequest=r},l=>{console.log(l,"Error- something is wrong!")})})()}FormFindPaso5(i,e,r){let o=JSON.stringify({acc:10,id:i,idusu:e,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}GuardarFormPaso5(i){var e=this;return(0,u.Z)(function*(){let o=e.urlApiProd,s=JSON.stringify(i);return e.httpClient.post(o+"?acc=11",s).toPromise()})()}FormFindPaso6(i,e,r){let o=JSON.stringify({acc:12,idchecklistcab:i,idusu:e,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}GuardarFormPaso6(i){var e=this;return(0,u.Z)(function*(){let o=e.urlApiProd,s=JSON.stringify(i);return e.httpClient.post(o+"?acc=13",s).toPromise()})()}GuardarAplicaPaso(i,e,r){var o=this;return(0,u.Z)(function*(){let s,h,l=o.urlApiProd;h={idchecklistcab:i,numeroPaso:e,ck:r};let n=JSON.stringify(h);return o.httpClient.post(l+"?acc=15",n).toPromise().then(a=>{console.log(a),s=a,o.confirmSaveBd=s[0].o_nres,o.confirmRequest=s},a=>{console.log(a,"Error- something is wrong!")})})()}getImages(i){return this.httpClient.get(`${this.urlApiProd}?acc=5&id=`+i)}uploadImage(i,e,r){let o=new FormData;return o.append("file",i,"myimage."+r),o.append("id",e),o.append("acc","6"),o.append("type","image/png"),this.httpClient.post(this.urlApiProd,o)}UpLoadImageMultiple(i,e,r){try{let o=new FormData;o.append("id",e),o.append("acc","15"),o.append("type","image/png");for(let s=0;s<i.length;s++)console.log("image::ruta=>::>",i[s]),o.append("images[]",i[s],`image_${s}.jpg`);return this.httpClient.post(this.urlApiProd,o)}catch(o){console.error("Error al enviar im\xe1genes al API:",o)}}LoadPdfInformeTecnico(i){let e=JSON.stringify({acc:14,idchecklistcab:i});return this.httpClient.post(this.urlApiProd,e).toPromise().then(r=>r)}deleteImage(i){return this.httpClient.delete(`${this.urlApiProd}?acc=16&id=${i}`)}}return m.\u0275fac=function(i){return new(i||m)(c.LFG(t.eN),c.LFG(A.K))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},402:(T,C,p)=>{p.r(C),p.d(C,{MttoWinInformeTecnico3Page:()=>s});var u=p(6895),O=p(433),c=p(5562),t=p(8256),A=p(6101),E=p(849),m=p(1407),D=p(7883);const i=["popover"];function e(l,h){1&l&&(t.TgZ(0,"ion-content",4),t._uU(1,"No existe servicios!"),t.qZA())}function r(l,h){if(1&l){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-toggle",8),t.NdJ("ionChange",function(_){const d=t.CHM(n).$implicit,P=t.oxw().$implicit,f=t.oxw();return t.KtG(f.FasignaServicio(_,d.seqmaserv_is,d.corre_inf_cab_is,d.idinformeservicio,P.idclase))}),t.TgZ(2,"ion-label",9),t._uU(3),t.qZA()()()}if(2&l){const n=h.$implicit;t.xp6(1),t.Q6J("checked","1"===n.idestado_is),t.xp6(2),t.Oqu(n.Y04002)}}function o(l,h){if(1&l){const n=t.EpF();t.TgZ(0,"ion-item-group")(1,"ion-item-divider",6),t.NdJ("click",function(_){const d=t.CHM(n).$implicit,P=t.oxw();return t.KtG(P.accordionGroupChange(_,d.idclase))}),t.TgZ(2,"ion-label"),t._uU(3,"\xa0"),t.TgZ(4,"strong"),t._uU(5),t.qZA()(),t._UZ(6,"ion-icon",7),t.qZA(),t.YNc(7,r,4,2,"ion-item",5),t.qZA()}if(2&l){const n=h.$implicit,a=t.oxw();t.xp6(5),t.Oqu(n.nomclase),t.xp6(2),t.Q6J("ngForOf",a.DsServiciosxPieza[n.idclase])}}let s=(()=>{class l{constructor(n,a,_,g,d,P,f,I,F){let v;this.navCtrl=n,this.loadingController=a,this.ApiService=_,this.storage=g,this.alertController=d,this.router=P,this.globalVal=f,this.ref=I,this.actionSheetCtrl=F,this.isOpen=!1,this.DsServiciosxPieza={},this.storage.get("USER_INFO").then(M=>{v=M,this.NombresUsuarioLocal=v.user_name,this.IdUsuarioLocal=v.user_id,this.storage.get("DEVICE_INFO").then(S=>{v=S,this.NombreDispositivo=v.name,this.IdDispositivo=v.uuid})})}ngOnInit(){}ionViewWillEnter(){this.FLoadPiezasAcordion()}FLoadPiezasAcordion(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(a=>{a.present(),console.log(this.corre_inf_cab),this.ApiService.FLoadPiezasAcordion("2","").then(_=>{console.log(_),this.EditDataRest=_,this.EditDataRest.forEach(g=>{console.log(g),console.log(g.idclase)})}).finally(()=>{this.loadingController.dismiss()})})}FasignaServicio(n,a,_,g,d){console.log(n),this.ApiService.GuardarFormPaso2(a,_,g,this.IdUsuarioLocal,d,n.detail.checked?"1":"0").then(f=>{}).finally(()=>{}).catch(f=>{console.log("errror:::>>>>>>>>>",f)})}FLoadServiciosxPiezas(n,a){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(g=>{g.present(),console.log(this.corre_inf_cab),this.ApiService.FLoadServiciosxPiezas(n,this.globalVal.corre_inf_cab).then(d=>{console.log(d),console.log(this.DsServiciosxPieza),console.log(n.length),n.length>0&&(this.DsServiciosxPieza[n]=d,console.log("ingresooo 23222,",this.DsServiciosxPieza[n].lenth),console.log(this.DsServiciosxPieza[n]),console.log(d.length),console.log(d.length),0==d.length&&(console.log("ingresoooooo"),this.presentPopover(a)))}).finally(()=>{this.loadingController.dismiss()})})}presentPopover(n){this.popover.event=n,this.isOpen=!0}accordionGroupChange(n,a){console.log(a),a.length>0&&(console.log("ingreso carga detalles"),this.FLoadServiciosxPiezas(a,n))}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(c.SH),t.Y36(c.HT),t.Y36(A.J),t.Y36(E.K),t.Y36(c.Br),t.Y36(m.F0),t.Y36(D.X),t.Y36(t.sBO),t.Y36(c.BX))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-mtto-win-informe-tecnico3"]],viewQuery:function(n,a){if(1&n&&t.Gf(i,5),2&n){let _;t.iGM(_=t.CRH())&&(a.popover=_.first)}},standalone:!0,features:[t.jDz],decls:13,vars:2,consts:[["mode","ios"],["text-capitalize",""],[3,"isOpen","didDismiss"],["popover",""],[1,"ion-padding"],[4,"ngFor","ngForOf"],["button","true",1,"divider",3,"click"],["name","refresh-circle-outline","slot","end"],["mode","ios","labelPlacement","start",2,"width","80%",3,"checked","ionChange"],[2,"font-size","small"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-item")(3,"ion-title",1)(4,"ion-label"),t._uU(5,"MECANICA Y ESTANQUEIDAD "),t.qZA(),t.TgZ(6,"ion-popover",2,3),t.NdJ("didDismiss",function(){return a.isOpen=!1}),t.YNc(8,e,2,0,"ng-template"),t.qZA()()()()(),t.TgZ(9,"ion-content",4)(10,"ion-list"),t.YNc(11,o,8,2,"ion-item-group",5),t.qZA()(),t._UZ(12,"ion-footer")),2&n&&(t.xp6(6),t.Q6J("isOpen",a.isOpen),t.xp6(5),t.Q6J("ngForOf",a.EditDataRest))},dependencies:[c.Pc,c.W2,c.fr,c.Gu,c.gu,c.Ie,c.rH,c.Ub,c.Q$,c.q_,c.wd,c.ho,c.sr,c.d8,c.w,u.ez,u.sg,O.u5],styles:[".divider[_ngcontent-%COMP%]{color:#000;font-weight:700;background-color:#d7d8da;padding:0!important;border-radius:5px;border-width:2px;font-weight:bolder}"]}),l})()}}]);