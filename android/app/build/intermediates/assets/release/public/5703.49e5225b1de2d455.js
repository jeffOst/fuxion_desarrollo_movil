"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5703,1456],{1456:(S,P,d)=>{d.d(P,{k:()=>O});var u=d(5861),_=d(4053),l=d(8256),g=d(529),t=d(849);let O=(()=>{class p{constructor(e,i,r){this.httpClient=e,this.http=i,this.storage=r,this.urlApiProd=_.N.UrlDomainLocal+"aw_modulos/mante/api/CApiOrdenTrabajo.php",this.DirectorioImg=_.N.UrlDomainLocal+"aw_file/img_tablet/",this.confirmRequest="",this.key="123456",this.counts_rows=0,this.ArrayItemsSelected=[],this.EditArItemsSelected=[],this.o_nres="",this.o_msj="",this.idhorasxVueltaOtCab="",this.radioRevisionSelected=""}load_lista_solse(e,i){let r=this.urlApiProd,o=JSON.stringify({idot:e,acc:5,idtablet:"this.device.uuid",idotsolse_otd:i});return this.http.post(r,o).toPromise().then(s=>s)}FListOtPorSolsePieza(e,i,r,o){let s=this.urlApiProd,a=JSON.stringify({s:e,acc:r,tipo:i,idtablet:"this.device.uuid",madre_hija:o});return this.httpClient.post(s,a).toPromise().then(n=>n)}listado_principal_ot(e,i,r,o){let s=this.urlApiProd,a=JSON.stringify({s:e,acc:r,tipo:i,idtablet:"this.device.uuid",madre_hija:o});return this.httpClient.post(s,a).toPromise().then(n=>n)}listado_servicio_popup(e,i,r,o,s){let a=this.urlApiProd,n=JSON.stringify({s:e,acc:i,avatar:r,idpieza:o,idtablet:"this.device.uuid",idtablet2:s});return this.http.post(a,n).toPromise().then(c=>c)}guardar_servicios_selected_ot(e,i){let r=JSON.stringify(e);return console.log("paramsToBd:::>",e),this.httpClient.post(this.urlApiProd+"?acc=4&idot="+i,r).toPromise().then(s=>s)}update_solse_ot(e,i){let r=JSON.stringify(e);return console.log("paramsToBd:::>",e),this.httpClient.post(this.urlApiProd+"?acc=6&idot="+i,r).toPromise().then(s=>s)}update_solse_ot_qr(e,i){let r=JSON.stringify(e);return console.log("paramsToBd:::>",e),this.httpClient.post(this.urlApiProd+"?acc=7&idsolse="+i,r).toPromise().then(s=>s)}listado_equipos_service(e,i,r,o){let s=this.urlApiProd,a=JSON.stringify({s:e,acc:r,tipo:i,idtablet:"this.device.uuid",madre_hija:o});return this.http.post(s,a).toPromise().then(n=>n)}load_lista_servicios(e){let i=this.urlApiProd,r=JSON.stringify({idot:e,acc:3,idtablet:"this.device.uuid"});return this.http.post(i,r).toPromise().then(o=>o)}llamarMaestroServicios(e,i,r,o,s){let a=this.urlApiProd,n=JSON.stringify({s:e,acc:r,tipo:i,idtablet:s,madre_hija:o});return this.http.post(a,n).toPromise().then(c=>c)}EjServQuitarItemSelected(e){var i=this;return(0,u.Z)(function*(){let r=i.urlApiProd,o={id:e.idvaleservidetot,avatar:e.avatar,acc:6};i.ArrayItemsSelectedPivot=e,i.http.post(r,o).subscribe(s=>{},s=>{console.log("Error- something is wrong!")}),i.CntAgregado=i.EjeSerQuitarStorage(i.ArrayItemsSelectedPivot)})()}EjeSerQuitarStorage(e){let i=this.ArrayItemsSelected.indexOf(e);return i>-1&&this.ArrayItemsSelected.splice(i,1),this.storage.set("my-items",this.ArrayItemsSelected),this.ArrayItemsSelected.length}FListCbosDejarEje(e){let i=this.urlApiProd,r=JSON.stringify({idot:e,acc:9,idtablet:"this.device.uuid"});return this.http.post(i,r).toPromise().then(o=>o)}SaveRecojerPieza(e){let i=JSON.stringify(e);return this.httpClient.post(this.urlApiProd,i).toPromise().then(r=>r)}ListFindTecnico(e,i,r){let o=JSON.stringify({acc:11,s:e,idusu:i,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}ListFindEquipo(e,i,r){let o=JSON.stringify({acc:12,s:e,idusu:i,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}load_cbo_site(){let e=JSON.stringify({acc:13});return this.httpClient.post(this.urlApiProd,e).toPromise().then(i=>i)}SaveOtNoProgramada(e){let i=JSON.stringify(e);return this.httpClient.post(this.urlApiProd,i).toPromise().then(r=>r)}ListFindOts(e,i,r){let o=JSON.stringify({acc:15,s:e,idusu:i,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}FormFindPaso1(e,i,r){let o=JSON.stringify({acc:16,id_orden_trab_cab:e,idusu:i,iddevice:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}GuardarFormPaso1(e){var i=this;return(0,u.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let o=i.urlApiProd,s=JSON.stringify(e);return i.httpClient.post(o+"?acc=17",s).toPromise()})()}LoadPdfInformeTecnico(e){let i=JSON.stringify({acc:14,idchecklistcab:e});return this.httpClient.post(this.urlApiProd,i).toPromise().then(r=>r)}ListBombasxFabTableros(e,i,r){let o=JSON.stringify({acc:18,s:e,idusu:i,familia:r});return this.httpClient.post(this.urlApiProd,o).toPromise().then(s=>s)}GuardarNuevoEquipo(e){var i=this;return(0,u.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let o=i.urlApiProd,s=JSON.stringify(e);return i.httpClient.post(o+"?acc=19",s).toPromise()})()}ListRepuestosxBomba(e,i){let r=JSON.stringify({acc:20,idot:e,idusu:i});return this.httpClient.post(this.urlApiProd,r).toPromise().then(o=>o)}GuardarFormPaso2(e,i){var r=this;return(0,u.Z)(function*(){let s=r.urlApiProd,a=JSON.stringify(e);return r.httpClient.post(s+"?acc=21&idusu="+i,a).toPromise()})()}listadoArticulos(e,i,r,o,s){console.log(e);let a=this.urlApiProd,n=JSON.stringify({s:e,idpieza:i,cantidad:r,toggle:o,acc:s});return this.http.post(a,n).toPromise().then(c=>c)}GuardarArticulo(e){var i=this;return(0,u.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let o=i.urlApiProd,s=JSON.stringify(e);return i.httpClient.post(o+"?acc=23",s).toPromise()})()}ListServiciosxBomba(e,i){let r=JSON.stringify({acc:24,idot:e,idusu:i});return this.httpClient.post(this.urlApiProd,r).toPromise().then(o=>o)}ListFindSolse(e,i){let r=JSON.stringify({acc:26,idot:e,idusu:i});return this.httpClient.post(this.urlApiProd,r).toPromise().then(o=>o)}GuardarOtTerminado(e,i){var r=this;return(0,u.Z)(function*(){let s=r.urlApiProd,a=JSON.stringify({acc:27,idot:e,idusuario:i});return r.httpClient.post(s,a).toPromise()})()}LoadPdfOrdentrabajo(e){let i=JSON.stringify({acc:28,idchecklistcab:e});return this.httpClient.post(this.urlApiProd,i).toPromise().then(r=>r)}FLoadMotivoAdicional(e,i){let r=JSON.stringify({acc:29,idusu:e,iddevice:i});return this.httpClient.post(this.urlApiProd,r).toPromise().then(o=>o)}FQuitarItem(e){var i=this;return(0,u.Z)(function*(){let r=i.urlApiProd,o=JSON.stringify(e);return i.httpClient.post(r,o).toPromise()})()}ListaPartList(e,i,r,o,s,a,n){let c=this.urlApiProd,h=JSON.stringify({s:e,pd:i,ot:r,im:o,it:s,acc:a,idot:n});return this.http.post(c,h).toPromise().then(A=>A)}GuardarPartList(e){var i=this;return(0,u.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let o=i.urlApiProd,s=JSON.stringify(e);return i.httpClient.post(o+"?acc=32",s).toPromise()})()}GuardarCargarDetalleOT(e,i){var r=this;return(0,u.Z)(function*(){let s=r.urlApiProd,a=JSON.stringify({acc:33,idot:e,idusuario:i});return r.httpClient.post(s,a).toPromise()})()}}return p.\u0275fac=function(e){return new(e||p)(l.LFG(g.eN),l.LFG(g.eN),l.LFG(t.K))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},5703:(S,P,d)=>{d.r(P),d.d(P,{ListaprincipalPage:()=>e});var u=d(6895),_=d(433),l=d(5562),g=d(3646),t=d(8256),m=d(1456),O=d(849);const p=["idinputsearch_equipo"];function f(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item-sliding")(2,"ion-item",18),t.NdJ("click",function(){const n=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.CrearSolse(n.id_orden_trab_cab,n.id_orden_trab_fis_cab,n.codsmg,n.ot_fech_sist))}),t.TgZ(3,"ion-grid")(4,"ion-row")(5,"ion-col",19)(6,"ion-label"),t._uU(7),t.qZA()(),t.TgZ(8,"ion-col",20),t._uU(9),t.qZA(),t.TgZ(10,"ion-col",19),t._uU(11),t.qZA(),t.TgZ(12,"ion-col",19),t._uU(13),t.qZA(),t.TgZ(14,"ion-col",21),t._uU(15),t.qZA(),t.TgZ(16,"ion-col",19),t._uU(17),t.qZA()()()(),t.TgZ(18,"ion-item-options",22),t.NdJ("ionSwipe",function(){const n=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.CrearSolse(n.id_orden_trab_cab,n.id_orden_trab_fis_cab,n.codsmg,n.ot_fech_sist))}),t.TgZ(19,"ion-item-option",23),t._uU(20," Servicios"),t.qZA()()()()}if(2&i){const o=r.$implicit,a=r.even;t.ekj("odd",r.odd)("even",a),t.xp6(7),t.Oqu(o.codsmg),t.xp6(2),t.Oqu(o.id_orden_trab_fis_cab),t.xp6(2),t.Oqu(o.ot_fech_sist),t.xp6(2),t.Oqu(o.Y06002),t.xp6(2),t.Oqu(o.tecnico),t.xp6(2),t.Oqu(o.dias_trabajados_manual)}}let e=(()=>{class i{constructor(o,s,a,n,c){let h;this.navCtrl=o,this.loadingController=s,this.mttoOrdentrabajoService=a,this.storage=n,this.alertController=c,this.search_term_equipo="",this.switchButtonSegmento="",this.storage.get("USER_INFO").then(A=>{h=A,this.NombresUsuarioLocal=h.user_name,this.IdUsuarioLocal=h.user_id})}ngOnInit(){this.lista_equipos()}lista_equipos(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(s=>{s.present(),this.mttoOrdentrabajoService.listado_principal_ot(this.search_term_equipo,this.switchButtonSegmento,"1","H").then(a=>{this.results_lista_ot=a}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)})})}CrearSolse(o,s,a,n){console.log(":::::OJO:::",o,s);let c={state:{idot:o,nroot:s,codequipo:a,fcreaot:n}};console.log(c),this.navCtrl.navigateForward(["/winprincipal"],c)}FEntregaEje(){}FGenerarOtNoProgramado(){this.alertSiNo=this.alertController.create({header:"Agregar Servicios",subHeader:"",mode:"ios",backdropDismiss:!0,cssClass:"alertHeader",message:"\xbfEsta seguro de Generar una O.T. no programada?",buttons:[{text:"Aceptar",cssClass:"alertButton",role:"A",handler:()=>{this.navCtrl.navigateForward(["mtto-ot-genera-no-programa"])}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(o=>{o.present(),o.onDidDismiss().then(s=>{})})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(l.SH),t.Y36(l.HT),t.Y36(m.k),t.Y36(O.K),t.Y36(l.Br))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-listaprincipal"]],viewQuery:function(o,s){if(1&o&&t.Gf(p,5),2&o){let a;t.iGM(a=t.CRH())&&(s.idinputsearch_equipo=a.first)}},standalone:!0,features:[t.jDz],decls:33,vars:2,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],["titulo","Ordenes de Trabajo"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["mode","ios","debounce","2500","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros",2,"width","98%",3,"ngModel","ngModelChange","ionChange"],["idinputsearch_equipo",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],["size-sm","2","size-md","2","size-xl","2",1,"headgrid"],["color","dark"],["size-sm","2","size-md","2","size-xl","1",1,"headgrid"],["size-sm","2","size-md","2","size-xl","3",1,"headgrid"],[3,"odd","even",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["title","Generar O.T. no programado",3,"click"],["name","build-outline"],["button","",3,"click"],["size-sm","2","size-md","2","size-xl","2"],["size-sm","2","size-md","2","size-xl","1"],["size-sm","2","size-md","2","size-xl","3"],["side","end",3,"ionSwipe"],["color","primary","expandable",""]],template:function(o,s){1&o&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),t._UZ(4,"app-header",3),t.qZA(),t.TgZ(5,"ion-col",4),t._UZ(6,"ion-label",5),t.qZA()()(),t.TgZ(7,"ion-item")(8,"ion-searchbar",6,7),t.NdJ("ngModelChange",function(n){return s.search_term_equipo=n})("ionChange",function(){return s.lista_equipos()}),t.qZA(),t.TgZ(10,"ion-icon",8,9),t.NdJ("click",function(){return s.lista_equipos()}),t.qZA()(),t.TgZ(12,"ion-item")(13,"ion-grid")(14,"ion-row")(15,"ion-col",10)(16,"ion-label",11),t._uU(17,"Equipo"),t.qZA()(),t.TgZ(18,"ion-col",12),t._uU(19,"Nro O.T."),t.qZA(),t.TgZ(20,"ion-col",10),t._uU(21,"F.O.T."),t.qZA(),t.TgZ(22,"ion-col",10),t._uU(23,"SiteOrigen"),t.qZA(),t.TgZ(24,"ion-col",13),t._uU(25,"Tecnico"),t.qZA(),t.TgZ(26,"ion-col",10),t._uU(27,"Dias Ope."),t.qZA()()()()(),t.TgZ(28,"ion-content"),t.YNc(29,f,21,10,"ion-list",14),t.TgZ(30,"ion-fab",15)(31,"ion-fab-button",16),t.NdJ("click",function(){return s.FGenerarOtNoProgramado()}),t._UZ(32,"ion-icon",17),t.qZA()()()),2&o&&(t.xp6(8),t.Q6J("ngModel",s.search_term_equipo),t.xp6(21),t.Q6J("ngForOf",s.results_lista_ot))},dependencies:[l.Pc,l.wI,l.W2,l.IJ,l.W4,l.jY,l.gu,l.Ie,l.u8,l.IK,l.td,l.Q$,l.q_,l.Nd,l.VI,l.sr,l.j9,u.ez,u.sg,_.u5,_.JJ,_.On,g.G]}),i})()}}]);