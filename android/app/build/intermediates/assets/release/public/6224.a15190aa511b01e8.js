"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6224,5719,1973,3384,9915],{719:(A,m,l)=>{l.d(m,{G:()=>u});const u={FRONT:"front",BACK:"back"}},947:(A,m,l)=>{l.d(m,{mR:()=>u});var h=l(7423);l(719);const u=(0,h.fo)("BarcodeScanner",{web:()=>l.e(2155).then(l.bind(l,2155)).then(_=>new _.BarcodeScannerWeb)})},5719:(A,m,l)=>{l.d(m,{Z:()=>t});var h=l(4053),g=l(8256),u=l(529);let t=(()=>{class p{constructor(i){this.httpClient=i,this.urlApiProd=h.N.UrlDomainLocal+"aw_modulos/prod/api/CAtencionServicios.php"}ListDatos(i,e,n,r){let a=JSON.stringify({s:i,acc:1,tipo:e,idtablet:n,idmenu:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}FUpdateEstadoServicio(i,e,n,r,a,s){let o=JSON.stringify({idofpterminado:i,acc:2,value:e,id_usuario_local:n,id_dispositivo:r,avatar:a,idasignaestacionof:s});return this.httpClient.post(this.urlApiProd,o).toPromise().then(d=>d)}ListSolsexQr(i,e,n,r,a){let s=JSON.stringify({idofpterminado:i,acc:2,value:e,id_usuario_local:n,id_dispositivo:r,avatar:a});return this.httpClient.post(this.urlApiProd,s).toPromise().then(o=>o)}load_cbos_pieza_material_maquina(i,e,n){let r=JSON.stringify({acc:3,id_usuario_local:e,id_dispositivo:n,idtipserv:i});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}ListFindPersonal(i,e,n){let r=JSON.stringify({acc:4,s:i,idusu:e,iddevice:n});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}ListFindServiciosByPieza(i,e,n,r,a,s){let o=JSON.stringify({acc:5,s:i,idpieza:e,tipServicio:n,idusu:r,iddevice:a,nomclase:s});return this.httpClient.post(this.urlApiProd,o).toPromise().then(d=>d)}ListFindPiezaByActividad(i,e,n,r,a,s,o,d){let c=JSON.stringify({acc:6,s:i,idpieza:e,tipServicio:n,idusu:r,iddevice:a,idclase:s,idsubfamilia:o,nomsubfam:d});return this.httpClient.post(this.urlApiProd,c).toPromise().then(C=>C)}SaveInicioActividad(i){let e=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,e).toPromise().then(n=>n)}ListFindActividades(i,e,n){let r=JSON.stringify({acc:9,s:i,idusu:e,iddevice:n});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}ListFindClaseByPieza(i,e,n,r,a){let s=JSON.stringify({acc:10,s:i,idpieza:e,tipServicio:n,idusu:r,iddevice:a});return this.httpClient.post(this.urlApiProd,s).toPromise().then(o=>o)}ListFindOfByClase(i,e,n,r,a,s){let o=JSON.stringify({acc:11,s:i,idsubfamilia:e,idclase:n,tipServicio:r,idusu:a,iddevice:s});return this.httpClient.post(this.urlApiProd,o).toPromise().then(d=>d)}ListFindQrByOf(i,e,n,r,a,s){let o=JSON.stringify({acc:12,s:i,idpieza:e,tipServicio:n,idusu:r,iddevice:a,nomclase:s});return this.httpClient.post(this.urlApiProd,o).toPromise().then(d=>d)}SaveControlCalidadByOf(i){let e=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,e).toPromise().then(n=>n)}ListFindSolicitudQcByOf(i,e,n,r){let a=JSON.stringify({acc:14,s:i,idofpterminado:e,idusu:n,iddevice:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(s=>s)}load_cbos_ma00(){let i=JSON.stringify({acc:15});return this.httpClient.post(this.urlApiProd,i).toPromise().then(e=>e)}FCreaCorrelativo(){let i=JSON.stringify({acc:16});return this.httpClient.post(this.urlApiProd,i).toPromise().then(e=>e)}SaveReporteFalla(i){let e=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,e).toPromise().then(n=>n)}SaveRelevo(i){let e=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,e).toPromise().then(n=>n)}FCreaCorrelativoRelevo(){let i=JSON.stringify({acc:18});return this.httpClient.post(this.urlApiProd,i).toPromise().then(e=>e)}load_cbo_subprocesos(i,e,n){let r=JSON.stringify({acc:20,idmaquina:i,nom_pieza:e,servicio:n});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}load_cbos_any_edit_ini_actvidad(i,e,n){let r=JSON.stringify({acc:22,id_usuario_local:e,id_dispositivo:n,idtipserv:i});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}ListActividadesxTecnico(i,e,n){let r=JSON.stringify({iduser:i,acc:23,horainicio_filtro:e,horafin_filtro:n});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}SaveResumenDia(i,e){let n=JSON.stringify(e);return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}LoadFormDejarPiezasCalidad(i){let e=JSON.stringify({idpt:i,acc:25});return this.httpClient.post(this.urlApiProd,e).toPromise().then(n=>n)}LoadFormIniciaActividad(i,e){let n=JSON.stringify({idpt:i,avatar:e,acc:26});return this.httpClient.post(this.urlApiProd,n).toPromise().then(r=>r)}}return p.\u0275fac=function(i){return new(i||p)(g.LFG(u.eN))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},6224:(A,m,l)=>{l.r(m),l.d(m,{ProdAteServPopQrPage:()=>n});var h=l(5861),g=l(6895),u=l(433),_=l(5562),v=l(947),t=l(8256),p=l(5719),S=l(849);const i=["IdHtmlInputSearch"];function e(r,a){if(1&r){const s=t.EpF();t.TgZ(0,"ion-list",13)(1,"ion-item",14),t.NdJ("click",function(){const d=t.CHM(s),c=d.$implicit,C=d.index,P=t.oxw();return t.KtG(P.FSelectedItem(c,C))}),t.TgZ(2,"ion-label")(3,"strong"),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"ion-text",15),t._uU(7),t.qZA(),t.TgZ(8,"ion-text",16),t._uU(9),t.qZA(),t.TgZ(10,"ion-text",15),t._uU(11),t.qZA()()()()()}if(2&r){const s=a.$implicit,o=a.odd,d=a.even,c=t.oxw();t.ekj("odd",o)("even",d),t.Q6J("hidden",c.scanActive),t.xp6(1),t.Q6J("hidden",c.scanActive),t.xp6(3),t.Oqu(s.codigo_qr),t.xp6(3),t.Oqu(s.codsmg),t.xp6(2),t.hij(" \xa0 OT:",s.correorden,""),t.xp6(2),t.hij("\xa0 F.Crea:",s.fcreacion_ofpt,"")}}let n=(()=>{class r{constructor(s,o,d,c,C){let P;this.ApiService=s,this.loadingCtrl=o,this.modalCtrl=d,this.storage=c,this.alertController=C,this.scanActive=!1,this.ContentCss="",this.storage.get("USER_INFO").then(f=>{P=f,this.NombresUsuarioLocal=P.user_name,this.IdUsuarioLocal=P.user_id}),this.storage.get("DEVICE_INFO").then(f=>{P=f,this.NombreDispositivo=P.name,this.IdDispositivo=P.uuid})}ngOnInit(){this.idclase=null==this.idclase?"":this.idclase}ionViewDidEnter(){console.log(this.idclase)}FOnCloseModel(s,o){var d=this;return(0,h.Z)(function*(){const c={row:s};console.log(c),yield d.modalCtrl.dismiss(c)})()}FSelectedItem(s,o){this.FOnCloseModel(s,o)}FCloseModal(){this.idclase=null==this.idclase?"":this.idclase,this.id_actividad=null==this.id_actividad?"":this.id_actividad,this.FOnCloseModel(void 0,0)}FFindRows(){console.log("se llama muchas veces"),this.loadingCtrl.create({message:"Cargando lista...",translucent:!0}).then(o=>{o.present(),this.ApiService.ListFindQrByOf(this.NgModInputSearch,this.idclase,this.id_actividad,this.IdUsuarioLocal,this.IdDispositivo,this.nomclase).then(d=>{this.DataSetGrid=d}).finally(()=>{console.log("dentro finally fin rows"),this.loadingCtrl.dismiss()}).catch(()=>{console.log("dentro catch finrows"),this.loadingCtrl.dismiss()}).then(()=>{console.log("dentro thennn finrows")})})}start_scan_qr(s){var o=this;return(0,h.Z)(function*(){if(o.IdHtmlInputSearch.getInputElement().then(c=>{c.blur()}),yield o.checkPermiso()){o.scanActive=!0,o.ContentCss="ion_content_qr";const c=yield v.mR.startScan();c.hasContent&&(console.log(c),o.NgModInputSearch=c.content,console.log("result.hasContent:::",c.hasContent),o.scanActive=!1,o.ContentCss="",o.IdHtmlInputSearch.readonly=!1)}})()}checkPermiso(){var s=this;return(0,h.Z)(function*(){return new Promise(function(){var o=(0,h.Z)(function*(d,c){const C=yield v.mR.checkPermission({force:!0});C.granted?d(!0):C.denied?yield(yield s.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{v.mR.openAppSettings(),d(!1)}}]})).present():d(!1)});return function(d,c){return o.apply(this,arguments)}}())})()}stopScanner(){v.mR.stopScan(),this.scanActive=!1,this.ContentCss=""}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(p.Z),t.Y36(_.HT),t.Y36(_.IN),t.Y36(S.K),t.Y36(_.Br))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-prod-ate-serv-pop-qr"]],viewQuery:function(s,o){if(1&s&&t.Gf(i,5),2&s){let d;t.iGM(d=t.CRH())&&(o.IdHtmlInputSearch=d.first)}},inputs:{titulo_modal:"titulo_modal",idclase:"idclase",id_actividad:"id_actividad",nomclase:"nomclase"},standalone:!0,features:[t.jDz],decls:20,vars:8,consts:[["mode","ios"],["slot","start"],[1,"",3,"click"],["part","icon","aria-hidden","true","role","img","name","chevron-back-outline",1,"md","hydrated"],[3,"hidden"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar parametros",2,"width","100%",3,"ngModel","ngModelChange"],["IdHtmlInputSearch",""],["slot","end","color","primary","title","Buscar por Codigo de Barras","name","qr-code-outline",1,"espacio-entre-iconos",3,"click"],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],["color","danger","expand","full",3,"hidden","click"],["lines","full","inset","true",3,"odd","even","hidden",4,"ngFor","ngForOf"],[1,"scan-box",3,"hidden"],["lines","full","inset","true",3,"hidden"],["button","",3,"hidden","click"],["color","secondary"],["color","primary"]],template:function(s,o){1&s&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return o.FCloseModal()}),t._UZ(6,"ion-icon",3),t._uU(7," Cancelar "),t.qZA()()()(),t.TgZ(8,"ion-item",4)(9,"ion-searchbar",5,6),t.NdJ("ngModelChange",function(c){return o.NgModInputSearch=c}),t.qZA(),t.TgZ(11,"ion-icon",7),t.NdJ("click",function(){return o.start_scan_qr(0)}),t.qZA(),t.TgZ(12,"ion-icon",8,9),t.NdJ("click",function(){return o.FFindRows()}),t.qZA()(),t.TgZ(14,"ion-item")(15,"ion-button",10),t.NdJ("click",function(){return o.stopScanner()}),t._uU(16," \xa0Detener\n"),t.qZA()(),t.TgZ(17,"ion-content"),t.YNc(18,e,12,10,"ion-list",11),t._UZ(19,"div",12),t.qZA()),2&s&&(t.xp6(3),t.Oqu(o.titulo_modal),t.xp6(5),t.Q6J("hidden",o.scanActive),t.xp6(1),t.Q6J("ngModel",o.NgModInputSearch),t.xp6(6),t.Q6J("hidden",!o.scanActive),t.xp6(2),t.Tol(o.ContentCss),t.xp6(1),t.Q6J("ngForOf",o.DataSetGrid),t.xp6(1),t.Q6J("hidden",!o.scanActive))},dependencies:[_.Pc,_.YG,_.Sm,_.W2,_.Gu,_.gu,_.Ie,_.Q$,_.q_,_.VI,_.yW,_.wd,_.sr,_.j9,g.ez,g.sg,u.u5,u.JJ,u.On],styles:['@charset "UTF-8";.espacio-entre-iconos[_ngcontent-%COMP%]{margin-right:10px}']}),r})()}}]);