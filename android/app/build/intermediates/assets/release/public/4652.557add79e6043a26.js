"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4652],{6101:(I,A,l)=>{l.d(A,{J:()=>C});var h=l(5861),E=l(4053),d=l(8256),n=l(529),t=l(849);let C=(()=>{class p{constructor(e,i){this.httpClient=e,this.storage=i,this.urlApiProd=E.N.UrlDomainLocal+"aw_modulos/mante/api/CApiInformeTecnico.php",this.confirmRequest=""}ListFindOts(e,i,a){let o=JSON.stringify({acc:1,s:e,idusu:i,iddevice:a});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}SaveCheckListCab(e,i,a){let o=JSON.stringify({acc:2,id_orden_trab_cab:e,idusu:i,iddevice:a});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}FormFindPaso1(e,i,a){let o=JSON.stringify({acc:3,idchecklistcab:e,idusu:i,iddevice:a});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}FLoadPiezasAcordion(e,i){let a=JSON.stringify({acc:7,id:e,p2:i});return this.httpClient.post(this.urlApiProd,a).toPromise().then(o=>o)}FLoadServiciosxPiezas(e,i){let a=JSON.stringify({acc:8,id:e,p2:i});return this.httpClient.post(this.urlApiProd,a).toPromise().then(o=>o)}GuardarFormPaso1(e){var i=this;return(0,h.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let o=i.urlApiProd,r=JSON.stringify(e);return i.httpClient.post(o+"?acc=4",r).toPromise()})()}GuardarFormPaso2(e,i,a,o,r,s){var c=this;return(0,h.Z)(function*(){let _,f=c.urlApiProd,P=JSON.stringify({idservicio:e,idpapa:i,idhijo:a,idusuario:o,acc:9,idclase:r,ck:s});return c.httpClient.post(f+"?acc=6",P).toPromise().then(m=>{console.log(m),_=m,c.confirmSaveBd=_[0].o_nres,c.confirmRequest=_},m=>{console.log(m,"Error- something is wrong!")})})()}FormFindPaso3(e,i,a){let o=JSON.stringify({acc:7,idchecklistcab:e,idusu:i,iddevice:a});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}GuardarFormPaso3(e){var i=this;return(0,h.Z)(function*(){let a,o=i.urlApiProd,r=JSON.stringify(e);return i.httpClient.post(o+"?acc=8",r).toPromise().then(s=>{console.log(s),a=s,i.confirmSaveBd=a[0].o_nres,i.confirmRequest=a},s=>{console.log(s,"Error- something is wrong!")})})()}FormFindPaso5(e,i,a){let o=JSON.stringify({acc:10,id:e,idusu:i,iddevice:a});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}GuardarFormPaso5(e){var i=this;return(0,h.Z)(function*(){let o=i.urlApiProd,r=JSON.stringify(e);return i.httpClient.post(o+"?acc=11",r).toPromise()})()}FormFindPaso6(e,i,a){let o=JSON.stringify({acc:12,idchecklistcab:e,idusu:i,iddevice:a});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}GuardarFormPaso6(e){var i=this;return(0,h.Z)(function*(){let o=i.urlApiProd,r=JSON.stringify(e);return i.httpClient.post(o+"?acc=13",r).toPromise()})()}GuardarAplicaPaso(e,i,a){var o=this;return(0,h.Z)(function*(){let r,c,s=o.urlApiProd;c={idchecklistcab:e,numeroPaso:i,ck:a};let _=JSON.stringify(c);return o.httpClient.post(s+"?acc=15",_).toPromise().then(u=>{console.log(u),r=u,o.confirmSaveBd=r[0].o_nres,o.confirmRequest=r},u=>{console.log(u,"Error- something is wrong!")})})()}getImages(e){return this.httpClient.get(`${this.urlApiProd}?acc=5&id=`+e)}uploadImage(e,i,a){let o=new FormData;return o.append("file",e,"myimage."+a),o.append("id",i),o.append("acc","6"),o.append("type","image/png"),this.httpClient.post(this.urlApiProd,o)}UpLoadImageMultiple(e,i,a){try{let o=new FormData;o.append("id",i),o.append("acc","15"),o.append("type","image/png");for(let r=0;r<e.length;r++)console.log("image::ruta=>::>",e[r]),o.append("images[]",e[r],`image_${r}.jpg`);return this.httpClient.post(this.urlApiProd,o)}catch(o){console.error("Error al enviar im\xe1genes al API:",o)}}LoadPdfInformeTecnico(e){let i=JSON.stringify({acc:14,idchecklistcab:e});return this.httpClient.post(this.urlApiProd,i).toPromise().then(a=>a)}deleteImage(e){return this.httpClient.delete(`${this.urlApiProd}?acc=16&id=${e}`)}}return p.\u0275fac=function(e){return new(e||p)(d.LFG(n.eN),d.LFG(t.K))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},4652:(I,A,l)=>{l.r(A),l.d(A,{MttoWinInformeTecnico6Page:()=>i});var h=l(5861),E=l(6895),d=l(433),n=l(5562),t=l(8256),C=l(6101),p=l(849),v=l(1407),e=l(7883);let i=(()=>{class a{constructor(r,s,c,_,u,f,P,m,D,T){let g;if(this.formBuilder=r,this.navCtrl=s,this.loadingController=c,this.ApiService=_,this.storage=u,this.alertController=f,this.router=P,this.globalVal=m,this.ref=D,this.actionSheetCtrl=T,this.FormInformeTecPaso3=this.formBuilder.group({falla_primaria_ic:[""],falla_secundaria_ic:[""],analisis_del_problema:["",d.kI.required],componentes_de_reclamo:[""],nro_fotos:[""],estado_informe:[""],corre_inf_cab:[""]}),this.storage.get("USER_INFO").then(O=>{g=O,this.NombresUsuarioLocal=g.user_name,this.IdUsuarioLocal=g.user_id,this.storage.get("DEVICE_INFO").then(F=>{g=F,this.NombreDispositivo=g.name,this.IdDispositivo=g.uuid})}),""==this.globalVal.checklist_paso_pivot)try{this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row,m.corre_inf_cab=this.navParamsAny.corre_inf_cab}catch(O){console.log(O),this.corre_inf_cab=m.corre_inf_cab}else this.corre_inf_cab=m.corre_inf_cab}ionViewWillEnter(){this.FLoadForms()}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(s=>{s.present(),this.corre_inf_cab=this.globalVal.corre_inf_cab,console.log(this.corre_inf_cab),this.FormInformeTecPaso3.controls.corre_inf_cab.setValue(this.corre_inf_cab),this.ApiService.FormFindPaso6(this.corre_inf_cab,"1","H").then(c=>{this.EditDataRest=c.form;try{this.FormInformeTecPaso3.setValue({falla_primaria_ic:this.EditDataRest[0].falla_primaria_ic,falla_secundaria_ic:this.EditDataRest[0].falla_secundaria_ic,analisis_del_problema:this.EditDataRest[0].analisis_del_problema,componentes_de_reclamo:this.EditDataRest[0].componentes_de_reclamo,nro_fotos:this.EditDataRest[0].nro_fotos,corre_inf_cab:this.EditDataRest[0].corre_inf_cab,estado_informe:this.EditDataRest[0].estado_informe})}catch(_){console.log("error:::>",_)}}).finally(()=>{this.loadingController.dismiss()})})}SaveFormBorradorPaso2(){var r=this;this.alertSiNo=this.alertController.create({header:"INFORME TECNICO",subHeader:"ANALISIS DEL PROBLEMA",mode:"ios",backdropDismiss:!0,cssClass:"alerta-ok",message:"Confirmar que desea guardar?",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(s=>{s.present(),s.onDidDismiss().then(c=>{"A"==c.role?(this.loadingController.create({message:"Guardando...",translucent:!0}).then(u=>{u.present()}),this.corre_inf_cab=this.globalVal.corre_inf_cab,this.ApiService.GuardarFormPaso6(this.FormInformeTecPaso3.value).then(function(){var u=(0,h.Z)(function*(f){r.loadingController.dismiss();let P="0"==f[0].o_nres?"alerta-error":"alerta-ok";yield(yield r.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"DATOS GENERALES",cssClass:P,mode:"ios",animated:!0,message:f[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==f[0].o_nres?r.navCtrl.navigateForward(["mtto-list-informe-tecnico"]):(console.log(r.ApiService.confirmRequest),r.FormInformeTecPaso3.controls.estado_informe.setValue(1))}}]})).present()});return function(f){return u.apply(this,arguments)}}()).finally(()=>{}).catch(u=>{console.log("errror:::>>>>>>>>>",u)})):this.FormInformeTecPaso3.controls.estado_informe.setValue(1)})})}ngOnInit(){}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(d.QS),t.Y36(n.SH),t.Y36(n.HT),t.Y36(C.J),t.Y36(p.K),t.Y36(n.Br),t.Y36(v.F0),t.Y36(e.X),t.Y36(t.sBO),t.Y36(n.BX))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-mtto-win-informe-tecnico6"]],standalone:!0,features:[t.jDz],decls:46,vars:17,consts:[["mode","ios",1,"ion-no-padding"],["text-capitalize",""],[1,"ion-padding"],[3,"formGroup"],["f","ngForm"],["position","floating"],["mode","ios","formControlName","falla_primaria_ic",3,"autoGrow","autofocus"],["mode","ios","formControlName","falla_secundaria_ic",3,"autoGrow","autofocus"],["mode","ios","formControlName","analisis_del_problema",3,"autoGrow","autofocus"],["mode","ios","formControlName","componentes_de_reclamo",3,"autoGrow","autofocus"],["mode","ios","formControlName","nro_fotos",3,"autoGrow","autofocus"],[2,"text-align","center"],["mode","ios","formControlName","estado_informe",1,"ion_segment_3d",2,"width","110%"],["value","1","layout","icon-end",3,"click"],["name","close","color","danger"],["color","danger"],["value","2","layout","icon-end",3,"click"],["color","success","name","checkmark"],["color","success"]],template:function(r,s){1&r&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1)(3,"ion-label"),t._uU(4,"ANTES DEL DESMONTAJE "),t.qZA()()()(),t.TgZ(5,"ion-content",2)(6,"form",3,4)(8,"ion-list",0)(9,"ion-item")(10,"ion-label",5),t._uU(11," FALLA PRIMARIA: "),t.qZA(),t._UZ(12,"ion-textarea",6),t.qZA(),t.TgZ(13,"ion-item")(14,"ion-label",5),t._uU(15," FALLA SECUNDARIA: "),t.qZA(),t._UZ(16,"ion-textarea",7),t.qZA(),t.TgZ(17,"ion-item")(18,"ion-label",5),t._uU(19," ANALISIS DEL PROBLEMA: "),t.qZA(),t._UZ(20,"ion-textarea",8),t.qZA(),t.TgZ(21,"ion-item")(22,"ion-label",5),t._uU(23," RECLAMO: "),t.qZA(),t._UZ(24,"ion-textarea",9),t.qZA(),t.TgZ(25,"ion-item")(26,"ion-label",5),t._uU(27," CONCLUSIONES SUP.PLANTA: "),t.qZA(),t._UZ(28,"ion-textarea",10),t.qZA()()()(),t.TgZ(29,"ion-footer")(30,"form",3,4)(32,"ion-grid")(33,"ion-row"),t._UZ(34,"ion-col"),t.TgZ(35,"ion-col",11)(36,"ion-segment",12)(37,"ion-segment-button",13),t.NdJ("click",function(){return s.SaveFormBorradorPaso2()}),t._UZ(38,"ion-icon",14),t.TgZ(39,"ion-label",15),t._uU(40,"BORRADOR"),t.qZA()(),t.TgZ(41,"ion-segment-button",16),t.NdJ("click",function(){return s.SaveFormBorradorPaso2()}),t._UZ(42,"ion-icon",17),t.TgZ(43,"ion-label",18),t._uU(44,"TERMINADO"),t.qZA()()()(),t._UZ(45,"ion-col"),t.qZA()()()()),2&r&&(t.xp6(6),t.Q6J("formGroup",s.FormInformeTecPaso3),t.xp6(6),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(2),t.Q6J("formGroup",s.FormInformeTecPaso3))},dependencies:[n.Pc,n.wI,n.W2,n.fr,n.jY,n.Gu,n.gu,n.Ie,n.Q$,n.q_,n.Nd,n.cJ,n.GO,n.g2,n.wd,n.sr,n.QI,n.j9,E.ez,d.u5,d._Y,d.JJ,d.JL,d.UX,d.sg,d.u]}),a})()}}]);