"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1666],{1666:(N,g,l)=>{l.r(g),l.d(g,{MttoRecinaEntregaCablePage:()=>f});var m=l(5861),_=l(6895),a=l(5562),u=l(5702),n=l(433),e=l(8256),h=l(1407),p=l(6929),b=l(849),E=l(529);function C(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"ion-datetime",22),e.NdJ("ngModelChange",function(r){e.CHM(t);const i=e.oxw();return e.KtG(i.fchactual=r)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",t.fchactual)}}const c=function(s){return{"is-invalid":s}};let f=(()=>{class s{constructor(t,o,r,i,M,R,D,T,v,Z,P,F,A,I){this.navCtrl=t,this.formBuilder=o,this.loadingController=r,this.route=i,this.api=M,this.modalCtrl=R,this.plt=D,this.alertController=T,this.toastController=v,this.actionSheetController=Z,this.actionSheetCtrl=P,this.ref=F,this.storage=A,this.http=I,this.fchactual=(new Date).toISOString(),this.FormRecinadoEntrega=this.formBuilder.group({idrecinadocableentrega:new n.NI(""),correlativo_rce:new n.NI(""),idrecinadocablecab_rce:new n.NI(""),codsmg:new n.NI("",n.kI.required),idequipo_rce:new n.NI(""),idordentrabajocab_rce:new n.NI("0"),idestadocable1_rce:new n.NI("",n.kI.required),idestadocable2_rce:new n.NI(""),detalle_rce:new n.NI(""),nroot:new n.NI("",n.kI.required),fch_reg_ot_rce:new n.NI(""),fchregistro_rce:new n.NI("")}),console.log("this.route.snapshot.paramMap",this.route.snapshot.paramMap),this.ClsId=this.route.snapshot.paramMap.get("id"),this.idrecinadocableentrega=this.route.snapshot.paramMap.get("identrega"),this.FormRecinadoEntrega.controls.idrecinadocablecab_rce.setValue(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.fchactual=(new Date).toISOString(),console.log("this.idrecinadocableentrega",this.idrecinadocableentrega),"0"!=this.idrecinadocableentrega&&this.api.load_form_entrega_cable(this.idrecinadocableentrega,"localStorage.user_id").then(t=>{this.EditarInspeccionLoad(t)})}EditarInspeccionLoad(t){this.EditDataRest=t,console.log("this.EditDataRest ",this.EditDataRest);try{this.FormRecinadoEntrega.setValue({idrecinadocableentrega:this.EditDataRest[0].idrecinadocableentrega,correlativo_rce:this.EditDataRest[0].correlativo_rce,idrecinadocablecab_rce:this.EditDataRest[0].idrecinadocablecab_rce,codsmg:this.EditDataRest[0].codsmg,idequipo_rce:this.EditDataRest[0].idequipo_rce,idordentrabajocab_rce:this.EditDataRest[0].idordentrabajocab_rce,idestadocable1_rce:this.EditDataRest[0].idestadocable1_rce,idestadocable2_rce:this.EditDataRest[0].idestadocable2_rce,detalle_rce:this.EditDataRest[0].detalle_rce,nroot:this.EditDataRest[0].nroot,fch_reg_ot_rce:new Date(this.EditDataRest[0].fch_reg_ot_rce).toISOString(),fchregistro_rce:new Date(this.EditDataRest[0].fchregistro_rce).toISOString()})}catch(o){console.log("error:::>",o)}console.log(":::this.FormRecinado.value.idrecinadocablecab:::::::::::::::>>"),console.log("<<<<::::::::::::::::::>>")}cancelar_ejecucion(){this.navCtrl.navigateForward("mtto-list-recinado")}open_popup_equipos(){var t=this;return(0,m.Z)(function*(){const o=yield t.modalCtrl.create({component:u.PopUpEquRecinadoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{idvaleservidetot_p:0}});return o.onDidDismiss().then(r=>{null!==r&&(t.dataReturned=r.data,t.fch_reg_ot_rce=r.data.fch_inicio_ot,t.nroot=r.data.id_orden_trab_fis_cab,t.codsmg1=r.data.idequipo,t.FormRecinadoEntrega.controls.idordentrabajocab_rce.setValue(r.data.id_orden_trab_fis_cab))}),yield o.present()})()}SaveFormEntrega(){if(this.FormRecinadoEntrega.valid)this.alertSiNo=this.alertController.create({header:"Agregar Entrega Cable",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Confirmar que desea guardar?",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(t=>{t.present(),t.onDidDismiss().then(o=>{console.log("aceptaPop::::>>",o),"A"==o.role&&this.api.GuardarFormEntregaCable(this.FormRecinadoEntrega.value).then(r=>{console.log("res:::>>>>>>>>>",r)}).finally(()=>{this.navCtrl.navigateForward(["mtto-list-recinado"])}).catch(r=>{console.log("errror:::>>>>>>>>>",r)})})});else{console.log(this.FormRecinadoEntrega.valid),console.log(this.FormRecinadoEntrega);for(let t in this.FormRecinadoEntrega.controls)this.FormRecinadoEntrega.controls[t].setValue(this.FormRecinadoEntrega.controls[t].value),this.FormRecinadoEntrega.controls[t].markAsTouched();this.alertSiNo=this.alertController.create({header:"Agregar Recinado Cable",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Falta seleccionar todos los datos",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}}]}).then(t=>{t.present(),t.onDidDismiss().then(o=>{})})}}segmentChanged(t){}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(a.SH),e.Y36(n.qu),e.Y36(a.HT),e.Y36(h.gz),e.Y36(p.o),e.Y36(a.IN),e.Y36(a.t4),e.Y36(a.Br),e.Y36(a.yF),e.Y36(a.BX),e.Y36(a.BX),e.Y36(e.sBO),e.Y36(b.K),e.Y36(E.eN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-mtto-recina-entrega-cable"]],standalone:!0,features:[e.jDz],decls:59,vars:17,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["color","danger",3,"click"],["name","close"],[3,"formGroup"],["f","ngForm"],["label","Equipo:","label-placement","floating","readonly","","formControlName","codsmg",3,"ngModel","ngClass","ngModelChange"],[2,"display","none"],["hidden","","formControlName","idrecinadocableentrega"],["slot","end","color","primary",3,"click"],["name","search-outline"],["label","F.Registro:","locale","es-ES","datetime","datetime"],["trigger","popover-button","animated","true","arrow","true","mode","ios",3,"keepContentsMounted"],["label","F.Reg.O.T:","label-placement","floating","readonly","","formControlName","fch_reg_ot_rce",3,"ngModel","ngModelChange"],["label","Nro O.T:","label-placement","floating","type","text","readonly","","formControlName","nroot",3,"ngModel","ngClass","ngModelChange"],["color","primary"],["formControlName","idestadocable1_rce","mode","ios",3,"ngClass","ionChange"],["value","1"],["value","2"],["formControlName","idestadocable2_rce","mode","ios",3,"ngClass","ionChange"],["type","button","expand","block",3,"click"],["locale","es-ES","id","datetime","mode","ios","displayFormat","YYYY-MM-DD","presentation","date","formControlName","fchregistro_rce",3,"preferWheel","showDefaultButtons","ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Resinado - Entrega de Cable"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){return o.cancelar_ejecucion()}),e._UZ(6,"ion-icon",4),e._uU(7," Cancelar "),e.qZA()()()(),e.TgZ(8,"ion-content")(9,"form",5,6)(11,"ion-list")(12,"ion-item")(13,"ion-input",7),e.NdJ("ngModelChange",function(i){return o.codsmg1=i}),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"ion-input",9),e.qZA(),e.TgZ(16,"ion-button",10),e.NdJ("click",function(){return o.open_popup_equipos()}),e._UZ(17,"ion-icon",11),e.qZA()(),e.TgZ(18,"ion-item")(19,"ion-label"),e._uU(20,"F.Registro:"),e.qZA(),e._UZ(21,"ion-datetime-button",12),e.TgZ(22,"ion-popover",13),e.YNc(23,C,1,3,"ng-template"),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-input",14),e.NdJ("ngModelChange",function(i){return o.fch_reg_ot_rce=i}),e.qZA()(),e.TgZ(26,"ion-item")(27,"ion-input",15),e.NdJ("ngModelChange",function(i){return o.nroot=i}),e.qZA()(),e.TgZ(28,"ion-item-group")(29,"ion-item-divider",16)(30,"ion-label"),e._uU(31,"Cable 1"),e.qZA()(),e.TgZ(32,"ion-item")(33,"ion-label"),e._uU(34," Entregado: "),e.TgZ(35,"ion-segment",17),e.NdJ("ionChange",function(i){return o.segmentChanged(i)}),e.TgZ(36,"ion-segment-button",18)(37,"ion-label"),e._uU(38,"SI"),e.qZA()(),e.TgZ(39,"ion-segment-button",19)(40,"ion-label"),e._uU(41,"NO"),e.qZA()()()()()(),e.TgZ(42,"ion-item-group")(43,"ion-item-divider",16)(44,"ion-label"),e._uU(45,"Cable 2"),e.qZA()(),e.TgZ(46,"ion-item")(47,"ion-label"),e._uU(48," Entregado "),e.TgZ(49,"ion-segment",20),e.NdJ("ionChange",function(i){return o.segmentChanged(i)}),e.TgZ(50,"ion-segment-button",18)(51,"ion-label"),e._uU(52,"SI"),e.qZA()(),e.TgZ(53,"ion-segment-button",19)(54,"ion-label"),e._uU(55,"NO"),e.qZA()()()()()()()()(),e.TgZ(56,"ion-footer")(57,"ion-button",21),e.NdJ("click",function(){return o.SaveFormEntrega()}),e._uU(58,"Guardar Formulario"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.FormRecinadoEntrega),e.xp6(4),e.Q6J("ngModel",o.codsmg1)("ngClass",e.VKq(9,c,o.FormRecinadoEntrega.get("codsmg").touched&&o.FormRecinadoEntrega.get("codsmg").invalid)),e.xp6(9),e.Q6J("keepContentsMounted",!0),e.xp6(3),e.Q6J("ngModel",o.fch_reg_ot_rce),e.xp6(2),e.Q6J("ngModel",o.nroot)("ngClass",e.VKq(11,c,o.FormRecinadoEntrega.get("nroot").touched&&o.FormRecinadoEntrega.get("nroot").invalid)),e.xp6(8),e.Q6J("ngClass",e.VKq(13,c,o.FormRecinadoEntrega.get("idestadocable1_rce").touched&&o.FormRecinadoEntrega.get("idestadocable1_rce").invalid)),e.xp6(14),e.Q6J("ngClass",e.VKq(15,c,o.FormRecinadoEntrega.get("idestadocable2_rce").touched&&o.FormRecinadoEntrega.get("idestadocable2_rce").invalid)))},dependencies:[a.Pc,a.YG,a.Sm,a.W2,a.x4,a.Mj,a.fr,a.Gu,a.gu,a.pK,a.Ie,a.rH,a.Ub,a.Q$,a.q_,a.cJ,a.GO,a.wd,a.sr,a.d8,a.QI,a.j9,_.ez,_.mk,n.u5,n._Y,n.JJ,n.JL,n.UX,n.sg,n.u]}),s})()}}]);