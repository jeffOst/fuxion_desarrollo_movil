"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1773,1811],{1773:(T,P,d)=>{d.r(P),d.d(P,{ProdAteServDejarPiezaCalidadPage:()=>g});var C=d(5861),u=d(6814),p=d(95),i=d(6728),n=d(1811),e=d(6242),M=d(5472),v=d(4248),f=d(6485);function F(l,c){if(1&l&&(e.TgZ(0,"ion-select-option",19),e._uU(1),e.qZA()),2&l){const s=c.$implicit;e.Q6J("value",s.codigo),e.xp6(1),e.Oqu(s.nombre)}}let g=(()=>{var l;class c{constructor(t,o,r,a,m,h,_){this.navCtrl=t,this.router=o,this.modalCtrl=r,this.alertController=a,this.loadingController=m,this.ApiServices=h,this.location=_,this.Cancelar="Cancelar",this.readonly_qr=!1,this.tipoPiezaCalidad=[],this.selectedCodigo=2,this.FormModel={},this.navParams=this.router.getCurrentNavigation().extras.state,console.log(this.navParams),console.log("this.FormModel",this.FormModel),this.navParams&&(this.FormModel.correorden=this.navParams.correorden,console.log("this.navParams",this.navParams),this.FormModel.idofpterminado=this.navParams.idofpterminado,this.FormModel.codigo_pt=this.navParams.Y04001,this.FormModel.descripcion_pt=this.navParams.descripcion_pt,this.FormModel.nombres_tecnico=this.navParams.nombres_tecnico,this.FormModel.EQUIPOID=this.navParams.EQUIPOID,this.FormModel.idsolicitante_scc=this.navParams.idsolicitante_scc,this.FormModel.cantidad=this.navParams.cantidad,this.FormModel.cantidad_atendido=this.navParams.cantidad_atendido,console.log("this.FormModel",this.FormModel),this.CssReproceso=1==this.navParams.flag_reproceso?"CssReproceso":"",console.log("this.CssReproceso=",this.CssReproceso),this.hide_div_reproceso=1==this.navParams.flag_reproceso,this.FormModel.fecha_reproceso=this.navParams.fecha_reproceso,this.FormModel.cantidad_reproceso=this.navParams.cantidad_reproceso,this.FormModel.idrevisiondet_reproceso=this.navParams.idrevisiondet_reproceso)}ngOnInit(){this.load_cbos(),this.FormModel.cantidad_scc=0,this.hide_div_reproceso||this.listServiciosPendientes()}load_cbos(){this.loadingController.create({message:"Cargando motivos de pausa...",translucent:!0}).then(t=>{t.present(),this.ApiServices.load_cbos_calidad_dejar_piezas_tipo().then(o=>{this.tipoPiezaCalidad=o.tipo_pieza}).finally(()=>{t.dismiss()})})}FCancelarForm(){this.location.back()}FSaveForm(){let t="",r=0;this.CssNotiTecnico="field_required_ok",(null==this.FormModel.nombres_tecnico||""==this.FormModel.nombres_tecnico)&&(r=2,t=" Fala seleccionar  Tecnico",this.CssNotiTecnico="field_required"),this.CssNotiCantidad="field_required_ok",(null==this.FormModel.cantidad_scc||""==this.FormModel.cantidad_scc)&&(r=2,t=" Fala agregar cantidad",this.CssNotiCantidad="field_required"),1==r||2==r?this.alertController.create({header:"Solicita Control Calidad",cssClass:"success",subHeader:"",mode:"ios",message:""+t,buttons:[{text:"Aceptar",cssClass:"bgcolor:danger",handler:()=>{}}]}).then(m=>{m.present()}):this.loadingController.create({message:"Cargando...",translucent:!0}).then(m=>{m.present(),this.FormModel.acc="13",this.FormModel.tipo_calidad=this.selectedCodigo,this.ApiServices.SaveControlCalidadByOf(this.FormModel).then(h=>{let _;if(this.loadingController.dismiss(),_=h[0],console.log(_),console.log(_.o_nres),0==_.o_nres)alert("Error, "+_.o_msj);else{this.FormModel.idsolicitudcontrolcab=_.o_nres;let A={state:this.FormModel};console.log("navigationExtras",A),this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],A),alert(_.o_msj)}}).finally(()=>{console.log("finalyyyy")})})}FOpenModalTecnico(t){var o=this;return(0,C.Z)(function*(){let r,a;r=o.FormModel.nombres_tecnico,a=o.FormModel.idsolicitante_scc;const h=yield o.modalCtrl.create({component:n.ProdAteServPopPersonalPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{nombre_tecnico:r,titulo_modal:"Lista de Tecnicos",id_personal:a}});return h.onDidDismiss().then(_=>{null!=_.data&&(o.FormModel.nombres_tecnico=_.data.nombres,o.FormModel.idsolicitante_scc=_.data.id)}),yield h.present()})()}listServiciosPendientes(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(o=>{o.present(),this.ApiServices.LoadFormDejarPiezasCalidad(this.FormModel.idofpterminado).then(r=>{console.log("this.results=>>>",r),this.FormModel.cantidad_atendido=r[0].cnt_recibo,this.FormModel.cantidad_scc=this.FormModel.cantidad-this.FormModel.cantidad_atendido,console.log("this.results=>>>",r)}).finally(()=>{this.loadingController.dismiss()})})}}return(l=c).\u0275fac=function(t){return new(t||l)(e.Y36(M.SH),e.Y36(v.F0),e.Y36(i.IN),e.Y36(i.Br),e.Y36(i.HT),e.Y36(f.Z),e.Y36(u.Ye))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-prod-ate-serv-dejar-pieza-calidad"]],standalone:!0,features:[e.jDz],decls:69,vars:21,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],[3,"ngModel","ngModelChange"],["type","text","readonly","",3,"ngModel","value","ngModelChange"],["size","9",1,"ion-text-start"],["readonly","",3,"ngModel","ngModelChange"],["name","tipoPieza","interface","action-sheet",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number",3,"ngModel","ngModelChange"],[2,"text-align","center"],["color","danger",3,"disabled","click"],["name","close-outline"],["color","primary",3,"disabled","click"],["name","save-outline"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Solicitud Revisi\xf3n Q.C."),e.qZA(),e.TgZ(4,"ion-buttons",2),e._UZ(5,"ion-back-button",3),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item")(9,"ion-grid")(10,"ion-row",4)(11,"ion-col",5),e._uU(12," Orden de Fabricaci\xf3n \xa0:"),e.qZA(),e.TgZ(13,"ion-col",6)(14,"ion-input",7),e.NdJ("ngModelChange",function(a){return o.FormModel.correorden=a}),e.qZA()()(),e.TgZ(15,"ion-row",4)(16,"ion-col",5),e._uU(17," Codigo P.T. \xa0:"),e.qZA(),e.TgZ(18,"ion-col",6)(19,"ion-input",7),e.NdJ("ngModelChange",function(a){return o.FormModel.codigo_pt=a}),e.qZA()()(),e.TgZ(20,"ion-row",4)(21,"ion-col",5),e._uU(22," Descripci\xf3n del Componente \xa0:"),e.qZA(),e.TgZ(23,"ion-col",6)(24,"ion-input",7),e.NdJ("ngModelChange",function(a){return o.FormModel.descripcion_pt=a}),e.qZA()()(),e.TgZ(25,"ion-row",4)(26,"ion-col",5),e._uU(27," Tecnico: "),e.qZA(),e.TgZ(28,"ion-col",6)(29,"ion-input",8),e.NdJ("ngModelChange",function(a){return o.FormModel.nombres_tecnico=a}),e.qZA(),e._UZ(30,"div"),e.qZA()(),e.TgZ(31,"ion-row",4)(32,"ion-col",5),e._uU(33,"Total Piezas: "),e.qZA(),e.TgZ(34,"ion-col",9)(35,"ion-input",10),e.NdJ("ngModelChange",function(a){return o.FormModel.cantidad=a}),e.qZA()()(),e.TgZ(36,"ion-row",4)(37,"ion-col",5),e._uU(38,"Atendido Piezas: "),e.qZA(),e.TgZ(39,"ion-col",9)(40,"ion-input",10),e.NdJ("ngModelChange",function(a){return o.FormModel.cantidad_atendido=a}),e.qZA()()(),e.TgZ(41,"ion-row",4)(42,"ion-col",5),e._uU(43,"Tipo: "),e.qZA(),e.TgZ(44,"ion-col",9)(45,"ion-select",11),e.NdJ("ngModelChange",function(a){return o.selectedCodigo=a}),e.YNc(46,F,2,2,"ion-select-option",12),e.qZA()()(),e.TgZ(47,"ion-row",4)(48,"ion-col",5),e._uU(49," Cantidad: "),e.qZA(),e.TgZ(50,"ion-col",9)(51,"ion-input",13),e.NdJ("ngModelChange",function(a){return o.FormModel.cantidad_scc=a}),e.qZA(),e._UZ(52,"div"),e.qZA()()()()()(),e.TgZ(53,"ion-footer")(54,"ion-grid")(55,"ion-row"),e._UZ(56,"ion-col"),e.TgZ(57,"ion-col",14)(58,"ion-buttons")(59,"ion-button",15),e.NdJ("click",function(){return o.FCancelarForm()}),e._UZ(60,"ion-icon",16),e._uU(61,"\xa0 Cancelar "),e.qZA(),e._uU(62," \xa0\xa0\xa0\xa0 "),e.TgZ(63,"ion-button",17),e.NdJ("click",function(){return o.FSaveForm()}),e._UZ(64,"ion-icon",18),e._uU(65,"\xa0 "),e.TgZ(66,"strong"),e._uU(67," Iniciar "),e.qZA()()()(),e._UZ(68,"ion-col"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("text",o.Cancelar),e.xp6(9),e.Q6J("ngModel",o.FormModel.correorden),e.xp6(5),e.Q6J("ngModel",o.FormModel.codigo_pt),e.uIk("disabled",o.readonly_qr),e.xp6(5),e.Q6J("ngModel",o.FormModel.descripcion_pt),e.uIk("disabled",o.readonly_qr),e.xp6(5),e.s9C("value",o.FormModel.nombres_tecnico),e.Q6J("ngModel",o.FormModel.nombres_tecnico),e.xp6(1),e.Tol(o.CssNotiTecnico),e.xp6(5),e.Q6J("ngModel",o.FormModel.cantidad),e.xp6(5),e.Q6J("ngModel",o.FormModel.cantidad_atendido),e.xp6(5),e.Q6J("ngModel",o.selectedCodigo),e.xp6(1),e.Q6J("ngForOf",o.tipoPiezaCalidad),e.xp6(5),e.Q6J("ngModel",o.FormModel.cantidad_scc),e.xp6(1),e.Tol(o.CssNotiCantidad),e.xp6(7),e.Q6J("disabled",o.disableButton),e.xp6(4),e.Q6J("disabled",o.disableButton))},dependencies:[i.Pc,i.YG,i.Sm,i.wI,i.W2,i.fr,i.jY,i.Gu,i.gu,i.pK,i.Ie,i.q_,i.Nd,i.t9,i.n0,i.wd,i.sr,i.as,i.QI,i.j9,i.oU,u.ez,u.sg,p.u5,p.JJ,p.On]}),c})()},1811:(T,P,d)=>{d.r(P),d.d(P,{ProdAteServPopPersonalPage:()=>F});var C=d(5861),u=d(6814),p=d(95),i=d(6728),n=d(6242),e=d(6485),M=d(2014);const v=["IdHtmlInputSearch"];function f(g,l){if(1&g){const c=n.EpF();n.TgZ(0,"ion-list",7)(1,"ion-item",8),n.NdJ("click",function(){const t=n.CHM(c),o=t.$implicit,r=t.index,a=n.oxw();return n.KtG(a.FSelectedItem(o.id_personal,o.nombres_tecnico,r))}),n.TgZ(2,"ion-label")(3,"strong"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA()()()()}if(2&g){const c=l.$implicit,t=l.even;n.ekj("odd",l.odd)("even",t),n.xp6(4),n.Oqu(c.nombres_tecnico),n.xp6(2),n.Oqu(c.cargo)}}let F=(()=>{var g;class l{constructor(s,t,o,r){let a;this.ApiService=s,this.loadingCtrl=t,this.modalCtrl=o,this.storage=r,this.storage.get("USER_INFO").then(m=>{a=m,this.NombresUsuarioLocal=a.user_name,this.IdUsuarioLocal=a.user_id}),this.storage.get("DEVICE_INFO").then(m=>{a=m,this.NombreDispositivo=a.name,this.IdDispositivo=a.uuid})}ngOnInit(){this.nombre_tecnico=null==this.nombre_tecnico?"":this.nombre_tecnico,this.FFindRows()}FOnCloseModel(s,t,o){var r=this;return(0,C.Z)(function*(){const a={id:s,nombres:t};console.log(a),yield r.modalCtrl.dismiss(a)})()}FSelectedItem(s,t,o){this.FOnCloseModel(s,t,o)}FCloseModal(){this.nombre_tecnico=null==this.nombre_tecnico?"":this.nombre_tecnico,this.id_personal=null==this.id_personal?"":this.id_personal,this.FOnCloseModel(this.id_personal,this.nombre_tecnico,0)}FFindRows(){this.loadingCtrl.create({message:"Cargando lista...",translucent:!0}).then(t=>{t.present(),this.ApiService.ListFindPersonal(this.NgModInputSearch,this.IdUsuarioLocal,this.IdDispositivo).then(o=>{this.DataSetGrid=o}).finally(()=>{this.loadingCtrl.dismiss()})})}}return(g=l).\u0275fac=function(s){return new(s||g)(n.Y36(e.Z),n.Y36(i.HT),n.Y36(i.IN),n.Y36(M.K))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-prod-ate-serv-pop-personal"]],viewQuery:function(s,t){if(1&s&&n.Gf(v,5),2&s){let o;n.iGM(o=n.CRH())&&(t.IdHtmlInputSearch=o.first)}},inputs:{titulo_modal:"titulo_modal",nombre_tecnico:"nombre_tecnico",id_personal:"id_personal"},standalone:!0,features:[n.jDz],decls:13,vars:3,consts:[["mode","ios"],["slot","start"],[1,"",3,"click"],["part","icon","aria-hidden","true","role","img","name","chevron-back-outline",1,"md","hydrated"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar parametros",2,"width","100%",3,"ngModel","ngModelChange","ionChange"],["IdHtmlInputSearch",""],["lines","full","inset","true",3,"odd","even",4,"ngFor","ngForOf"],["lines","full","inset","true"],["button","",3,"click"]],template:function(s,t){1&s&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",1)(5,"ion-button",2),n.NdJ("click",function(){return t.FCloseModal()}),n._UZ(6,"ion-icon",3),n._uU(7," Cancelar "),n.qZA()()()(),n.TgZ(8,"ion-content")(9,"ion-item")(10,"ion-searchbar",4,5),n.NdJ("ngModelChange",function(r){return t.NgModInputSearch=r})("ionChange",function(){return t.FFindRows()}),n.qZA()(),n.YNc(12,f,7,6,"ion-list",6),n.qZA()),2&s&&(n.xp6(3),n.Oqu(t.titulo_modal),n.xp6(7),n.Q6J("ngModel",t.NgModInputSearch),n.xp6(2),n.Q6J("ngForOf",t.DataSetGrid))},dependencies:[i.Pc,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.VI,i.wd,i.sr,i.j9,u.ez,u.sg,p.u5,p.JJ,p.On],styles:[".back_button_geo[_ngcontent-%COMP%]{--background-hover: transparent;--background-hover-opacity: 1;--background-focused: currentColor;--background-focused-opacity: .1;--border-radius: 4px;--color: var(--ion-color-primary, #3880ff);--icon-margin-end: -5px;--icon-margin-start: -4px;--icon-font-size: 1.85em;--min-height: 32px;font-size:17px;--background: transparent;--color-focused: currentColor;--color-hover: currentColor;--icon-margin-top: 0;--icon-margin-bottom: 0;--icon-padding-top: 0;--icon-padding-end: 0;--icon-padding-bottom: 0;--icon-padding-start: 0;--margin-top: 0;--margin-end: 0;--margin-bottom: 0;--margin-start: 0;--min-width: auto;--min-height: auto;--padding-top: 0;--padding-end: 0;--padding-bottom: 0;--padding-start: 0;--opacity: 1;--ripple-color: currentColor;--transition: background-color, opacity .1s linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;user-select:none;font-kerning:none}"]}),l})()}}]);