"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6053],{6053:(R,p,c)=>{c.r(p),c.d(p,{AlmIngListRecepOcPage:()=>P});var _=c(5861),g=c(6814),h=c(95),o=c(6728),u=c(6466),f=c(6471),e=c(6242),A=c(8622),I=c(5472);const C=["IdHtmlInputSearch"];function v(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"ion-list",16)(1,"ion-item",17),e.NdJ("click",function(){const t=e.CHM(a),i=t.$implicit,s=t.index,d=e.oxw(2);return e.KtG(d.FSelectedItem(i,s))}),e.TgZ(2,"ion-label")(3,"strong"),e._uU(4),e.qZA(),e.TgZ(5,"p")(6,"ion-text",18),e._uU(7),e.qZA(),e.TgZ(8,"ion-text",19),e._uU(9),e.qZA(),e.TgZ(10,"ion-text",18),e._uU(11),e.qZA(),e.TgZ(12,"ion-text",20),e._uU(13),e.qZA()()()()()}if(2&r){const a=l.$implicit,n=l.odd,t=l.even,i=e.oxw(2);e.ekj("odd",n)("even",t),e.Q6J("hidden",i.scanActive),e.xp6(1),e.Q6J("hidden",i.scanActive),e.xp6(3),e.Oqu(a.CORRESMG),e.xp6(3),e.hij("N\xb0Req.:",a.NROREQUISION,""),e.xp6(2),e.hij(" \xa0",a.Y20012,""),e.xp6(2),e.hij("\xa0F.Emi.O.C.:",a.Y20006,""),e.xp6(2),e.hij("\xa0Estado.:",a.Nombre,"")}}function O(r,l){if(1&r&&(e.TgZ(0,"ion-content"),e.YNc(1,v,14,11,"ion-list",14),e._UZ(2,"div",15),e.qZA()),2&r){const a=e.oxw();e.Tol(a.ContentCss),e.xp6(1),e.Q6J("ngForOf",a.DataSetGrid),e.xp6(1),e.Q6J("hidden",!a.scanActive)}}let P=(()=>{var r;class l{constructor(n,t,i,s){this.ApiService=n,this.loadingCtrl=t,this.alertController=i,this.navCtrl=s,this.scanActive=!1,this.ContentCss=""}ngOnInit(){}ionViewDidEnter(){console.log(this.idclase),this.idclase=null==this.idclase?"":this.idclase,this.FFindRows(0,"")}FFindRows(n,t){console.log("nomclase()::",this.nomclase),this.loadingCtrl.create({message:"Cargando lista...",translucent:!0}).then(s=>{s.present(),1==n&&(this.NgModInputSearch=t),this.ApiService.ListFindQrByOc(this.NgModInputSearch,this.idclase,this.id_actividad,this.IdUsuarioLocal,this.IdDispositivo,this.nomclase).then(d=>{if(this.DataSetGrid=d,console.log("this.DataSetGrid.count:::>",this.DataSetGrid.length),0==this.DataSetGrid.length&&this.mostrarConfirmacion1(),1==n&&this.DataSetGrid.length>0){let m=this.DataSetGrid[0];console.log("this.DataSetGrid:::>",m),this.FSelectedItem(m,"0"),this.NgModInputSearch=""}}).finally(()=>{this.loadingCtrl.dismiss()})})}FSelectedItem(n,t){console.log("holaaa",n.result_es),console.log(":::::OJO:::",n),"1"==n.result_es?this.navCtrl.navigateForward(["alm-ing-win-recep-oc"],{state:n}):this.mostrarmnsj()}mostrarConfirmacion1(){var n=this;return(0,_.Z)(function*(){yield(yield n.alertController.create({header:"Atenci\xf3n",message:"No se encuentra el registro",cssClass:"alerta-confirma",mode:"ios",buttons:[{text:"Aceptar",handler:()=>{}}]})).present()})()}mostrarmnsj(){var n=this;return(0,_.Z)(function*(){yield(yield n.alertController.create({header:"Atenci\xf3n",message:"No se puede aperturar el registro, ver el estado",cssClass:"alerta-confirma",mode:"ios",buttons:[{text:"Aceptar",handler:()=>{}}]})).present()})()}start_scan_qr(n){var t=this;return(0,_.Z)(function*(){if(t.IdHtmlInputSearch.getInputElement().then(s=>{}),yield t.checkPermiso()){t.scanActive=!0,t.ContentCss="ion_content_qr";const s=yield u.mR.startScan();s.hasContent&&(console.log(s),t.NgModInputSearch=s.content,t.FFindRows(1,s.content),console.log("result.hasContent:::",s.hasContent),t.scanActive=!1,t.ContentCss="",t.IdHtmlInputSearch.readonly=!1,console.log("this.DataSetGrid:::>",t.DataSetGrid))}})()}checkPermiso(){var n=this;return(0,_.Z)(function*(){return new Promise(function(){var t=(0,_.Z)(function*(i,s){const d=yield u.mR.checkPermission({force:!0});d.granted?i(!0):d.denied?yield(yield n.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{u.mR.openAppSettings(),i(!1)}}]})).present():i(!1)});return function(i,s){return t.apply(this,arguments)}}())})()}stopScanner(){u.mR.stopScan(),this.scanActive=!1,this.ContentCss=""}}return(r=l).\u0275fac=function(n){return new(n||r)(e.Y36(A.x),e.Y36(o.HT),e.Y36(o.Br),e.Y36(I.SH))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-alm-ing-list-recep-oc-page"]],viewQuery:function(n,t){if(1&n&&e.Gf(C,5),2&n){let i;e.iGM(i=e.CRH())&&(t.IdHtmlInputSearch=i.first)}},inputs:{titulo_modal:"titulo_modal",idclase:"idclase",id_actividad:"id_actividad",nomclase:"nomclase"},standalone:!0,features:[e.jDz],decls:17,vars:5,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],["titulo","O.C. Pendientes de Recepcion"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],[3,"hidden"],["mode","ios","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar parametros",2,"width","100%",3,"ngModel","ngModelChange"],["IdHtmlInputSearch",""],["slot","end","color","primary","title","Buscar por Codigo de Barras","name","qr-code-outline","size","large",3,"click"],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],["color","danger","expand","full",3,"hidden","click"],[3,"class",4,"ngIf"],["lines","full","inset","true",3,"odd","even","hidden",4,"ngFor","ngForOf"],[1,"scan-box",3,"hidden"],["lines","full","inset","true",3,"hidden"],["button","","mode","ios",3,"hidden","click"],["color","secondary"],["color","primary"],["color","danger"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),e._UZ(4,"app-header",3),e.qZA(),e.TgZ(5,"ion-col",4),e._UZ(6,"ion-label",5),e.qZA()()()(),e.TgZ(7,"ion-item",6)(8,"ion-searchbar",7,8),e.NdJ("ngModelChange",function(s){return t.NgModInputSearch=s}),e.qZA(),e.TgZ(10,"ion-icon",9),e.NdJ("click",function(){return t.start_scan_qr(0)}),e.qZA(),e.TgZ(11,"ion-icon",10,11),e.NdJ("click",function(){return t.FFindRows(0,"")}),e.qZA()(),e.TgZ(13,"ion-item",6)(14,"ion-button",12),e.NdJ("click",function(){return t.stopScanner()}),e._uU(15," \xa0Detener\n"),e.qZA()(),e.YNc(16,O,3,4,"ion-content",13)),2&n&&(e.xp6(7),e.Q6J("hidden",t.scanActive),e.xp6(1),e.Q6J("ngModel",t.NgModInputSearch),e.xp6(5),e.Q6J("hidden",!t.scanActive),e.xp6(1),e.Q6J("hidden",!t.scanActive),e.xp6(2),e.Q6J("ngIf",!t.scanActive))},dependencies:[o.Pc,o.YG,o.wI,o.W2,o.jY,o.gu,o.Ie,o.Q$,o.q_,o.Nd,o.VI,o.yW,o.sr,o.j9,g.ez,g.sg,g.O5,h.u5,h.JJ,h.On,f.G]}),l})()}}]);