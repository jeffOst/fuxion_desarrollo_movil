"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6426],{6426:(E,_,n)=>{n.r(_),n.d(_,{MttoWinInformeTablero1Page:()=>b});var m=n(5861),u=n(6814),s=n(95),t=n(6728),e=n(6242),p=n(1991),g=n(6172),P=n(4248);let b=(()=>{var l;class d{constructor(o,a,r,i,c,f){if(this.formBuilder=o,this.loadingController=a,this.ApiService=r,this.globalVal=i,this.router=c,this.alertController=f,this.checklist_paso1_apli_ck=!1,this.FormCheckListPaso1=this.formBuilder.group({marca:[""],potencia:[""],site:[""],tarranque:[""],voltajeman:[""],codsmg:[""],corre_inf_cab:[""],fch_fin_inf:[""],fch_ini_inf:[""],horastrab:[""],fech_de_registro:[""]}),""==this.globalVal.checklist_paso_pivot)try{this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row,i.corre_inf_cab=this.navParamsAny.corre_inf_cab,console.log(i.corre_inf_cab)}catch{console.log(i.corre_inf_cab),this.corre_inf_cab=i.corre_inf_cab}else this.corre_inf_cab=i.corre_inf_cab}ngOnInit(){}ionViewWillEnter(){let o;this.checklist_paso1_apli_ck="0"==this.globalVal.checklist_paso1_apli,this.FLoadForms(),o={detail:{checked:this.checklist_paso1_apli_ck,jc:0}}}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(a=>{a.present(),this.ApiService.FormFindinftab1(this.globalVal.corre_inf_cab).then(r=>{console.log(this.globalVal.corre_inf_cab),this.EditDataRest=r.form,this.EditDataRest1=r.list;try{this.FormCheckListPaso1.setValue({marca:this.EditDataRest[0].marca,potencia:this.EditDataRest[0].potencia,site:this.EditDataRest[0].Y06002,tarranque:this.EditDataRest[0].tarranque,voltajeman:this.EditDataRest[0].voltaje_a,codsmg:this.EditDataRest[0].codsmg,corre_inf_cab:this.globalVal.corre_inf_cab,fch_ini_inf:this.EditDataRest1[0].fchini_it,fch_fin_inf:this.EditDataRest1[0].fchfin_it,horastrab:this.EditDataRest1[0].hrstrab_it,fech_de_registro:this.EditDataRest1[0].fech_de_registro}),console.log("este tiempo",this.EditDataRest1[0].fchfin_it)}catch(i){console.log("error:::>",i)}}).finally(()=>{this.loadingController.dismiss()})})}SaveFormTerminadoPaso1(){var o=this;return(0,m.Z)(function*(){if(o.FormCheckListPaso1.valid)o.loadingController.create({message:"Guardando Paso 1...",translucent:!0}).then(r=>{r.present()}),o.FormCheckListPaso1.controls.corre_inf_cab.setValue(o.globalVal.corre_inf_cab),o.FormCheckListPaso1.controls.fch_ini_inf.setValue(o.ng_fch_ini_inf),o.FormCheckListPaso1.controls.fch_fin_inf.setValue(o.ng_fch_fin_inf),console.log("este es el form completo",o.FormCheckListPaso1.value),yield o.ApiService.GuardarInfPaso1(o.FormCheckListPaso1.value).then(function(){var r=(0,m.Z)(function*(i){o.loadingController.dismiss();let c="0"==i[0].o_nres?"alerta-error":"alerta-ok";yield(yield o.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"ENTREGA MOTOR",cssClass:c,mode:"ios",animated:!0,message:i[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada")}}]})).present()});return function(i){return r.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394"),o.FLoadForms()}).catch(r=>{console.log("errror:::>>>>>>>>>",r)});else{for(let a in o.FormCheckListPaso1.controls)o.FormCheckListPaso1.controls[a].setValue(o.FormCheckListPaso1.controls[a].value),o.FormCheckListPaso1.controls[a].markAsTouched();o.alertSiNo=o.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"GENERAL",mode:"ios",cssClass:"alerta-error",backdropDismiss:!0,message:"Falta seleccionar todos los datos",buttons:[{text:"Aceptar",role:"A",handler:()=>{}}]}).then(a=>{a.present(),a.onDidDismiss().then(r=>{})})}})()}}return(l=d).\u0275fac=function(o){return new(o||l)(e.Y36(s.QS),e.Y36(t.HT),e.Y36(p.k),e.Y36(g.X),e.Y36(P.F0),e.Y36(t.Br))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-mtto-win-informe-tablero1"]],standalone:!0,features:[e.jDz],decls:47,vars:1,consts:[["mode","ios"],["text-capitalize",""],[1,"ion-padding"],[3,"formGroup"],["mode","ios",1,"ion-no-padding"],["labelPlacement","stacked","formControlName","marca","readonly",""],["labelPlacement","stacked","formControlName","potencia","readonly",""],["labelPlacement","stacked","formControlName","tarranque","readonly",""],["labelPlacement","stacked","formControlName","voltajeman","readonly",""],["labelPlacement","stacked","formControlName","site","readonly",""],["labelPlacement","stacked","formControlName","horastrab"],["labelPlacement","stacked","formControlName","fech_de_registro"],["expand","full",3,"click"]],template:function(o,a){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-item")(3,"ion-title",1)(4,"ion-label"),e._uU(5,"DATOS GENERALES"),e.qZA()()()()(),e.TgZ(6,"ion-content",2)(7,"form",3)(8,"ion-list",4)(9,"ion-item")(10,"ion-label")(11,"p"),e._uU(12,"Marca"),e.qZA(),e._UZ(13,"ion-input",5),e.qZA()(),e.TgZ(14,"ion-item")(15,"ion-label")(16,"p"),e._uU(17,"Potencia"),e.qZA(),e._UZ(18,"ion-input",6),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-label")(21,"p"),e._uU(22,"Tipo de Arranque:"),e.qZA(),e._UZ(23,"ion-input",7),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-label")(26,"p"),e._uU(27,"Voltaje de Mando"),e.qZA(),e._UZ(28,"ion-input",8),e.qZA()(),e.TgZ(29,"ion-item")(30,"ion-label")(31,"p"),e._uU(32,"Procedencia"),e.qZA(),e._UZ(33,"ion-input",9),e.qZA()(),e.TgZ(34,"ion-item")(35,"ion-label")(36,"p"),e._uU(37,"Horas de Trabajo"),e.qZA(),e._UZ(38,"ion-input",10),e.qZA()(),e.TgZ(39,"ion-item")(40,"ion-label")(41,"p"),e._uU(42,"Fecha de Creacion"),e.qZA(),e._UZ(43,"ion-input",11),e.qZA()()()()(),e.TgZ(44,"ion-footer")(45,"ion-button",12),e.NdJ("click",function(){return a.SaveFormTerminadoPaso1()}),e._uU(46,"GUARDAR"),e.qZA()()),2&o&&(e.xp6(7),e.Q6J("formGroup",a.FormCheckListPaso1))},dependencies:[t.Pc,t.YG,t.W2,t.fr,t.Gu,t.pK,t.Ie,t.Q$,t.q_,t.wd,t.sr,t.j9,u.ez,s.u5,s._Y,s.JJ,s.JL,s.UX,s.sg,s.u]}),d})()}}]);