"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8671],{8671:(I,p,r)=>{r.r(p),r.d(p,{ProdAteServAsignaEstadoPage:()=>O});var v=r(5861),g=r(6814),A=r(95),e=r(6728),i=r(6242),Z=r(4248),P=r(6485),f=r(2014),F=r(5472);function C(s,n){1&s&&(i.TgZ(0,"ion-row")(1,"ion-col",14)(2,"ion-label",15),i._uU(3,"No Hay Hoja de Ruta asignada"),i.qZA()()())}function T(s,n){if(1&s){const o=i.EpF();i.TgZ(0,"ion-button",22),i.NdJ("click",function(){i.CHM(o);const t=i.oxw().$implicit,c=i.oxw();return i.KtG(c.FIniciarActvividad(t.idsubestacion_asof,t.descripcion_proceso_ofd,t.SEQMASERV,0,t.codhru,t.cantidad_revisada,t.cnt_pieza))}),i.TgZ(1,"ion-text",23),i._uU(2,"\xa0INICIAR ACTIVIDAD \xa0"),i.qZA(),i._UZ(3,"ion-icon",24),i.qZA()}if(2&s){const o=i.oxw(2);i.xp6(3),i.Q6J("hidden",o.scanActive)}}function x(s,n){if(1&s&&(i.TgZ(0,"ion-row")(1,"ion-item",16)(2,"ion-col",17),i._uU(3),i.qZA(),i.TgZ(4,"ion-col",17),i._uU(5),i.qZA(),i.TgZ(6,"ion-col",18),i._uU(7),i.qZA(),i.TgZ(8,"ion-col",17),i._uU(9),i.qZA(),i.TgZ(10,"ion-col",19),i._uU(11),i.qZA(),i.TgZ(12,"ion-col",20),i._uU(13),i.qZA(),i.TgZ(14,"ion-col",17),i._uU(15),i.qZA(),i.YNc(16,T,4,1,"ion-button",21),i.qZA()()),2&s){const o=n.$implicit,a=i.oxw();i.xp6(3),i.hij("",o.secuencia_proc_of," "),i.xp6(2),i.Oqu(o.nombre_maquina),i.xp6(2),i.Oqu(o.descripcion_proceso_ofd),i.xp6(2),i.Oqu(o.cnt_pieza),i.xp6(2),i.Oqu(o.nombre_estado),i.xp6(2),i.Oqu(o.cantidad_revisada),i.xp6(2),i.Oqu(o.cantidad_baja),i.xp6(1),i.Q6J("ngIf",o.idmaquina_proceso_hru==a.FormHtmlJs.idmaquina&&"1"==o.flag_boton_secuencia&&"1"==o.flag_boton_cantidad)}}function E(s,n){if(1&s){const o=i.EpF();i.TgZ(0,"ion-button",25),i.NdJ("click",function(){i.CHM(o);const t=i.oxw();return i.KtG(t.FIniciarActvividad(0,0,0,0,0,0,0))}),i.TgZ(1,"ion-text",23),i._uU(2,"\xa0Iniciar Actividad \xa0"),i.qZA(),i._UZ(3,"ion-icon",24),i.qZA()}if(2&s){const o=i.oxw();i.xp6(3),i.Q6J("hidden",o.scanActive)}}function H(s,n){if(1&s&&(i.TgZ(0,"ion-item")(1,"ion-row",26)(2,"ion-col",27),i._uU(3,"Actividad:"),i.qZA(),i.TgZ(4,"ion-col",28)(5,"div"),i._uU(6,"por Reproceso"),i.qZA()(),i.TgZ(7,"ion-col",27),i._uU(8," F. Revision: "),i.qZA(),i.TgZ(9,"ion-col",28)(10,"div"),i._uU(11),i.qZA()()()()),2&s){const o=i.oxw();i.xp6(5),i.Tol(o.CssReproceso),i.xp6(5),i.Tol(o.CssReproceso),i.xp6(1),i.Oqu(o.FormHtmlJs.fecha_reproceso)}}function q(s,n){if(1&s){const o=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"Calidad"),i.qZA(),i.TgZ(4,"ion-row")(5,"ion-col",29)(6,"ion-button",30),i.NdJ("click",function(){i.CHM(o);const t=i.oxw();return i.KtG(t.FDejarCalidad())}),i.TgZ(7,"ion-text",31),i._uU(8," Dejar piezas en calidad "),i.qZA()()(),i.TgZ(9,"ion-col",32),i._UZ(10,"ion-icon",33),i.qZA()()()()}}function J(s,n){if(1&s&&(i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2," Historial Entregas Calidad "),i.TgZ(3,"ion-chip")(4,"ion-label",4),i._uU(5),i.qZA()()()()),2&s){const o=i.oxw();i.xp6(5),i.hij(" ",o.CantEntregasCalidad," ")}}function U(s,n){if(1&s){const o=i.EpF();i.TgZ(0,"ion-row")(1,"ion-item",35),i.NdJ("click",function(){const c=i.CHM(o).$implicit,_=i.oxw(2);return i.KtG(_.showDetailCalidad(c))}),i.TgZ(2,"ion-col",19),i._uU(3),i.qZA(),i.TgZ(4,"ion-col",36),i._uU(5),i.qZA(),i.TgZ(6,"ion-col",19),i._uU(7),i.qZA(),i.TgZ(8,"ion-col",19),i._uU(9),i.qZA(),i.TgZ(10,"ion-col",19),i._uU(11),i.qZA()()()}if(2&s){const o=n.$implicit;i.xp6(3),i.hij("",o.fch_solicitud_scc," "),i.xp6(2),i.Oqu(o.nombres_tecnico),i.xp6(2),i.Oqu(o.status_rc_nom),i.xp6(2),i.Oqu(o.cantidad_scc),i.xp6(2),i.Oqu(o.estado_calidad)}}function b(s,n){1&s&&(i.TgZ(0,"ion-row")(1,"ion-col",14)(2,"ion-label",15),i._uU(3,"No Hay Piezas enviadas a Calidad"),i.qZA()()())}function z(s,n){if(1&s&&(i.TgZ(0,"ion-item")(1,"ion-grid")(2,"ion-row")(3,"ion-col",6),i._uU(4,"Fecha "),i.qZA(),i.TgZ(5,"ion-col",34),i._uU(6,"Responsable Registro"),i.qZA(),i.TgZ(7,"ion-col",6),i._uU(8,"Status"),i.qZA(),i.TgZ(9,"ion-col",6),i._uU(10,"Cantidad"),i.qZA(),i.TgZ(11,"ion-col",6),i._uU(12,"Estado Calidad"),i.qZA()(),i.YNc(13,U,12,5,"ion-row",9)(14,b,4,0,"ion-row",8),i.qZA()()),2&s){const o=i.oxw();i.xp6(13),i.Q6J("ngForOf",o.DsGridSolicitudQc),i.xp6(1),i.Q6J("ngIf",0===o.DsGridSolicitudQc.length)}}let O=(()=>{var s;class n{constructor(a,t,c,_,h){let l;this.router=a,this.prodservice=t,this.storage=c,this.navCtrl=_,this.alertController=h,this.CantEntregasCalidad=0,this.CantItemsHojaRuta=0,this.DsGridHojaRuta=[],this.DsGridSolicitudQc=[],this.FlagCCalidad=!1,this.hide_div_reproceso=!1,this.Cancelar="Cancelar",this.disableButton=!0,this.scanActive=!0,this.FormHtmlJs={},this.navParams=this.router.getCurrentNavigation().extras.state,this.storage.get("USER_INFO").then(m=>{l=m,this.nombres_usuario_local=l.user_name,this.id_usuario_local=l.user_id,console.log(l),console.log(this.navParams),this.navParams&&(this.FormHtmlJs.maquina=this.navParams.maquina,this.FormHtmlJs.idofpterminado=this.navParams.idofpterminado,this.FormHtmlJs.EQUIPOID=this.navParams.EQUIPOID,this.FormHtmlJs.fasignado=this.navParams.fasignado,this.FormHtmlJs.avatar=this.navParams.avatar,this.FormHtmlJs.correorden=this.navParams.correorden,this.FormHtmlJs.Y04001=this.navParams.Y04001,this.FormHtmlJs.Y04002=this.navParams.Y04002,this.FormHtmlJs.descripcion_pt=this.navParams.descripcion_pt,this.FormHtmlJs.cantidad=this.navParams.cantidad,this.FormHtmlJs.idestado=this.navParams.idestado,this.IdCboEstadoActual=this.navParams.idestado,this.FormHtmlJs.nomclase=this.navParams.nomclase,this.FormHtmlJs.idasignaestacionof=this.navParams.idasignaestacionof,this.FormHtmlJs.cnt_29012_peso_ini=this.navParams.cnt_29012_peso_ini,this.FormHtmlJs.cnt_50000_peso_ini=this.navParams.cnt_50000_peso_ini,this.FormHtmlJs.cnt_metalizado_obs=this.navParams.cnt_metalizado_obs,this.FormHtmlJs.codigo_qr=this.navParams.codigo_qr,this.FormHtmlJs.codsmg=this.navParams.codsmg,this.FormHtmlJs.descrip=this.navParams.descrip,this.FormHtmlJs.idmaquina=this.navParams.idmaquina,this.FormHtmlJs.idordenfabricab=this.navParams.idordenfabricab,this.FormHtmlJs.idsubfamilia=this.navParams.idsubfamilia,this.FormHtmlJs.nomsubfam=this.navParams.nomsubfam,this.FormHtmlJs.proceso_metalizado=this.navParams.proceso_metalizado,this.FormHtmlJs.servicio_metalizado=this.navParams.servicio_metalizado,this.CssReproceso=1==this.navParams.flag_reproceso?"CssReproceso":"",this.hide_div_reproceso=1==this.navParams.flag_reproceso,this.FormHtmlJs.fecha_reproceso=this.navParams.fecha_reproceso,this.FormHtmlJs.cantidad_reproceso=this.navParams.cantidad_reproceso,this.FormHtmlJs.idrevisiondet_reproceso=this.navParams.idrevisiondet_reproceso,this.FormHtmlJs.codigo_pt=this.navParams.Y04001,this.FormHtmlJs.CONCOMPONENTE=this.navParams.CONCOMPONENTE,"O.F"==this.FormHtmlJs.avatar&&(this.FlagCCalidad=!0)),this.FormHtmlJs.nombres_tecnico=this.nombres_usuario_local,this.FormHtmlJs.idsolicitante_scc=this.id_usuario_local,this.FormHtmlJs.plano_diseno=this.navParams.plano_diseno,this.FormHtmlJs.cantidad_total=this.navParams.cantidad,this.FormHtmlJs.cantidad_revisada=this.navParams.cantidad_revisada,this.FormHtmlJs.cantidad_pendiente=this.navParams.cantidad_pendiente,console.log("this.FormHtmlJs",this.FormHtmlJs)}),this.storage.get("DEVICE_INFO").then(m=>{l=m,this.nombre_dispositivo=l.name,this.id_dispositivo=l.uuid,console.log("localStorage Device",l)})}FIniciarActvividad(a,t,c,_,h,l,m){var u=this;return(0,v.Z)(function*(){if(2!=u.navParams.idestado){let d=u.FormHtmlJs;d.idsubestacion_asof=a,d.descripcion_proceso_hr=t,d.SEQMASERV=c,d.flag_mostrar_opciones=_,d.codhru=h,d.cnt_pieza_rev_hru=l,d.cnt_pieza_pend_hru=m,u.navCtrl.navigateForward(["addserviciostodet"],{state:d})}else yield(yield u.alertController.create({header:"Alerta",message:"Este registro se encuentra completado, no se puede iniciar otra actividad. (Se debe volver a asignar la Actividad.)",buttons:["Aceptar"]})).present()})()}cancelar_ejecucion(){this.navCtrl.navigateForward("prod-list-acti-programada")}CboEstadoChange(a){console.log("CboEstadoChange",a),console.log(a.detail),console.log(a.detail.value),this.IdCboEstadoActual=a.detail.value,this.prodservice.FUpdateEstadoServicio(this.FormHtmlJs.idofpterminado,a.detail.value,this.id_usuario_local,this.id_dispositivo,this.FormHtmlJs.avatar,this.FormHtmlJs.idasignaestacionof).then(t=>{this.ResptApi=t,console.log(this.ResptApi)}).finally(()=>{setTimeout(()=>{},600)})}CboEstadoCancel(a){console.log("CboEstadoCancel",a)}CboEstadoBlur(a){console.log("CboEstadoBlur",a)}ngOnInit(){}ionViewDidEnter(){this.prodservice.ListFindSolicitudQcByOf("",this.FormHtmlJs.idofpterminado,this.id_usuario_local,this.id_dispositivo).then(a=>{console.log(a),this.DsGridSolicitudQc=a,this.CantEntregasCalidad=this.DsGridSolicitudQc.length}).finally(()=>{}),this.prodservice.ListFindHojaRuta("",this.FormHtmlJs.idofpterminado,this.id_usuario_local,this.id_dispositivo).then(a=>{console.log(a),this.DsGridHojaRuta=a,this.CantItemsHojaRuta=this.DsGridHojaRuta.length}).finally(()=>{})}FDejarCalidad(){this.navCtrl.navigateForward(["prod-ate-serv-dejar-pieza-calidad"],{state:this.FormHtmlJs})}showDetailCalidad(a){this.navCtrl.navigateForward(["prod-ate-serv-view-dejar-pieza-calidad"],{state:a})}cboEstadoSelect(){}visualizar_pdf(a){this.navCtrl.navigateForward("pdf-viewer",{queryParams:{valor:a,flaglistaprod:1}})}}return(s=n).\u0275fac=function(a){return new(a||s)(i.Y36(Z.F0),i.Y36(P.Z),i.Y36(f.K),i.Y36(F.SH),i.Y36(e.Br))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-prod-ate-serv-asigna-estado"]],standalone:!0,features:[i.jDz],decls:72,vars:15,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],["color","secondary"],["size-sm","1","size-md","1","size-xl","1",1,"headgrid"],["size-sm","2","size-md","2","size-xl","2",1,"headgrid"],["size-sm","1.5","size-md","1.5","size-xl","1.5",1,"headgrid"],[4,"ngIf"],[4,"ngFor","ngForOf"],["expand","block","color","white","size","small","slot","end","title","Iniciar Actividad",3,"click",4,"ngIf"],[3,"value"],["size","default",3,"click"],["slot","start","name","star"],["size","12",1,"ion-text-center"],[1,"texto-rojo"],["mode","ios","button","",2,"width","100% !important"],["size-sm","1","size-md","1","size-xl","1"],["size-sm","2.2","size-md","2.2","size-xl","2.2"],["size-sm","2","size-md","2","size-xl","2"],["size-sm","1.5","size-md","1.5","size-xl","1.5"],["color","warning","size","small",3,"click",4,"ngIf"],["color","warning","size","small",3,"click"],["color","danger"],["expand","block","color","dark","size","small","name","play-forward",3,"hidden"],["expand","block","color","white","size","small","slot","end","title","Iniciar Actividad",3,"click"],[1,"ion-text-left",2,"width","100%"],["size","3",1,"ion-text-right"],["size","3",1,"ion-text-left"],["size","10"],["expand","full","color","white","title","Dejar en Calidad",2,"background-color","transparent !important",3,"click"],["color","dark"],["size","2"],["color","dark","size","small","name","cart"],["size-sm","3.3","size-md","3.3","size-xl","3.3",1,"headgrid"],["mode","ios","button","",2,"width","100% !important",3,"click"],["size-sm","3.5","size-md","3.5","size-xl","3.5"]],template:function(a,t){1&a&&(i.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),i._uU(3,"Asignar Estado"),i.qZA(),i.TgZ(4,"ion-buttons",2),i._UZ(5,"ion-back-button",3),i.qZA()()(),i.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item")(9,"ion-label"),i._uU(10," Hoja de Ruta "),i.TgZ(11,"ion-chip")(12,"ion-label",4),i._uU(13),i.qZA()()()(),i.TgZ(14,"ion-item")(15,"ion-grid")(16,"ion-row")(17,"ion-col",5),i._uU(18,"Secuencia "),i.qZA(),i.TgZ(19,"ion-col",5),i._uU(20,"Maquina"),i.qZA(),i.TgZ(21,"ion-col",6),i._uU(22,"Descripcion"),i.qZA(),i.TgZ(23,"ion-col",5),i._uU(24,"Cant Piezas"),i.qZA(),i.TgZ(25,"ion-col",6),i._uU(26,"Estado"),i.qZA(),i.TgZ(27,"ion-col",7),i._uU(28,"Piezas Completadas"),i.qZA(),i.TgZ(29,"ion-col",5),i._uU(30,"De Baja"),i.qZA(),i.TgZ(31,"ion-col",6),i._uU(32,"Acciones"),i.qZA()(),i.YNc(33,C,4,0,"ion-row",8)(34,x,17,8,"ion-row",9),i.qZA()(),i.TgZ(35,"ion-item")(36,"ion-label")(37,"p"),i._uU(38,"Maquina"),i.qZA(),i.TgZ(39,"h1"),i._uU(40),i.qZA()(),i.YNc(41,E,4,1,"ion-button",10),i.qZA(),i.YNc(42,H,12,7,"ion-item",8),i.TgZ(43,"ion-item")(44,"ion-label")(45,"p"),i._uU(46,"F. Asignado"),i.qZA(),i.TgZ(47,"h1"),i._uU(48),i.qZA()()(),i.TgZ(49,"ion-item")(50,"ion-label")(51,"p"),i._uU(52),i.qZA(),i.TgZ(53,"h1"),i._uU(54),i.qZA()()(),i.TgZ(55,"ion-item")(56,"ion-label")(57,"p"),i._uU(58,"Cod. P.T."),i.qZA(),i._UZ(59,"input",11),i.TgZ(60,"ion-button",12),i.NdJ("click",function(){return t.visualizar_pdf(t.FormHtmlJs.plano_diseno)}),i._UZ(61,"ion-icon",13),i._uU(62," Ver Plano "),i.qZA()()(),i.TgZ(63,"ion-item")(64,"ion-label")(65,"p"),i._uU(66,"Total Piezas"),i.qZA(),i.TgZ(67,"h1"),i._uU(68),i.qZA()()(),i.YNc(69,q,11,0,"ion-item",8)(70,J,6,1,"ion-item",8)(71,z,15,2,"ion-item",8),i.qZA()()),2&a&&(i.xp6(5),i.Q6J("text",t.Cancelar),i.xp6(8),i.hij(" ",t.CantItemsHojaRuta," "),i.xp6(20),i.Q6J("ngIf",0===t.DsGridHojaRuta.length),i.xp6(1),i.Q6J("ngForOf",t.DsGridHojaRuta),i.xp6(6),i.Oqu(t.FormHtmlJs.maquina),i.xp6(1),i.Q6J("ngIf",0==t.CantItemsHojaRuta),i.xp6(1),i.Q6J("ngIf",t.hide_div_reproceso),i.xp6(6),i.Oqu(t.FormHtmlJs.fasignado),i.xp6(4),i.hij("Nro. ",t.FormHtmlJs.avatar,""),i.xp6(2),i.Oqu(t.FormHtmlJs.correorden),i.xp6(5),i.s9C("value",t.FormHtmlJs.Y04001),i.xp6(9),i.Oqu(t.FormHtmlJs.cantidad),i.xp6(1),i.Q6J("ngIf",t.FlagCCalidad),i.xp6(1),i.Q6J("ngIf",t.FlagCCalidad),i.xp6(1),i.Q6J("ngIf",t.FlagCCalidad))},dependencies:[e.Pc,e.YG,e.Sm,e.hM,e.wI,e.W2,e.jY,e.Gu,e.gu,e.Ie,e.Q$,e.q_,e.Nd,e.yW,e.wd,e.sr,e.oU,g.ez,g.sg,g.O5,A.u5],styles:['@charset "UTF-8";.selector[_ngcontent-%COMP%]{font-family:SFNSDisplay;font-size:12px;line-height:1.2;letter-spacing:.1px;color:#29235e;width:100%!important;max-width:100%!important;justify-content:center;border:solid 2px #e8ebf0;background-color:#fff;text-align:center}.CssReproceso[_ngcontent-%COMP%]{color:#b52024!important;font-size:large}.texto-rojo[_ngcontent-%COMP%]{color:red;font-weight:700}']}),n})()}}]);