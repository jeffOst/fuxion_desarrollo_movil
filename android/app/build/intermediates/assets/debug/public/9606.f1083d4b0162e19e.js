"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9606],{9606:(v,d,c)=>{c.r(d),c.d(d,{MttoChecklistWinMontaje1Page:()=>f});var C=c(6814),l=c(95),i=c(6728),e=c(6242),k=c(5472),b=c(3984),P=c(2014),A=c(4248),E=c(6172);let f=(()=>{var _;class g{constructor(t,s,o,a,T,O,L,r){let n;this.formBuilder=t,this.navCtrl=s,this.loadingController=o,this.ApiService=a,this.storage=T,this.alertController=O,this.router=L,this.globalVal=r,this.disableButtonPaso1=!0,this.checklist_paso1_apli_ck=!1,this.aisla_tierra_apl_ck=!0,this.aisla_entre_fases_apl_ck=!0,this.repara_chapa_apl_ck=!0,this.montaje_estator_apl_ck=!0,this.storage.get("USER_INFO").then(h=>{n=h,this.NombresUsuarioLocal=n.user_name,this.IdUsuarioLocal=n.user_id,this.storage.get("DEVICE_INFO").then(m=>{n=m,this.NombreDispositivo=n.name,this.IdDispositivo=n.uuid})}),this.FormCheckListPaso1=this.formBuilder.group({idchecklistpaso1:["0"],idchecklistcab_paso1:[""],idsupervisor_responsable_cmc:[""],fch_revision_responsable_cmc:[""],idestado_revision_responsable_cmc:[""],revision_responsable_obs_cmc:[""],fch_ejecutado_cmc:[""],aisla_tierra_cmc:["",l.kI.required],aisla_tierra_obs_cmc:[""],aisla_entre_fases_cmc:["",l.kI.required],aisla_entre_fases_obs_cmc:[""],repara_chapa_cmc:[""],repara_chapa_obs_cmc:[""],montaje_estator_cubi_cmc:[""],montaje_estator_cubi_codigo_cmc:[""],idestado_revision_paso1_cmc:[""],checklist_paso1_apli:[""],aisla_tierra_apl:[""],aisla_entre_fases_apl:[""],repara_chapa_apl:[""],montaje_estator_apl:[""]}),console.log(this.router.getCurrentNavigation().extras);var u=this;if(""==this.globalVal.checklist_paso_pivot)try{this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row,r.idchecklistcab=this.navParamsAny.idchecklistcab,r.checklist_paso1_apli=this.navParamsAny.checklist_paso1_apli,r.checklist_paso2_apli=this.navParamsAny.checklist_paso2_apli,r.checklist_paso3_apli=this.navParamsAny.checklist_paso3_apli,r.checklist_paso4_apli=this.navParamsAny.checklist_paso4_apli,r.checklist_paso5_apli=this.navParamsAny.checklist_paso5_apli,r.checklist_paso6_apli=this.navParamsAny.checklist_paso6_apli}catch(h){console.log(h),this.idchecklistcab=r.idchecklistcab}else this.idchecklistcab=r.idchecklistcab;this.storage.get("USER_PERMISO").then(h=>{h.forEach(function(m){u.disableButtonPaso1=32!=m.Nivel})})}onTouched(t){console.log(t)}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(s=>{s.present(),this.idchecklistcab=this.globalVal.idchecklistcab,console.log(this.idchecklistcab),this.ApiService.FormFindPaso1(this.idchecklistcab,"1","H").then(o=>{this.EditDataRest=o,console.log(this.EditDataRest);try{let a;this.FormCheckListPaso1.setValue({aisla_entre_fases_cmc:this.EditDataRest[0].aisla_entre_fases_cmc,aisla_entre_fases_obs_cmc:this.EditDataRest[0].aisla_entre_fases_obs_cmc,aisla_tierra_cmc:this.EditDataRest[0].aisla_tierra_cmc,aisla_tierra_obs_cmc:this.EditDataRest[0].aisla_tierra_obs_cmc,fch_ejecutado_cmc:this.EditDataRest[0].fch_ejecutado_cmc,fch_revision_responsable_cmc:this.EditDataRest[0].fch_revision_responsable_cmc,idchecklistcab_paso1:this.EditDataRest[0].idchecklistcab_paso1,idchecklistpaso1:this.EditDataRest[0].idchecklistpaso1,idestado_revision_responsable_cmc:this.EditDataRest[0].idestado_rev_responsable_cmc,idsupervisor_responsable_cmc:this.EditDataRest[0].idsupervisor_responsable_cmc,montaje_estator_cubi_cmc:this.EditDataRest[0].montaje_estator_cubi_cmc,repara_chapa_cmc:this.EditDataRest[0].repara_chapa_cmc,revision_responsable_obs_cmc:this.EditDataRest[0].revision_respons_obs_cmc,repara_chapa_obs_cmc:this.EditDataRest[0].repara_chapa_obs_cmc,montaje_estator_cubi_codigo_cmc:this.EditDataRest[0].montaje_estator_cubi_codigo_cm,idestado_revision_paso1_cmc:this.EditDataRest[0].idestado_revision_paso1_cmc,checklist_paso1_apli:this.globalVal.checklist_paso1_apli,aisla_tierra_apl:"0"!=this.EditDataRest[0].aisla_tierra_apl,aisla_entre_fases_apl:"0"!=this.EditDataRest[0].aisla_entre_fases_apl,repara_chapa_apl:"0"!=this.EditDataRest[0].repara_chapa_apl,montaje_estator_apl:"0"!=this.EditDataRest[0].montaje_estator_apl}),a={detail:{checked:this.FormCheckListPaso1.controls.aisla_tierra_apl.value}},this.toggle1(a),a={detail:{checked:this.FormCheckListPaso1.controls.aisla_entre_fases_apl.value}},this.toggle2(a),a={detail:{checked:this.FormCheckListPaso1.controls.repara_chapa_apl.value}},this.toggle3(a),a={detail:{checked:this.FormCheckListPaso1.controls.montaje_estator_apl.value}},this.toggle4(a)}catch(a){console.log("error:::>",a)}}).finally(()=>{this.loadingController.dismiss()})})}SaveFormTerminadoPaso1(){if(this.FormCheckListPaso1.valid)this.alertSiNo=this.alertController.create({header:"CONTROL DE MOTOR ELECTRICO",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Confirmar que desea guardar?",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(t=>{t.present(),t.onDidDismiss().then(s=>{console.log("aceptaPop::::>>",s),"A"==s.role&&(this.idchecklistcab=this.globalVal.idchecklistcab,this.FormCheckListPaso1.controls.idchecklistcab_paso1.setValue(this.idchecklistcab),0==this.disableButtonPaso1&&this.FormCheckListPaso1.controls.idsupervisor_responsable_cmc.setValue(this.IdUsuarioLocal),this.loadingController.create({message:"Guardando Paso 1...",translucent:!0}).then(a=>{a.present()}),this.ApiService.GuardarFormPaso1(this.FormCheckListPaso1.value).then(a=>{this.FormCheckListPaso1.controls.idchecklistpaso1.setValue(this.ApiService.confirmSaveBd),this.loadingController.dismiss(),alert("Guardado correctamente.")}).finally(()=>{}).catch(a=>{console.log("errror:::>>>>>>>>>",a)}))})});else{for(let t in this.FormCheckListPaso1.controls)this.FormCheckListPaso1.controls[t].setValue(this.FormCheckListPaso1.controls[t].value),this.FormCheckListPaso1.controls[t].markAsTouched();this.alertSiNo=this.alertController.create({header:"CONTROL DE MOTOR ELECTRICO",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Falta seleccionar todos los datos",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}}]}).then(t=>{t.present(),t.onDidDismiss().then(s=>{})})}}SaveFormBorradorPaso1(){this.alertSiNo=this.alertController.create({header:"CONTROL DE MOTOR ELECTRICO",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Confirmar que desea guardar?",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(t=>{t.present(),t.onDidDismiss().then(s=>{"A"==s.role&&(this.loadingController.create({message:"Guardando Paso 1...",translucent:!0}).then(a=>{a.present()}),this.idchecklistcab=this.globalVal.idchecklistcab,this.FormCheckListPaso1.controls.idchecklistcab_paso1.setValue(this.idchecklistcab),this.ApiService.GuardarFormPaso1(this.FormCheckListPaso1.value).then(a=>{this.FormCheckListPaso1.controls.idchecklistpaso1.setValue(this.ApiService.confirmSaveBd),this.loadingController.dismiss(),alert("Guardado correctamente.")}).finally(()=>{}).catch(a=>{console.log("errror:::>>>>>>>>>",a)}))})})}NoAplicaPaso(t){console.log(t),console.log(t.detail.checked),t.detail.checked?(this.FormCheckListPaso1.get("aisla_tierra_apl").enable(),this.FormCheckListPaso1.get("aisla_entre_fases_apl").enable(),this.FormCheckListPaso1.get("repara_chapa_apl").enable(),this.FormCheckListPaso1.get("montaje_estator_apl").enable(),this.FormCheckListPaso1.get("idestado_revision_paso1_cmc").enable()):(this.FormCheckListPaso1.get("aisla_tierra_apl").disable(),this.FormCheckListPaso1.get("aisla_entre_fases_apl").disable(),this.FormCheckListPaso1.get("repara_chapa_apl").disable(),this.FormCheckListPaso1.get("montaje_estator_apl").disable(),this.FormCheckListPaso1.get("idestado_revision_paso1_cmc").disable()),this.toggle1(t),this.toggle2(t),this.toggle3(t),this.toggle4(t)}toggle1(t){console.log(t),console.log(t.detail),t.detail.checked?(this.FormCheckListPaso1.get("aisla_tierra_cmc").enable(),this.FormCheckListPaso1.get("aisla_tierra_obs_cmc").enable()):(this.FormCheckListPaso1.get("aisla_tierra_cmc").disable(),this.FormCheckListPaso1.get("aisla_tierra_obs_cmc").disable())}toggle2(t){t.detail.checked?(this.FormCheckListPaso1.get("aisla_entre_fases_cmc").enable(),this.FormCheckListPaso1.get("aisla_entre_fases_obs_cmc").enable()):(this.FormCheckListPaso1.get("aisla_entre_fases_cmc").disable(),this.FormCheckListPaso1.get("aisla_entre_fases_obs_cmc").disable())}toggle3(t){t.detail.checked?(this.FormCheckListPaso1.get("repara_chapa_cmc").enable(),this.FormCheckListPaso1.get("repara_chapa_obs_cmc").enable()):(this.FormCheckListPaso1.get("repara_chapa_cmc").disable(),this.FormCheckListPaso1.get("repara_chapa_obs_cmc").disable())}toggle4(t){t.detail.checked?(this.FormCheckListPaso1.get("montaje_estator_cubi_cmc").enable(),this.FormCheckListPaso1.get("montaje_estator_cubi_codigo_cmc").enable()):(this.FormCheckListPaso1.get("montaje_estator_cubi_cmc").disable(),this.FormCheckListPaso1.get("montaje_estator_cubi_codigo_cmc").disable())}SaveCheckNoAplicaPaso(t){this.loadingController.create({message:"Guardando Paso 1...",translucent:!0}).then(o=>{o.present()}),this.idchecklistcab=this.globalVal.idchecklistcab,this.FormCheckListPaso1.controls.idchecklistcab_paso1.setValue(this.idchecklistcab),this.globalVal.checklist_paso1_apli=t.detail.checked?"0":"1",this.ApiService.GuardarAplicaPaso(this.idchecklistcab,1,t.detail.checked).then(o=>{this.NoAplicaPaso(t),this.loadingController.dismiss()}).finally(()=>{}).catch(o=>{console.log("errror:::>>>>>>>>>",o)})}ionViewWillEnter(){let t;this.checklist_paso1_apli_ck="0"==this.globalVal.checklist_paso1_apli,this.FLoadForms(),t={detail:{checked:this.checklist_paso1_apli_ck,jc:0}},this.NoAplicaPaso(t),this.FormCheckListPaso1.controls.checklist_paso1_apli.setValue(this.checklist_paso1_apli_ck)}ngOnInit(){}}return(_=g).\u0275fac=function(t){return new(t||_)(e.Y36(l.QS),e.Y36(k.SH),e.Y36(i.HT),e.Y36(b.L),e.Y36(P.K),e.Y36(i.Br),e.Y36(A.F0),e.Y36(E.X))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-mtto-checklist-win-montaje1"]],standalone:!0,features:[e.jDz],decls:111,vars:10,consts:[["mode","ios"],["text-capitalize",""],[3,"formGroup"],["f","ngForm"],["justify","end","mode","ios","formControlName","checklist_paso1_apli",3,"ionChange"],[1,"ion-padding"],["mode","ios",1,"ion-no-padding"],["mode","ios","formControlName","aisla_tierra_apl",2,"width","50%",3,"ionChange"],["type","text","maxlength","80","formControlName","aisla_tierra_cmc"],[1,"ion-no-padding"],["position","floating"],["mode","ios","formControlName","aisla_tierra_obs_cmc",3,"autofocus","autoGrow"],["formControlName","aisla_entre_fases_apl","mode","ios",2,"width","50%",3,"ionChange"],["type","text","maxlength","80","formControlName","aisla_entre_fases_cmc"],["mode","ios","formControlName","aisla_entre_fases_obs_cmc",3,"autofocus","autoGrow"],["formControlName","repara_chapa_apl","mode","ios",2,"width","50%",3,"ionChange"],["mode","ios","formControlName","repara_chapa_cmc",3,"ionChange"],["value","1"],["value","2"],["value","3"],["formControlName","repara_chapa_obs_cmc",2,"width","100%","height","30px"],["formControlName","montaje_estator_apl","mode","ios",2,"width","50%",3,"ionChange"],["mode","ios","formControlName","montaje_estator_cubi_cmc"],["type","text","formControlName","montaje_estator_cubi_codigo_cmc"],["formControlName","revision_responsable_obs_cmc",2,"width","100%","height","30px",3,"disabled"],[2,"text-align","center"],["mode","ios","formControlName","idestado_revision_paso1_cmc",1,"ion_segment_3d",2,"width","110%"],["value","1","layout","icon-end",3,"click"],["name","close","color","danger"],["color","danger"],["value","2","layout","icon-end",3,"click"],["color","success","name","checkmark"],["color","success"],["value","3","layout","icon-end",3,"disabled","click"],["name","star"],["color","secondary"],["value","4","layout","icon-end",3,"disabled","click"],["color","warning","name","alert"],["color","warning"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-item")(3,"ion-title",1)(4,"ion-label"),e._uU(5,"VERIFICACION DE ESTATOR "),e.TgZ(6,"p"),e._uU(7,"CONTROL DE MOTOR ELECTRICO"),e.qZA()()(),e.TgZ(8,"form",2,3)(10,"ion-toggle",4),e.NdJ("ionChange",function(a){return s.SaveCheckNoAplicaPaso(a)}),e._uU(11,"Aplica Paso? "),e.qZA()()()()(),e.TgZ(12,"ion-content",5)(13,"form",2,3)(15,"ion-list",6)(16,"ion-item-divider")(17,"ion-toggle",7),e.NdJ("ionChange",function(a){return s.toggle1(a)}),e._uU(18," AISLAMIENTO A TIERRA "),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-label")(21,"p"),e._uU(22,"PRUEBA DE AISLAMIENTO(M\u2126)"),e.qZA(),e._UZ(23,"ion-input",8),e.qZA()(),e.TgZ(24,"ion-item",9)(25,"ion-label",10),e._uU(26," OBSERVACIONES "),e.qZA(),e._UZ(27,"ion-textarea",11),e.qZA(),e.TgZ(28,"ion-item-divider")(29,"ion-toggle",12),e.NdJ("ionChange",function(a){return s.toggle2(a)}),e._uU(30," AISLAMIENTO ENTRE FASES "),e.qZA()(),e.TgZ(31,"ion-item")(32,"ion-label")(33,"p"),e._uU(34,"PRUEBA DE AISLAMIENTO(M\u2126)"),e.qZA(),e._UZ(35,"ion-input",13),e.qZA()(),e.TgZ(36,"ion-item")(37,"ion-label",10),e._uU(38," OBSERVACIONES "),e.qZA(),e._UZ(39,"ion-textarea",14),e.qZA(),e.TgZ(40,"ion-item-divider")(41,"ion-toggle",15),e.NdJ("ionChange",function(a){return s.toggle3(a)}),e._uU(42," REPARACION DE CHAPAS "),e.qZA()(),e.TgZ(43,"ion-item")(44,"ion-label")(45,"ion-segment",16),e.NdJ("ionChange",function(a){return s.onTouched(a)}),e.TgZ(46,"ion-segment-button",17)(47,"ion-label"),e._uU(48,"NO APLICA"),e.qZA()(),e.TgZ(49,"ion-segment-button",18)(50,"ion-label"),e._uU(51,"SOLICITADO"),e.qZA()(),e.TgZ(52,"ion-segment-button",19)(53,"ion-label"),e._uU(54,"REPARACION OK"),e.qZA()()()()(),e.TgZ(55,"ion-item")(56,"ion-label",10),e._uU(57," OBSERVACIONES "),e.qZA(),e._UZ(58,"ion-textarea",20),e.qZA(),e.TgZ(59,"ion-item-divider")(60,"ion-toggle",21),e.NdJ("ionChange",function(a){return s.toggle4(a)}),e._uU(61," MONTAJE DE ESTATOR EN CUBIERTA DE ESTATOR "),e.qZA()(),e.TgZ(62,"ion-item")(63,"ion-label")(64,"p"),e._uU(65,"ESTADO DEL MOTOR"),e.qZA(),e.TgZ(66,"ion-segment",22)(67,"ion-segment-button",17)(68,"ion-label"),e._uU(69,"REBOBINADO"),e.qZA()(),e.TgZ(70,"ion-segment-button",18)(71,"ion-label"),e._uU(72,"RECUPERADO"),e.qZA()()()()(),e.TgZ(73,"ion-item")(74,"ion-label")(75,"p"),e._uU(76,"CODIGO DE ESTATOR"),e.qZA(),e._UZ(77,"ion-input",23),e.qZA()(),e.TgZ(78,"ion-item-divider"),e._uU(79," SUPERVISOR RESPONSABLE "),e.qZA(),e.TgZ(80,"ion-item")(81,"ion-label")(82,"p"),e._uU(83,"OBSERVACIONES:"),e.qZA(),e._UZ(84,"ion-textarea",24),e.qZA()(),e._UZ(85,"ion-item"),e.qZA()()(),e.TgZ(86,"ion-footer")(87,"form",2,3)(89,"ion-grid")(90,"ion-row"),e._UZ(91,"ion-col"),e.TgZ(92,"ion-col",25)(93,"ion-segment",26)(94,"ion-segment-button",27),e.NdJ("click",function(){return s.SaveFormBorradorPaso1()}),e._UZ(95,"ion-icon",28),e.TgZ(96,"ion-label",29),e._uU(97,"BORRADOR"),e.qZA()(),e.TgZ(98,"ion-segment-button",30),e.NdJ("click",function(){return s.SaveFormTerminadoPaso1()}),e._UZ(99,"ion-icon",31),e.TgZ(100,"ion-label",32),e._uU(101,"TERMINADO"),e.qZA()(),e.TgZ(102,"ion-segment-button",33),e.NdJ("click",function(){return s.SaveFormTerminadoPaso1()}),e._UZ(103,"ion-icon",34),e.TgZ(104,"ion-label",35),e._uU(105,"VERIFICADO"),e.qZA()(),e.TgZ(106,"ion-segment-button",36),e.NdJ("click",function(){return s.SaveFormTerminadoPaso1()}),e._UZ(107,"ion-icon",37),e.TgZ(108,"ion-label",38),e._uU(109,"RECHAZADO"),e.qZA()()()(),e._UZ(110,"ion-col"),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",s.FormCheckListPaso1),e.xp6(5),e.Q6J("formGroup",s.FormCheckListPaso1),e.xp6(14),e.Q6J("autofocus",!0)("autoGrow",!0),e.xp6(12),e.Q6J("autofocus",!0)("autoGrow",!0),e.xp6(45),e.Q6J("disabled",s.disableButtonPaso1),e.xp6(3),e.Q6J("formGroup",s.FormCheckListPaso1),e.xp6(15),e.Q6J("disabled",s.disableButtonPaso1),e.xp6(4),e.Q6J("disabled",s.disableButtonPaso1))},dependencies:[i.Pc,i.wI,i.W2,i.fr,i.jY,i.Gu,i.gu,i.pK,i.Ie,i.rH,i.Q$,i.q_,i.Nd,i.cJ,i.GO,i.g2,i.wd,i.ho,i.sr,i.w,i.QI,i.j9,C.ez,l.u5,l._Y,l.JJ,l.JL,l.nD,l.UX,l.sg,l.u],styles:["ion-item[_ngcontent-%COMP%]{--highlight-height: 2px;--highlight-color-focused: #43e7f3;--highlight-color-valid: #6f58d8;--highlight-color-invalid: red}ion-segment[_ngcontent-%COMP%]{width:75%}"]}),g})()}}]);