"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3056],{3056:(x,h,l)=>{l.r(h),l.d(h,{MttoWinOrdenTrabajo6Page:()=>v});var m=l(5861),u=l(6814),c=l(95),a=l(6728),e=l(6242),C=l(5472),M=l(6172),T=l(2014),A=l(1991);const p=()=>({standalone:!0});function b(s,_){if(1&s){const r=e.EpF();e.TgZ(0,"ion-datetime",18),e.NdJ("ngModelChange",function(o){e.CHM(r);const n=e.oxw();return e.KtG(n.ng_fch_entrega_mtto=o)}),e.qZA()}if(2&s){const r=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",r.ng_fch_entrega_mtto)("ngModelOptions",e.DdM(4,p))}}function O(s,_){if(1&s){const r=e.EpF();e.TgZ(0,"ion-datetime",19),e.NdJ("ngModelChange",function(o){e.CHM(r);const n=e.oxw();return e.KtG(n.ng_fch_entrega_mtto2=o)}),e.qZA()}if(2&s){const r=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",r.ng_fch_entrega_mtto2)("ngModelOptions",e.DdM(4,p))}}function E(s,_){if(1&s&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.qZA()),2&s){const r=_.$implicit;e.Q6J("value",r.codigo),e.xp6(1),e.hij("",r.nombre," ")}}function P(s,_){if(1&s){const r=e.EpF();e.TgZ(0,"ion-item",21),e.NdJ("click",function(o){const i=e.CHM(r).$implicit,d=e.oxw();return e.KtG(d.mostrarEliminar6(o,i))}),e.TgZ(1,"ion-label",22)(2,"p"),e._uU(3," Fecha y Hora de Inicio:\xa0"),e.TgZ(4,"ion-text",23),e._uU(5),e.qZA(),e._uU(6," Fecha y Hora Fin:\xa0"),e.TgZ(7,"ion-text",24),e._uU(8),e.qZA(),e._uU(9," Estado:\xa0"),e.TgZ(10,"ion-text",25),e._uU(11),e.qZA(),e._uU(12," Horas:\xa0"),e.TgZ(13,"ion-text",26),e._uU(14),e.qZA(),e._uU(15," \xa0 "),e.qZA()()()}if(2&s){const r=_.$implicit,t=e.oxw();e.xp6(1),e.Q6J("hidden",t.scanActive),e.xp6(4),e.hij("",r.ot_fech_inicio," \xa0"),e.xp6(3),e.hij("",r.ot_fech_fin," \xa0"),e.xp6(2),e.s9C("color",r.color_estado),e.xp6(1),e.hij("",r.estado," \xa0"),e.xp6(3),e.hij("",r.tiempo_diferencia," \xa0")}}let v=(()=>{var s;class _{constructor(t,o,n,i,d,g,f,F){this.modalCtrl=t,this.alertController=o,this.loadingController=n,this.globalVal=i,this.storage=d,this.formBuilder=g,this.ApiService=f,this.navCtrl=F,this.ArrayItemsSelectedDesti=[],this.filas=[],this.scanActive=!0,this.checklist_paso1_apli_ck=!1,this.FormCheckListPaso6=this.formBuilder.group({reb_motor:[""],fch_entrega_mtto:[""],fch_entrega_mtto2:[""],cod_list:[""],id_orden_trab_cab:this.globalVal.id_orden_trab_cab})}mostrarConfirmacion6(){var t=this;return(0,m.Z)(function*(){yield(yield t.alertController.create({header:"Confirmaci\xf3n",message:"\xbfDesea realizar esta acci\xf3n?",cssClass:"alerta-confirma",mode:"ios",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Aceptar",handler:()=>{t.SaveFormTerminadoPaso6()}}]})).present()})()}mostrarEliminar6(t,o){var n=this;return(0,m.Z)(function*(){console.log(t,o),yield(yield n.alertController.create({header:"Alerta",message:"\xbfDesea eliminar el registro?",cssClass:"alerta-confirma",mode:"ios",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Acci\xf3n cancelada")}},{text:"Aceptar",handler:()=>{n.dellistPaso6(o)}}]})).present()})()}ionViewWillEnter(){let t;this.checklist_paso1_apli_ck="0"==this.globalVal.checklist_paso1_apli,this.FLoadForms(),t={detail:{checked:this.checklist_paso1_apli_ck,jc:0}}}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(o=>{o.present(),this.ApiService.FormFindPaso6().then(n=>{this.RebMotor=n.mttorrebesta;try{this.FormCheckListPaso6.setValue({})}catch(i){console.log("error:::>",i)}console.log("el id que debe pasar es",this.globalVal.id_orden_trab_cab)}),this.ApiService.FormFindPaso61(this.globalVal.id_orden_trab_cab).then(n=>{this.listmotor=n.list;try{this.FormCheckListPaso6.setValue({})}catch(i){console.log("error:::>",i)}}).finally(()=>{this.loadingController.dismiss()})})}dellistPaso6(t){var o=this;return(0,m.Z)(function*(){o.loadingController.create({message:"Eliminando Registro",translucent:!0}).then(i=>{i.present()}),yield o.ApiService.ElminarlistPaso6(t).then(function(){var i=(0,m.Z)(function*(d){o.loadingController.dismiss();let g="0"==d[0].o_nres?"alerta-error":"alerta-ok";yield(yield o.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"ENTREGA MOTOR",cssClass:g,mode:"ios",animated:!0,message:d[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada")}}]})).present()});return function(d){return i.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394"),o.FLoadForms()}).catch(i=>{console.log("errror:::>>>>>>>>>",i)})})()}SaveFormTerminadoPaso6(){var t=this;return(0,m.Z)(function*(){if(t.FormCheckListPaso6.valid)t.loadingController.create({message:"Guardando Paso 1...",translucent:!0}).then(n=>{n.present()}),t.FormCheckListPaso6.controls.fch_entrega_mtto.setValue(t.ng_fch_entrega_mtto),t.FormCheckListPaso6.controls.fch_entrega_mtto2.setValue(t.ng_fch_entrega_mtto2),yield t.ApiService.GuardarFormPaso6(t.FormCheckListPaso6.value).then(function(){var n=(0,m.Z)(function*(i){t.loadingController.dismiss();let d="0"==i[0].o_nres?"alerta-error":"alerta-ok";yield(yield t.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"ENTREGA MOTOR",cssClass:d,mode:"ios",animated:!0,message:i[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada")}}]})).present()});return function(i){return n.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394"),t.FLoadForms()}).catch(n=>{console.log("errror:::>>>>>>>>>",n)});else{for(let o in t.FormCheckListPaso6.controls)t.FormCheckListPaso6.controls[o].setValue(t.FormCheckListPaso6.controls[o].value),t.FormCheckListPaso6.controls[o].markAsTouched();t.alertSiNo=t.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"GENERAL",mode:"ios",cssClass:"alerta-error",backdropDismiss:!0,message:"Falta seleccionar todos los datos",buttons:[{text:"Aceptar",role:"A",handler:()=>{}}]}).then(o=>{o.present(),o.onDidDismiss().then(n=>{})})}})()}ngOnInit(){}FNuevaCheckList(t){let o={state:{Row:t}};console.log(o),this.globalVal.checklist_paso_pivot="",this.navCtrl.navigateForward(["/mtto-win-orden-trabajo"],o)}FSelectChangeMotor(t,o){for(const n of this.RebMotor)console.log(n.codigo,t.detail.value),n.codigo==t.detail.value&&(this.FormCheckListPaso6.controls.reb_motor.setValue(n.codigo),this.MotorRebSelectedText=n.nombre)}ionViewDidEnter(){this.ng_fch_entrega_mtto=(new Date).toISOString(),this.storage.get("DEVICE_INFO").then(t=>{this.id_device=t.uuid,console.log("this.id_device::>",this.id_device)}),this.ng_fch_entrega_mtto2=(new Date).toISOString(),this.storage.get("DEVICE_INFO").then(t=>{this.id_device=t.uuid,console.log("this.id_device::>",this.id_device)})}}return(s=_).\u0275fac=function(t){return new(t||s)(e.Y36(a.IN),e.Y36(a.Br),e.Y36(a.HT),e.Y36(M.X),e.Y36(T.K),e.Y36(c.QS),e.Y36(A.k),e.Y36(C.SH))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-mtto-win-orden-trabajo6"]],standalone:!0,features:[e.jDz],decls:40,vars:7,consts:[["mode","ios"],["text-capitalize",""],["color","primary"],[1,"ion-padding"],[3,"formGroup"],["f","ngForm"],["mode","ios",1,"ion-no-padding"],["locale","es-ES","datetime","datetime1"],["trigger","popover-button","animated","true","arrow","true","mode","ios",3,"keepContentsMounted"],["locale","es-PE","datetime","datetime2"],["cancelText","Cancelar","formControlName","reb_motor","placeholder","Seleccionar Estado","color","primary","interface","action-sheet","mode","ios",3,"selectedText","ionChange"],[3,"value",4,"ngFor","ngForOf"],["expand","block",3,"click"],["name","add-outline"],["color","primary",1,"divider-with-text"],[1,"spacer"],[3,"inset"],["button","","detail","true","detail-icon","trash-outline","mode","ios",3,"click",4,"ngFor","ngForOf"],["locale","es-ES","id","datetime1","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelOptions","ngModelChange"],["locale","es-ES","id","datetime2","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelOptions","ngModelChange"],[3,"value"],["button","","detail","true","detail-icon","trash-outline","mode","ios",3,"click"],[3,"hidden"],["color","success"],["color","secondary"],[3,"color"],["color","warning"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-item")(3,"ion-title",1)(4,"ion-label"),e._uU(5,"Registro Horas Hombre"),e.qZA()()()()(),e.TgZ(6,"ion-item-divider",2),e._uU(7,"Registrar Item"),e.qZA(),e.TgZ(8,"ion-content",3)(9,"form",4,5)(11,"ion-list",6)(12,"ion-item")(13,"ion-label"),e._uU(14,"Fecha y Hora de Inicio:"),e.qZA(),e._UZ(15,"ion-datetime-button",7),e.TgZ(16,"ion-popover",8),e.YNc(17,b,1,5,"ng-template"),e.qZA()(),e.TgZ(18,"ion-item")(19,"ion-label"),e._uU(20,"Fecha y Hora Fin:"),e.qZA(),e._UZ(21,"ion-datetime-button",9),e.TgZ(22,"ion-popover",8),e.YNc(23,O,1,5,"ng-template"),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-label")(26,"p"),e._uU(27,"Estado:"),e.qZA(),e.TgZ(28,"ion-select",10),e.NdJ("ionChange",function(i){return o.FSelectChangeMotor(i,0)}),e.YNc(29,E,2,2,"ion-select-option",11),e.qZA()()(),e.TgZ(30,"ion-button",12),e.NdJ("click",function(){return o.mostrarConfirmacion6()}),e._UZ(31,"ion-icon",13),e._uU(32,"Agregar"),e.qZA()()()(),e.TgZ(33,"ion-item-divider",14)(34,"span"),e._uU(35,"Lista de Fechas"),e.qZA(),e._UZ(36,"div",15),e.qZA(),e.TgZ(37,"ion-content")(38,"ion-list",16),e.YNc(39,P,16,6,"ion-item",17),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.FormCheckListPaso6),e.xp6(7),e.Q6J("keepContentsMounted",!0),e.xp6(6),e.Q6J("keepContentsMounted",!0),e.xp6(6),e.Q6J("selectedText",o.MotorRebSelectedText),e.xp6(1),e.Q6J("ngForOf",o.RebMotor),e.xp6(9),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",o.listmotor))},dependencies:[a.Pc,a.YG,a.W2,a.x4,a.Mj,a.Gu,a.gu,a.Ie,a.rH,a.Q$,a.q_,a.t9,a.n0,a.yW,a.wd,a.sr,a.d8,a.QI,u.ez,u.sg,c.u5,c._Y,c.JJ,c.JL,c.On,c.UX,c.sg,c.u],styles:[".divider-with-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.divider-with-text[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}"]}),_})()}}]);