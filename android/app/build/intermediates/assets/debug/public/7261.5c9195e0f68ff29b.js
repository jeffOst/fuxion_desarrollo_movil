"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7261],{7261:(N,P,_)=>{_.r(P),_.d(P,{ProdListActiProgramadaPage:()=>w});var h=_(5861),m=_(6814),v=_(95),a=_(6728),p=_(6466),A=_(6471),i=_(6242),C=_(5472),E=_(6485),T=_(4248),x=_(2014);const M=["idinputsearch_equipo"];function L(r,g){1&r&&i._UZ(0,"ion-icon",22)}function O(r,g){1&r&&i._UZ(0,"ion-icon",23)}function y(r,g){1&r&&i._UZ(0,"ion-icon",24)}function D(r,g){if(1&r){const s=i.EpF();i.TgZ(0,"ion-item",25)(1,"ion-card",26)(2,"ion-item",25)(3,"ion-item",27),i.NdJ("click",function(){const o=i.CHM(s).$implicit,n=i.oxw(2);return i.KtG(n.FSetEstado(o,o.idrevisionofd,o.idmaquina,o.idofpterminado,o.idrevision_maquina,o.descripcion_pt))}),i.TgZ(4,"ion-label",25)(5,"strong")(6,"div"),i._uU(7),i.qZA()(),i.TgZ(8,"p"),i._uU(9),i.TgZ(10,"ion-text",28),i._uU(11),i.qZA(),i.TgZ(12,"ion-text",29),i._uU(13),i.qZA(),i._uU(14),i.qZA()()(),i.TgZ(15,"ion-item")(16,"ion-button",30),i._UZ(17,"ion-icon",31),i.qZA()()()()()}if(2&r){const s=g.$implicit,e=i.oxw(2);i.Q6J("hidden",e.scanActive),i.xp6(1),i.Q6J("hidden",e.scanActive),i.xp6(1),i.Q6J("hidden",e.scanActive),i.xp6(2),i.Q6J("hidden",e.scanActive),i.xp6(2),i.Jzz("color:",s.color_reproceso,";"),i.xp6(1),i.Oqu(s.descripcion_pt),i.xp6(2),i.hij(" ",s.EQUIPOID," "),i.xp6(2),i.AsE("Cantidad: ",s.cantidad," | Cnt. Pendiente: ",s.cantidad_pendiente," \xa0"),i.xp6(2),i.Oqu(s.correorden),i.xp6(1),i.hij(" ",s.avatar," "),i.xp6(3),i.Q6J("hidden",e.scanActive)}}function Z(r,g){if(1&r&&(i.TgZ(0,"ion-item-group")(1,"ion-item-divider",17),i.YNc(2,L,1,0,"ion-icon",18)(3,O,1,0,"ion-icon",19)(4,y,1,0,"ion-icon",20),i._uU(5),i.qZA(),i.YNc(6,D,18,14,"ion-item",21),i.qZA()),2&r){const s=g.$implicit,e=i.oxw();i.xp6(1),i.Q6J("hidden",e.scanActive),i.xp6(1),i.Q6J("ngIf","ASIGNADO"==s.key),i.xp6(1),i.Q6J("ngIf","EN PROCESO"==s.key),i.xp6(1),i.Q6J("ngIf","COMPLETADO"==s.key),i.xp6(1),i.hij(" ",s.key," "),i.xp6(1),i.Q6J("ngForOf",s.values)}}let w=(()=>{var r;class g{constructor(e,t,o,n,c,u,l){this.loadingController=e,this.prodGestionServicioService=t,this.router=o,this.navCtrl=n,this.changeRef=c,this.alertController=u,this.storage=l,this.switchButtonSegmento="",this.search_term_equipo="",this.TituloDinamico="",this.idMenu="",this.scanActive=!1;try{let d=this.router.getCurrentNavigation().extras.queryParams;console.log("navParams 00",this.router.getCurrentNavigation()),console.log("navParams 1",d),d&&(console.log("navParams 2",d[0]),this.TituloDinamico=d[1],this.idMenu=d[0])}catch{}}ngOnInit(){let e;this.changeRef.detectChanges(),this.storage.get("USER_INFO").then(t=>{e=t,console.log("localStorage_user",e),this.NombresUsuarioLocal=e.user_name,this.IdUsuarioLocal=e.user_id,console.log("ngoninit",this.NombresUsuarioLocal),""==this.NombresUsuarioLocal&&this.navCtrl.navigateForward("login")}).catch(t=>{console.log("errrr",t)})}asigna_titulo(e){this.TituloDinamico=e,this.load_list_principal(),console.log("asigna_titulo",this.TituloDinamico)}ionViewDidLoad(){let e=this.router.getCurrentNavigation();console.log("ionViewDidLoad::",e)}ionViewWillLeave(){let e=this.router.getCurrentNavigation();console.log("ionViewWillLeave::",e)}ionViewDidLeave(){let e=this.router.getCurrentNavigation();console.log("ionViewDidLeave::",e)}ionViewWillUnload(){let e=this.router.getCurrentNavigation();console.log("ionViewWillUnload::",e)}ionViewCanLeave(){let e=this.router.getCurrentNavigation();console.log("ionViewCanLeave::",e)}ionViewDidEnter(){console.log(this.TituloDinamico);let e=this.router.getCurrentNavigation();console.log("ionViewDidEnter",e)}ionViewWillEnter(){this.changeRef.detectChanges(),this.load_list_principal()}ionViewCanEnter(){let e=this.router.getCurrentNavigation();console.log("ionViewCanEnter",e)}start_scan_qr(e){var t=this;return(0,h.Z)(function*(){if(t.idinputsearch_equipo.getInputElement().then(n=>{n.blur()}),yield t.checkPermiso()){t.scanActive=!0;const n=yield p.mR.startScan();n.hasContent&&(console.log(n),t.search_term_equipo=n.content,console.log("result.hasContent:::",n.hasContent),t.scanActive=!1,t.idinputsearch_equipo.readonly=!1)}})()}checkPermiso(){var e=this;return(0,h.Z)(function*(){return new Promise(function(){var t=(0,h.Z)(function*(o,n){const c=yield p.mR.checkPermission({force:!0});c.granted?o(!0):c.denied?yield(yield e.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{p.mR.openAppSettings(),o(!1)}}]})).present():o(!1)});return function(o,n){return t.apply(this,arguments)}}())})()}stopScanner(){p.mR.stopScan(),this.scanActive=!1}load_list_principal(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(t=>{t.present(),this.prodGestionServicioService.ListDatos(this.search_term_equipo,this.switchButtonSegmento,"1",this.idMenu).then(o=>{this.MultiArrayServicios=o;let n=this.MultiArrayServicios;console.log(n),this.MultiArrayServicios=this.groupByArray(n,"estado","estado"),console.log(this.MultiArrayServicios)}).finally(()=>{this.loadingController.dismiss()})})}FIniciarActvividad(e,t){e.flag_mostrar_opciones=t,this.navCtrl.navigateForward(["addserviciostodet"],{state:e})}FNuevaActvividadNp(e){let t;t={},t.maquina=this.TituloDinamico,t.idmaquina=this.idMenu,t.CONCOMPONENTE=1,t.flag_mostrar_opciones=e,t.codhru=0,t.SEQMASERV=0,this.navCtrl.navigateForward(["addserviciostodet"],{state:t})}FListarActvidades(){this.navCtrl.navigateForward(["prod-ate-serv-list-actividades"],{state:{idmenu:this.idMenu,menu:this.TituloDinamico}})}FSetEstado(e,t,o,n,c,u){var l=this;return(0,h.Z)(function*(){e.maquina=l.TituloDinamico,e.idmaquina=l.idMenu,e.idrevisionofd=t,e.idofpterminado=n,e.idrevision_maquina=c,e.Y04002=u;let d={state:e};0!=t?yield(yield l.alertController.create({header:"Atenci\xf3n",message:"Este registro est\xe1 en Proceso de Revisi\xf3n. Busque su actividad en el listado y Termine de finalizar la actividad anterior para registrar una Nueva Actividad.",buttons:[{text:"Aceptar",handler:()=>{l.navCtrl.navigateForward(["prod-ate-serv-list-actividades"],d)}}]})).present():0!=c?(e.idofpterminado="",yield(yield l.alertController.create({header:"Atenci\xf3n",message:"Ya existe un registro para esta Maquina, porfavor finalize el registro anterior.",buttons:[{text:"Aceptar",handler:()=>{l.navCtrl.navigateForward(["prod-ate-serv-list-actividades"],d)}}]})).present()):l.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],d)})()}groupByArray(e,t,o){return e.reduce(function(n,c){let u=t instanceof Function?t(c):c[t],l=n.find(d=>d&&d.key===u);return l?(l.values.push(c),l.values.sort(function(d,f){return d[o].toLowerCase().localeCompare(f[o].toLowerCase())})):n.push({key:u,values:[c]}),n},[])}sortArray(e,t,o){return o=o||1,e.sort(function(c,u){let l=0;return c[t]>u[t]?l=1*o:c[t]<u[t]&&(l=-1*o),l}),e}}return(r=g).\u0275fac=function(e){return new(e||r)(i.Y36(a.HT),i.Y36(E.Z),i.Y36(T.F0),i.Y36(C.SH),i.Y36(i.sBO),i.Y36(a.Br),i.Y36(x.K))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-prod-list-acti-programada"]],viewQuery:function(e,t){if(1&e&&i.Gf(M,5),2&e){let o;i.iGM(o=i.CRH())&&(t.idinputsearch_equipo=o.first)}},standalone:!0,features:[i.jDz],decls:23,vars:3,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],[3,"titulo"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros",3,"ngModel","ngModelChange","ionChange"],["idinputsearch_equipo",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["title","Nueva Actividad",3,"click"],["name","grid-outline"],["mode","ios",2,"align-items","center"],["fill","clear","expand","block",2,"width","50%",3,"click"],["color","primary",2,"font","size 6px"],["color","light",3,"hidden"],["name","ellipse","color","warning","slot","start",4,"ngIf"],["name","ellipse","color","tertiary","slot","start",4,"ngIf"],["name","ellipse","color","success","slot","start",4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf"],["name","ellipse","color","warning","slot","start"],["name","ellipse","color","tertiary","slot","start"],["name","ellipse","color","success","slot","start"],[3,"hidden"],["expand","full","color","light","size","large","button","true",3,"hidden"],[2,"width","100%",3,"click"],["color","secondary"],["color","primary"],["expand","block","color","white","size","small","slot","end","title","Iniciar Actividad"],["expand","block","color","dark","size","small","name","play-forward",3,"hidden"]],template:function(e,t){1&e&&(i.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),i._UZ(4,"app-header",3),i.qZA(),i.TgZ(5,"ion-col",4),i._UZ(6,"ion-label",5),i.qZA()()()(),i.TgZ(7,"ion-content")(8,"ion-item")(9,"ion-searchbar",6,7),i.NdJ("ngModelChange",function(n){return t.search_term_equipo=n})("ionChange",function(){return t.load_list_principal()}),i.qZA(),i.TgZ(11,"ion-icon",8,9),i.NdJ("click",function(){return t.load_list_principal()}),i.qZA()(),i.YNc(13,Z,7,6,"ion-item-group",10),i.TgZ(14,"ion-fab",11)(15,"ion-fab-button",12),i.NdJ("click",function(){return t.FNuevaActvividadNp(1)}),i._UZ(16,"ion-icon",13),i.qZA()()(),i.TgZ(17,"ion-footer")(18,"ion-card",14)(19,"ion-button",15),i.NdJ("click",function(){return t.FListarActvidades()}),i.TgZ(20,"ion-label",16),i._UZ(21,"ion-icon",13),i._uU(22," Orden de Fabricacion en Proceso "),i.qZA()()()()),2&e&&(i.xp6(4),i.MGl("titulo","Trabajos Programados ",t.TituloDinamico,""),i.xp6(5),i.Q6J("ngModel",t.search_term_equipo),i.xp6(4),i.Q6J("ngForOf",t.MultiArrayServicios))},dependencies:[a.Pc,a.YG,a.PM,a.wI,a.W2,a.IJ,a.W4,a.fr,a.jY,a.gu,a.Ie,a.rH,a.Ub,a.Q$,a.Nd,a.VI,a.yW,a.sr,a.j9,m.ez,m.sg,m.O5,v.u5,v.JJ,v.On,A.G],styles:['ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.scanner-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:100px;width:100vw;height:50px;z-index:11}.scan-box[_ngcontent-%COMP%]{border:2px solid #fff;box-shadow:0 0 0 100vmax #00000080;content:"";display:block;left:50%;height:300px;position:absolute;top:50%;transform:translate(-50%,-50%);width:300px}']}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),g})()}}]);