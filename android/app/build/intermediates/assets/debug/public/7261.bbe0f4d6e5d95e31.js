"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7261,6485,5610,531,6702,6026],{6485:(J,N,g)=>{g.d(N,{Z:()=>T});var y=g(2519),O=g(6242),S=g(9862);let T=(()=>{var t;class L{constructor(i){this.httpClient=i,this.urlApiProd=y.N.UrlDomainLocal+"aw_modulos/prod/api/CAtencionServicios.php"}ListDatos(i,o,r,a){let n=JSON.stringify({s:i,acc:1,tipo:o,idtablet:r,idmenu:a});return this.httpClient.post(this.urlApiProd,n).toPromise().then(l=>l)}FUpdateEstadoServicio(i,o,r,a,n,l){let p=JSON.stringify({idofpterminado:i,acc:2,value:o,id_usuario_local:r,id_dispositivo:a,avatar:n,idasignaestacionof:l});return this.httpClient.post(this.urlApiProd,p).toPromise().then(P=>P)}ListSolsexQr(i,o,r,a,n){let l=JSON.stringify({idofpterminado:i,acc:2,value:o,id_usuario_local:r,id_dispositivo:a,avatar:n});return this.httpClient.post(this.urlApiProd,l).toPromise().then(p=>p)}load_cbos_pieza_material_maquina(i,o,r){let a=JSON.stringify({acc:3,id_usuario_local:o,id_dispositivo:r,idtipserv:i});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}ListFindPersonal(i,o,r){let a=JSON.stringify({acc:4,s:i,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}ListFindServiciosByPieza(i,o,r,a,n,l){let p=JSON.stringify({acc:5,s:i,idpieza:o,tipServicio:r,idusu:a,iddevice:n,nomclase:l});return this.httpClient.post(this.urlApiProd,p).toPromise().then(P=>P)}agregarServiciosByPieza(i,o,r,a,n,l){let p=JSON.stringify({acc:32,s:i,nomclase:l,idpieza:o,tipServicio:r,idusu:a,iddevice:n});return this.httpClient.post(this.urlApiProd,p).toPromise().then(P=>P)}ListFindPiezaByActividad(i,o,r,a,n,l,p,P){let x=JSON.stringify({acc:6,s:i,idpieza:o,tipServicio:r,idusu:a,iddevice:n,idclase:l,idsubfamilia:p,nomsubfam:P});return this.httpClient.post(this.urlApiProd,x).toPromise().then(u=>u)}SaveInicioActividad(i){let o=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}UpdateFechaInicioProd(i,o,r,a){let n=JSON.stringify({acc:28,fecha:i,pk_idservicio:o,avatar:r,idusuario:a});return this.httpClient.post(this.urlApiProd,n).toPromise().then(l=>l)}UpdateFechaFinProd(i,o,r,a){let n=JSON.stringify({acc:29,fecha:i,pk_idservicio:o,avatar:r,idusuario:a});return this.httpClient.post(this.urlApiProd,n).toPromise().then(l=>l)}ListFindActividades(i,o,r){let a=JSON.stringify({acc:9,s:i,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}ListFindActividadesHistorico(i,o,r){let a=JSON.stringify({acc:31,s:i,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}ListFindClaseByPieza(i,o,r,a,n){let l=JSON.stringify({acc:10,s:i,idpieza:o,tipServicio:r,idusu:a,iddevice:n});return this.httpClient.post(this.urlApiProd,l).toPromise().then(p=>p)}ListFindOfByClase(i,o,r,a,n,l){let p=JSON.stringify({acc:11,s:i,idsubfamilia:o,idclase:r,tipServicio:a,idusu:n,iddevice:l});return this.httpClient.post(this.urlApiProd,p).toPromise().then(P=>P)}ListFindQrByOf(i,o,r,a,n,l){let p=JSON.stringify({acc:12,s:i,idpieza:o,tipServicio:r,idusu:a,iddevice:n,nomclase:l});return this.httpClient.post(this.urlApiProd,p).toPromise().then(P=>P)}SaveControlCalidadByOf(i){let o=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}ListFindSolicitudQcByOf(i,o,r,a){let n=JSON.stringify({acc:14,s:i,idofpterminado:o,idusu:r,iddevice:a});return this.httpClient.post(this.urlApiProd,n).toPromise().then(l=>l)}load_cbos_ma00(){let i=JSON.stringify({acc:15});return this.httpClient.post(this.urlApiProd,i).toPromise().then(o=>o)}FCreaCorrelativo(){let i=JSON.stringify({acc:16});return this.httpClient.post(this.urlApiProd,i).toPromise().then(o=>o)}SaveReporteFalla(i){let o=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}SaveRelevo(i){let o=JSON.stringify(i);return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}FCreaCorrelativoRelevo(){let i=JSON.stringify({acc:18});return this.httpClient.post(this.urlApiProd,i).toPromise().then(o=>o)}load_cbo_subprocesos(i,o,r){let a=JSON.stringify({acc:20,idmaquina:i,nom_pieza:o,servicio:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}load_cbos_any_edit_ini_actvidad(i,o,r){let a=JSON.stringify({acc:22,id_usuario_local:o,id_dispositivo:r,idtipserv:i});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}ListActividadesxTecnico(i,o,r){let a=JSON.stringify({iduser:i,acc:23,horainicio_filtro:o,horafin_filtro:r});return this.httpClient.post(this.urlApiProd,a).toPromise().then(n=>n)}SaveResumenDia(i,o){let r=JSON.stringify(o);return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}LoadFormDejarPiezasCalidad(i){let o=JSON.stringify({idpt:i,acc:25});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}LoadFormIniciaActividad(i,o){let r=JSON.stringify({idpt:i,avatar:o,acc:26});return this.httpClient.post(this.urlApiProd,r).toPromise().then(a=>a)}listado_principal_resumen_horas(i,o,r,a,n){let l=JSON.stringify({s:i,acc:r,tipo:o,idtablet:"this.device.uuid",madre_hija:a,idusuario:n});return this.httpClient.post(this.urlApiProd,l).toPromise().then(p=>p)}listado_principal_cabecera(i,o,r,a,n){let l=JSON.stringify({s:i,acc:r,tipo:o,idtablet:"this.device.uuid",madre_hija:a,idusuario:n});return this.httpClient.post(this.urlApiProd,l).toPromise().then(p=>p)}}return(t=L).\u0275fac=function(i){return new(i||t)(O.LFG(S.eN))},t.\u0275prov=O.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),L})()},7261:(J,N,g)=>{g.r(N),g.d(N,{ProdListActiProgramadaPage:()=>x});var y=g(5861),O=g(6814),S=g(95),d=g(6728),E=g(6466),T=g(6471),t=g(6242),L=g(5472),D=g(6485),i=g(4248),o=g(2014);const r=["idinputsearch_equipo"];function a(u,f){1&u&&t._UZ(0,"ion-icon",22)}function n(u,f){1&u&&t._UZ(0,"ion-icon",23)}function l(u,f){1&u&&t._UZ(0,"ion-icon",24)}function p(u,f){if(1&u){const _=t.EpF();t.TgZ(0,"ion-item",25)(1,"ion-card",26)(2,"ion-item",25)(3,"ion-item",27),t.NdJ("click",function(){const c=t.CHM(_).$implicit,h=t.oxw(2);return t.KtG(h.FSetEstado(c))}),t.TgZ(4,"ion-label",25)(5,"strong")(6,"div"),t._uU(7),t.qZA()(),t.TgZ(8,"p"),t._uU(9),t.TgZ(10,"ion-text",28),t._uU(11),t.qZA(),t.TgZ(12,"ion-text",29),t._uU(13),t.qZA(),t._uU(14,"\xa0 "),t._uU(15),t.TgZ(16,"ion-badge",30),t._uU(17),t.qZA()()()(),t.TgZ(18,"ion-item")(19,"ion-button",31),t._UZ(20,"ion-icon",32),t.qZA()()()()()}if(2&u){const _=f.$implicit,e=t.oxw(2);t.Q6J("hidden",e.scanActive),t.xp6(1),t.Q6J("hidden",e.scanActive),t.xp6(1),t.Q6J("hidden",e.scanActive),t.xp6(2),t.Q6J("hidden",e.scanActive),t.xp6(2),t.Jzz("color:",_.color_reproceso,";"),t.xp6(1),t.Oqu(_.descripcion_pt),t.xp6(2),t.hij(" ",_.EQUIPOID," "),t.xp6(2),t.hij("Cantidad: ",_.cantidad," \xa0"),t.xp6(2),t.Oqu(_.correorden),t.xp6(2),t.hij(" ",_.avatar," "),t.xp6(2),t.Oqu(_.prioridad_aof),t.xp6(3),t.Q6J("hidden",e.scanActive)}}function P(u,f){if(1&u&&(t.TgZ(0,"ion-item-group")(1,"ion-item-divider",17),t.YNc(2,a,1,0,"ion-icon",18)(3,n,1,0,"ion-icon",19)(4,l,1,0,"ion-icon",20),t._uU(5),t.qZA(),t.YNc(6,p,21,14,"ion-item",21),t.qZA()),2&u){const _=f.$implicit,e=t.oxw();t.xp6(1),t.Q6J("hidden",e.scanActive),t.xp6(1),t.Q6J("ngIf","ASIGNADO"==_.key),t.xp6(1),t.Q6J("ngIf","EN PROCESO"==_.key),t.xp6(1),t.Q6J("ngIf","COMPLETADO"==_.key),t.xp6(1),t.hij(" ",_.key," "),t.xp6(1),t.Q6J("ngForOf",_.values)}}let x=(()=>{var u;class f{constructor(e,s,c,h,m,C,A){this.loadingController=e,this.prodGestionServicioService=s,this.router=c,this.navCtrl=h,this.changeRef=m,this.alertController=C,this.storage=A,this.switchButtonSegmento="",this.search_term_equipo="",this.TituloDinamico="",this.idMenu="",this.scanActive=!1;try{let v=this.router.getCurrentNavigation().extras.queryParams;console.log("navParams 00",this.router.getCurrentNavigation()),console.log("navParams 1",v),v&&(console.log("navParams 2",v[0]),this.TituloDinamico=v[1],this.idMenu=v[0])}catch{}}ngOnInit(){let e;this.changeRef.detectChanges(),this.storage.get("USER_INFO").then(s=>{e=s,console.log("localStorage_user",e),this.NombresUsuarioLocal=e.user_name,this.IdUsuarioLocal=e.user_id,console.log("ngoninit",this.NombresUsuarioLocal),""==this.NombresUsuarioLocal&&this.navCtrl.navigateForward("login")}).catch(s=>{console.log("errrr",s)})}asigna_titulo(e){this.TituloDinamico=e,this.load_list_principal(),console.log("asigna_titulo",this.TituloDinamico)}ionViewDidLoad(){let e=this.router.getCurrentNavigation();console.log("ionViewDidLoad::",e)}ionViewWillLeave(){let e=this.router.getCurrentNavigation();console.log("ionViewWillLeave::",e)}ionViewDidLeave(){let e=this.router.getCurrentNavigation();console.log("ionViewDidLeave::",e)}ionViewWillUnload(){let e=this.router.getCurrentNavigation();console.log("ionViewWillUnload::",e)}ionViewCanLeave(){let e=this.router.getCurrentNavigation();console.log("ionViewCanLeave::",e)}ionViewDidEnter(){console.log(this.TituloDinamico);let e=this.router.getCurrentNavigation();console.log("ionViewDidEnter",e)}ionViewWillEnter(){this.changeRef.detectChanges(),this.load_list_principal()}ionViewCanEnter(){let e=this.router.getCurrentNavigation();console.log("ionViewCanEnter",e)}start_scan_qr(e){var s=this;return(0,y.Z)(function*(){if(s.idinputsearch_equipo.getInputElement().then(h=>{h.blur()}),yield s.checkPermiso()){s.scanActive=!0;const h=yield E.mR.startScan();h.hasContent&&(console.log(h),s.search_term_equipo=h.content,console.log("result.hasContent:::",h.hasContent),s.scanActive=!1,s.idinputsearch_equipo.readonly=!1)}})()}checkPermiso(){var e=this;return(0,y.Z)(function*(){return new Promise(function(){var s=(0,y.Z)(function*(c,h){const m=yield E.mR.checkPermission({force:!0});m.granted?c(!0):m.denied?yield(yield e.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{E.mR.openAppSettings(),c(!1)}}]})).present():c(!1)});return function(c,h){return s.apply(this,arguments)}}())})()}stopScanner(){E.mR.stopScan(),this.scanActive=!1}load_list_principal(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(s=>{s.present(),this.prodGestionServicioService.ListDatos(this.search_term_equipo,this.switchButtonSegmento,"1",this.idMenu).then(c=>{this.MultiArrayServicios=c;let h=this.MultiArrayServicios;console.log(h),this.MultiArrayServicios=this.groupByArray(h,"estado","estado"),console.log(this.MultiArrayServicios)}).finally(()=>{this.loadingController.dismiss()})})}FIniciarActvividad(e){e.maquina=this.TituloDinamico,this.navCtrl.navigateForward(["addserviciostodet"],{state:e})}FNuevaActvividadNp(){let e;e={},e.CONCOMPONENTE=1,this.navCtrl.navigateForward(["addserviciostodet"],{state:e})}FListarActvidades(){console.log("VERIFCAR AQUI, ENVIA ESTAS VARIABLES"),console.log(this.idMenu),console.log(this.TituloDinamico),this.navCtrl.navigateForward(["prod-ate-serv-list-actividades"],{state:{idmenu:this.idMenu,menu:this.TituloDinamico}})}FSetEstado(e){e.maquina=this.TituloDinamico,this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],{state:e})}groupByArray(e,s,c){return e.reduce(function(h,m){let C=s instanceof Function?s(m):m[s],A=h.find(v=>v&&v.key===C);return A?(A.values.push(m),A.values.sort(function(v,M){return v[c].toLowerCase().localeCompare(M[c].toLowerCase())})):h.push({key:C,values:[m]}),h},[])}sortArray(e,s,c){return c=c||1,e.sort(function(m,C){let A=0;return m[s]>C[s]?A=1*c:m[s]<C[s]&&(A=-1*c),A}),e}}return(u=f).\u0275fac=function(e){return new(e||u)(t.Y36(d.HT),t.Y36(D.Z),t.Y36(i.F0),t.Y36(L.SH),t.Y36(t.sBO),t.Y36(d.Br),t.Y36(o.K))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-prod-list-acti-programada"]],viewQuery:function(e,s){if(1&e&&t.Gf(r,5),2&e){let c;t.iGM(c=t.CRH())&&(s.idinputsearch_equipo=c.first)}},standalone:!0,features:[t.jDz],decls:23,vars:3,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],[3,"titulo"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros",3,"ngModel","ngModelChange","ionChange"],["idinputsearch_equipo",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["title","Nueva Actividad",3,"click"],["name","grid-outline"],["mode","ios",2,"align-items","center"],["fill","clear","expand","block",2,"width","50%",3,"click"],["color","primary",2,"font","size 6px"],["color","light",3,"hidden"],["name","ellipse","color","warning","slot","start",4,"ngIf"],["name","ellipse","color","tertiary","slot","start",4,"ngIf"],["name","ellipse","color","success","slot","start",4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf"],["name","ellipse","color","warning","slot","start"],["name","ellipse","color","tertiary","slot","start"],["name","ellipse","color","success","slot","start"],[3,"hidden"],["expand","full","color","light","size","large","button","true",3,"hidden"],[2,"width","100%",3,"click"],["color","secondary"],["color","primary"],["color","warning"],["expand","block","color","white","size","small","slot","end","title","Iniciar Actividad"],["expand","block","color","dark","size","small","name","play-forward",3,"hidden"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),t._UZ(4,"app-header",3),t.qZA(),t.TgZ(5,"ion-col",4),t._UZ(6,"ion-label",5),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-item")(9,"ion-searchbar",6,7),t.NdJ("ngModelChange",function(h){return s.search_term_equipo=h})("ionChange",function(){return s.load_list_principal()}),t.qZA(),t.TgZ(11,"ion-icon",8,9),t.NdJ("click",function(){return s.load_list_principal()}),t.qZA()(),t.YNc(13,P,7,6,"ion-item-group",10),t.TgZ(14,"ion-fab",11)(15,"ion-fab-button",12),t.NdJ("click",function(){return s.FNuevaActvividadNp()}),t._UZ(16,"ion-icon",13),t.qZA()()(),t.TgZ(17,"ion-footer")(18,"ion-card",14)(19,"ion-button",15),t.NdJ("click",function(){return s.FListarActvidades()}),t.TgZ(20,"ion-label",16),t._UZ(21,"ion-icon",13),t._uU(22," Orden de Fabricacion en Proceso "),t.qZA()()()()),2&e&&(t.xp6(4),t.s9C("titulo",s.TituloDinamico),t.xp6(5),t.Q6J("ngModel",s.search_term_equipo),t.xp6(4),t.Q6J("ngForOf",s.MultiArrayServicios))},dependencies:[d.Pc,d.yp,d.YG,d.PM,d.wI,d.W2,d.IJ,d.W4,d.fr,d.jY,d.gu,d.Ie,d.rH,d.Ub,d.Q$,d.Nd,d.VI,d.yW,d.sr,d.j9,O.ez,O.sg,O.O5,S.u5,S.JJ,S.On,T.G],styles:['ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.scanner-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:100px;width:100vw;height:50px;z-index:11}.scan-box[_ngcontent-%COMP%]{border:2px solid #fff;box-shadow:0 0 0 100vmax #00000080;content:"";display:block;left:50%;height:300px;position:absolute;top:50%;transform:translate(-50%,-50%);width:300px}']}),u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),f})()}}]);