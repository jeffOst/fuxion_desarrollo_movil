"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6431,8762],{7941:(v,f,l)=>{l.d(f,{o:()=>e});var P=l(5861),C=l(2519),r=l(6242),h=l(9862),t=l(2014);let e=(()=>{var m;class b{constructor(o,_){this.httpClient=o,this.storage=_,this.DirectorioImg=C.N.UrlDomainLocal+"aw_file/adjuntos/img_recinado/",this.urlApiProd=C.N.UrlDomainLocal+"aw_modulos/mante/CApRecinadoCable.php"}list_tipo_cable(){let o=this.urlApiProd;return JSON.stringify({acc:1,idtablet:"this.device.uuid"}),this.httpClient.get(o+"?acc=1&idtablet=this.device.uuid").pipe()}getImages(o){return this.httpClient.get(`${this.urlApiProd}?acc=5&id=`+o)}uploadImage(o,_,d){try{let c=new FormData;c.append("id",_),c.append("acc","3"),c.append("type","image/png");for(let s=0;s<o.length;s++)console.log("image::ruta=>::>",o[s]),c.append("images[]",o[s],`image_${s}.jpg`);return console.log("Im\xe1genes enviadas exitosamente al API.",c),this.httpClient.post(this.urlApiProd,c)}catch(c){console.error("Error al enviar im\xe1genes al API:",c)}}uploadImage2(o,_,d){console.log("formData:blobData::>",o),o=btoa(o);let c=JSON.stringify({file:o,acc:3,id:_});return this.httpClient.post(this.urlApiProd,c)}uploadImageFile(o){const _=o.name.split(".").pop(),d=new FormData;return d.append("file",o,`myimage.${_}`),d.append("name",o.name),this.httpClient.post(`${this.urlApiProd}?acc=4`,d)}deleteImage(o){return this.httpClient.delete(`${this.urlApiProd}?acc=7&id=${o}`)}ListInspCablesPend(o){let _=this.urlApiProd;return JSON.stringify({s:encodeURI(o),acc:1,idtablet:"this.device.uuid"}),this.httpClient.get(_+"?acc=8&s="+encodeURI(o)+"&idtablet=this.device.uuid").pipe()}load_form_insp_cable(o,_){let d=this.urlApiProd,c=JSON.stringify({id:o,acc:2,idtablet:"this.device.uuid",idtecnico:_});return this.httpClient.post(d,c).toPromise().then(s=>s)}load_form_entrega_cable(o,_){let d=this.urlApiProd,c=JSON.stringify({id:o,acc:11,idtablet:"this.device.uuid",idtecnico:_});return this.httpClient.post(d,c).toPromise().then(s=>s)}upload_img(o){}listado_equipos_service(o,_,d,c){let s=this.urlApiProd,n=JSON.stringify({s:o,acc:d,tipo:_,idtablet:"this.device.uuid",madre_hija:c});return this.httpClient.post(s,n).toPromise().then(u=>u)}GuardarFormulario(o){var _=this;return(0,P.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let d,c=_.urlApiProd,s=JSON.stringify(o);return _.httpClient.post(c+"?acc=6",s).toPromise().then(n=>{console.log(n),d=n,_.confirmSaveBd=d[0].o_nres},n=>{console.log(n,"Error- something is wrong!")})})()}GuardarFormEntregaCable(o){var _=this;return(0,P.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let d,c=_.urlApiProd,s=JSON.stringify(o);return _.httpClient.post(c+"?acc=10",s).toPromise().then(n=>{console.log(n),d=n,_.confirmSaveBd=d[0].o_nres},n=>{console.log(n,"Error- something is wrong!")})})()}}return(m=b).\u0275fac=function(o){return new(o||m)(r.LFG(h.eN),r.LFG(t.K))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),b})()},6431:(v,f,l)=>{l.r(f),l.d(f,{MttoRecinaEntregaCablePage:()=>s});var P=l(5861),C=l(6814),r=l(6728),h=l(8762),t=l(95),e=l(6242),m=l(5472),b=l(4248),M=l(7941),o=l(2014),_=l(9862);function d(n,u){if(1&n){const g=e.EpF();e.TgZ(0,"ion-datetime",22),e.NdJ("ngModelChange",function(a){e.CHM(g);const p=e.oxw();return e.KtG(p.fchactual=a)}),e.qZA()}if(2&n){const g=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",g.fchactual)}}const c=n=>({"is-invalid":n});let s=(()=>{var n;class u{constructor(i,a,p,E,R,D,T,O,A,Z,U,I,q,F){this.navCtrl=i,this.formBuilder=a,this.loadingController=p,this.route=E,this.api=R,this.modalCtrl=D,this.plt=T,this.alertController=O,this.toastController=A,this.actionSheetController=Z,this.actionSheetCtrl=U,this.ref=I,this.storage=q,this.http=F,this.fchactual=(new Date).toISOString(),this.FormRecinadoEntrega=this.formBuilder.group({idrecinadocableentrega:new t.NI(""),correlativo_rce:new t.NI(""),idrecinadocablecab_rce:new t.NI(""),codsmg:new t.NI("",t.kI.required),idequipo_rce:new t.NI(""),idordentrabajocab_rce:new t.NI("0"),idestadocable1_rce:new t.NI("",t.kI.required),idestadocable2_rce:new t.NI(""),detalle_rce:new t.NI(""),nroot:new t.NI("",t.kI.required),fch_reg_ot_rce:new t.NI(""),fchregistro_rce:new t.NI("")}),console.log("this.route.snapshot.paramMap",this.route.snapshot.paramMap),this.ClsId=this.route.snapshot.paramMap.get("id"),this.idrecinadocableentrega=this.route.snapshot.paramMap.get("identrega"),this.FormRecinadoEntrega.controls.idrecinadocablecab_rce.setValue(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.fchactual=(new Date).toISOString(),console.log("this.idrecinadocableentrega",this.idrecinadocableentrega),"0"!=this.idrecinadocableentrega&&this.api.load_form_entrega_cable(this.idrecinadocableentrega,"localStorage.user_id").then(i=>{this.EditarInspeccionLoad(i)})}EditarInspeccionLoad(i){this.EditDataRest=i,console.log("this.EditDataRest ",this.EditDataRest);try{this.FormRecinadoEntrega.setValue({idrecinadocableentrega:this.EditDataRest[0].idrecinadocableentrega,correlativo_rce:this.EditDataRest[0].correlativo_rce,idrecinadocablecab_rce:this.EditDataRest[0].idrecinadocablecab_rce,codsmg:this.EditDataRest[0].codsmg,idequipo_rce:this.EditDataRest[0].idequipo_rce,idordentrabajocab_rce:this.EditDataRest[0].idordentrabajocab_rce,idestadocable1_rce:this.EditDataRest[0].idestadocable1_rce,idestadocable2_rce:this.EditDataRest[0].idestadocable2_rce,detalle_rce:this.EditDataRest[0].detalle_rce,nroot:this.EditDataRest[0].nroot,fch_reg_ot_rce:new Date(this.EditDataRest[0].fch_reg_ot_rce).toISOString(),fchregistro_rce:new Date(this.EditDataRest[0].fchregistro_rce).toISOString()})}catch(a){console.log("error:::>",a)}console.log(":::this.FormRecinado.value.idrecinadocablecab:::::::::::::::>>"),console.log("<<<<::::::::::::::::::>>")}cancelar_ejecucion(){this.navCtrl.navigateForward("mtto-list-recinado")}open_popup_equipos(){var i=this;return(0,P.Z)(function*(){const a=yield i.modalCtrl.create({component:h.PopUpEquRecinadoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{idvaleservidetot_p:0}});return a.onDidDismiss().then(p=>{null!==p&&(i.dataReturned=p.data,i.fch_reg_ot_rce=p.data.fch_inicio_ot,i.nroot=p.data.id_orden_trab_fis_cab,i.codsmg1=p.data.idequipo,i.FormRecinadoEntrega.controls.idordentrabajocab_rce.setValue(p.data.id_orden_trab_fis_cab))}),yield a.present()})()}SaveFormEntrega(){if(this.FormRecinadoEntrega.valid)this.alertSiNo=this.alertController.create({header:"Agregar Entrega Cable",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Confirmar que desea guardar?",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(i=>{i.present(),i.onDidDismiss().then(a=>{console.log("aceptaPop::::>>",a),"A"==a.role&&this.api.GuardarFormEntregaCable(this.FormRecinadoEntrega.value).then(p=>{console.log("res:::>>>>>>>>>",p)}).finally(()=>{this.navCtrl.navigateForward(["mtto-list-recinado"])}).catch(p=>{console.log("errror:::>>>>>>>>>",p)})})});else{console.log(this.FormRecinadoEntrega.valid),console.log(this.FormRecinadoEntrega);for(let i in this.FormRecinadoEntrega.controls)this.FormRecinadoEntrega.controls[i].setValue(this.FormRecinadoEntrega.controls[i].value),this.FormRecinadoEntrega.controls[i].markAsTouched();this.alertSiNo=this.alertController.create({header:"Agregar Recinado Cable",subHeader:"",mode:"ios",backdropDismiss:!0,message:"Falta seleccionar todos los datos",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}}]}).then(i=>{i.present(),i.onDidDismiss().then(a=>{})})}}segmentChanged(i){}}return(n=u).\u0275fac=function(i){return new(i||n)(e.Y36(m.SH),e.Y36(t.qu),e.Y36(r.HT),e.Y36(b.gz),e.Y36(M.o),e.Y36(r.IN),e.Y36(m.t4),e.Y36(r.Br),e.Y36(r.yF),e.Y36(r.BX),e.Y36(r.BX),e.Y36(e.sBO),e.Y36(o.K),e.Y36(_.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mtto-recina-entrega-cable"]],standalone:!0,features:[e.jDz],decls:59,vars:17,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["color","danger",3,"click"],["name","close"],[3,"formGroup"],["f","ngForm"],["label","Equipo:","label-placement","floating","readonly","","formControlName","codsmg",3,"ngModel","ngClass","ngModelChange"],[2,"display","none"],["hidden","","formControlName","idrecinadocableentrega"],["slot","end","color","primary",3,"click"],["name","search-outline"],["label","F.Registro:","locale","es-ES","datetime","datetime"],["trigger","popover-button","animated","true","arrow","true","mode","ios",3,"keepContentsMounted"],["label","F.Reg.O.T:","label-placement","floating","readonly","","formControlName","fch_reg_ot_rce",3,"ngModel","ngModelChange"],["label","Nro O.T:","label-placement","floating","type","text","readonly","","formControlName","nroot",3,"ngModel","ngClass","ngModelChange"],["color","primary"],["formControlName","idestadocable1_rce","mode","ios",3,"ngClass","ionChange"],["value","1"],["value","2"],["formControlName","idestadocable2_rce","mode","ios",3,"ngClass","ionChange"],["type","button","expand","block",3,"click"],["locale","es-ES","id","datetime","mode","ios","displayFormat","YYYY-MM-DD","presentation","date","formControlName","fchregistro_rce",3,"preferWheel","showDefaultButtons","ngModel","ngModelChange"]],template:function(i,a){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Resinado - Entrega de Cable"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){return a.cancelar_ejecucion()}),e._UZ(6,"ion-icon",4),e._uU(7," Cancelar "),e.qZA()()()(),e.TgZ(8,"ion-content")(9,"form",5,6)(11,"ion-list")(12,"ion-item")(13,"ion-input",7),e.NdJ("ngModelChange",function(E){return a.codsmg1=E}),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"ion-input",9),e.qZA(),e.TgZ(16,"ion-button",10),e.NdJ("click",function(){return a.open_popup_equipos()}),e._UZ(17,"ion-icon",11),e.qZA()(),e.TgZ(18,"ion-item")(19,"ion-label"),e._uU(20,"F.Registro:"),e.qZA(),e._UZ(21,"ion-datetime-button",12),e.TgZ(22,"ion-popover",13),e.YNc(23,d,1,3,"ng-template"),e.qZA()(),e.TgZ(24,"ion-item")(25,"ion-input",14),e.NdJ("ngModelChange",function(E){return a.fch_reg_ot_rce=E}),e.qZA()(),e.TgZ(26,"ion-item")(27,"ion-input",15),e.NdJ("ngModelChange",function(E){return a.nroot=E}),e.qZA()(),e.TgZ(28,"ion-item-group")(29,"ion-item-divider",16)(30,"ion-label"),e._uU(31,"Cable 1"),e.qZA()(),e.TgZ(32,"ion-item")(33,"ion-label"),e._uU(34," Entregado: "),e.TgZ(35,"ion-segment",17),e.NdJ("ionChange",function(E){return a.segmentChanged(E)}),e.TgZ(36,"ion-segment-button",18)(37,"ion-label"),e._uU(38,"SI"),e.qZA()(),e.TgZ(39,"ion-segment-button",19)(40,"ion-label"),e._uU(41,"NO"),e.qZA()()()()()(),e.TgZ(42,"ion-item-group")(43,"ion-item-divider",16)(44,"ion-label"),e._uU(45,"Cable 2"),e.qZA()(),e.TgZ(46,"ion-item")(47,"ion-label"),e._uU(48," Entregado "),e.TgZ(49,"ion-segment",20),e.NdJ("ionChange",function(E){return a.segmentChanged(E)}),e.TgZ(50,"ion-segment-button",18)(51,"ion-label"),e._uU(52,"SI"),e.qZA()(),e.TgZ(53,"ion-segment-button",19)(54,"ion-label"),e._uU(55,"NO"),e.qZA()()()()()()()()(),e.TgZ(56,"ion-footer")(57,"ion-button",21),e.NdJ("click",function(){return a.SaveFormEntrega()}),e._uU(58,"Guardar Formulario"),e.qZA()()),2&i&&(e.xp6(9),e.Q6J("formGroup",a.FormRecinadoEntrega),e.xp6(4),e.Q6J("ngModel",a.codsmg1)("ngClass",e.VKq(9,c,a.FormRecinadoEntrega.get("codsmg").touched&&a.FormRecinadoEntrega.get("codsmg").invalid)),e.xp6(9),e.Q6J("keepContentsMounted",!0),e.xp6(3),e.Q6J("ngModel",a.fch_reg_ot_rce),e.xp6(2),e.Q6J("ngModel",a.nroot)("ngClass",e.VKq(11,c,a.FormRecinadoEntrega.get("nroot").touched&&a.FormRecinadoEntrega.get("nroot").invalid)),e.xp6(8),e.Q6J("ngClass",e.VKq(13,c,a.FormRecinadoEntrega.get("idestadocable1_rce").touched&&a.FormRecinadoEntrega.get("idestadocable1_rce").invalid)),e.xp6(14),e.Q6J("ngClass",e.VKq(15,c,a.FormRecinadoEntrega.get("idestadocable2_rce").touched&&a.FormRecinadoEntrega.get("idestadocable2_rce").invalid)))},dependencies:[r.Pc,r.YG,r.Sm,r.W2,r.x4,r.Mj,r.fr,r.Gu,r.gu,r.pK,r.Ie,r.rH,r.Ub,r.Q$,r.q_,r.cJ,r.GO,r.wd,r.sr,r.d8,r.QI,r.j9,C.ez,C.mk,t.u5,t._Y,t.JJ,t.JL,t.UX,t.sg,t.u]}),u})()},8762:(v,f,l)=>{l.r(f),l.d(f,{PopUpEquRecinadoPage:()=>_});var P=l(5861),C=l(6814),r=l(95),h=l(6728),t=l(6242),e=l(5472),m=l(7941),b=l(4248);const M=["idinputsearch_equipo"];function o(d,c){if(1&d){const s=t.EpF();t.TgZ(0,"ion-button",12),t.NdJ("click",function(){const g=t.CHM(s).$implicit,i=t.oxw();return t.KtG(i.seleccionar_equipo(g.codsmg,g.id_orden_trab_fis_cab,g.fch_inicio_ot))}),t.TgZ(1,"ion-col",13),t._uU(2),t.qZA(),t.TgZ(3,"ion-col",14),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",14),t._uU(6),t.qZA(),t.TgZ(7,"ion-col",14),t._uU(8),t.qZA(),t.TgZ(9,"ion-col",13),t._uU(10),t.qZA()()}if(2&d){const s=c.$implicit;t.s9C("color",s.colorfila),t.s9C("color",s.colorfila),t.xp6(2),t.Oqu(s.codsmg),t.xp6(2),t.Oqu(s.id_orden_trab_fis_cab),t.xp6(2),t.Oqu(s.fch_inicio_ot),t.xp6(2),t.Oqu(s.Y06002),t.xp6(2),t.hij(" ",s.tecnico," ")}}let _=(()=>{var d;class c{constructor(n,u,g,i,a){this.loadingController=n,this.serviceProduccion=u,this.modalCtrl=g,this.route=i,this.navParams=a,this.search_term_equipo="",this.switchButtonSegmento=""}ngOnInit(){}cancelar_listaequipos(n,u,g){var i=this;return(0,P.Z)(function*(){const a={idequipo:n,id_orden_trab_fis_cab:u,fch_inicio_ot:g};yield i.modalCtrl.dismiss(a)})()}lista_equipos(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(u=>{u.present(),this.serviceProduccion.listado_equipos_service(this.search_term_equipo,this.switchButtonSegmento,"4","H").then(g=>{this.results_equipos=g}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{this.idinputsearch_equipo.setFocus()},600)})})}seleccionar_equipo(n,u,g){this.cancelar_listaequipos(n,u,g)}}return(d=c).\u0275fac=function(n){return new(n||d)(t.Y36(h.HT),t.Y36(m.o),t.Y36(h.IN),t.Y36(b.gz),t.Y36(e.X1))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-pop-up-equ-recinado"]],viewQuery:function(n,u){if(1&n&&t.Gf(M,5),2&n){let g;t.iGM(g=t.CRH())&&(u.idinputsearch_equipo=g.first)}},standalone:!0,features:[t.jDz],decls:27,vars:2,consts:[["mode","ios"],["slot","start"],["color","danger",3,"click"],["name","close"],["show-clear-button","focus","animated","true","mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Equipos",3,"ngModel","ngModelChange","ionInput"],["idinputsearch_equipo",""],[1,"header-grid"],["size","3",1,"headgrid"],["color","dark"],["size","2",1,"headgrid"],[1,"content-grid"],["expand","full",3,"color","click",4,"ngFor","ngForOf"],["expand","full",3,"color","click"],["size","3"],["size","2"]],template:function(n,u){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Lista de Equipos"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return u.cancelar_listaequipos(0,0,0)}),t._UZ(6,"ion-icon",3),t._uU(7," Cancelar "),t.qZA()()(),t.TgZ(8,"ion-toolbar")(9,"ion-searchbar",4,5),t.NdJ("ngModelChange",function(i){return u.search_term_equipo=i})("ionInput",function(){return u.lista_equipos()}),t.qZA(),t.TgZ(11,"ion-grid",6)(12,"ion-row")(13,"ion-col",7)(14,"ion-label",8),t._uU(15,"Equipo"),t.qZA()(),t.TgZ(16,"ion-col",9),t._uU(17,"Nro O.T."),t.qZA(),t.TgZ(18,"ion-col",9),t._uU(19,"F.O.T."),t.qZA(),t.TgZ(20,"ion-col",9),t._uU(21,"Origen"),t.qZA(),t.TgZ(22,"ion-col",7),t._uU(23,"Tecnico"),t.qZA()()()()(),t.TgZ(24,"ion-content")(25,"ion-grid",10),t.YNc(26,o,11,7,"ion-button",11),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("ngModel",u.search_term_equipo),t.xp6(17),t.Q6J("ngForOf",u.results_equipos))},dependencies:[h.Pc,h.YG,h.Sm,h.wI,h.W2,h.jY,h.Gu,h.gu,h.Q$,h.Nd,h.VI,h.wd,h.sr,h.j9,C.ez,C.sg,r.u5,r.JJ,r.On],styles:['@charset "UTF-8";.ion-row[_ngcontent-%COMP%]{font-size:10px;color:#000;font-weight:700}ion-col[_ngcontent-%COMP%]{font-size:9px;color:#555}ion-col.header[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;color:#000;font-weight:700}ion-col.detail[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding:4px}.header-grid[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(auto-fill,minmax(40px,1fr));overflow-y:scroll;max-height:600px}ion-chip[_ngcontent-%COMP%]{height:25px;font-size:9px;margin-inline:0px;margin-top:0;margin-bottom:0}']}),c})()}}]);