"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1773],{1773:(T,g,s)=>{s.r(g),s.d(g,{ProdAteServDejarPiezaCalidadPage:()=>A});var M=s(5861),m=s(6814),_=s(95),n=s(6728),P=s(1811),o=s(6242),C=s(5472),v=s(4248),F=s(6485);let A=(()=>{var c;class h{constructor(t,e,i,a,d,l,r){this.navCtrl=t,this.router=e,this.modalCtrl=i,this.alertController=a,this.loadingController=d,this.ApiServices=l,this.location=r,this.Cancelar="Cancelar",this.readonly_qr=!1,this.FormModel={},this.navParams=this.router.getCurrentNavigation().extras.state,console.log(this.navParams),console.log("this.FormModel",this.FormModel),this.navParams&&(this.FormModel.correorden=this.navParams.correorden,console.log("this.navParams",this.navParams),this.FormModel.idofpterminado=this.navParams.idofpterminado,this.FormModel.codigo_pt=this.navParams.Y04001,this.FormModel.descripcion_pt=this.navParams.descripcion_pt,this.FormModel.nombres_tecnico=this.navParams.nombres_tecnico,this.FormModel.EQUIPOID=this.navParams.EQUIPOID,this.FormModel.idsolicitante_scc=this.navParams.idsolicitante_scc,this.FormModel.cantidad=this.navParams.cantidad,this.FormModel.cantidad_atendido=this.navParams.cantidad_atendido,console.log("this.FormModel",this.FormModel),this.CssReproceso=1==this.navParams.flag_reproceso?"CssReproceso":"",console.log("this.CssReproceso=",this.CssReproceso),this.hide_div_reproceso=1==this.navParams.flag_reproceso,this.FormModel.fecha_reproceso=this.navParams.fecha_reproceso,this.FormModel.cantidad_reproceso=this.navParams.cantidad_reproceso,this.FormModel.idrevisiondet_reproceso=this.navParams.idrevisiondet_reproceso)}ngOnInit(){this.FormModel.cantidad_scc=0,this.hide_div_reproceso||this.listServiciosPendientes()}FCancelarForm(){this.location.back()}FSaveForm(){let t="",i=0;this.CssNotiTecnico="field_required_ok",(null==this.FormModel.nombres_tecnico||""==this.FormModel.nombres_tecnico)&&(i=2,t=" Fala seleccionar  Tecnico",this.CssNotiTecnico="field_required"),this.CssNotiCantidad="field_required_ok",(null==this.FormModel.cantidad_scc||""==this.FormModel.cantidad_scc)&&(i=2,t=" Fala agregar cantidad",this.CssNotiCantidad="field_required"),1==i||2==i?this.alertController.create({header:"Solicita Control Calidad",cssClass:"success",subHeader:"",mode:"ios",message:""+t,buttons:[{text:"Aceptar",cssClass:"bgcolor:danger",handler:()=>{}}]}).then(d=>{d.present()}):this.loadingController.create({message:"Cargando...",translucent:!0}).then(d=>{d.present(),this.FormModel.acc="13",this.ApiServices.SaveControlCalidadByOf(this.FormModel).then(l=>{let r;if(this.loadingController.dismiss(),r=l[0],console.log(r),console.log(r.o_nres),0==r.o_nres)alert("Error, "+r.o_msj);else{this.FormModel.idsolicitudcontrolcab=r.o_nres;let p={state:this.FormModel};console.log("navigationExtras",p),this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],p),alert(r.o_msj)}}).finally(()=>{console.log("finalyyyy")})})}FOpenModalTecnico(t){var e=this;return(0,M.Z)(function*(){let i,a;i=e.FormModel.nombres_tecnico,a=e.FormModel.idsolicitante_scc;const l=yield e.modalCtrl.create({component:P.ProdAteServPopPersonalPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{nombre_tecnico:i,titulo_modal:"Lista de Tecnicos",id_personal:a}});return l.onDidDismiss().then(r=>{null!=r.data&&(e.FormModel.nombres_tecnico=r.data.nombres,e.FormModel.idsolicitante_scc=r.data.id)}),yield l.present()})()}listServiciosPendientes(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(e=>{e.present(),this.ApiServices.LoadFormDejarPiezasCalidad(this.FormModel.idofpterminado).then(i=>{console.log("this.results=>>>",i),this.FormModel.cantidad_atendido=i[0].cnt_recibo,this.FormModel.cantidad_scc=this.FormModel.cantidad-this.FormModel.cantidad_atendido,console.log("this.results=>>>",i)}).finally(()=>{this.loadingController.dismiss()})})}}return(c=h).\u0275fac=function(t){return new(t||c)(o.Y36(C.SH),o.Y36(v.F0),o.Y36(n.IN),o.Y36(n.Br),o.Y36(n.HT),o.Y36(F.Z),o.Y36(m.Ye))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-prod-ate-serv-dejar-pieza-calidad"]],standalone:!0,features:[o.jDz],decls:63,vars:19,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],[3,"ngModel","ngModelChange"],["type","text","readonly","",3,"ngModel","value","ngModelChange"],["size","9",1,"ion-text-start"],["readonly","",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[2,"text-align","center"],["color","danger",3,"disabled","click"],["name","close-outline"],["color","primary",3,"disabled","click"],["name","save-outline"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),o._uU(3,"Solicitud Revisi\xf3n Q.C."),o.qZA(),o.TgZ(4,"ion-buttons",2),o._UZ(5,"ion-back-button",3),o.qZA()()(),o.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item")(9,"ion-grid")(10,"ion-row",4)(11,"ion-col",5),o._uU(12," Orden de Fabricaci\xf3n \xa0:"),o.qZA(),o.TgZ(13,"ion-col",6)(14,"ion-input",7),o.NdJ("ngModelChange",function(a){return e.FormModel.correorden=a}),o.qZA()()(),o.TgZ(15,"ion-row",4)(16,"ion-col",5),o._uU(17," Codigo P.T. \xa0:"),o.qZA(),o.TgZ(18,"ion-col",6)(19,"ion-input",7),o.NdJ("ngModelChange",function(a){return e.FormModel.codigo_pt=a}),o.qZA()()(),o.TgZ(20,"ion-row",4)(21,"ion-col",5),o._uU(22," Descripci\xf3n del Componente \xa0:"),o.qZA(),o.TgZ(23,"ion-col",6)(24,"ion-input",7),o.NdJ("ngModelChange",function(a){return e.FormModel.descripcion_pt=a}),o.qZA()()(),o.TgZ(25,"ion-row",4)(26,"ion-col",5),o._uU(27," Tecnico: "),o.qZA(),o.TgZ(28,"ion-col",6)(29,"ion-input",8),o.NdJ("ngModelChange",function(a){return e.FormModel.nombres_tecnico=a}),o.qZA(),o._UZ(30,"div"),o.qZA()(),o.TgZ(31,"ion-row",4)(32,"ion-col",5),o._uU(33,"Total Piezas: "),o.qZA(),o.TgZ(34,"ion-col",9)(35,"ion-input",10),o.NdJ("ngModelChange",function(a){return e.FormModel.cantidad=a}),o.qZA()()(),o.TgZ(36,"ion-row",4)(37,"ion-col",5),o._uU(38,"Atendido Piezas: "),o.qZA(),o.TgZ(39,"ion-col",9)(40,"ion-input",10),o.NdJ("ngModelChange",function(a){return e.FormModel.cantidad_atendido=a}),o.qZA()()(),o.TgZ(41,"ion-row",4)(42,"ion-col",5),o._uU(43," Cantidad: "),o.qZA(),o.TgZ(44,"ion-col",9)(45,"ion-input",11),o.NdJ("ngModelChange",function(a){return e.FormModel.cantidad_scc=a}),o.qZA(),o._UZ(46,"div"),o.qZA()()()()()(),o.TgZ(47,"ion-footer")(48,"ion-grid")(49,"ion-row"),o._UZ(50,"ion-col"),o.TgZ(51,"ion-col",12)(52,"ion-buttons")(53,"ion-button",13),o.NdJ("click",function(){return e.FCancelarForm()}),o._UZ(54,"ion-icon",14),o._uU(55,"\xa0 Cancelar "),o.qZA(),o._uU(56," \xa0\xa0\xa0\xa0 "),o.TgZ(57,"ion-button",15),o.NdJ("click",function(){return e.FSaveForm()}),o._UZ(58,"ion-icon",16),o._uU(59,"\xa0 "),o.TgZ(60,"strong"),o._uU(61," Iniciar "),o.qZA()()()(),o._UZ(62,"ion-col"),o.qZA()()()),2&t&&(o.xp6(5),o.Q6J("text",e.Cancelar),o.xp6(9),o.Q6J("ngModel",e.FormModel.correorden),o.xp6(5),o.Q6J("ngModel",e.FormModel.codigo_pt),o.uIk("disabled",e.readonly_qr),o.xp6(5),o.Q6J("ngModel",e.FormModel.descripcion_pt),o.uIk("disabled",e.readonly_qr),o.xp6(5),o.s9C("value",e.FormModel.nombres_tecnico),o.Q6J("ngModel",e.FormModel.nombres_tecnico),o.xp6(1),o.Tol(e.CssNotiTecnico),o.xp6(5),o.Q6J("ngModel",e.FormModel.cantidad),o.xp6(5),o.Q6J("ngModel",e.FormModel.cantidad_atendido),o.xp6(5),o.Q6J("ngModel",e.FormModel.cantidad_scc),o.xp6(1),o.Tol(e.CssNotiCantidad),o.xp6(7),o.Q6J("disabled",e.disableButton),o.xp6(4),o.Q6J("disabled",e.disableButton))},dependencies:[n.Pc,n.YG,n.Sm,n.wI,n.W2,n.fr,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.q_,n.Nd,n.wd,n.sr,n.as,n.j9,n.oU,m.ez,_.u5,_.JJ,_.On]}),h})()}}]);