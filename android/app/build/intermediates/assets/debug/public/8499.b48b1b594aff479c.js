"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8499,1456],{719:(O,g,d)=>{d.d(g,{G:()=>p});const p={FRONT:"front",BACK:"back"}},947:(O,g,d)=>{d.d(g,{mR:()=>p});var h=d(7423);d(719);const p=(0,h.fo)("BarcodeScanner",{web:()=>d.e(2155).then(d.bind(d,2155)).then(c=>new c.BarcodeScannerWeb)})},1456:(O,g,d)=>{d.d(g,{k:()=>v});var h=d(5861),P=d(4053),p=d(8256),c=d(529),S=d(849);let v=(()=>{class m{constructor(e,o,r){this.httpClient=e,this.http=o,this.storage=r,this.urlApiProd=P.N.UrlDomainLocal+"aw_modulos/mante/api/CApiOrdenTrabajo.php",this.DirectorioImg=P.N.UrlDomainLocal+"aw_file/img_tablet/",this.confirmRequest="",this.key="123456",this.counts_rows=0,this.ArrayItemsSelected=[],this.EditArItemsSelected=[],this.o_nres="",this.o_msj="",this.idhorasxVueltaOtCab="",this.radioRevisionSelected=""}load_lista_solse(e,o){let r=this.urlApiProd,s=JSON.stringify({idot:e,acc:5,idtablet:"this.device.uuid",idotsolse_otd:o});return this.http.post(r,s).toPromise().then(l=>l)}FListOtPorSolsePieza(e,o,r,s){let l=this.urlApiProd,n=JSON.stringify({s:e,acc:r,tipo:o,idtablet:"this.device.uuid",madre_hija:s});return this.httpClient.post(l,n).toPromise().then(i=>i)}listado_principal_ot(e,o,r,s){let l=this.urlApiProd,n=JSON.stringify({s:e,acc:r,tipo:o,idtablet:"this.device.uuid",madre_hija:s});return this.httpClient.post(l,n).toPromise().then(i=>i)}listado_servicio_popup(e,o,r,s,l){let n=this.urlApiProd,i=JSON.stringify({s:e,acc:o,avatar:r,idpieza:s,idtablet:"this.device.uuid",idtablet2:l});return this.http.post(n,i).toPromise().then(a=>a)}guardar_servicios_selected_ot(e,o){let r=JSON.stringify(e);return console.log("paramsToBd:::>",e),this.httpClient.post(this.urlApiProd+"?acc=4&idot="+o,r).toPromise().then(l=>l)}update_solse_ot(e,o){let r=JSON.stringify(e);return console.log("paramsToBd:::>",e),this.httpClient.post(this.urlApiProd+"?acc=6&idot="+o,r).toPromise().then(l=>l)}update_solse_ot_qr(e,o){let r=JSON.stringify(e);return console.log("paramsToBd:::>",e),this.httpClient.post(this.urlApiProd+"?acc=7&idsolse="+o,r).toPromise().then(l=>l)}listado_equipos_service(e,o,r,s){let l=this.urlApiProd,n=JSON.stringify({s:e,acc:r,tipo:o,idtablet:"this.device.uuid",madre_hija:s});return this.http.post(l,n).toPromise().then(i=>i)}load_lista_servicios(e){let o=this.urlApiProd,r=JSON.stringify({idot:e,acc:3,idtablet:"this.device.uuid"});return this.http.post(o,r).toPromise().then(s=>s)}llamarMaestroServicios(e,o,r,s,l){let n=this.urlApiProd,i=JSON.stringify({s:e,acc:r,tipo:o,idtablet:l,madre_hija:s});return this.http.post(n,i).toPromise().then(a=>a)}EjServQuitarItemSelected(e){var o=this;return(0,h.Z)(function*(){let r=o.urlApiProd,s={id:e.idvaleservidetot,avatar:e.avatar,acc:6};o.ArrayItemsSelectedPivot=e,o.http.post(r,s).subscribe(l=>{},l=>{console.log("Error- something is wrong!")}),o.CntAgregado=o.EjeSerQuitarStorage(o.ArrayItemsSelectedPivot)})()}EjeSerQuitarStorage(e){let o=this.ArrayItemsSelected.indexOf(e);return o>-1&&this.ArrayItemsSelected.splice(o,1),this.storage.set("my-items",this.ArrayItemsSelected),this.ArrayItemsSelected.length}FListCbosDejarEje(e){let o=this.urlApiProd,r=JSON.stringify({idot:e,acc:9,idtablet:"this.device.uuid"});return this.http.post(o,r).toPromise().then(s=>s)}SaveRecojerPieza(e){let o=JSON.stringify(e);return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}ListFindTecnico(e,o,r){let s=JSON.stringify({acc:11,s:e,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,s).toPromise().then(l=>l)}ListFindEquipo(e,o,r){let s=JSON.stringify({acc:12,s:e,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,s).toPromise().then(l=>l)}load_cbo_site(){let e=JSON.stringify({acc:13});return this.httpClient.post(this.urlApiProd,e).toPromise().then(o=>o)}SaveOtNoProgramada(e){let o=JSON.stringify(e);return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}ListFindOts(e,o,r){let s=JSON.stringify({acc:15,s:e,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,s).toPromise().then(l=>l)}FormFindPaso1(e,o,r){let s=JSON.stringify({acc:16,id_orden_trab_cab:e,idusu:o,iddevice:r});return this.httpClient.post(this.urlApiProd,s).toPromise().then(l=>l)}GuardarFormPaso1(e){var o=this;return(0,h.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let s=o.urlApiProd,l=JSON.stringify(e);return o.httpClient.post(s+"?acc=17",l).toPromise()})()}LoadPdfInformeTecnico(e){let o=JSON.stringify({acc:14,idchecklistcab:e});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}ListBombasxFabTableros(e,o,r){let s=JSON.stringify({acc:18,s:e,idusu:o,familia:r});return this.httpClient.post(this.urlApiProd,s).toPromise().then(l=>l)}GuardarNuevoEquipo(e){var o=this;return(0,h.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let s=o.urlApiProd,l=JSON.stringify(e);return o.httpClient.post(s+"?acc=19",l).toPromise()})()}ListRepuestosxBomba(e,o){let r=JSON.stringify({acc:20,idot:e,idusu:o});return this.httpClient.post(this.urlApiProd,r).toPromise().then(s=>s)}GuardarFormPaso2(e,o){var r=this;return(0,h.Z)(function*(){let l=r.urlApiProd,n=JSON.stringify(e);return r.httpClient.post(l+"?acc=21&idusu="+o,n).toPromise()})()}listadoArticulos(e,o,r,s,l){console.log(e);let n=this.urlApiProd,i=JSON.stringify({s:e,idpieza:o,cantidad:r,toggle:s,acc:l});return this.http.post(n,i).toPromise().then(a=>a)}GuardarArticulo(e){var o=this;return(0,h.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let s=o.urlApiProd,l=JSON.stringify(e);return o.httpClient.post(s+"?acc=23",l).toPromise()})()}ListServiciosxBomba(e,o){let r=JSON.stringify({acc:24,idot:e,idusu:o});return this.httpClient.post(this.urlApiProd,r).toPromise().then(s=>s)}ListFindSolse(e,o){let r=JSON.stringify({acc:26,idot:e,idusu:o});return this.httpClient.post(this.urlApiProd,r).toPromise().then(s=>s)}GuardarOtTerminado(e,o){var r=this;return(0,h.Z)(function*(){let l=r.urlApiProd,n=JSON.stringify({acc:27,idot:e,idusuario:o});return r.httpClient.post(l,n).toPromise()})()}LoadPdfOrdentrabajo(e){let o=JSON.stringify({acc:28,idchecklistcab:e});return this.httpClient.post(this.urlApiProd,o).toPromise().then(r=>r)}FLoadMotivoAdicional(e,o){let r=JSON.stringify({acc:29,idusu:e,iddevice:o});return this.httpClient.post(this.urlApiProd,r).toPromise().then(s=>s)}FQuitarItem(e){var o=this;return(0,h.Z)(function*(){let r=o.urlApiProd,s=JSON.stringify(e);return o.httpClient.post(r,s).toPromise()})()}ListaPartList(e,o,r,s,l,n,i){let a=this.urlApiProd,u=JSON.stringify({s:e,pd:o,ot:r,im:s,it:l,acc:n,idot:i});return this.http.post(a,u).toPromise().then(_=>_)}GuardarPartList(e){var o=this;return(0,h.Z)(function*(){console.log("Dentro::GuardarFormulario::>",e);let s=o.urlApiProd,l=JSON.stringify(e);return o.httpClient.post(s+"?acc=32",l).toPromise()})()}}return m.\u0275fac=function(e){return new(e||m)(p.LFG(c.eN),p.LFG(c.eN),p.LFG(S.K))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8499:(O,g,d)=>{d.r(g),d.d(g,{MttoGeneraSolsePage:()=>r});var h=d(5861),P=d(6895),p=d(433),c=d(5562),S=d(947),t=d(8256),v=d(1456),m=d(849),C=d(1407);const e=["idContent"];function o(s,l){if(1&s){const n=t.EpF();t.TgZ(0,"ion-card",15)(1,"ion-card-header")(2,"ion-row")(3,"ion-col",16),t._uU(4," Correlativo: "),t.qZA(),t.TgZ(5,"ion-col",17)(6,"ion-input",18),t.NdJ("ngModelChange",function(a){const _=t.CHM(n).$implicit;return t.KtG(_.corre_otss=a)}),t.qZA()()()(),t.TgZ(7,"ion-card-content")(8,"ion-grid")(9,"ion-row")(10,"ion-col",16),t._uU(11," Pieza: "),t.qZA(),t.TgZ(12,"ion-col",17)(13,"ion-input",19),t.NdJ("ngModelChange",function(a){const _=t.CHM(n).$implicit;return t.KtG(_.nomclase_os=a)}),t.qZA()()(),t.TgZ(14,"ion-row")(15,"ion-col",16),t._uU(16," Cantidad: "),t.qZA(),t.TgZ(17,"ion-col",17)(18,"ion-input",20),t.NdJ("ngModelChange",function(a){const _=t.CHM(n).$implicit;return t.KtG(_.cantidad_otss=a)}),t.qZA()()(),t.TgZ(19,"ion-row")(20,"ion-col",16),t._uU(21," Codigo QR: "),t.qZA(),t.TgZ(22,"ion-col",21)(23,"ion-input",22),t.NdJ("ngModelChange",function(a){const _=t.CHM(n).$implicit;return t.KtG(_.codigo_qr_os=a)}),t.qZA()()(),t.TgZ(24,"ion-row")(25,"ion-col",23)(26,"ion-button",24),t.NdJ("click",function(){const u=t.CHM(n).index,_=t.oxw();return t.KtG(_.start_scan_qr(u))}),t.TgZ(27,"ion-text",25),t._uU(28,"Iniciar Scaneo Q.R."),t.qZA(),t._UZ(29,"ion-icon",26),t.qZA()()(),t.TgZ(30,"ion-row")(31,"ion-col",23)(32,"ion-button",24),t.NdJ("click",function(){const a=t.CHM(n),u=a.$implicit,_=a.index,f=t.oxw();return t.KtG(f.actulizar_solse_qr(u.idotsolse,_))}),t.TgZ(33,"ion-text",27),t._uU(34,"Actualizar Q.R."),t.qZA(),t._UZ(35,"ion-icon",26),t.qZA()()()()()()}if(2&s){const n=l.$implicit,i=t.oxw();t.Q6J("hidden",i.scanActive),t.xp6(6),t.s9C("value",n.corre_otss),t.Q6J("hidden",i.scanActive)("ngModel",n.corre_otss),t.xp6(2),t.Udp("--background",i.scanActive?"#00000000":"#fff"),t.xp6(5),t.s9C("value",n.nomclase_os),t.Q6J("hidden",i.scanActive)("ngModel",n.nomclase_os),t.xp6(5),t.s9C("value",n.cantidad_otss),t.Q6J("hidden",i.scanActive)("ngModel",n.cantidad_otss),t.xp6(5),t.s9C("value",n.codigo_qr_os),t.Q6J("ngModel",n.codigo_qr_os),t.xp6(3),t.Q6J("hidden",i.scanActive),t.xp6(6),t.Q6J("hidden",i.scanActive)}}let r=(()=>{class s{constructor(n,i,a,u,_,f,y,M,D,N){this.navCtrl=n,this.loadingController=i,this.serviceApi=a,this.storage=u,this.route=_,this.router=f,this.alertController=y,this.modalCtrl=M,this.platform=D,this.toastController=N,this.idtablet_="",this.ArrayItemsSelectedDesti=[],this.NroOtHtml="",this.CodEquipoHtml="",this.FchCreaOtHtml="",this.IdOtHtml="",this.result=null,this.scanActive=!1,this.realPositionYScroll=0,this.realPositionYScrollAux=0,this.idotsolse_otd="";let E,A=this.router.getCurrentNavigation().extras.state;A&&(console.log(A),this.NroOtHtml=A.NroOtHtml,this.CodEquipoHtml=A.CodEquipoHtml,this.FchCreaOtHtml=A.FchCreaOtHtml,this.IdOtHtml=A.IdOtHtml,this.idotsolse_otd=A.idotsolse_otd),this.storage.get("USER_INFO").then(T=>{E=T,this.NomUsuario=E.user_name,this.idtablet_=E.imei})}ngOnInit(){this.ArrayItemsSelectedDesti=[],this.actulizar_solse(this.IdOtHtml),this.storage.get("DEVICE_INFO").then(n=>{this.id_device=n.uuid,console.log("this.id_device::>",this.id_device)})}ngAfterViewInit(){}ngOnDestroy(){}logScrollStart(){console.log("inicio scroool")}logScrolling(n){this.realPositionYScroll=n.detail.scrollTop,this.platform.height()}ionScrollEnd(){console.log("fin  de scroool")}start_scan_qr(n){var i=this;return(0,h.Z)(function*(){if(i.realPositionYScrollAux=i.realPositionYScroll,console.log("this.realPositionYScrollAux::",i.realPositionYScrollAux),console.log("this.realPositionYScroll::",i.realPositionYScroll),yield i.checkPermiso()){i.scanActive=!0;const u=yield S.mR.startScan();console.log("this.realPositionYScrollAux::",i.realPositionYScrollAux),console.log("this.realPositionYScroll::",i.realPositionYScroll),u.hasContent&&(console.log(u),i.ArrayItemsSelectedDesti[n].codigo_qr_os=u.content,console.log(i.ArrayItemsSelectedDesti[n]),console.log(i.ArrayItemsSelectedDesti),console.log("result.hasContent:::",u.hasContent),i.content.scrollByPoint(0,i.realPositionYScrollAux,1200),i.scanActive=!1)}})()}checkPermiso(){var n=this;return(0,h.Z)(function*(){return new Promise(function(){var i=(0,h.Z)(function*(a,u){const _=yield S.mR.checkPermission({force:!0});_.granted?a(!0):_.denied?yield(yield n.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{S.mR.openAppSettings(),a(!1)}}]})).present():a(!1)});return function(a,u){return i.apply(this,arguments)}}())})()}stopScanner(){S.mR.stopScan(),this.scanActive=!1}load_lista_servicios(n){this.serviceApi.load_lista_solse(n,this.idotsolse_otd).then(i=>{console.log("DENTO SOLSE REST",i),this.ArrayItemsSelectedDesti=i,console.log("DENTO SOLSE ArrayItemsSelectedDesti",this.ArrayItemsSelectedDesti),console.log("finally::this.realPositionYScroll>",this.realPositionYScroll),this.content.scrollByPoint(0,this.realPositionYScroll,1e3)}).finally(()=>{})}actulizar_solse(n){this.loadingController.create({message:"Cargando servicios...",translucent:!0}).then(a=>{a.present(),this.serviceApi.update_solse_ot(this.ArrayItemsSelectedDesti,n).then(u=>{console.log("res::::::>",u),this.results=u,console.log(this.results[0]),this.load_lista_servicios(n),0!=this.results[0].o_nres?(this.load_lista_servicios(this.IdOtHtml),this.ArrayItemsSelectedDesti=[]):alert(this.results[0].o_msj)}).finally(()=>{this.loadingController.dismiss()})})}actulizar_solse_qr(n,i){let a;if(this.CssNotiTipoProceso="field_required_ok",console.log(this.ArrayItemsSelectedDesti[i].codigo_qr_os),null==this.ArrayItemsSelectedDesti[i].codigo_qr_os||""==this.ArrayItemsSelectedDesti[i].codigo_qr_os)return a=" Fala ingresar el c\xf3digo QR ",this.CssNotiTipoProceso="field_required",this.presentToast(" Fala ingresar el c\xf3digo QR ","danger"),!1;this.serviceApi.update_solse_ot_qr(this.ArrayItemsSelectedDesti,n).then(u=>{console.log("res::::::>",u),this.results=u,console.log(this.results[0]),this.load_lista_servicios(n),0!=this.results[0].o_nres?(this.load_lista_servicios(this.IdOtHtml),alert(this.results[0].o_msj),this.ArrayItemsSelectedDesti=[]):alert(this.results[0].o_msj)}).finally(()=>{})}presentToast(n,i="primary"){var a=this;return(0,h.Z)(function*(){(yield a.toastController.create({message:n,duration:2e3,position:"top",color:i})).present()})()}regresar_listado_servicios(){this.navCtrl.navigateForward("winprincipal")}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(c.SH),t.Y36(c.HT),t.Y36(v.k),t.Y36(m.K),t.Y36(C.gz),t.Y36(C.F0),t.Y36(c.Br),t.Y36(c.IN),t.Y36(c.t4),t.Y36(c.yF))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-mtto-genera-solse"]],viewQuery:function(n,i){if(1&n&&t.Gf(e,5),2&n){let a;t.iGM(a=t.CRH())&&(i.content=a.first)}},standalone:!0,features:[t.jDz],decls:35,vars:10,consts:[[3,"hidden"],["mode","ios"],["text-capitalize",""],["slot","start"],["color","danger",3,"click"],["name","close"],[3,"scrollEvents","ionScrollStart","ionScroll"],["idContent",""],["size-sm","6","size-md","2","size-xl","1"],[1,"text-align:","right"],["size-sm","6","size-md","2","size-xl","2"],[1,"text-align:","left"],["style","\n          border: black;\n          border: 2px solid;\n          background-color: white;\n          border-radius: 25px;\n          width: 95% !important;\n          margin: 2ch !important;\n          padding:0px;","mode","ios","type","button",3,"hidden",4,"ngFor","ngForOf"],["color","success","expand","full",3,"hidden","click"],[1,"scan-box",3,"hidden"],["mode","ios","type","button",2,"border","black","border","2px solid","background-color","white","border-radius","25px","width","95% !important","margin","2ch !important","padding","0px",3,"hidden"],["size","2"],["size","10"],["required","true","color","primary","type","text","mode","ios","disabled","",3,"hidden","ngModel","value","ngModelChange"],["type","text","disabled","","placeholder","Ingrese Solse",3,"hidden","ngModel","value","ngModelChange"],["required","true","color","primary","type","number","mode","ios","disabled","",3,"hidden","ngModel","value","ngModelChange"],["size","10",2,"padding","1px"],["type","text","placeholder","Ingrese Codigo Q.R.",3,"ngModel","value","ngModelChange"],["size","12"],["color","light","expand","full",3,"hidden","click"],["color","primary"],["ios","ios-add-circle","md","md-add-circle"],["color","success"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),t._uU(3,"Lista SOLSE"),t.qZA(),t.TgZ(4,"ion-buttons",3)(5,"ion-button",4),t.NdJ("click",function(){return i.regresar_listado_servicios()}),t._UZ(6,"ion-icon",5),t._uU(7," Regresar "),t.qZA()()()(),t.TgZ(8,"ion-content",6,7),t.NdJ("ionScrollStart",function(){return i.logScrollStart()})("ionScroll",function(u){return i.logScrolling(u)}),t.TgZ(10,"ion-item")(11,"ion-grid")(12,"ion-row")(13,"ion-col",8)(14,"div",9),t._uU(15,"Nro. O.T.:"),t.qZA()(),t.TgZ(16,"ion-col",10)(17,"div",11)(18,"strong"),t._uU(19),t.qZA()()(),t.TgZ(20,"ion-col",8),t._uU(21,"Equipo: "),t.qZA(),t.TgZ(22,"ion-col",10)(23,"strong"),t._uU(24),t.qZA()(),t.TgZ(25,"ion-col",10),t._uU(26,"F.Creacion O.T.:"),t.qZA(),t.TgZ(27,"ion-col",10)(28,"strong"),t._uU(29),t.qZA()()()()(),t.TgZ(30,"ion-list"),t.YNc(31,o,36,16,"ion-card",12),t.qZA(),t.TgZ(32,"ion-button",13),t.NdJ("click",function(){return i.stopScanner()}),t._uU(33," \xa0Detener "),t.qZA(),t._UZ(34,"div",14),t.qZA()),2&n&&(t.Q6J("hidden",i.scanActive),t.xp6(8),t.Udp("--background",i.scanActive?"#00000000":"#fff"),t.Q6J("scrollEvents",!0),t.xp6(11),t.Oqu(i.NroOtHtml),t.xp6(5),t.Oqu(i.CodEquipoHtml),t.xp6(5),t.Oqu(i.FchCreaOtHtml),t.xp6(2),t.Q6J("ngForOf",i.ArrayItemsSelectedDesti),t.xp6(1),t.Q6J("hidden",!i.scanActive),t.xp6(2),t.Q6J("hidden",!i.scanActive))},dependencies:[c.Pc,c.YG,c.Sm,c.PM,c.FN,c.Zi,c.wI,c.W2,c.jY,c.Gu,c.gu,c.pK,c.Ie,c.q_,c.Nd,c.yW,c.wd,c.sr,c.as,c.j9,P.ez,P.sg,p.u5,p.JJ,p.Q7,p.On]}),s})()}}]);