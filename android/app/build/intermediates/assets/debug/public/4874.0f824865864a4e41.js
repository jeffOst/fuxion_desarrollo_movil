(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4874],{9627:(module,__unused_webpack_exports,__webpack_require__)=>{var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(9382).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,M;globalThis,M=()=>(()=>{"use strict";var __webpack_modules__=[,(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.UNSUPPORTED_FEATURES=s.TextRenderingMode=s.StreamType=s.RenderingIntentFlag=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FontType=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.AnnotationType=s.AnnotationStateModelType=s.AnnotationReviewState=s.AnnotationReplyType=s.AnnotationMode=s.AnnotationMarkedState=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.arrayByteLength=le,s.arraysToBytes=function ue(Z){const X=Z.length;if(1===X&&Z[0]instanceof Uint8Array)return Z[0];let Y=0;for(let he=0;he<X;he++)Y+=le(Z[he]);let Ae=0;const be=new Uint8Array(Y);for(let he=0;he<X;he++){let ce=Z[he];ce instanceof Uint8Array||(ce="string"==typeof ce?pe(ce):new Uint8Array(ce));const ve=ce.byteLength;be.set(ce,Ae),Ae+=ve}return be},s.assert=function n(Z,X){Z||h(X)},s.bytesToString=function te(Z){("object"!=typeof Z||null===Z||void 0===Z.length)&&h("Invalid argument for bytesToString");const X=Z.length,Y=8192;if(X<Y)return String.fromCharCode.apply(null,Z);const Ae=[];for(let be=0;be<X;be+=Y){const he=Math.min(be+Y,X),ce=Z.subarray(be,he);Ae.push(String.fromCharCode.apply(null,ce))}return Ae.join("")},s.createPromiseCapability=function ge(){const Z=Object.create(null);let X=!1;return Object.defineProperty(Z,"settled",{get:()=>X}),Z.promise=new Promise(function(Y,Ae){Z.resolve=function(be){X=!0,Y(be)},Z.reject=function(be){X=!0,Ae(be)}}),Z},s.createValidAbsoluteUrl=function d(Z,X=null,Y=null){if(!Z)return null;try{if(Y&&"string"==typeof Z){if(Y.addDefaultProtocol&&Z.startsWith("www.")){const be=Z.match(/\./g);be&&be.length>=2&&(Z=`http://${Z}`)}if(Y.tryConvertEncoding)try{Z=G(Z)}catch{}}const Ae=X?new URL(Z,X):new URL(Z);if(function _(Z){if(!Z)return!1;switch(Z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Ae))return Ae}catch{}return null},s.escapeString=function xe(Z){return Z.replace(/([()\\\n\r])/g,X=>"\n"===X?"\\n":"\r"===X?"\\r":`\\${X}`)},s.getModificationDate=function ae(Z=new Date){return[Z.getUTCFullYear().toString(),(Z.getUTCMonth()+1).toString().padStart(2,"0"),Z.getUTCDate().toString().padStart(2,"0"),Z.getUTCHours().toString().padStart(2,"0"),Z.getUTCMinutes().toString().padStart(2,"0"),Z.getUTCSeconds().toString().padStart(2,"0")].join("")},s.getVerbosityLevel=function Q(){return N},s.info=function re(Z){N>=g.INFOS&&console.log(`Info: ${Z}`)},s.isArrayBuffer=function ne(Z){return"object"==typeof Z&&null!==Z&&void 0!==Z.byteLength},s.isArrayEqual=function J(Z,X){if(Z.length!==X.length)return!1;for(let Y=0,Ae=Z.length;Y<Ae;Y++)if(Z[Y]!==X[Y])return!1;return!0},s.isAscii=function Fe(Z){return/^[\x00-\x7F]*$/.test(Z)},s.objectFromMap=function me(Z){const X=Object.create(null);for(const[Y,Ae]of Z)X[Y]=Ae;return X},s.objectSize=function _e(Z){return Object.keys(Z).length},s.setVerbosityLevel=function U(Z){Number.isInteger(Z)&&(N=Z)},s.shadow=f,s.string32=function de(Z){return String.fromCharCode(Z>>24&255,Z>>16&255,Z>>8&255,255&Z)},s.stringToBytes=pe,s.stringToPDFString=function Ce(Z){if(Z[0]>="\xef"){let Y;if("\xfe"===Z[0]&&"\xff"===Z[1]?Y="utf-16be":"\xff"===Z[0]&&"\xfe"===Z[1]?Y="utf-16le":"\xef"===Z[0]&&"\xbb"===Z[1]&&"\xbf"===Z[2]&&(Y="utf-8"),Y)try{const Ae=new TextDecoder(Y,{fatal:!0}),be=pe(Z);return Ae.decode(be)}catch(Ae){j(`stringToPDFString: "${Ae}".`)}}const X=[];for(let Y=0,Ae=Z.length;Y<Ae;Y++){const be=fe[Z.charCodeAt(Y)];X.push(be?String.fromCharCode(be):Z.charAt(Y))}return X.join("")},s.stringToUTF16BEString=function ye(Z){const X=["\xfe\xff"];for(let Y=0,Ae=Z.length;Y<Ae;Y++){const be=Z.charCodeAt(Y);X.push(String.fromCharCode(be>>8&255),String.fromCharCode(255&be))}return X.join("")},s.stringToUTF8String=G,s.unreachable=h,s.utf8StringToString=function ee(Z){return unescape(encodeURIComponent(Z))},s.warn=j,M(2),s.IDENTITY_MATRIX=[1,0,0,1,0,0],s.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],s.LINE_FACTOR=1.35,s.LINE_DESCENT_FACTOR=.35,s.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},s.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},s.AnnotationEditorPrefix="pdfjs_internal_editor_",s.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},s.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},s.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},s.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},s.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},s.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},s.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},s.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},s.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},s.AnnotationReplyType={GROUP:"Group",REPLY:"R"},s.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},s.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},s.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},s.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},s.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},s.PageActionEventType={O:"PageOpen",C:"PageClose"},s.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},s.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const g={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=g,s.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},s.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},s.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},s.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let N=g.WARNINGS;function j(Z){N>=g.WARNINGS&&console.log(`Warning: ${Z}`)}function h(Z){throw new Error(Z)}function f(Z,X,Y){return Object.defineProperty(Z,X,{value:Y,enumerable:!0,configurable:!0,writable:!1}),Y}const i=function(){function X(Y,Ae){this.constructor===X&&h("Cannot initialize BaseException."),this.message=Y,this.name=Ae}return X.prototype=new Error,X.constructor=X,X}();function pe(Z){"string"!=typeof Z&&h("Invalid argument for stringToBytes");const X=Z.length,Y=new Uint8Array(X);for(let Ae=0;Ae<X;++Ae)Y[Ae]=255&Z.charCodeAt(Ae);return Y}function le(Z){return void 0!==Z.length?Z.length:void 0!==Z.byteLength?Z.byteLength:void h("Invalid argument for arrayByteLength")}s.BaseException=i,s.PasswordException=class c extends i{constructor(X,Y){super(X,"PasswordException"),this.code=Y}},s.UnknownErrorException=class l extends i{constructor(X,Y){super(X,"UnknownErrorException"),this.details=Y}},s.InvalidPDFException=class P extends i{constructor(X){super(X,"InvalidPDFException")}},s.MissingPDFException=class x extends i{constructor(X){super(X,"MissingPDFException")}},s.UnexpectedResponseException=class H extends i{constructor(X,Y){super(X,"UnexpectedResponseException"),this.status=Y}},s.FormatError=class K extends i{constructor(X){super(X,"FormatError")}},s.AbortException=class se extends i{constructor(X){super(X,"AbortException")}},s.FeatureTest=class Pe{static get isLittleEndian(){return f(this,"isLittleEndian",function ie(){const Z=new Uint8Array(4);return Z[0]=1,1===new Uint32Array(Z.buffer,0,1)[0]}())}static get isEvalSupported(){return f(this,"isEvalSupported",function oe(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return f(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const Be=[...Array(256).keys()].map(Z=>Z.toString(16).padStart(2,"0"));class Me{static makeHexColor(X,Y,Ae){return`#${Be[X]}${Be[Y]}${Be[Ae]}`}static scaleMinMax(X,Y){let Ae;X[0]?(X[0]<0&&(Ae=Y[0],Y[0]=Y[1],Y[1]=Ae),Y[0]*=X[0],Y[1]*=X[0],X[3]<0&&(Ae=Y[2],Y[2]=Y[3],Y[3]=Ae),Y[2]*=X[3],Y[3]*=X[3]):(Ae=Y[0],Y[0]=Y[2],Y[2]=Ae,Ae=Y[1],Y[1]=Y[3],Y[3]=Ae,X[1]<0&&(Ae=Y[2],Y[2]=Y[3],Y[3]=Ae),Y[2]*=X[1],Y[3]*=X[1],X[2]<0&&(Ae=Y[0],Y[0]=Y[1],Y[1]=Ae),Y[0]*=X[2],Y[1]*=X[2]),Y[0]+=X[4],Y[1]+=X[4],Y[2]+=X[5],Y[3]+=X[5]}static transform(X,Y){return[X[0]*Y[0]+X[2]*Y[1],X[1]*Y[0]+X[3]*Y[1],X[0]*Y[2]+X[2]*Y[3],X[1]*Y[2]+X[3]*Y[3],X[0]*Y[4]+X[2]*Y[5]+X[4],X[1]*Y[4]+X[3]*Y[5]+X[5]]}static applyTransform(X,Y){return[X[0]*Y[0]+X[1]*Y[2]+Y[4],X[0]*Y[1]+X[1]*Y[3]+Y[5]]}static applyInverseTransform(X,Y){const Ae=Y[0]*Y[3]-Y[1]*Y[2];return[(X[0]*Y[3]-X[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/Ae,(-X[0]*Y[1]+X[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/Ae]}static getAxialAlignedBoundingBox(X,Y){const Ae=Me.applyTransform(X,Y),be=Me.applyTransform(X.slice(2,4),Y),he=Me.applyTransform([X[0],X[3]],Y),ce=Me.applyTransform([X[2],X[1]],Y);return[Math.min(Ae[0],be[0],he[0],ce[0]),Math.min(Ae[1],be[1],he[1],ce[1]),Math.max(Ae[0],be[0],he[0],ce[0]),Math.max(Ae[1],be[1],he[1],ce[1])]}static inverseTransform(X){const Y=X[0]*X[3]-X[1]*X[2];return[X[3]/Y,-X[1]/Y,-X[2]/Y,X[0]/Y,(X[2]*X[5]-X[4]*X[3])/Y,(X[4]*X[1]-X[5]*X[0])/Y]}static apply3dTransform(X,Y){return[X[0]*Y[0]+X[1]*Y[1]+X[2]*Y[2],X[3]*Y[0]+X[4]*Y[1]+X[5]*Y[2],X[6]*Y[0]+X[7]*Y[1]+X[8]*Y[2]]}static singularValueDecompose2dScale(X){const Y=[X[0],X[2],X[1],X[3]],Ae=X[0]*Y[0]+X[1]*Y[2],ce=X[2]*Y[1]+X[3]*Y[3],ve=(Ae+ce)/2,Ee=Math.sqrt((Ae+ce)**2-4*(Ae*ce-(X[2]*Y[0]+X[3]*Y[2])*(X[0]*Y[1]+X[1]*Y[3])))/2,we=ve-Ee||1;return[Math.sqrt(ve+Ee||1),Math.sqrt(we)]}static normalizeRect(X){const Y=X.slice(0);return X[0]>X[2]&&(Y[0]=X[2],Y[2]=X[0]),X[1]>X[3]&&(Y[1]=X[3],Y[3]=X[1]),Y}static intersect(X,Y){const Ae=Math.max(Math.min(X[0],X[2]),Math.min(Y[0],Y[2])),be=Math.min(Math.max(X[0],X[2]),Math.max(Y[0],Y[2]));if(Ae>be)return null;const he=Math.max(Math.min(X[1],X[3]),Math.min(Y[1],Y[3])),ce=Math.min(Math.max(X[1],X[3]),Math.max(Y[1],Y[3]));return he>ce?null:[Ae,he,be,ce]}static bezierBoundingBox(X,Y,Ae,be,he,ce,ve,Ee){const Se=[],we=[[],[]];let ke,Te,Re,De,Le,Ne,We,Ge;for(let $e=0;$e<2;++$e)if(0===$e?(Te=6*X-12*Ae+6*he,ke=-3*X+9*Ae-9*he+3*ve,Re=3*Ae-3*X):(Te=6*Y-12*be+6*ce,ke=-3*Y+9*be-9*ce+3*Ee,Re=3*be-3*Y),Math.abs(ke)<1e-12){if(Math.abs(Te)<1e-12)continue;De=-Re/Te,0<De&&De<1&&Se.push(De)}else We=Te*Te-4*Re*ke,Ge=Math.sqrt(We),!(We<0)&&(Le=(-Te+Ge)/(2*ke),0<Le&&Le<1&&Se.push(Le),Ne=(-Te-Ge)/(2*ke),0<Ne&&Ne<1&&Se.push(Ne));let Ie,Oe=Se.length;const ze=Oe;for(;Oe--;)De=Se[Oe],Ie=1-De,we[0][Oe]=Ie*Ie*Ie*X+3*Ie*Ie*De*Ae+3*Ie*De*De*he+De*De*De*ve,we[1][Oe]=Ie*Ie*Ie*Y+3*Ie*Ie*De*be+3*Ie*De*De*ce+De*De*De*Ee;return we[0][ze]=X,we[1][ze]=Y,we[0][ze+1]=ve,we[1][ze+1]=Ee,we[0].length=we[1].length=ze+2,[Math.min(...we[0]),Math.min(...we[1]),Math.max(...we[0]),Math.max(...we[1])]}}s.Util=Me;const fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function G(Z){return decodeURIComponent(escape(Z))}},(q,s,M)=>{M(3)},(q,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isNodeJS=void 0;const M=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);s.isNodeJS=M},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:q,NodeCMapReaderFactory:s,NodeStandardFontDataFactory:M}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=q,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=M}function setPDFNetworkStreamFactory(q){createPDFNetworkStream=q}function getDocument(q){const s=new PDFDocumentLoadingTask;let M;if("string"==typeof q||q instanceof URL)M={url:q};else if((0,_util.isArrayBuffer)(q))M={data:q};else if(q instanceof PDFDataRangeTransport)M={range:q};else{if("object"!=typeof q)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!q.url&&!q.data&&!q.range)throw new Error("Invalid parameter object: need either .data, .range or .url");M=q}const o=Object.create(null);let v=null,B=null;for(const $ in M){const w=M[$];switch($){case"url":if(typeof window<"u")try{o[$]=new URL(w,window.location).href;continue}catch(T){(0,_util.warn)(`Cannot create valid URL: "${T}".`)}else if("string"==typeof w||w instanceof URL){o[$]=w.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":v=w;continue;case"worker":B=w;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&w instanceof Buffer)o[$]=new Uint8Array(w);else{if(w instanceof Uint8Array)break;if("string"==typeof w)o[$]=(0,_util.stringToBytes)(w);else if("object"!=typeof w||null===w||isNaN(w.length)){if(!(0,_util.isArrayBuffer)(w))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");o[$]=new Uint8Array(w)}else o[$]=new Uint8Array(w)}continue}o[$]=w}if(o.CMapReaderFactory=o.CMapReaderFactory||DefaultCMapReaderFactory,o.StandardFontDataFactory=o.StandardFontDataFactory||DefaultStandardFontDataFactory,o.ignoreErrors=!0!==o.stopAtErrors,o.fontExtraProperties=!0===o.fontExtraProperties,o.pdfBug=!0===o.pdfBug,o.enableXfa=!0===o.enableXfa,(!Number.isInteger(o.rangeChunkSize)||o.rangeChunkSize<1)&&(o.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof o.docBaseUrl||(0,_display_utils.isDataScheme)(o.docBaseUrl))&&(o.docBaseUrl=null),(!Number.isInteger(o.maxImageSize)||o.maxImageSize<-1)&&(o.maxImageSize=-1),"string"!=typeof o.cMapUrl&&(o.cMapUrl=null),"string"!=typeof o.standardFontDataUrl&&(o.standardFontDataUrl=null),"boolean"!=typeof o.useWorkerFetch&&(o.useWorkerFetch=o.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&o.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof o.isEvalSupported&&(o.isEvalSupported=!0),"boolean"!=typeof o.disableFontFace&&(o.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof o.useSystemFonts&&(o.useSystemFonts=!_is_node.isNodeJS&&!o.disableFontFace),("object"!=typeof o.ownerDocument||null===o.ownerDocument)&&(o.ownerDocument=globalThis.document),"boolean"!=typeof o.disableRange&&(o.disableRange=!1),"boolean"!=typeof o.disableStream&&(o.disableStream=!1),"boolean"!=typeof o.disableAutoFetch&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!B){const $={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};B=$.port?PDFWorker.fromPort($):new PDFWorker($),s._worker=B}const k=s.docId;return B.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const $=_fetchDocument(B,o,v,k),w=new Promise(function(T){let I;v?I=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,contentDispositionFilename:o.contentDispositionFilename,disableRange:o.disableRange,disableStream:o.disableStream},v):o.data||(I=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),T(I)});return Promise.all([$,w]).then(function([T,I]){if(s.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(k,T,B.port),O=new WorkerTransport(V,s,I,o);s._transport=O,V.send("Ready",null)})}).catch(s._capability.reject),s}function _fetchDocument(q,s,M,o){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(q,s,M,o){if(q.destroyed)throw new Error("Worker was destroyed");M&&(s.length=M.length,s.initialData=M.initialData,s.progressiveDone=M.progressiveDone,s.contentDispositionFilename=M.contentDispositionFilename);const v=yield q.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.16.105",source:{data:s.data,url:s.url,password:s.password,disableAutoFetch:s.disableAutoFetch,rangeChunkSize:s.rangeChunkSize,length:s.length},maxImageSize:s.maxImageSize,disableFontFace:s.disableFontFace,docBaseUrl:s.docBaseUrl,ignoreErrors:s.ignoreErrors,isEvalSupported:s.isEvalSupported,fontExtraProperties:s.fontExtraProperties,enableXfa:s.enableXfa,useSystemFonts:s.useSystemFonts,cMapUrl:s.useWorkerFetch?s.cMapUrl:null,standardFontDataUrl:s.useWorkerFetch?s.standardFontDataUrl:null});if(s.data&&(s.data=null),q.destroyed)throw new Error("Worker was destroyed");return v})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var s,M;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(s=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),M=s++,s)),M}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var s=this;return _asyncToGenerator(function*(){var M;s.destroyed=!0,yield null===(M=s._transport)||void 0===M?void 0:M.destroy(),s._transport=null,s._worker&&(s._worker.destroy(),s._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,M,o=!1,v=null){this.length=s,this.initialData=M,this.progressiveDone=o,this.contentDispositionFilename=v,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,M){for(const o of this._rangeListeners)o(s,M)}onDataProgress(s,M){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(s,M)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const M of this._progressiveReadListeners)M(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,M){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,M){var v,o=this;this._pdfInfo=s,this._transport=M,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(v=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),o.stats||{streamTypes:{},fontTypes:{}}}),function(){return v.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,M,o,v,B=!1){this._pageIndex=s,this._pageInfo=M,this._ownerDocument=v,this._transport=o,this._stats=B?new _display_utils.StatTimer:null,this._pdfBug=B,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:M=this.rotate,offsetX:o=0,offsetY:v=0,dontFlip:B=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:M,offsetX:o,offsetY:v,dontFlip:B})}getAnnotations({intent:s="display"}={}){const M=this._transport.getRenderingIntent(s);let o=this._annotationPromises.get(M.cacheKey);return o||(o=this._transport.getAnnotations(this._pageIndex,M.renderingIntent),this._annotationPromises.set(M.cacheKey,o),o=o.then(v=>{for(const B of v)void 0!==B.titleObj&&Object.defineProperty(B,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),B.titleObj.str)}),void 0!==B.contentsObj&&Object.defineProperty(B,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),B.contentsObj.str)});return v})),o}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var s=this;return _asyncToGenerator(function*(){var M;return(null===(M=s._transport._htmlForXfa)||void 0===M?void 0:M.children[s._pageIndex])||null})()}render({canvasContext:s,viewport:M,intent:o="display",annotationMode:v=_util.AnnotationMode.ENABLE,transform:B=null,imageLayer:k=null,canvasFactory:$=null,background:w=null,optionalContentConfigPromise:T=null,annotationCanvasMap:I=null,pageColors:V=null,printAnnotationStorage:O=null}){var D,S,r;void 0!==(null===(D=arguments[0])||void 0===D?void 0:D.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null===(S=arguments[0])||void 0===S?void 0:S.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const A=this._transport.getRenderingIntent(o,v,O);this.pendingCleanup=!1,T||(T=this._transport.getOptionalContentConfig());let y=this._intentStates.get(A.cacheKey);y||(y=Object.create(null),this._intentStates.set(A.cacheKey,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const b=$||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),F=!!(A.renderingIntent&_util.RenderingIntentFlag.PRINT);y.displayReadyCapability||(y.displayReadyCapability=(0,_util.createPromiseCapability)(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(A));const p=a=>{y.renderTasks.delete(t),(this.cleanupAfterRender||F)&&(this.pendingCleanup=!0),this._tryCleanup(),a?(t.capability.reject(a),this._abortOperatorList({intentState:y,reason:a instanceof Error?a:new Error(a)})):t.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},t=new InternalRenderTask({callback:p,params:{canvasContext:s,viewport:M,transform:B,imageLayer:k,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:I,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:b,useRequestAnimationFrame:!F,pdfBug:this._pdfBug,pageColors:V});((r=y).renderTasks||(r.renderTasks=new Set)).add(t);const e=t.task;return Promise.all([y.displayReadyCapability.promise,T]).then(([a,m])=>{this.pendingCleanup?p():(this._stats&&this._stats.time("Rendering"),t.initializeGraphics({transparency:a,optionalContentConfig:m}),t.operatorListChanged())}).catch(p),e}getOperatorList({intent:s="display",annotationMode:M=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){const B=this._transport.getRenderingIntent(s,M,o,!0);let $,k=this._intentStates.get(B.cacheKey);var w;return k||(k=Object.create(null),this._intentStates.set(B.cacheKey,k)),k.opListReadCapability||($=Object.create(null),$.operatorListChanged=function v(){k.operatorList.lastChunk&&(k.opListReadCapability.resolve(k.operatorList),k.renderTasks.delete($))},k.opListReadCapability=(0,_util.createPromiseCapability)(),((w=k).renderTasks||(w.renderTasks=new Set)).add($),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(B)),k.opListReadCapability.promise}streamTextContent({disableCombineTextItems:s=!1,includeMarkedContent:M=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==s,includeMarkedContent:!0===M},{highWaterMark:100,size:v=>v.items.length})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const M=this.streamTextContent(s);return new Promise(function(o,v){const k=M.getReader(),$={items:[],styles:Object.create(null)};!function B(){k.read().then(function({value:w,done:T}){T?o($):(Object.assign($.styles,w.styles),$.items.push(...w.items),B())},v)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const s=[];for(const M of this._intentStates.values())if(this._abortOperatorList({intentState:M,reason:new Error("Page was destroyed."),force:!0}),!M.opListReadCapability)for(const o of M.renderTasks)s.push(o.completed),o.cancel();this.objs.clear();for(const M of this._bitmaps)M.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(s)}cleanup(s=!1){return this.pendingCleanup=!0,this._tryCleanup(s)}_tryCleanup(s=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:M,operatorList:o}of this._intentStates.values())if(M.size>0||!o.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,s&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const M of this._bitmaps)M.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(s,M){const o=this._intentStates.get(M);o&&(this._stats&&this._stats.timeEnd("Page Request"),o.displayReadyCapability&&o.displayReadyCapability.resolve(s))}_renderPageChunk(s,M){for(let o=0,v=s.length;o<v;o++)M.operatorList.fnArray.push(s.fnArray[o]),M.operatorList.argsArray.push(s.argsArray[o]);M.operatorList.lastChunk=s.lastChunk,M.operatorList.separateAnnots=s.separateAnnots;for(const o of M.renderTasks)o.operatorListChanged();s.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:s,cacheKey:M,annotationStorageMap:o}){const B=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:M,annotationStorage:o}).getReader(),k=this._intentStates.get(M);k.streamReader=B;const $=()=>{B.read().then(({value:w,done:T})=>{T?k.streamReader=null:this._transport.destroyed||(this._renderPageChunk(w,k),$())},w=>{if(k.streamReader=null,!this._transport.destroyed){if(k.operatorList){k.operatorList.lastChunk=!0;for(const T of k.renderTasks)T.operatorListChanged();this._tryCleanup()}if(k.displayReadyCapability)k.displayReadyCapability.reject(w);else{if(!k.opListReadCapability)throw w;k.opListReadCapability.reject(w)}}})};$()}_abortOperatorList({intentState:s,reason:M,force:o=!1}){if(s.streamReader){if(!o){if(s.renderTasks.size>0)return;if(M instanceof _display_utils.RenderingCancelledException)return void(s.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:s,reason:M,force:!0}),s.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(s.streamReader.cancel(new _util.AbortException(M.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[v,B]of this._intentStates)if(B===s){this._intentStates.delete(v);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(s,M){const o={data:structuredClone(s,M)};this._deferred.then(()=>{for(const v of this._listeners)v.call(this,o)})}addEventListener(s,M){this._listeners.push(M)}removeEventListener(s,M){const o=this._listeners.indexOf(M);this._listeners.splice(o,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){var _document;const q=null===(_document=document)||void 0===_document||null===(_document=_document.currentScript)||void 0===_document?void 0:_document.src;q&&(PDFWorkerUtil.fallbackWorkerSrc=q.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(q,s){let M;try{if(M=new URL(q),!M.origin||"null"===M.origin)return!1}catch{return!1}const o=new URL(s,M);return M.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(q){return URL.createObjectURL(new Blob([`importScripts("${q}");`]))};class PDFWorker{constructor({name:q=null,port:s=null,verbosity:M=(0,_util.getVerbosityLevel)()}={}){if(s&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=q,this.destroyed=!1,this.verbosity=M,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s)return _classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(s,this),void this._initializeFromPort(s);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(q){this._port=q,this._messageHandler=new _message_handler.MessageHandler("main","worker",q),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:q}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,q)||(q=PDFWorkerUtil.createCDNWrapper(new URL(q,window.location).href));const s=new Worker(q),M=new _message_handler.MessageHandler("main","worker",s),o=()=>{s.removeEventListener("error",v),M.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},v=()=>{this._webWorker||o()};s.addEventListener("error",v),M.on("test",k=>{s.removeEventListener("error",v),this.destroyed?o():k?(this._messageHandler=M,this._port=s,this._webWorker=s,this._readyCapability.resolve(),M.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),M.destroy(),s.terminate())}),M.on("ready",k=>{if(s.removeEventListener("error",v),this.destroyed)o();else try{B()}catch{this._setupFakeWorker()}});const B=()=>{const k=new Uint8Array;M.send("test",k,[k.buffer])};return void B()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(q=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const s=new LoopbackPort;this._port=s;const M="fake"+PDFWorkerUtil.fakeWorkerId++,o=new _message_handler.MessageHandler(M+"_worker",M,s);q.setup(o,s);const v=new _message_handler.MessageHandler(M,M+"_worker",s);this._messageHandler=v,this._readyCapability.resolve(),v.send("configure",{verbosity:this.verbosity})}).catch(q=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${q.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(q){if(null==q||!q.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(q.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(q.port):new PDFWorker(q)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var q;return(null===(q=globalThis.pdfjsWorker)||void 0===q?void 0:q.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function q(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(s,M,o,v){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=s,this.loadingTask=M,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:M.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:v.ownerDocument,styleElement:v.styleElement}),this._params=v,v.useWorkerFetch||(this.CMapReaderFactory=new v.CMapReaderFactory({baseUrl:v.cMapUrl,isCompressed:v.cMapPacked}),this.StandardFontDataFactory=new v.StandardFontDataFactory({baseUrl:v.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(s,M=_util.AnnotationMode.ENABLE,o=null,v=!1){let B=_util.RenderingIntentFlag.DISPLAY,k=null;switch(s){case"any":B=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":B=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(M){case _util.AnnotationMode.DISABLE:B+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:B+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:B+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,k=(B&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${M}`)}return v&&(B+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:B,cacheKey:`${B}_${_annotation_storage.AnnotationStorage.getHash(k)}`,annotationStorageMap:k}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const o of _classPrivateFieldGet(this,_pageCache).values())s.push(o._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const M=this.messageHandler.sendWithPromise("Terminate",null);return s.push(M),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:M}=this;s.on("GetReader",(o,v)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=B=>{this._lastProgress={loaded:B.loaded,total:B.total}},v.onPull=()=>{this._fullReader.read().then(function({value:B,done:k}){k?v.close():((0,_util.assert)((0,_util.isArrayBuffer)(B),"GetReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(B),1,[B]))}).catch(B=>{v.error(B)})},v.onCancel=B=>{this._fullReader.cancel(B),v.ready.catch(k=>{if(!this.destroyed)throw k})}}),s.on("ReaderHeadersReady",o=>{const v=(0,_util.createPromiseCapability)(),B=this._fullReader;return B.headersReady.then(()=>{var k;B.isStreamingSupported&&B.isRangeSupported||(this._lastProgress&&(null===(k=M.onProgress)||void 0===k||k.call(M,this._lastProgress)),B.onProgress=$=>{var w;null===(w=M.onProgress)||void 0===w||w.call(M,{loaded:$.loaded,total:$.total})}),v.resolve({isStreamingSupported:B.isStreamingSupported,isRangeSupported:B.isRangeSupported,contentLength:B.contentLength})},v.reject),v.promise}),s.on("GetRangeReader",(o,v)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const B=this._networkStream.getRangeReader(o.begin,o.end);B?(v.onPull=()=>{B.read().then(function({value:k,done:$}){$?v.close():((0,_util.assert)((0,_util.isArrayBuffer)(k),"GetRangeReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(k),1,[k]))}).catch(k=>{v.error(k)})},v.onCancel=k=>{B.cancel(k),v.ready.catch($=>{if(!this.destroyed)throw $})}):v.close()}),s.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,M._capability.resolve(new PDFDocumentProxy(o,this))}),s.on("DocException",function(o){let v;switch(o.name){case"PasswordException":v=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":v=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":v=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":v=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":v=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}M._capability.reject(v)}),s.on("PasswordRequest",o=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),M.onPassword){const v=B=>{B instanceof Error?this._passwordCapability.reject(B):this._passwordCapability.resolve({password:B})};try{M.onPassword(v,o.code)}catch(B){this._passwordCapability.reject(B)}}else this._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return this._passwordCapability.promise}),s.on("DataLoaded",o=>{var v;null===(v=M.onProgress)||void 0===v||v.call(M,{loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),s.on("StartRenderPage",o=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),s.on("commonobj",([o,v,B])=>{var k;if(!this.destroyed&&!this.commonObjs.has(o))switch(v){case"Font":const $=this._params;if("error"in B){const I=B.error;(0,_util.warn)(`Error during font loading: ${I}`),this.commonObjs.resolve(o,I);break}let w=null;$.pdfBug&&null!==(k=globalThis.FontInspector)&&void 0!==k&&k.enabled&&(w={registerFont(I,V){globalThis.FontInspector.fontAdded(I,V)}});const T=new _font_loader.FontFaceObject(B,{isEvalSupported:$.isEvalSupported,disableFontFace:$.disableFontFace,ignoreErrors:$.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:w});this.fontLoader.bind(T).catch(I=>s.sendWithPromise("FontFallback",{id:o})).finally(()=>{!$.fontExtraProperties&&T.data&&(T.data=null),this.commonObjs.resolve(o,T)});break;case"FontPath":case"Image":this.commonObjs.resolve(o,B);break;default:throw new Error(`Got unknown common object type ${v}`)}}),s.on("obj",([o,v,B,k])=>{if(this.destroyed)return;const $=_classPrivateFieldGet(this,_pageCache).get(v);if(!$.objs.has(o))switch(B){case"Image":$.objs.resolve(o,k);const T=8e6;if(k){let I;if(k.bitmap){const{bitmap:V,width:O,height:D}=k;I=O*D*4,$._bitmaps.add(V)}else{var w;I=(null===(w=k.data)||void 0===w?void 0:w.length)||0}I>T&&($.cleanupAfterRender=!0)}break;case"Pattern":$.objs.resolve(o,k);break;default:throw new Error(`Got unknown object type ${B}`)}}),s.on("DocProgress",o=>{var v;this.destroyed||null===(v=M.onProgress)||void 0===v||v.call(M,{loaded:o.loaded,total:o.total})}),s.on("DocStats",o=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),s.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),s.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:s}){var M,o;this.destroyed||null===(M=(o=this.loadingTask).onUnsupportedFeature)||void 0===M||M.call(o,s)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const M=s-1,o=_classPrivateFieldGet(this,_pagePromises).get(M);if(o)return o;const v=this.messageHandler.sendWithPromise("GetPage",{pageIndex:M}).then(B=>{if(this.destroyed)throw new Error("Transport destroyed");const k=new PDFPageProxy(M,B,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(M,k),k});return _classPrivateFieldGet(this,_pagePromises).set(M,v),v}getPageIndex(s){return"object"!=typeof s||null===s||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,M){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:M})}saveDocument(){var s,M;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(s=null===(M=this._fullReader)||void 0===M?void 0:M.filename)&&void 0!==s?s:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return"string"!=typeof s?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(s=>{var M,o,v,B;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:null!==(M=null===(o=this._fullReader)||void 0===o?void 0:o.filename)&&void 0!==M?M:null,contentLength:null!==(v=null===(B=this._fullReader)||void 0===B?void 0:B.contentLength)&&void 0!==v?v:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(s=!1){var M=this;return _asyncToGenerator(function*(){if(yield M.messageHandler.sendWithPromise("Cleanup",null),!M.destroyed){for(const o of _classPrivateFieldGet(M,_pageCache).values())if(!o.cleanup())throw new Error(`startCleanup: Page ${o.pageNumber} is currently rendering.`);M.commonObjs.clear(),s||M.fontLoader.clear(),_classPrivateFieldSet(M,_metadataPromise,null),M._getFieldObjectsPromise=null,M._hasJSActionsPromise=null}})()}get loadingParams(){const s=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s.disableAutoFetch,enableXfa:s.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(s,M=null){if(M){const v=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,s);return v.capability.promise.then(()=>M(v.data)),null}const o=_classPrivateFieldGet(this,_objs)[s];if(null==o||!o.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${s}.`);return o.data}has(s){const M=_classPrivateFieldGet(this,_objs)[s];return(null==M?void 0:M.capability.settled)||!1}resolve(s,M=null){const o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,s);o.data=M,o.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(q){return _classPrivateFieldGet(this,_objs)[q]||(_classPrivateFieldGet(this,_objs)[q]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(s){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,s),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:s}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!s)return!1;const{annotationCanvasMap:M}=_classPrivateFieldGet(this,_internalRenderTask);return s.form||s.canvas&&(null==M?void 0:M.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:s,params:M,objs:o,commonObjs:v,annotationCanvasMap:B,operatorList:k,pageIndex:$,canvasFactory:w,useRequestAnimationFrame:T=!1,pdfBug:I=!1,pageColors:V=null}){this.callback=s,this.params=M,this.objs=o,this.commonObjs=v,this.annotationCanvasMap=B,this.operatorListIdx=null,this.operatorList=k,this._pageIndex=$,this.canvasFactory=w,this._pdfBug=I,this.pageColors=V,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===T&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=M.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:M}){var o;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&null!==(o=globalThis.StepperManager)&&void 0!==o&&o.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:v,viewport:B,transform:k,imageLayer:$,background:w}=this.params;this.gfx=new _canvas.CanvasGraphics(v,this.commonObjs,this.objs,this.canvasFactory,$,M,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:k,viewport:B,transparency:s,background:w}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(s=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var s=this;return _asyncToGenerator(function*(){s.cancelled||(s.operatorListIdx=s.gfx.executeOperatorList(s.operatorList,s.operatorListIdx,s._continueBound,s.stepper),s.operatorListIdx===s.operatorList.argsArray.length&&(s.running=!1,s.operatorList.lastChunk&&(s.gfx.endDrawing(),s._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(s._canvas),s.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var o=M(1),v=M(6),B=M(10),k=new WeakSet;class ${constructor(){_classPrivateMethodInitSpec(this,k),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(O,D){const S=this._storage.get(O);return void 0===S?D:Object.assign(D,S)}getRawValue(O){return this._storage.get(O)}remove(O){if(this._storage.delete(O),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const D of this._storage.values())if(D instanceof v.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(O,D){const S=this._storage.get(O);let r=!1;if(void 0!==S)for(const[A,y]of Object.entries(D))S[A]!==y&&(r=!0,S[A]=y);else r=!0,this._storage.set(O,D);r&&_classPrivateMethodGet(this,k,w).call(this),D instanceof v.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(D.constructor._type)}has(O){return this._storage.has(O)}getAll(){return this._storage.size>0?(0,o.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new I(this)}get serializable(){if(0===this._storage.size)return null;const O=new Map;for(const[D,S]of this._storage){const r=S instanceof v.AnnotationEditor?S.serialize():S;r&&O.set(D,r)}return O}static getHash(O){if(!O)return"";const D=new B.MurmurHash3_64;for(const[S,r]of O)D.update(`${S}:${JSON.stringify(r)}`);return D.hexdigest()}}function w(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}s.AnnotationStorage=$;var T=new WeakMap;class I extends ${constructor(O){super(),_classPrivateFieldInitSpec(this,T,{writable:!0,value:null}),_classPrivateFieldSet(this,T,structuredClone(O.serializable))}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(this,T)}}s.PrintAnnotationStorage=I},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var o=M(7),v=M(1),B=new WeakMap,k=new WeakMap,$=new WeakMap,w=new WeakMap,T=new WeakMap,I=new WeakMap;class V{constructor(D){_classPrivateFieldInitSpec(this,B,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec(this,k,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec(this,$,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,w,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:V._zIndex++}),this.constructor===V&&(0,v.unreachable)("Cannot initialize AnnotationEditor."),this.parent=D.parent,this.id=D.id,this.width=this.height=null,this.pageIndex=D.parent.pageIndex,this.name=D.name,this.div=null;const[S,r]=this.parent.viewportBaseDimensions;this.x=D.x/S,this.y=D.y/r,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,v.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,I)}focusin(D){_classPrivateFieldGet(this,$)?_classPrivateFieldSet(this,$,!1):this.parent.setSelected(this)}focusout(D){if(!this.isAttachedToDOM)return;const S=D.relatedTarget;null!=S&&S.closest(`#${this.id}`)||(D.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(D){const S=this.parent.div.getBoundingClientRect();this.startX=D.clientX-S.x,this.startY=D.clientY-S.y,D.dataTransfer.setData("text/plain",this.id),D.dataTransfer.effectAllowed="move"}setAt(D,S,r,A){const[y,b]=this.parent.viewportBaseDimensions;[r,A]=this.screenToPageTranslation(r,A),this.x=(D+r)/y,this.y=(S+A)/b,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(D,S){const[r,A]=this.parent.viewportBaseDimensions;[D,S]=this.screenToPageTranslation(D,S),this.x+=D/r,this.y+=S/A,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(D,S){const{rotation:r}=this.parent.viewport;switch(r){case 90:return[S,-D];case 180:return[-D,-S];case 270:return[-S,D];default:return[D,S]}}setDims(D,S){const[r,A]=this.parent.viewportBaseDimensions;this.div.style.width=100*D/r+"%",this.div.style.height=100*S/A+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(this,B)),this.div.addEventListener("focusout",_classPrivateFieldGet(this,k));const[D,S]=this.getInitialTranslation();return this.translate(D,S),(0,o.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(D){const S=o.KeyboardManager.platform.isMac;0!==D.button||D.ctrlKey&&S?D.preventDefault():(D.ctrlKey&&!S||D.shiftKey||D.metaKey&&S?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet(this,$,!0))}getRect(D,S){const[r,A]=this.parent.viewportBaseDimensions,[y,b]=this.parent.pageDimensions,F=y*D/r,p=b*S/A,t=this.x*y,e=this.y*b,a=this.width*y,m=this.height*b;switch(this.rotation){case 0:return[t+F,b-e-p-m,t+F+a,b-e-p];case 90:return[t+p,b-e+F,t+p+m,b-e+F+a];case 180:return[t-F-a,b-e+p,t-F,b-e+p+m];case 270:return[t-p-m,b-e-F-a,t-p,b-e-F];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(D,S){const[r,A,y,b]=D,F=y-r,p=b-A;switch(this.rotation){case 0:return[r,S-b,F,p];case 90:return[r,S-A,p,F];case 180:return[y,S-A,F,p];case 270:return[y,S-b,p,F];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(this,T,!0)}disableEditMode(){_classPrivateFieldSet(this,T,!1)}isInEditMode(){return _classPrivateFieldGet(this,T)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var D;null===(D=this.div)||void 0===D||D.addEventListener("focusin",_classPrivateFieldGet(this,B))}serialize(){(0,v.unreachable)("An editor must be serializable")}static deserialize(D,S){const r=new this.prototype.constructor({parent:S,id:S.getNextId()});r.rotation=D.rotation;const[A,y]=S.pageDimensions,[b,F,p,t]=r.getRectInCurrentCoords(D.rect,y);return r.x=b/A,r.y=F/y,r.width=p/A,r.height=t/y,r}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,B)),this.div.removeEventListener("focusout",_classPrivateFieldGet(this,k)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var D;null===(D=this.div)||void 0===D||D.classList.add("selectedEditor")}unselect(){var D;null===(D=this.div)||void 0===D||D.classList.remove("selectedEditor")}updateParams(D,S){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(this,w)}set isEditing(D){_classPrivateFieldSet(this,w,D),D?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}_defineProperty(V,"_colorManager",new o.ColorManager),_defineProperty(V,"_zIndex",1),s.AnnotationEditor=V},(q,s,M)=>{var o;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=function k(me,ie,oe){for(const Pe of oe)ie.addEventListener(Pe,me[Pe].bind(me))},s.opacityToHex=function $(me){return Math.round(Math.min(255,Math.max(1,255*me))).toString(16).padStart(2,"0")};var v=M(1),B=M(8),w=new WeakMap;class T{constructor(){_classPrivateFieldInitSpec(this,w,{writable:!0,value:0})}getId(){var ie,oe;return`${v.AnnotationEditorPrefix}${_classPrivateFieldSet(this,w,(ie=_classPrivateFieldGet(this,w),oe=ie++,ie)),oe}`}}var I=new WeakMap,V=new WeakMap,O=new WeakMap,D=new WeakMap;class S{constructor(ie=128){_classPrivateFieldInitSpec(this,I,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:-1}),_classPrivateFieldSet(this,O,ie)}add({cmd:ie,undo:oe,mustExec:Pe,type:Be=NaN,overwriteIfSameType:Me=!1,keepUndo:fe=!1}){if(Pe&&ie(),_classPrivateFieldGet(this,V))return;const Ce={cmd:ie,undo:oe,type:Be};if(-1===_classPrivateFieldGet(this,D))return _classPrivateFieldGet(this,I).length>0&&(_classPrivateFieldGet(this,I).length=0),_classPrivateFieldSet(this,D,0),void _classPrivateFieldGet(this,I).push(Ce);if(Me&&_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].type===Be)return fe&&(Ce.undo=_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].undo),void(_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)]=Ce);const xe=_classPrivateFieldGet(this,D)+1;xe===_classPrivateFieldGet(this,O)?_classPrivateFieldGet(this,I).splice(0,1):(_classPrivateFieldSet(this,D,xe),xe<_classPrivateFieldGet(this,I).length&&_classPrivateFieldGet(this,I).splice(xe)),_classPrivateFieldGet(this,I).push(Ce)}undo(){-1!==_classPrivateFieldGet(this,D)&&(_classPrivateFieldSet(this,V,!0),_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].undo(),_classPrivateFieldSet(this,V,!1),_classPrivateFieldSet(this,D,_classPrivateFieldGet(this,D)-1))}redo(){_classPrivateFieldGet(this,D)<_classPrivateFieldGet(this,I).length-1&&(_classPrivateFieldSet(this,D,_classPrivateFieldGet(this,D)+1),_classPrivateFieldSet(this,V,!0),_classPrivateFieldGet(this,I)[_classPrivateFieldGet(this,D)].cmd(),_classPrivateFieldSet(this,V,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,D)}hasSomethingToRedo(){return _classPrivateFieldGet(this,D)<_classPrivateFieldGet(this,I).length-1}destroy(){_classPrivateFieldSet(this,I,null)}}s.CommandManager=S;var r=new WeakSet;class A{constructor(ie){_classPrivateMethodInitSpec(this,r),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const oe=A.platform.isMac;for(const[Pe,Be]of ie)for(const Me of Pe){const fe=Me.startsWith("mac+");oe&&fe?(this.callbacks.set(Me.slice(4),Be),this.allKeys.add(Me.split("+").at(-1))):!oe&&!fe&&(this.callbacks.set(Me,Be),this.allKeys.add(Me.split("+").at(-1)))}}static get platform(){const ie=typeof navigator<"u"?navigator.platform:"";return(0,v.shadow)(this,"platform",{isWin:ie.includes("Win"),isMac:ie.includes("Mac")})}exec(ie,oe){if(!this.allKeys.has(oe.key))return;const Pe=this.callbacks.get(_classPrivateMethodGet(this,r,y).call(this,oe));Pe&&(Pe.bind(ie)(),oe.stopPropagation(),oe.preventDefault())}}function y(me){me.altKey&&this.buffer.push("alt"),me.ctrlKey&&this.buffer.push("ctrl"),me.metaKey&&this.buffer.push("meta"),me.shiftKey&&this.buffer.push("shift"),this.buffer.push(me.key);const ie=this.buffer.join("+");return this.buffer.length=0,ie}s.KeyboardManager=A;var b=new WeakMap;class F{constructor(){_classPrivateFieldInitSpec(this,b,{writable:!0,value:null})}copy(ie){ie&&(Array.isArray(ie)?_classPrivateFieldSet(this,b,ie.map(oe=>oe.serialize())):_classPrivateFieldSet(this,b,[ie.serialize()]),_classPrivateFieldSet(this,b,_classPrivateFieldGet(this,b).filter(oe=>!!oe)),0===_classPrivateFieldGet(this,b).length&&_classPrivateFieldSet(this,b,null))}paste(){return _classPrivateFieldGet(this,b)}isEmpty(){return null===_classPrivateFieldGet(this,b)}destroy(){_classPrivateFieldSet(this,b,null)}}class p{get _colors(){const ie=new Map([["CanvasText",null],["Canvas",null]]);return(0,B.getColorValues)(ie),(0,v.shadow)(this,"_colors",ie)}convert(ie){const oe=(0,B.getRGB)(ie);if(!window.matchMedia("(forced-colors: active)").matches)return oe;for(const[Pe,Be]of this._colors)if(Be.every((Me,fe)=>Me===oe[fe]))return p._colorsMapping.get(Pe);return oe}getHexCode(ie){const oe=this._colors.get(ie);return oe?v.Util.makeHexColor(...oe):ie}}_defineProperty(p,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),s.ColorManager=p;var t=new WeakMap,e=new WeakMap,a=new WeakMap,m=new WeakMap,C=new WeakMap,E=new WeakMap,u=new WeakMap,g=new WeakMap,R=new WeakMap,L=new WeakMap,z=new WeakMap,W=new WeakMap,N=new WeakMap,U=new WeakMap,Q=new WeakMap,re=new WeakMap,j=new WeakMap,h=new WeakSet,n=new WeakSet,_=new WeakSet,d=new WeakSet,f=new WeakSet,i=new WeakSet,c=new WeakSet,l=new WeakSet,P=new WeakSet;class x{constructor(ie,oe){_classPrivateMethodInitSpec(this,P),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,c),_classPrivateMethodInitSpec(this,i),_classPrivateMethodInitSpec(this,f),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,_),_classPrivateMethodInitSpec(this,n),_classPrivateMethodInitSpec(this,h),_classPrivateFieldInitSpec(this,t,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,a,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,m,{writable:!0,value:new F}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:new S}),_classPrivateFieldInitSpec(this,E,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,u,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,g,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,R,{writable:!0,value:new T}),_classPrivateFieldInitSpec(this,L,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,z,{writable:!0,value:v.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec(this,W,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,N,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec(this,re,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:null}),_classPrivateFieldSet(this,j,ie),_classPrivateFieldSet(this,g,oe),_classPrivateFieldGet(this,g)._on("editingaction",_classPrivateFieldGet(this,U)),_classPrivateFieldGet(this,g)._on("pagechanging",_classPrivateFieldGet(this,Q))}destroy(){_classPrivateMethodGet(this,n,K).call(this),_classPrivateFieldGet(this,g)._off("editingaction",_classPrivateFieldGet(this,U)),_classPrivateFieldGet(this,g)._off("pagechanging",_classPrivateFieldGet(this,Q));for(const ie of _classPrivateFieldGet(this,a).values())ie.destroy();_classPrivateFieldGet(this,a).clear(),_classPrivateFieldGet(this,e).clear(),_classPrivateFieldSet(this,t,null),_classPrivateFieldGet(this,W).clear(),_classPrivateFieldGet(this,m).destroy(),_classPrivateFieldGet(this,C).destroy()}onPageChanging({pageNumber:ie}){_classPrivateFieldSet(this,E,ie-1)}focusMainContainer(){_classPrivateFieldGet(this,j).focus()}keydown(ie){var oe;null!==(oe=this.getActive())&&void 0!==oe&&oe.shouldGetKeyboardEvents()||x._keyboardManager.exec(this,ie)}onEditingAction(ie){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ie.name)&&this[ie.name]()}setEditingState(ie){ie?(_classPrivateMethodGet(this,h,H).call(this),_classPrivateMethodGet(this,_,se).call(this,{isEditing:_classPrivateFieldGet(this,z)!==v.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,l,de).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,C).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,C).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,m).isEmpty()})):(_classPrivateMethodGet(this,n,K).call(this),_classPrivateMethodGet(this,_,se).call(this,{isEditing:!1}))}registerEditorTypes(ie){_classPrivateFieldSet(this,u,ie);for(const oe of _classPrivateFieldGet(this,u))_classPrivateMethodGet(this,d,te).call(this,oe.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet(this,R).getId()}addLayer(ie){_classPrivateFieldGet(this,a).set(ie.pageIndex,ie),_classPrivateFieldGet(this,L)?ie.enable():ie.disable()}removeLayer(ie){_classPrivateFieldGet(this,a).delete(ie.pageIndex)}updateMode(ie){if(_classPrivateFieldSet(this,z,ie),ie===v.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet(this,i,le).call(this);else{this.setEditingState(!0),_classPrivateMethodGet(this,f,pe).call(this);for(const oe of _classPrivateFieldGet(this,a).values())oe.updateMode(ie)}}updateToolbar(ie){ie!==_classPrivateFieldGet(this,z)&&_classPrivateFieldGet(this,g).dispatch("switchannotationeditormode",{source:this,mode:ie})}updateParams(ie,oe){for(const Pe of _classPrivateFieldGet(this,W))Pe.updateParams(ie,oe);for(const Pe of _classPrivateFieldGet(this,u))Pe.updateDefaultParams(ie,oe)}getEditors(ie){const oe=[];for(const Pe of _classPrivateFieldGet(this,e).values())Pe.pageIndex===ie&&oe.push(Pe);return oe}getEditor(ie){return _classPrivateFieldGet(this,e).get(ie)}addEditor(ie){_classPrivateFieldGet(this,e).set(ie.id,ie)}removeEditor(ie){_classPrivateFieldGet(this,e).delete(ie.id),this.unselect(ie)}setActiveEditor(ie){_classPrivateFieldGet(this,t)!==ie&&(_classPrivateFieldSet(this,t,ie),ie&&_classPrivateMethodGet(this,d,te).call(this,ie.propertiesToUpdate))}toggleSelected(ie){if(_classPrivateFieldGet(this,W).has(ie))return _classPrivateFieldGet(this,W).delete(ie),ie.unselect(),void _classPrivateMethodGet(this,_,se).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(this,W).add(ie),ie.select(),_classPrivateMethodGet(this,d,te).call(this,ie.propertiesToUpdate),_classPrivateMethodGet(this,_,se).call(this,{hasSelectedEditor:!0})}setSelected(ie){for(const oe of _classPrivateFieldGet(this,W))oe!==ie&&oe.unselect();_classPrivateFieldGet(this,W).clear(),_classPrivateFieldGet(this,W).add(ie),ie.select(),_classPrivateMethodGet(this,d,te).call(this,ie.propertiesToUpdate),_classPrivateMethodGet(this,_,se).call(this,{hasSelectedEditor:!0})}isSelected(ie){return _classPrivateFieldGet(this,W).has(ie)}unselect(ie){ie.unselect(),_classPrivateFieldGet(this,W).delete(ie),_classPrivateMethodGet(this,_,se).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(this,W).size}undo(){_classPrivateFieldGet(this,C).undo(),_classPrivateMethodGet(this,_,se).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,C).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,l,de).call(this)})}redo(){_classPrivateFieldGet(this,C).redo(),_classPrivateMethodGet(this,_,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,C).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,l,de).call(this)})}addCommands(ie){_classPrivateFieldGet(this,C).add(ie),_classPrivateMethodGet(this,_,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,l,de).call(this)})}delete(){if(_classPrivateFieldGet(this,t)&&_classPrivateFieldGet(this,t).commitOrRemove(),!this.hasSelection)return;const ie=[..._classPrivateFieldGet(this,W)];this.addCommands({cmd:()=>{for(const Be of ie)Be.remove()},undo:()=>{for(const Be of ie)_classPrivateMethodGet(this,c,ue).call(this,Be)},mustExec:!0})}copy(){if(_classPrivateFieldGet(this,t)&&_classPrivateFieldGet(this,t).commitOrRemove(),this.hasSelection){const ie=[];for(const oe of _classPrivateFieldGet(this,W))oe.isEmpty()||ie.push(oe);if(0===ie.length)return;_classPrivateFieldGet(this,m).copy(ie),_classPrivateMethodGet(this,_,se).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(_classPrivateFieldGet(this,m).isEmpty())return;this.unselectAll();const ie=_classPrivateFieldGet(this,a).get(_classPrivateFieldGet(this,E)),oe=_classPrivateFieldGet(this,m).paste().map(Me=>ie.deserialize(Me));this.addCommands({cmd:()=>{for(const Me of oe)_classPrivateMethodGet(this,c,ue).call(this,Me);_classPrivateMethodGet(this,P,_e).call(this,oe)},undo:()=>{for(const Me of oe)Me.remove()},mustExec:!0})}selectAll(){for(const ie of _classPrivateFieldGet(this,W))ie.commit();_classPrivateMethodGet(this,P,_e).call(this,_classPrivateFieldGet(this,e).values())}unselectAll(){if(_classPrivateFieldGet(this,t))_classPrivateFieldGet(this,t).commitOrRemove();else if(0!==_classPrivateMethodGet(this,P,_e).size){for(const ie of _classPrivateFieldGet(this,W))ie.unselect();_classPrivateFieldGet(this,W).clear(),_classPrivateMethodGet(this,_,se).call(this,{hasSelectedEditor:!1})}}isActive(ie){return _classPrivateFieldGet(this,t)===ie}getActive(){return _classPrivateFieldGet(this,t)}getMode(){return _classPrivateFieldGet(this,z)}}function H(){_classPrivateFieldGet(this,j).addEventListener("keydown",_classPrivateFieldGet(this,N))}function K(){_classPrivateFieldGet(this,j).removeEventListener("keydown",_classPrivateFieldGet(this,N))}function se(me){Object.entries(me).some(([oe,Pe])=>_classPrivateFieldGet(this,re)[oe]!==Pe)&&_classPrivateFieldGet(this,g).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,re),me)})}function te(me){_classPrivateFieldGet(this,g).dispatch("annotationeditorparamschanged",{source:this,details:me})}function pe(){if(!_classPrivateFieldGet(this,L)){_classPrivateFieldSet(this,L,!0);for(const me of _classPrivateFieldGet(this,a).values())me.enable()}}function le(){if(this.unselectAll(),_classPrivateFieldGet(this,L)){_classPrivateFieldSet(this,L,!1);for(const me of _classPrivateFieldGet(this,a).values())me.disable()}}function ue(me){const ie=_classPrivateFieldGet(this,a).get(me.pageIndex);ie?ie.addOrRebuild(me):this.addEditor(me)}function de(){if(0===_classPrivateFieldGet(this,e).size)return!0;if(1===_classPrivateFieldGet(this,e).size)for(const me of _classPrivateFieldGet(this,e).values())return me.isEmpty();return!1}function _e(me){_classPrivateFieldGet(this,W).clear();for(const ie of me)ie.isEmpty()||(_classPrivateFieldGet(this,W).add(ie),ie.select());_classPrivateMethodGet(this,_,se).call(this,{hasSelectedEditor:!0})}_defineProperty(x,"_keyboardManager",new A([[["ctrl+a","mac+meta+a"],(o=x).prototype.selectAll],[["ctrl+c","mac+meta+c"],o.prototype.copy],[["ctrl+v","mac+meta+v"],o.prototype.paste],[["ctrl+x","mac+meta+x"],o.prototype.cut],[["ctrl+z","mac+meta+z"],o.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],o.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],o.prototype.delete],[["Escape","mac+Escape"],o.prototype.unselectAll]])),s.AnnotationEditorUIManager=x},(q,s,M)=>{var o;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=s.AnnotationPrefix=void 0,s.deprecated=function m(W){console.log("Deprecated API usage: "+W)},s.getColorValues=function R(W){const N=document.createElement("span");N.style.visibility="hidden",document.body.append(N);for(const U of W.keys()){N.style.color=U;const Q=window.getComputedStyle(N).color;W.set(U,g(Q))}N.remove()},s.getCurrentTransform=function L(W){const{a:N,b:U,c:Q,d:re,e:j,f:h}=W.getTransform();return[N,U,Q,re,j,h]},s.getCurrentTransformInverse=function z(W){const{a:N,b:U,c:Q,d:re,e:j,f:h}=W.getTransform().invertSelf();return[N,U,Q,re,j,h]},s.getFilenameFromUrl=function F(W){const N=W.indexOf("#"),U=W.indexOf("?"),Q=Math.min(N>0?N:W.length,U>0?U:W.length);return W.substring(W.lastIndexOf("/",Q)+1,Q)},s.getPdfFilenameFromUrl=function p(W,N="document.pdf"){if("string"!=typeof W)return N;if(y(W))return(0,B.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const Q=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,re=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(W);let j=Q.exec(re[1])||Q.exec(re[2])||Q.exec(re[3]);if(j&&(j=j[0],j.includes("%")))try{j=Q.exec(decodeURIComponent(j))[0]}catch{}return j||N},s.getRGB=g,s.getXfaPageViewport=function u(W,{scale:N=1,rotation:U=0}){const{width:Q,height:re}=W.attributes.style,j=[0,0,parseInt(Q),parseInt(re)];return new r({viewBox:j,scale:N,rotation:U})},s.isDataScheme=y,s.isPdfFile=function b(W){return"string"==typeof W&&/\.pdf$/i.test(W)},s.isValidFetchUrl=e,s.loadScript=function a(W,N=!1){return new Promise((U,Q)=>{const re=document.createElement("script");re.src=W,re.onload=function(j){N&&re.remove(),U(j)},re.onerror=function(){Q(new Error(`Cannot load script at: ${re.src}`))},(document.head||document.documentElement).append(re)})};var v=M(9),B=M(1);s.AnnotationPrefix="pdfjs_internal_id_";class w{}function I(W){return V.apply(this,arguments)}function V(){return(V=_asyncToGenerator(function*(W,N=!1){if(e(W,document.baseURI)){const U=yield fetch(W);if(!U.ok)throw new Error(U.statusText);return N?new Uint8Array(yield U.arrayBuffer()):(0,B.stringToBytes)(yield U.text())}return new Promise((U,Q)=>{const re=new XMLHttpRequest;re.open("GET",W,!0),N&&(re.responseType="arraybuffer"),re.onreadystatechange=()=>{if(re.readyState===XMLHttpRequest.DONE){if(200===re.status||0===re.status){let j;if(N&&re.response?j=new Uint8Array(re.response):!N&&re.responseText&&(j=(0,B.stringToBytes)(re.responseText)),j)return void U(j)}Q(new Error(re.statusText))}},re.send(null)})})).apply(this,arguments)}o=w,_defineProperty(w,"CSS",96),_defineProperty(w,"PDF",72),_defineProperty(w,"PDF_TO_CSS_UNITS",o.CSS/o.PDF),s.PixelsPerInch=w,s.DOMCanvasFactory=class T extends v.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,U){const Q=this._document.createElement("canvas");return Q.width=N,Q.height=U,Q}},s.DOMCMapReaderFactory=class O extends v.BaseCMapReaderFactory{_fetchData(N,U){return I(N,this.isCompressed).then(Q=>({cMapData:Q,compressionType:U}))}},s.DOMStandardFontDataFactory=class D extends v.BaseStandardFontDataFactory{_fetchData(N){return I(N,!0)}},s.DOMSVGFactory=class S extends v.BaseSVGFactory{_createSVG(N){return document.createElementNS("http://www.w3.org/2000/svg",N)}};class r{constructor({viewBox:N,scale:U,rotation:Q,offsetX:re=0,offsetY:j=0,dontFlip:h=!1}){this.viewBox=N,this.scale=U,this.rotation=Q,this.offsetX=re,this.offsetY=j;const n=(N[2]+N[0])/2,_=(N[3]+N[1])/2;let d,f,i,c,l,P,x,H;switch((Q%=360)<0&&(Q+=360),Q){case 180:d=-1,f=0,i=0,c=1;break;case 90:d=0,f=1,i=1,c=0;break;case 270:d=0,f=-1,i=-1,c=0;break;case 0:d=1,f=0,i=0,c=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(i=-i,c=-c),0===d?(l=Math.abs(_-N[1])*U+re,P=Math.abs(n-N[0])*U+j,x=Math.abs(N[3]-N[1])*U,H=Math.abs(N[2]-N[0])*U):(l=Math.abs(n-N[0])*U+re,P=Math.abs(_-N[1])*U+j,x=Math.abs(N[2]-N[0])*U,H=Math.abs(N[3]-N[1])*U),this.transform=[d*U,f*U,i*U,c*U,l-d*U*n-i*U*_,P-f*U*n-c*U*_],this.width=x,this.height=H}clone({scale:N=this.scale,rotation:U=this.rotation,offsetX:Q=this.offsetX,offsetY:re=this.offsetY,dontFlip:j=!1}={}){return new r({viewBox:this.viewBox.slice(),scale:N,rotation:U,offsetX:Q,offsetY:re,dontFlip:j})}convertToViewportPoint(N,U){return B.Util.applyTransform([N,U],this.transform)}convertToViewportRectangle(N){const U=B.Util.applyTransform([N[0],N[1]],this.transform),Q=B.Util.applyTransform([N[2],N[3]],this.transform);return[U[0],U[1],Q[0],Q[1]]}convertToPdfPoint(N,U){return B.Util.applyInverseTransform([N,U],this.transform)}}function y(W){const N=W.length;let U=0;for(;U<N&&""===W[U].trim();)U++;return"data:"===W.substring(U,U+5).toLowerCase()}function e(W,N){try{const{protocol:U}=N?new URL(W,N):new URL(W);return"http:"===U||"https:"===U}catch{return!1}}let C;function g(W){if(W.startsWith("#")){const N=parseInt(W.slice(1),16);return[(16711680&N)>>16,(65280&N)>>8,255&N]}return W.startsWith("rgb(")?W.slice(4,-1).split(",").map(N=>parseInt(N)):W.startsWith("rgba(")?W.slice(5,-1).split(",").map(N=>parseInt(N)).slice(0,3):((0,B.warn)(`Not a valid color format: "${W}"`),[0,0,0])}s.PageViewport=r,s.RenderingCancelledException=class A extends B.BaseException{constructor(N,U){super(N,"RenderingCancelledException"),this.type=U}},s.StatTimer=class t{constructor(){this.started=Object.create(null),this.times=[]}time(N){N in this.started&&(0,B.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,B.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let U=0;for(const Q of this.times){const re=Q.name;re.length>U&&(U=re.length)}for(const Q of this.times){const re=Q.end-Q.start;N.push(`${Q.name.padEnd(U)} ${re}ms\n`)}return N.join("")}},s.PDFDateString=class E{static toDateObject(N){if(!N||"string"!=typeof N)return null;C||(C=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=C.exec(N);if(!U)return null;const Q=parseInt(U[1],10);let re=parseInt(U[2],10);re=re>=1&&re<=12?re-1:0;let j=parseInt(U[3],10);j=j>=1&&j<=31?j:1;let h=parseInt(U[4],10);h=h>=0&&h<=23?h:0;let n=parseInt(U[5],10);n=n>=0&&n<=59?n:0;let _=parseInt(U[6],10);_=_>=0&&_<=59?_:0;const d=U[7]||"Z";let f=parseInt(U[8],10);f=f>=0&&f<=23?f:0;let i=parseInt(U[9],10)||0;return i=i>=0&&i<=59?i:0,"-"===d?(h+=f,n+=i):"+"===d&&(h-=f,n-=i),new Date(Date.UTC(Q,re,j,h,n,_))}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var o=M(1);class v{constructor(){this.constructor===v&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(T,I){if(T<=0||I<=0)throw new Error("Invalid canvas size");const V=this._createCanvas(T,I);return{canvas:V,context:V.getContext("2d")}}reset(T,I,V){if(!T.canvas)throw new Error("Canvas is not specified");if(I<=0||V<=0)throw new Error("Invalid canvas size");T.canvas.width=I,T.canvas.height=V}destroy(T){if(!T.canvas)throw new Error("Canvas is not specified");T.canvas.width=0,T.canvas.height=0,T.canvas=null,T.context=null}_createCanvas(T,I){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=v;class B{constructor({baseUrl:T=null,isCompressed:I=!1}){this.constructor===B&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=T,this.isCompressed=I}fetch({name:T}){var I=this;return _asyncToGenerator(function*(){if(!I.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!T)throw new Error("CMap name must be specified.");const V=I.baseUrl+T+(I.isCompressed?".bcmap":"");return I._fetchData(V,I.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE).catch(D=>{throw new Error(`Unable to load ${I.isCompressed?"binary ":""}CMap at: ${V}`)})})()}_fetchData(T,I){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=B;class k{constructor({baseUrl:T=null}){this.constructor===k&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=T}fetch({filename:T}){var I=this;return _asyncToGenerator(function*(){if(!I.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!T)throw new Error("Font filename must be specified.");const V=`${I.baseUrl}${T}`;return I._fetchData(V).catch(O=>{throw new Error(`Unable to load font data at: ${V}`)})})()}_fetchData(T){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=k;class ${constructor(){this.constructor===$&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(T,I,V=!1){if(T<=0||I<=0)throw new Error("Invalid SVG dimensions");const O=this._createSVG("svg:svg");return O.setAttribute("version","1.1"),V||(O.setAttribute("width",`${T}px`),O.setAttribute("height",`${I}px`)),O.setAttribute("preserveAspectRatio","none"),O.setAttribute("viewBox",`0 0 ${T} ${I}`),O}createElement(T){if("string"!=typeof T)throw new Error("Invalid SVG element type");return this._createSVG(T)}_createSVG(T){(0,o.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=$},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var o=M(1);const v=3285377520,B=4294901760,k=65535;s.MurmurHash3_64=class ${constructor(T){this.h1=T?4294967295&T:v,this.h2=T?4294967295&T:v}update(T){let I,V;if("string"==typeof T){I=new Uint8Array(2*T.length),V=0;for(let a=0,m=T.length;a<m;a++){const C=T.charCodeAt(a);C<=255?I[V++]=C:(I[V++]=C>>>8,I[V++]=255&C)}}else{if(!(0,o.isArrayBuffer)(T))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");I=T.slice(),V=I.byteLength}const O=V>>2,D=V-4*O,S=new Uint32Array(I.buffer,0,O);let r=0,A=0,y=this.h1,b=this.h2;const F=3432918353,p=461845907,t=F&k,e=p&k;for(let a=0;a<O;a++)1&a?(r=S[a],r=r*F&B|r*t&k,r=r<<15|r>>>17,r=r*p&B|r*e&k,y^=r,y=y<<13|y>>>19,y=5*y+3864292196):(A=S[a],A=A*F&B|A*t&k,A=A<<15|A>>>17,A=A*p&B|A*e&k,b^=A,b=b<<13|b>>>19,b=5*b+3864292196);switch(r=0,D){case 3:r^=I[4*O+2]<<16;case 2:r^=I[4*O+1]<<8;case 1:r^=I[4*O],r=r*F&B|r*t&k,r=r<<15|r>>>17,r=r*p&B|r*e&k,1&O?y^=r:b^=r}this.h1=y,this.h2=b}hexdigest(){let T=this.h1,I=this.h2;T^=I>>>1,T=3981806797*T&B|36045*T&k,I=4283543511*I&B|(2950163797*(I<<16|T>>>16)&B)>>>16,T^=I>>>1,T=444984403*T&B|60499*T&k,I=3301882366*I&B|(3120437893*(I<<16|T>>>16)&B)>>>16,T^=I>>>1;const V=(T>>>0).toString(16),O=(I>>>0).toString(16);return V.padStart(8,"0")+O.padStart(8,"0")}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var o=M(1);class v{constructor({docId:w,onUnsupportedFeature:T,ownerDocument:I=globalThis.document,styleElement:V=null}){this.constructor===v&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=w,this._onUnsupportedFeature=T,this._document=I,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(w){this.nativeFontFaces.push(w),this._document.fonts.add(w)}insertRule(w){let T=this.styleElement;T||(T=this.styleElement=this._document.createElement("style"),T.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(T));const I=T.sheet;I.insertRule(w,I.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(w){var T=this;return _asyncToGenerator(function*(){if(w.attached||w.missingFile)return;if(w.attached=!0,T.isFontLoadingAPISupported){const V=w.createNativeFontFace();if(V){T.addNativeFontFace(V);try{yield V.loaded}catch(O){throw T._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)(`Failed to load font '${V.family}': '${O}'.`),w.disableFontFace=!0,O}}return}const I=w.createFontFaceRule();if(I){if(T.insertRule(I),T.isSyncFontLoadingSupported)return;yield new Promise(V=>{const O=T._queueLoadingCallback(V);T._prepareFontLoadEvent([I],[w],O)})}})()}_queueLoadingCallback(w){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var w;const T=!(null===(w=this._document)||void 0===w||!w.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(w,T,I){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let B;s.FontLoader=B,s.FontLoader=B=class extends v{constructor(w){super(w),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let w=!1;if(typeof navigator>"u")w=!0;else{const T=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==T?void 0:T[1])>=14&&(w=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){const I=this.loadingContext,V={id:"pdfjs-font-loading-"+I.nextRequestId++,done:!1,complete:function T(){for((0,o.assert)(!V.done,"completeRequest() cannot be called twice."),V.done=!0;I.requests.length>0&&I.requests[0].done;){const O=I.requests.shift();setTimeout(O.callback,0)}},callback:w};return I.requests.push(V),V}get _loadTestFont(){return(0,o.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(w,T,I){function V(R,L){return R.charCodeAt(L)<<24|R.charCodeAt(L+1)<<16|R.charCodeAt(L+2)<<8|255&R.charCodeAt(L+3)}function O(R,L,z,W){return R.substring(0,L)+W+R.substring(L+z)}let D,S;const r=this._document.createElement("canvas");r.width=1,r.height=1;const A=r.getContext("2d");let y=0;const F=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=O(p,976,F.length,F);const a=1482184792;let m=V(p,16);for(D=0,S=F.length-3;D<S;D+=4)m=m-a+V(F,D)|0;D<F.length&&(m=m-a+V(F+"XXX",D)|0),p=O(p,16,4,(0,o.string32)(m));const C=`url(data:font/opentype;base64,${btoa(p)});`;this.insertRule(`@font-face {font-family:"${F}";src:${C}}`);const u=[];for(const R of T)u.push(R.loadedName);u.push(F);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const R of u){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=R,g.append(L)}this._document.body.append(g),function b(R,L){if(y++,y>30)return(0,o.warn)("Load test font never loaded."),void L();A.font="30px "+R,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0?L():setTimeout(b.bind(null,R,L))}(F,()=>{g.remove(),I.complete()})}},s.FontFaceObject=class k{constructor(w,{isEvalSupported:T=!0,disableFontFace:I=!1,ignoreErrors:V=!1,onUnsupportedFeature:O,fontRegistry:D=null}){this.compiledGlyphs=Object.create(null);for(const S in w)this[S]=w[S];this.isEvalSupported=!1!==T,this.disableFontFace=!0===I,this.ignoreErrors=!0===V,this._onUnsupportedFeature=O,this.fontRegistry=D}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let w;if(this.cssFontInfo){const T={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(T.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,T)}else w=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),w}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const w=(0,o.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(w)});`;let I;if(this.cssFontInfo){let V=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(V+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),I=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${V}src:${T}}`}else I=`@font-face {font-family:"${this.loadedName}";src:${T}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,T),I}getPathGenerator(w,T){if(void 0!==this.compiledGlyphs[T])return this.compiledGlyphs[T];let I;try{I=w.get(this.loadedName+"_path_"+T)}catch(V){if(!this.ignoreErrors)throw V;return this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)(`getPathGenerator - ignoring character: "${V}".`),this.compiledGlyphs[T]=function(O,D){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const V=[];for(const O of I){const D=void 0!==O.args?O.args.join(","):"";V.push("c.",O.cmd,"(",D,");\n")}return this.compiledGlyphs[T]=new Function("c","size",V.join(""))}return this.compiledGlyphs[T]=function(V,O){for(const D of I)"scale"===D.cmd&&(D.args=[O,-O]),V[D.cmd].apply(V,D.args)}}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var o=M(8),v=M(1),B=M(13),k=M(14),$=M(3);const I=4096,D=$.isNodeJS&&typeof Path2D>"u"?-1:1e3,S=16;class A{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,n,_){let d;return void 0!==this.cache[h]?(d=this.cache[h],this.canvasFactory.reset(d,n,_)):(d=this.canvasFactory.create(n,_),this.cache[h]=d),d}delete(h){delete this.cache[h]}clear(){for(const h in this.cache)this.canvasFactory.destroy(this.cache[h]),delete this.cache[h]}}function y(j,h,n,_,d,f,i,c,l,P){const[x,H,K,se,te,pe]=(0,o.getCurrentTransform)(j);if(0===H&&0===K){const _e=Math.round(i*x+te),ie=Math.round(c*se+pe),Pe=Math.abs(Math.round((i+l)*x+te)-_e)||1,Me=Math.abs(Math.round((c+P)*se+pe)-ie)||1;return j.setTransform(Math.sign(x),0,0,Math.sign(se),_e,ie),j.drawImage(h,n,_,d,f,0,0,Pe,Me),j.setTransform(x,H,K,se,te,pe),[Pe,Me]}if(0===x&&0===se){const _e=Math.round(c*K+te),ie=Math.round(i*H+pe),Pe=Math.abs(Math.round((c+P)*K+te)-_e)||1,Me=Math.abs(Math.round((i+l)*H+pe)-ie)||1;return j.setTransform(0,Math.sign(H),Math.sign(K),0,_e,ie),j.drawImage(h,n,_,d,f,0,0,Me,Pe),j.setTransform(x,H,K,se,te,pe),[Me,Pe]}return j.drawImage(h,n,_,d,f,i,c,l,P),[Math.hypot(x,H)*l,Math.hypot(K,se)*P]}class F{constructor(h,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=v.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=v.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=v.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,h,n])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,n){this.x=h,this.y=n}updatePathMinMax(h,n,_){[n,_]=v.Util.applyTransform([n,_],h),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(h,n){const _=v.Util.applyTransform(n,h),d=v.Util.applyTransform(n.slice(2),h);this.minX=Math.min(this.minX,_[0],d[0]),this.minY=Math.min(this.minY,_[1],d[1]),this.maxX=Math.max(this.maxX,_[0],d[0]),this.maxY=Math.max(this.maxY,_[1],d[1])}updateScalingPathMinMax(h,n){v.Util.scaleMinMax(h,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(h,n,_,d,f,i,c,l,P,x){const H=v.Util.bezierBoundingBox(n,_,d,f,i,c,l,P);if(x)return x[0]=Math.min(x[0],H[0],H[2]),x[1]=Math.max(x[1],H[0],H[2]),x[2]=Math.min(x[2],H[1],H[3]),void(x[3]=Math.max(x[3],H[1],H[3]));this.updateRectMinMax(h,H)}getPathBoundingBox(h=B.PathType.FILL,n=null){const _=[this.minX,this.minY,this.maxX,this.maxY];if(h===B.PathType.STROKE){n||(0,v.unreachable)("Stroke bounding box must include transform.");const d=v.Util.singularValueDecompose2dScale(n),f=d[0]*this.lineWidth/2,i=d[1]*this.lineWidth/2;_[0]-=f,_[1]-=i,_[2]+=f,_[3]+=i}return _}updateClipFromPath(){const h=v.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=B.PathType.FILL,n=null){return v.Util.intersect(this.clipBox,this.getPathBoundingBox(h,n))}}function p(j,h,n=null){if(typeof ImageData<"u"&&h instanceof ImageData)return void j.putImageData(h,0,0);const _=h.height,d=h.width,f=_%S,i=(_-f)/S,c=0===f?i:i+1,l=j.createImageData(d,S);let x,P=0;const H=h.data,K=l.data;let se,te,pe,le,ue,de,_e,me;if(n)switch(n.length){case 1:ue=n[0],de=n[0],_e=n[0],me=n[0];break;case 4:ue=n[0],de=n[1],_e=n[2],me=n[3]}if(h.kind===v.ImageKind.GRAYSCALE_1BPP){const ie=H.byteLength,oe=new Uint32Array(K.buffer,0,K.byteLength>>2),Pe=oe.length,Be=d+7>>3;let Me=4294967295,fe=v.FeatureTest.isLittleEndian?4278190080:255;for(me&&255===me[0]&&0===me[255]&&([Me,fe]=[fe,Me]),se=0;se<c;se++){for(pe=se<i?S:f,x=0,te=0;te<pe;te++){const Ce=ie-P;let xe=0;const Fe=Ce>Be?d:8*Ce-7,ye=-8&Fe;let G=0,ee=0;for(;xe<ye;xe+=8)ee=H[P++],oe[x++]=128&ee?Me:fe,oe[x++]=64&ee?Me:fe,oe[x++]=32&ee?Me:fe,oe[x++]=16&ee?Me:fe,oe[x++]=8&ee?Me:fe,oe[x++]=4&ee?Me:fe,oe[x++]=2&ee?Me:fe,oe[x++]=1&ee?Me:fe;for(;xe<Fe;xe++)0===G&&(ee=H[P++],G=128),oe[x++]=ee&G?Me:fe,G>>=1}for(;x<Pe;)oe[x++]=0;j.putImageData(l,0,se*S)}}else if(h.kind===v.ImageKind.RGBA_32BPP){const ie=!!(ue||de||_e);for(te=0,le=d*S*4,se=0;se<i;se++){if(K.set(H.subarray(P,P+le)),P+=le,ie)for(let oe=0;oe<le;oe+=4)ue&&(K[oe+0]=ue[K[oe+0]]),de&&(K[oe+1]=de[K[oe+1]]),_e&&(K[oe+2]=_e[K[oe+2]]);j.putImageData(l,0,te),te+=S}if(se<c){if(le=d*f*4,K.set(H.subarray(P,P+le)),ie)for(let oe=0;oe<le;oe+=4)ue&&(K[oe+0]=ue[K[oe+0]]),de&&(K[oe+1]=de[K[oe+1]]),_e&&(K[oe+2]=_e[K[oe+2]]);j.putImageData(l,0,te)}}else{if(h.kind!==v.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${h.kind}`);{const ie=!!(ue||de||_e);for(pe=S,le=d*pe,se=0;se<c;se++){for(se>=i&&(pe=f,le=d*pe),x=0,te=le;te--;)K[x++]=H[P++],K[x++]=H[P++],K[x++]=H[P++],K[x++]=255;if(ie)for(let oe=0;oe<x;oe+=4)ue&&(K[oe+0]=ue[K[oe+0]]),de&&(K[oe+1]=de[K[oe+1]]),_e&&(K[oe+2]=_e[K[oe+2]]);j.putImageData(l,0,se*S)}}}}function t(j,h){if(h.bitmap)return void j.drawImage(h.bitmap,0,0);const n=h.height,_=h.width,d=n%S,f=(n-d)/S,i=0===d?f:f+1,c=j.createImageData(_,S);let l=0;const P=h.data,x=c.data;for(let H=0;H<i;H++){const K=H<f?S:d;({srcPos:l}=(0,k.applyMaskImageData)({src:P,srcPos:l,dest:x,width:_,height:K})),j.putImageData(c,0,H*S)}}function e(j,h){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let _=0,d=n.length;_<d;_++){const f=n[_];void 0!==j[f]&&(h[f]=j[f])}void 0!==j.setLineDash&&(h.setLineDash(j.getLineDash()),h.lineDashOffset=j.lineDashOffset)}function a(j,h){j.strokeStyle=j.fillStyle=h||"#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",void 0!==j.setLineDash&&(j.setLineDash([]),j.lineDashOffset=0)}function m(j,h,n,_){const d=j.length;for(let f=3;f<d;f+=4){const i=j[f];if(0===i)j[f-3]=h,j[f-2]=n,j[f-1]=_;else if(i<255){const c=255-i;j[f-3]=j[f-3]*i+h*c>>8,j[f-2]=j[f-2]*i+n*c>>8,j[f-1]=j[f-1]*i+_*c>>8}}}function C(j,h,n){const _=j.length;for(let f=3;f<_;f+=4)h[f]=h[f]*(n?n[j[f]]:j[f])*.00392156862745098|0}function E(j,h,n){const _=j.length;for(let d=3;d<_;d+=4){const f=77*j[d-3]+152*j[d-2]+28*j[d-1];h[d]=n?h[d]*n[f>>8]>>8:h[d]*f>>16}}function R(j,h){const n=v.Util.singularValueDecompose2dScale(j);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const _=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==h?h:n[0]<=_||n[1]<=_}const L=["butt","round","square"],z=["miter","round","bevel"],W={},N={};var U=new WeakSet;class Q{constructor(h,n,_,d,f,i,c,l){_classPrivateMethodInitSpec(this,U),this.ctx=h,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=_,this.canvasFactory=d,this.imageLayer=f,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=i,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==l?void 0:l.background)||null,this.foregroundColor=(null==l?void 0:l.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,n=null){return"string"==typeof h?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):n}beginDrawing({transform:h,viewport:n,transparency:_=!1,background:d=null}){const f=this.ctx.canvas.width,i=this.ctx.canvas.height,c=d||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const l=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const P=this.backgroundColor=this.ctx.fillStyle;let x=!0,H=c;if(this.ctx.fillStyle=c,H=this.ctx.fillStyle,x="string"==typeof H&&/^#[0-9A-Fa-f]{6}$/.test(H),"#000000"===l&&"#ffffff"===P||l===P||!x)this.foregroundColor=this.backgroundColor=null;else{const[K,se,te]=(0,o.getRGB)(H),pe=ue=>(ue/=255)<=.03928?ue/12.92:((ue+.055)/1.055)**2.4,le=Math.round(.2126*pe(K)+.7152*pe(se)+.0722*pe(te));this.selectColor=(ue,de,_e)=>{const me=.2126*pe(ue)+.7152*pe(de)+.0722*pe(_e);return Math.round(me)===le?P:l}}}if(this.ctx.fillStyle=this.backgroundColor||c,this.ctx.fillRect(0,0,f,i),this.ctx.restore(),_){const l=this.cachedCanvases.getCanvas("transparent",f,i);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),a(this.ctx,this.foregroundColor),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx),this.imageLayer&&((0,o.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(h,n,_,d){const f=h.argsArray,i=h.fnArray;let c=n||0;const l=f.length;if(l===c)return c;const P=l-c>10&&"function"==typeof _,x=P?Date.now()+15:0;let H=0;const K=this.commonObjs,se=this.objs;let te;for(;;){if(void 0!==d&&c===d.nextBreakPoint)return d.breakIt(c,_),c;if(te=i[c],te!==v.OPS.dependency)this[te].apply(this,f[c]);else for(const pe of f[c]){const le=pe.startsWith("g_")?K:se;if(!le.has(pe))return le.get(pe,_),c}if(c++,c===l)return c;if(P&&++H>10){if(Date.now()>x)return _(),c;H=0}}}endDrawing(){_classPrivateMethodGet(this,U,re).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const n of h.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);h.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(h,n){const _=h.width,d=h.height;let x,H,f=Math.max(Math.hypot(n[0],n[1]),1),i=Math.max(Math.hypot(n[2],n[3]),1),c=_,l=d,P="prescale1";for(;f>2&&c>1||i>2&&l>1;){let K=c,se=l;f>2&&c>1&&(K=Math.ceil(c/2),f/=c/K),i>2&&l>1&&(se=Math.ceil(l/2),i/=l/se),x=this.cachedCanvases.getCanvas(P,K,se),H=x.context,H.clearRect(0,0,K,se),H.drawImage(h,0,0,c,l,0,0,K,se),h=x.canvas,c=K,l=se,P="prescale1"===P?"prescale2":"prescale1"}return{img:h,paintWidth:c,paintHeight:l}}_createMaskCanvas(h){const n=this.ctx,{width:_,height:d}=h,f=this.current.fillColor,i=this.current.patternFill,c=(0,o.getCurrentTransform)(n);let l,P,x,H;if((h.bitmap||h.data)&&h.count>1){const Pe=h.bitmap||h.data.buffer,Be=c.slice(0,4);P=JSON.stringify(i?Be:[Be,f]),l=this._cachedBitmapsMap.get(Pe),l||(l=new Map,this._cachedBitmapsMap.set(Pe,l));const Me=l.get(P);if(Me&&!i)return{canvas:Me,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};x=Me}x||(H=this.cachedCanvases.getCanvas("maskCanvas",_,d),t(H.context,h));let K=v.Util.transform(c,[1/_,0,0,-1/d,0,0]);K=v.Util.transform(K,[1,0,0,1,0,-d]);const se=v.Util.applyTransform([0,0],K),te=v.Util.applyTransform([_,d],K),pe=v.Util.normalizeRect([se[0],se[1],te[0],te[1]]),le=Math.round(pe[2]-pe[0])||1,ue=Math.round(pe[3]-pe[1])||1,de=this.cachedCanvases.getCanvas("fillCanvas",le,ue),_e=de.context,me=Math.min(se[0],te[0]),ie=Math.min(se[1],te[1]);_e.translate(-me,-ie),_e.transform(...K),x||(x=this._scaleImage(H.canvas,(0,o.getCurrentTransformInverse)(_e)),x=x.img,l&&i&&l.set(P,x)),_e.imageSmoothingEnabled=R((0,o.getCurrentTransform)(_e),h.interpolate),y(_e,x,0,0,x.width,x.height,0,0,_,d),_e.globalCompositeOperation="source-in";const oe=v.Util.transform((0,o.getCurrentTransformInverse)(_e),[1,0,0,1,-me,-ie]);return _e.fillStyle=i?f.getPattern(n,this,oe,B.PathType.FILL):f,_e.fillRect(0,0,_,d),l&&!i&&(this.cachedCanvases.delete("fillCanvas"),l.set(P,de.canvas)),{canvas:de.canvas,offsetX:Math.round(me),offsetY:Math.round(ie)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=L[h]}setLineJoin(h){this.ctx.lineJoin=z[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,n){const _=this.ctx;void 0!==_.setLineDash&&(_.setLineDash(h),_.lineDashOffset=n)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(let n=0,_=h.length;n<_;n++){const d=h[n],i=d[1];switch(d[0]){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=d[1];break;case"ca":this.current.fillAlpha=d[1],this.ctx.globalAlpha=d[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=d.context;const f=this.ctx;f.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,f),function r(j,h){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){h.save(),this.__originalSave()},j.restore=function(){h.restore(),this.__originalRestore()},j.translate=function(_,d){h.translate(_,d),this.__originalTranslate(_,d)},j.scale=function(_,d){h.scale(_,d),this.__originalScale(_,d)},j.transform=function(_,d,f,i,c,l){h.transform(_,d,f,i,c,l),this.__originalTransform(_,d,f,i,c,l)},j.setTransform=function(_,d,f,i,c,l){h.setTransform(_,d,f,i,c,l),this.__originalSetTransform(_,d,f,i,c,l)},j.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},j.rotate=function(_){h.rotate(_),this.__originalRotate(_)},j.clip=function(_){h.clip(_),this.__originalClip(_)},j.moveTo=function(n,_){h.moveTo(n,_),this.__originalMoveTo(n,_)},j.lineTo=function(n,_){h.lineTo(n,_),this.__originalLineTo(n,_)},j.bezierCurveTo=function(n,_,d,f,i,c){h.bezierCurveTo(n,_,d,f,i,c),this.__originalBezierCurveTo(n,_,d,f,i,c)},j.rect=function(n,_,d,f){h.rect(n,_,d,f),this.__originalRect(n,_,d,f)},j.closePath=function(){h.closePath(),this.__originalClosePath()},j.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}(f,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){this.current.activeSMask&&(h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function g(j,h,n,_){const d=_[0],f=_[1],i=_[2]-d,c=_[3]-f;0===i||0===c||(function u(j,h,n,_,d,f,i,c,l,P,x){const H=!!f,K=H?f[0]:0,se=H?f[1]:0,te=H?f[2]:0;let pe;pe="Luminosity"===d?E:C;const ue=Math.min(_,Math.ceil(1048576/n));for(let de=0;de<_;de+=ue){const _e=Math.min(ue,_-de),me=j.getImageData(c-P,de+(l-x),n,_e),ie=h.getImageData(c,de+l,n,_e);H&&m(me.data,K,se,te),pe(me.data,ie.data,i),h.putImageData(ie,c,de+l)}}(h.context,n,i,c,h.subtype,h.backdrop,h.transferMap,d,f,h.offsetX,h.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(n.canvas,0,0),j.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,n,_,d,f,i){this.ctx.transform(h,n,_,d,f,i),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,n,_){const d=this.ctx,f=this.current;let l,P,i=f.x,c=f.y;const x=(0,o.getCurrentTransform)(d),H=0===x[0]&&0===x[3]||0===x[1]&&0===x[2],K=H?_.slice(0):null;for(let se=0,te=0,pe=h.length;se<pe;se++)switch(0|h[se]){case v.OPS.rectangle:i=n[te++],c=n[te++];const le=n[te++],ue=n[te++],de=i+le,_e=c+ue;d.moveTo(i,c),0===le||0===ue?d.lineTo(de,_e):(d.lineTo(de,c),d.lineTo(de,_e),d.lineTo(i,_e)),H||f.updateRectMinMax(x,[i,c,de,_e]),d.closePath();break;case v.OPS.moveTo:i=n[te++],c=n[te++],d.moveTo(i,c),H||f.updatePathMinMax(x,i,c);break;case v.OPS.lineTo:i=n[te++],c=n[te++],d.lineTo(i,c),H||f.updatePathMinMax(x,i,c);break;case v.OPS.curveTo:l=i,P=c,i=n[te+4],c=n[te+5],d.bezierCurveTo(n[te],n[te+1],n[te+2],n[te+3],i,c),f.updateCurvePathMinMax(x,l,P,n[te],n[te+1],n[te+2],n[te+3],i,c,K),te+=6;break;case v.OPS.curveTo2:l=i,P=c,d.bezierCurveTo(i,c,n[te],n[te+1],n[te+2],n[te+3]),f.updateCurvePathMinMax(x,l,P,i,c,n[te],n[te+1],n[te+2],n[te+3],K),i=n[te+2],c=n[te+3],te+=4;break;case v.OPS.curveTo3:l=i,P=c,i=n[te+2],c=n[te+3],d.bezierCurveTo(n[te],n[te+1],i,c,i,c),f.updateCurvePathMinMax(x,l,P,n[te],n[te+1],i,c,i,c,K),te+=4;break;case v.OPS.closePath:d.closePath()}H&&f.updateScalingPathMinMax(x,K),f.setCurrentPoint(i,c)}closePath(){this.ctx.closePath()}stroke(h){h=!(typeof h<"u")||h;const n=this.ctx,_=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof _&&null!=_&&_.getPattern?(n.save(),n.strokeStyle=_.getPattern(n,this,(0,o.getCurrentTransformInverse)(n),B.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h){h=!(typeof h<"u")||h;const n=this.ctx,_=this.current.fillColor;let f=!1;this.current.patternFill&&(n.save(),n.fillStyle=_.getPattern(n,this,(0,o.getCurrentTransformInverse)(n),B.PathType.FILL),f=!0);const i=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==i&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),f&&n.restore(),h&&this.consumePath(i)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=W}eoClip(){this.pendingClip=N}beginText(){this.current.textMatrix=v.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,n=this.ctx;if(void 0!==h){n.save(),n.beginPath();for(const _ of h)n.setTransform(..._.transform),n.translate(_.x,_.y),_.addToPath(n,_.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}else n.beginPath()}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,n){const _=this.commonObjs.get(h),d=this.current;if(!_)throw new Error(`Can't find font for ${h}`);if(d.fontMatrix=_.fontMatrix||v.FONT_IDENTITY_MATRIX,(0===d.fontMatrix[0]||0===d.fontMatrix[3])&&(0,v.warn)("Invalid font matrix for font "+h),n<0?(n=-n,d.fontDirection=-1):d.fontDirection=1,this.current.font=_,this.current.fontSize=n,_.isType3Font)return;let i="normal";_.black?i="900":_.bold&&(i="bold");const c=_.italic?"italic":"normal",l=`"${_.loadedName||"sans-serif"}", ${_.fallbackName}`;let P=n;n<16?P=16:n>100&&(P=100),this.current.fontSizeScale=n/P,this.ctx.font=`${c} ${i} ${P}px ${l}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,n){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=n}setLeadingMoveText(h,n){this.setLeading(-n),this.moveText(h,n)}setTextMatrix(h,n,_,d,f,i){this.current.textMatrix=[h,n,_,d,f,i],this.current.textMatrixScale=Math.hypot(h,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,n,_,d){const f=this.ctx,i=this.current,c=i.font,l=i.textRenderingMode,P=i.fontSize/i.fontSizeScale,x=l&v.TextRenderingMode.FILL_STROKE_MASK,H=!!(l&v.TextRenderingMode.ADD_TO_PATH_FLAG),K=i.patternFill&&!c.missingFile;let se;(c.disableFontFace||H||K)&&(se=c.getPathGenerator(this.commonObjs,h)),c.disableFontFace||K?(f.save(),f.translate(n,_),f.beginPath(),se(f,P),d&&f.setTransform(...d),(x===v.TextRenderingMode.FILL||x===v.TextRenderingMode.FILL_STROKE)&&f.fill(),(x===v.TextRenderingMode.STROKE||x===v.TextRenderingMode.FILL_STROKE)&&f.stroke(),f.restore()):((x===v.TextRenderingMode.FILL||x===v.TextRenderingMode.FILL_STROKE)&&f.fillText(h,n,_),(x===v.TextRenderingMode.STROKE||x===v.TextRenderingMode.FILL_STROKE)&&f.strokeText(h,n,_)),H&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(f),x:n,y:_,fontSize:P,addToPath:se})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const n=h.getImageData(0,0,10,10).data;let _=!1;for(let d=3;d<n.length;d+=4)if(n[d]>0&&n[d]<255){_=!0;break}return(0,v.shadow)(this,"isFontSubpixelAAEnabled",_)}showText(h){const n=this.current,_=n.font;if(_.isType3Font)return this.showType3Text(h);const d=n.fontSize;if(0===d)return;const f=this.ctx,i=n.fontSizeScale,c=n.charSpacing,l=n.wordSpacing,P=n.fontDirection,x=n.textHScale*P,H=h.length,K=_.vertical,se=K?1:-1,te=_.defaultVMetrics,pe=d*n.fontMatrix[0],le=n.textRenderingMode===v.TextRenderingMode.FILL&&!_.disableFontFace&&!n.patternFill;let ue;if(f.save(),f.transform(...n.textMatrix),f.translate(n.x,n.y+n.textRise),f.scale(x,P>0?-1:1),n.patternFill){f.save();const oe=n.fillColor.getPattern(f,this,(0,o.getCurrentTransformInverse)(f),B.PathType.FILL);ue=(0,o.getCurrentTransform)(f),f.restore(),f.fillStyle=oe}let de=n.lineWidth;const _e=n.textMatrixScale;if(0===_e||0===de){const oe=n.textRenderingMode&v.TextRenderingMode.FILL_STROKE_MASK;(oe===v.TextRenderingMode.STROKE||oe===v.TextRenderingMode.FILL_STROKE)&&(de=this.getSinglePixelWidth())}else de/=_e;1!==i&&(f.scale(i,i),de/=i),f.lineWidth=de;let ie,me=0;for(ie=0;ie<H;++ie){const oe=h[ie];if("number"==typeof oe){me+=se*oe*d/1e3;continue}let Pe=!1;const Be=(oe.isSpace?l:0)+c,Me=oe.fontChar,fe=oe.accent;let Ce,xe,ye,Fe=oe.width;if(K){const G=oe.vmetric||te,ee=-(oe.vmetric?G[1]:.5*Fe)*pe;Fe=G?-G[0]:Fe,Ce=ee/i,xe=(me+G[2]*pe)/i}else Ce=me/i,xe=0;if(_.remeasure&&Fe>0){const G=1e3*f.measureText(Me).width/d*i;if(Fe<G&&this.isFontSubpixelAAEnabled){const ee=Fe/G;Pe=!0,f.save(),f.scale(ee,1),Ce/=ee}else Fe!==G&&(Ce+=(Fe-G)/2e3*d/i)}this.contentVisible&&(oe.isInFont||_.missingFile)&&(le&&!fe?f.fillText(Me,Ce,xe):(this.paintChar(Me,Ce,xe,ue),fe&&this.paintChar(fe.fontChar,Ce+d*fe.offset.x/i,xe-d*fe.offset.y/i,ue))),ye=K?Fe*pe-Be*P:Fe*pe+Be*P,me+=ye,Pe&&f.restore()}K?n.y-=me:n.x+=me*x,f.restore(),this.compose()}showType3Text(h){const n=this.ctx,_=this.current,d=_.font,f=_.fontSize,i=_.fontDirection,c=d.vertical?1:-1,l=_.charSpacing,P=_.wordSpacing,x=_.textHScale*i,H=_.fontMatrix||v.FONT_IDENTITY_MATRIX,K=h.length;let te,pe,le,ue;if(_.textRenderingMode!==v.TextRenderingMode.INVISIBLE&&0!==f){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(..._.textMatrix),n.translate(_.x,_.y),n.scale(x,i),te=0;te<K;++te){if(pe=h[te],"number"==typeof pe){ue=c*pe*f/1e3,this.ctx.translate(ue,0),_.x+=ue*x;continue}const de=(pe.isSpace?P:0)+l,_e=d.charProcOperatorList[pe.operatorListId];_e?(this.contentVisible&&(this.processingType3=pe,this.save(),n.scale(f,f),n.transform(...H),this.executeOperatorList(_e),this.restore()),le=v.Util.applyTransform([pe.width,0],H)[0]*f+de,n.translate(le,0),_.x+=le*x):(0,v.warn)(`Type3 character "${pe.operatorListId}" is not available.`)}n.restore(),this.processingType3=null}}setCharWidth(h,n){}setCharWidthAndBounds(h,n,_,d,f,i){this.ctx.rect(_,d,f-_,i-d),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let n;if("TilingPattern"===h[0]){const _=h[1],d=this.baseTransform||(0,o.getCurrentTransform)(this.ctx);n=new B.TilingPattern(h,_,this.ctx,{createCanvasGraphics:i=>new Q(i,this.commonObjs,this.objs,this.canvasFactory)},d)}else n=this._getPattern(h[1],h[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,n,_){var d;const f=(null===(d=this.selectColor)||void 0===d?void 0:d.call(this,h,n,_))||v.Util.makeHexColor(h,n,_);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(h,n,_){var d;const f=(null===(d=this.selectColor)||void 0===d?void 0:d.call(this,h,n,_))||v.Util.makeHexColor(h,n,_);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(h,n=null){let _;return this.cachedPatterns.has(h)?_=this.cachedPatterns.get(h):(_=(0,B.getShadingPattern)(this.objs.get(h)),this.cachedPatterns.set(h,_)),n&&(_.matrix=n),_}shadingFill(h){if(!this.contentVisible)return;const n=this.ctx;this.save();const _=this._getPattern(h);n.fillStyle=_.getPattern(n,this,(0,o.getCurrentTransformInverse)(n),B.PathType.SHADING);const d=(0,o.getCurrentTransformInverse)(n);if(d){const f=n.canvas,i=f.width,c=f.height,l=v.Util.applyTransform([0,0],d),P=v.Util.applyTransform([0,c],d),x=v.Util.applyTransform([i,0],d),H=v.Util.applyTransform([i,c],d),K=Math.min(l[0],P[0],x[0],H[0]),se=Math.min(l[1],P[1],x[1],H[1]),te=Math.max(l[0],P[0],x[0],H[0]),pe=Math.max(l[1],P[1],x[1],H[1]);this.ctx.fillRect(K,se,te-K,pe-se)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,v.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,v.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,n){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&6===h.length&&this.transform(...h),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),n)&&(this.ctx.rect(n[0],n[1],n[2]-n[0],n[3]-n[1]),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),n),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;h.isolated||(0,v.info)("TODO: Support non-isolated groups."),h.knockout&&(0,v.warn)("Knockout groups not supported.");const _=(0,o.getCurrentTransform)(n);if(h.matrix&&n.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let d=v.Util.getAxialAlignedBoundingBox(h.bbox,(0,o.getCurrentTransform)(n));d=v.Util.intersect(d,[0,0,n.canvas.width,n.canvas.height])||[0,0,0,0];const i=Math.floor(d[0]),c=Math.floor(d[1]);let l=Math.max(Math.ceil(d[2])-i,1),P=Math.max(Math.ceil(d[3])-c,1),x=1,H=1;l>I&&(x=l/I,l=I),P>I&&(H=P/I,P=I),this.current.startNewPathAndClipBox([0,0,l,P]);let K="groupAt"+this.groupLevel;h.smask&&(K+="_smask_"+this.smaskCounter++%2);const se=this.cachedCanvases.getCanvas(K,l,P),te=se.context;te.scale(1/x,1/H),te.translate(-i,-c),te.transform(..._),h.smask?this.smaskStack.push({canvas:se.canvas,context:te,offsetX:i,offsetY:c,scaleX:x,scaleY:H,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(i,c),n.scale(x,H),n.save()),e(n,te),this.ctx=te,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const d=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...d);const f=v.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],d);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(f)}}beginAnnotation(h,n,_,d,f){if(_classPrivateMethodGet(this,U,re).call(this),a(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(n)&&4===n.length){const i=n[2]-n[0],c=n[3]-n[1];if(f&&this.annotationCanvasMap){(_=_.slice())[4]-=n[0],_[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=i,n[3]=c;const[l,P]=v.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:x}=this,H=Math.ceil(i*this.outputScaleX*x),K=Math.ceil(c*this.outputScaleY*x);this.annotationCanvas=this.canvasFactory.create(H,K);const{canvas:se,context:te}=this.annotationCanvas;this.annotationCanvasMap.set(h,se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=te,this.ctx.setTransform(l,0,0,-P,0,c*P),a(this.ctx,this.foregroundColor)}else a(this.ctx,this.foregroundColor),this.ctx.rect(n[0],n[1],i,c),this.ctx.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(...d)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const n=h.count;(h=this.getObject(h.data,h)).count=n;const _=this.ctx,d=this.processingType3;if(d&&(void 0===d.compiled&&(d.compiled=function b(j){const{width:h,height:n}=j;if(h>D||n>D)return null;const d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),f=h+1;let c,l,P,i=new Uint8Array(f*(n+1));const x=h+7&-8;let H=new Uint8Array(x*n),K=0;for(const ue of j.data){let de=128;for(;de>0;)H[K++]=ue&de?0:255,de>>=1}let se=0;for(K=0,0!==H[K]&&(i[0]=1,++se),l=1;l<h;l++)H[K]!==H[K+1]&&(i[l]=H[K]?2:1,++se),K++;for(0!==H[K]&&(i[l]=2,++se),c=1;c<n;c++){K=c*x,P=c*f,H[K-x]!==H[K]&&(i[P]=H[K]?1:8,++se);let ue=(H[K]?4:0)+(H[K-x]?8:0);for(l=1;l<h;l++)ue=(ue>>2)+(H[K+1]?4:0)+(H[K-x+1]?8:0),d[ue]&&(i[P+l]=d[ue],++se),K++;if(H[K-x]!==H[K]&&(i[P+l]=H[K]?2:4,++se),se>1e3)return null}for(K=x*(n-1),P=c*f,0!==H[K]&&(i[P]=8,++se),l=1;l<h;l++)H[K]!==H[K+1]&&(i[P+l]=H[K]?4:8,++se),K++;if(0!==H[K]&&(i[P+l]=4,++se),se>1e3)return null;const te=new Int32Array([0,f,-1,0,-f,0,0,0,1]),pe=new Path2D;for(c=0;se&&c<=n;c++){let ue=c*f;const de=ue+h;for(;ue<de&&!i[ue];)ue++;if(ue===de)continue;pe.moveTo(ue%f,c);const _e=ue;let me=i[ue];do{const ie=te[me];do{ue+=ie}while(!i[ue]);const oe=i[ue];5!==oe&&10!==oe?(me=oe,i[ue]=0):(me=oe&51*me>>4,i[ue]&=me>>2|me<<2),pe.lineTo(ue%f,ue/f|0),i[ue]||--se}while(_e!==ue);--c}return H=null,i=null,function(ue){ue.save(),ue.scale(1/h,-1/n),ue.translate(0,-n),ue.fill(pe),ue.beginPath(),ue.restore()}}(h)),d.compiled))return void d.compiled(_);const f=this._createMaskCanvas(h),i=f.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(i,f.offsetX,f.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(h,n,_=0,d=0,f,i){if(!this.contentVisible)return;h=this.getObject(h.data,h);const c=this.ctx;c.save();const l=(0,o.getCurrentTransform)(c);c.transform(n,_,d,f,0,0);const P=this._createMaskCanvas(h);c.setTransform(1,0,0,1,0,0);for(let x=0,H=i.length;x<H;x+=2){const K=v.Util.transform(l,[n,_,d,f,i[x],i[x+1]]),[se,te]=v.Util.applyTransform([0,0],K);c.drawImage(P.canvas,se,te)}c.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const n=this.ctx,_=this.current.fillColor,d=this.current.patternFill;for(const f of h){const{data:i,width:c,height:l,transform:P}=f,x=this.cachedCanvases.getCanvas("maskCanvas",c,l),H=x.context;H.save(),t(H,this.getObject(i,f)),H.globalCompositeOperation="source-in",H.fillStyle=d?_.getPattern(H,this,(0,o.getCurrentTransformInverse)(n),B.PathType.FILL):_,H.fillRect(0,0,c,l),H.restore(),n.save(),n.transform(...P),n.scale(1,-1),y(n,x.canvas,0,0,c,l,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const n=this.getObject(h);n?this.paintInlineImageXObject(n):(0,v.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(h,n,_,d){if(!this.contentVisible)return;const f=this.getObject(h);if(!f)return void(0,v.warn)("Dependent image isn't ready yet");const i=f.width,c=f.height,l=[];for(let P=0,x=d.length;P<x;P+=2)l.push({transform:[n,0,0,_,d[P],d[P+1]],x:0,y:0,w:i,h:c});this.paintInlineImageXObjectGroup(f,l)}paintInlineImageXObject(h){if(!this.contentVisible)return;const n=h.width,_=h.height,d=this.ctx;let f;if(this.save(),d.scale(1/n,-1/_),"function"==typeof HTMLElement&&h instanceof HTMLElement||!h.data)f=h;else{const P=this.cachedCanvases.getCanvas("inlineImage",n,_);p(P.context,h,this.current.transferMaps),f=P.canvas}const i=this._scaleImage(f,(0,o.getCurrentTransformInverse)(d));d.imageSmoothingEnabled=R((0,o.getCurrentTransform)(d),h.interpolate);const[c,l]=y(d,i.img,0,0,i.paintWidth,i.paintHeight,0,-_,n,_);if(this.imageLayer){const[P,x]=v.Util.applyTransform([0,-_],(0,o.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:h,left:P,top:x,width:c,height:l})}this.compose(),this.restore()}paintInlineImageXObjectGroup(h,n){if(!this.contentVisible)return;const _=this.ctx,d=h.width,f=h.height,i=this.cachedCanvases.getCanvas("inlineImage",d,f);p(i.context,h,this.current.transferMaps);for(const l of n){if(_.save(),_.transform(...l.transform),_.scale(1,-1),y(_,i.canvas,l.x,l.y,l.w,l.h,0,-1,1,1),this.imageLayer){const[P,x]=v.Util.applyTransform([l.x,l.y],(0,o.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:h,left:P,top:x,width:d,height:f})}_.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,n){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,n){this.markedContentStack.push("OC"===h?{visible:this.optionalContentConfig.isVisible(n)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const _=this.ctx;this.pendingClip&&(n||(this.pendingClip===N?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,o.getCurrentTransform)(this.ctx);if(0===h[1]&&0===h[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const n=Math.abs(h[0]*h[3]-h[2]*h[1]),_=Math.hypot(h[0],h[2]),d=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(_,d)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,n=(0,o.getCurrentTransform)(this.ctx);let _,d;if(0===n[1]&&0===n[2]){const f=Math.abs(n[0]),i=Math.abs(n[3]);if(0===h)_=1/f,d=1/i;else{const c=f*h,l=i*h;_=c<1?1/c:1,d=l<1?1/l:1}}else{const f=Math.abs(n[0]*n[3]-n[2]*n[1]),i=Math.hypot(n[0],n[1]),c=Math.hypot(n[2],n[3]);if(0===h)_=c/f,d=i/f;else{const l=h*f;_=c>l?c/l:1,d=i>l?i/l:1}}this._cachedScaleForStroking=[_,d]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:n}=this,{lineWidth:_}=this.current,[d,f]=this.getScaleForStroking();if(n.lineWidth=_||1,1===d&&1===f)return void n.stroke();let i,c,l;h&&(i=(0,o.getCurrentTransform)(n),c=n.getLineDash().slice(),l=n.lineDashOffset),n.scale(d,f);const P=Math.max(d,f);n.setLineDash(n.getLineDash().map(x=>x/P)),n.lineDashOffset/=P,n.stroke(),h&&(n.setTransform(...i),n.setLineDash(c),n.lineDashOffset=l)}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}}function re(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}s.CanvasGraphics=Q;for(const j in v.OPS)void 0!==Q.prototype[j]&&(Q.prototype[v.OPS[j]]=Q.prototype[j])},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=function S(y){switch(y[0]){case"RadialAxial":return new T(y);case"Mesh":return new O(y);case"Dummy":return new D}throw new Error(`Unknown IR type: ${y[0]}`)};var o=M(1),v=M(8),B=M(3);const k={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $(y,b){if(!b||B.isNodeJS)return;const F=b[2]-b[0],p=b[3]-b[1],t=new Path2D;t.rect(b[0],b[1],F,p),y.clip(t)}s.PathType=k;class w{constructor(){this.constructor===w&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class T extends w{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let F;"axial"===this._type?F=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(F=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const p of this._colorStops)F.addColorStop(p[0],p[1]);return F}getPattern(b,F,p,t){let e;if(t===k.STROKE||t===k.FILL){const a=F.current.getClippedPathBoundingBox(t,(0,v.getCurrentTransform)(b))||[0,0,0,0],m=Math.ceil(a[2]-a[0])||1,C=Math.ceil(a[3]-a[1])||1,E=F.cachedCanvases.getCanvas("pattern",m,C,!0),u=E.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),p=o.Util.transform(p,[1,0,0,1,a[0],a[1]]),u.transform(...F.baseTransform),this.matrix&&u.transform(...this.matrix),$(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),e=b.createPattern(E.canvas,"no-repeat");const g=new DOMMatrix(p);try{e.setTransform(g)}catch(R){(0,o.warn)(`RadialAxialShadingPattern.getPattern: "${null==R?void 0:R.message}".`)}}else $(b,this._bbox),e=this._createGradient(b);return e}}function I(y,b,F,p,t,e,a,m){const C=b.coords,E=b.colors,u=y.data,g=4*y.width;let R;C[F+1]>C[p+1]&&(R=F,F=p,p=R,R=e,e=a,a=R),C[p+1]>C[t+1]&&(R=p,p=t,t=R,R=a,a=m,m=R),C[F+1]>C[p+1]&&(R=F,F=p,p=R,R=e,e=a,a=R);const L=(C[F]+b.offsetX)*b.scaleX,z=(C[F+1]+b.offsetY)*b.scaleY,W=(C[p]+b.offsetX)*b.scaleX,N=(C[p+1]+b.offsetY)*b.scaleY,U=(C[t]+b.offsetX)*b.scaleX,Q=(C[t+1]+b.offsetY)*b.scaleY;if(z>=Q)return;const re=E[e],j=E[e+1],h=E[e+2],n=E[a],_=E[a+1],d=E[a+2],f=E[m],i=E[m+1],c=E[m+2],l=Math.round(z),P=Math.round(Q);let x,H,K,se,te,pe,le,ue;for(let de=l;de<=P;de++){if(de<N){let Pe;Pe=de<z?0:(z-de)/(z-N),x=L-(L-W)*Pe,H=re-(re-n)*Pe,K=j-(j-_)*Pe,se=h-(h-d)*Pe}else{let Pe;Pe=de>Q?1:N===Q?0:(N-de)/(N-Q),x=W-(W-U)*Pe,H=n-(n-f)*Pe,K=_-(_-i)*Pe,se=d-(d-c)*Pe}let _e;_e=de<z?0:de>Q?1:(z-de)/(z-Q),te=L-(L-U)*_e,pe=re-(re-f)*_e,le=j-(j-i)*_e,ue=h-(h-c)*_e;const me=Math.round(Math.min(x,te)),ie=Math.round(Math.max(x,te));let oe=g*de+4*me;for(let Pe=me;Pe<=ie;Pe++)_e=(x-Pe)/(x-te),_e<0?_e=0:_e>1&&(_e=1),u[oe++]=H-(H-pe)*_e|0,u[oe++]=K-(K-le)*_e|0,u[oe++]=se-(se-ue)*_e|0,u[oe++]=255}}function V(y,b,F){const p=b.coords,t=b.colors;let e,a;switch(b.type){case"lattice":const m=b.verticesPerRow,C=Math.floor(p.length/m)-1,E=m-1;for(e=0;e<C;e++){let u=e*m;for(let g=0;g<E;g++,u++)I(y,F,p[u],p[u+1],p[u+m],t[u],t[u+1],t[u+m]),I(y,F,p[u+m+1],p[u+1],p[u+m],t[u+m+1],t[u+1],t[u+m])}break;case"triangles":for(e=0,a=p.length;e<a;e+=3)I(y,F,p[e],p[e+1],p[e+2],t[e],t[e+1],t[e+2]);break;default:throw new Error("illegal figure")}}class O extends w{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,F,p){const m=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),E=Math.ceil(this._bounds[2])-m,u=Math.ceil(this._bounds[3])-C,g=Math.min(Math.ceil(Math.abs(E*b[0]*1.1)),3e3),R=Math.min(Math.ceil(Math.abs(u*b[1]*1.1)),3e3),L=E/g,z=u/R,W={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-C,scaleX:1/L,scaleY:1/z},Q=p.getCanvas("mesh",g+4,R+4,!1),re=Q.context,j=re.createImageData(g,R);if(F){const n=j.data;for(let _=0,d=n.length;_<d;_+=4)n[_]=F[0],n[_+1]=F[1],n[_+2]=F[2],n[_+3]=255}for(const n of this._figures)V(j,n,W);return re.putImageData(j,2,2),{canvas:Q.canvas,offsetX:m-2*L,offsetY:C-2*z,scaleX:L,scaleY:z}}getPattern(b,F,p,t){let e;if($(b,this._bbox),t===k.SHADING)e=o.Util.singularValueDecompose2dScale((0,v.getCurrentTransform)(b));else if(e=o.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const m=o.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*m[0],e[1]*m[1]]}const a=this._createMeshCanvas(e,t===k.SHADING?null:this._background,F.cachedCanvases);return t!==k.SHADING&&(b.setTransform(...F.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(a.offsetX,a.offsetY),b.scale(a.scaleX,a.scaleY),b.createPattern(a.canvas,"no-repeat")}}class D extends w{getPattern(){return"hotpink"}}class A{static get MAX_PATTERN_SIZE(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,F,p,t,e){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=F,this.ctx=p,this.canvasGraphicsFactory=t,this.baseTransform=e}createPatternCanvas(b){const F=this.operatorList,p=this.bbox,t=this.xstep,e=this.ystep,a=this.paintType,C=this.color,E=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+this.tilingType);const u=p[0],g=p[1],R=p[2],L=p[3],z=o.Util.singularValueDecompose2dScale(this.matrix),W=o.Util.singularValueDecompose2dScale(this.baseTransform),N=[z[0]*W[0],z[1]*W[1]],U=this.getSizeAndScale(t,this.ctx.canvas.width,N[0]),Q=this.getSizeAndScale(e,this.ctx.canvas.height,N[1]),re=b.cachedCanvases.getCanvas("pattern",U.size,Q.size,!0),j=re.context,h=E.createCanvasGraphics(j);h.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(h,a,C);let n=u,_=g,d=R,f=L;return u<0&&(n=0,d+=Math.abs(u)),g<0&&(_=0,f+=Math.abs(g)),j.translate(-U.scale*n,-Q.scale*_),h.transform(U.scale,0,0,Q.scale,0,0),j.save(),this.clipBbox(h,n,_,d,f),h.baseTransform=(0,v.getCurrentTransform)(h.ctx),h.executeOperatorList(F),h.endDrawing(),{canvas:re.canvas,scaleX:U.scale,scaleY:Q.scale,offsetX:n,offsetY:_}}getSizeAndScale(b,F,p){b=Math.abs(b);const t=Math.max(A.MAX_PATTERN_SIZE,F);let e=Math.ceil(b*p);return e>=t?e=t:p=e/b,{scale:p,size:e}}clipBbox(b,F,p,t,e){b.ctx.rect(F,p,t-F,e-p),b.current.updateRectMinMax((0,v.getCurrentTransform)(b.ctx),[F,p,t,e]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,F,p){const t=b.ctx,e=b.current;switch(F){case 1:const a=this.ctx;t.fillStyle=a.fillStyle,t.strokeStyle=a.strokeStyle,e.fillColor=a.fillStyle,e.strokeColor=a.strokeStyle;break;case 2:const m=o.Util.makeHexColor(p[0],p[1],p[2]);t.fillStyle=m,t.strokeStyle=m,e.fillColor=m,e.strokeColor=m;break;default:throw new o.FormatError(`Unsupported paint type: ${F}`)}}getPattern(b,F,p,t){let e=p;t!==k.SHADING&&(e=o.Util.transform(e,F.baseTransform),this.matrix&&(e=o.Util.transform(e,this.matrix)));const a=this.createPatternCanvas(F);let m=new DOMMatrix(e);m=m.translate(a.offsetX,a.offsetY),m=m.scale(1/a.scaleX,1/a.scaleY);const C=b.createPattern(a.canvas,"repeat");try{C.setTransform(m)}catch(E){(0,o.warn)(`TilingPattern.getPattern: "${null==E?void 0:E.message}".`)}return C}}s.TilingPattern=A},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.applyMaskImageData=function v({src:B,srcPos:k=0,dest:$,destPos:w=0,width:T,height:I,inverseDecode:V=!1}){const O=o.FeatureTest.isLittleEndian?4278190080:255,[D,S]=V?[0,O]:[O,0],r=T>>3,A=7&T,y=B.length;$=new Uint32Array($.buffer);for(let b=0;b<I;b++){for(const p=k+r;k<p;k++){const t=k<y?B[k]:255;$[w++]=128&t?S:D,$[w++]=64&t?S:D,$[w++]=32&t?S:D,$[w++]=16&t?S:D,$[w++]=8&t?S:D,$[w++]=4&t?S:D,$[w++]=2&t?S:D,$[w++]=1&t?S:D}if(0===A)continue;const F=k<y?B[k++]:255;for(let p=0;p<A;p++)$[w++]=F&1<<7-p?S:D}return{srcPos:k,destPos:w}};var o=M(1)},(q,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const M=Object.create(null);s.GlobalWorkerOptions=M,M.workerPort=void 0===M.workerPort?null:M.workerPort,M.workerSrc=void 0===M.workerSrc?"":M.workerSrc},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var o=M(1);function k(w){switch(w instanceof Error||"object"==typeof w&&null!==w||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new o.AbortException(w.message);case"MissingPDFException":return new o.MissingPDFException(w.message);case"PasswordException":return new o.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new o.UnknownErrorException(w.message,w.details);default:return new o.UnknownErrorException(w.message,w.toString())}}s.MessageHandler=class ${constructor(T,I,V){this.sourceName=T,this.targetName=I,this.comObj=V,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const D=O.data;if(D.targetName!==this.sourceName)return;if(D.stream)return void this._processStreamMessage(D);if(D.callback){const r=D.callbackId,A=this.callbackCapabilities[r];if(!A)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],1===D.callback)A.resolve(D.data);else{if(2!==D.callback)throw new Error("Unexpected callback case");A.reject(k(D.reason))}return}const S=this.actionHandler[D.action];if(!S)throw new Error(`Unknown action from worker: ${D.action}`);if(D.callbackId){const r=this.sourceName,A=D.sourceName;new Promise(function(y){y(S(D.data))}).then(function(y){V.postMessage({sourceName:r,targetName:A,callback:1,callbackId:D.callbackId,data:y})},function(y){V.postMessage({sourceName:r,targetName:A,callback:2,callbackId:D.callbackId,reason:k(y)})})}else D.streamId?this._createStreamSink(D):S(D.data)},V.addEventListener("message",this._onComObjOnMessage)}on(T,I){const V=this.actionHandler;if(V[T])throw new Error(`There is already an actionName called "${T}"`);V[T]=I}send(T,I,V){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:I},V)}sendWithPromise(T,I,V){const O=this.callbackId++,D=(0,o.createPromiseCapability)();this.callbackCapabilities[O]=D;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:O,data:I},V)}catch(S){D.reject(S)}return D.promise}sendWithStream(T,I,V,O){const D=this.streamId++,S=this.sourceName,r=this.targetName,A=this.comObj;return new ReadableStream({start:y=>{const b=(0,o.createPromiseCapability)();return this.streamControllers[D]={controller:y,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:S,targetName:r,action:T,streamId:D,data:I,desiredSize:y.desiredSize},O),b.promise},pull:y=>{const b=(0,o.createPromiseCapability)();return this.streamControllers[D].pullCall=b,A.postMessage({sourceName:S,targetName:r,stream:6,streamId:D,desiredSize:y.desiredSize}),b.promise},cancel:y=>{(0,o.assert)(y instanceof Error,"cancel must have a valid reason");const b=(0,o.createPromiseCapability)();return this.streamControllers[D].cancelCall=b,this.streamControllers[D].isClosed=!0,A.postMessage({sourceName:S,targetName:r,stream:1,streamId:D,reason:k(y)}),b.promise}},V)}_createStreamSink(T){const I=T.streamId,V=this.sourceName,O=T.sourceName,D=this.comObj,S=this,r=this.actionHandler[T.action],A={enqueue(y,b=1,F){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=b,p>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),D.postMessage({sourceName:V,targetName:O,stream:4,streamId:I,chunk:y},F)},close(){this.isCancelled||(this.isCancelled=!0,D.postMessage({sourceName:V,targetName:O,stream:3,streamId:I}),delete S.streamSinks[I])},error(y){(0,o.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,D.postMessage({sourceName:V,targetName:O,stream:5,streamId:I,reason:k(y)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[I]=A,new Promise(function(y){y(r(T.data,A))}).then(function(){D.postMessage({sourceName:V,targetName:O,stream:8,streamId:I,success:!0})},function(y){D.postMessage({sourceName:V,targetName:O,stream:8,streamId:I,reason:k(y)})})}_processStreamMessage(T){const I=T.streamId,V=this.sourceName,O=T.sourceName,D=this.comObj,S=this.streamControllers[I],r=this.streamSinks[I];switch(T.stream){case 8:T.success?S.startCall.resolve():S.startCall.reject(k(T.reason));break;case 7:T.success?S.pullCall.resolve():S.pullCall.reject(k(T.reason));break;case 6:if(!r){D.postMessage({sourceName:V,targetName:O,stream:7,streamId:I,success:!0});break}r.desiredSize<=0&&T.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=T.desiredSize,new Promise(function(A){A(r.onPull&&r.onPull())}).then(function(){D.postMessage({sourceName:V,targetName:O,stream:7,streamId:I,success:!0})},function(A){D.postMessage({sourceName:V,targetName:O,stream:7,streamId:I,reason:k(A)})});break;case 4:if((0,o.assert)(S,"enqueue should have stream controller"),S.isClosed)break;S.controller.enqueue(T.chunk);break;case 3:if((0,o.assert)(S,"close should have stream controller"),S.isClosed)break;S.isClosed=!0,S.controller.close(),this._deleteStreamController(S,I);break;case 5:(0,o.assert)(S,"error should have stream controller"),S.controller.error(k(T.reason)),this._deleteStreamController(S,I);break;case 2:T.success?S.cancelCall.resolve():S.cancelCall.reject(k(T.reason)),this._deleteStreamController(S,I);break;case 1:if(!r)break;new Promise(function(A){A(r.onCancel&&r.onCancel(k(T.reason)))}).then(function(){D.postMessage({sourceName:V,targetName:O,stream:2,streamId:I,success:!0})},function(A){D.postMessage({sourceName:V,targetName:O,stream:2,streamId:I,reason:k(A)})}),r.sinkCapability.reject(k(T.reason)),r.isCancelled=!0,delete this.streamSinks[I];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(T,I){var V=this;return _asyncToGenerator(function*(){yield Promise.allSettled([T.startCall&&T.startCall.promise,T.pullCall&&T.pullCall.promise,T.cancelCall&&T.cancelCall.promise]),delete V.streamControllers[I]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var o=M(1),v=new WeakMap,B=new WeakMap;s.Metadata=class k{constructor({parsedData:w,rawData:T}){_classPrivateFieldInitSpec(this,v,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,B,{writable:!0,value:void 0}),_classPrivateFieldSet(this,v,w),_classPrivateFieldSet(this,B,T)}getRaw(){return _classPrivateFieldGet(this,B)}get(w){var T;return null!==(T=_classPrivateFieldGet(this,v).get(w))&&void 0!==T?T:null}getAll(){return(0,o.objectFromMap)(_classPrivateFieldGet(this,v))}has(w){return _classPrivateFieldGet(this,v).has(w)}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var o=M(1);const v=Symbol("INTERNAL");var B=new WeakMap;class k{constructor(r,A){_classPrivateFieldInitSpec(this,B,{writable:!0,value:!0}),this.name=r,this.intent=A}get visible(){return _classPrivateFieldGet(this,B)}_setVisible(r,A){r!==v&&(0,o.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(this,B,A)}}var $=new WeakMap,w=new WeakMap,T=new WeakMap,I=new WeakMap,V=new WeakSet;function D(S){const r=S.length;if(r<2)return!0;const A=S[0];for(let y=1;y<r;y++){const b=S[y];let F;if(Array.isArray(b))F=_classPrivateMethodGet(this,V,D).call(this,b);else{if(!_classPrivateFieldGet(this,w).has(b))return(0,o.warn)(`Optional content group not found: ${b}`),!0;F=_classPrivateFieldGet(this,w).get(b).visible}switch(A){case"And":if(!F)return!1;break;case"Or":if(F)return!0;break;case"Not":return!F;default:return!0}}return"And"===A}s.OptionalContentConfig=class O{constructor(r){if(_classPrivateMethodInitSpec(this,V),_classPrivateFieldInitSpec(this,$,{writable:!0,value:!0}),_classPrivateFieldInitSpec(this,w,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:null}),this.name=null,this.creator=null,null!==r){this.name=r.name,this.creator=r.creator,_classPrivateFieldSet(this,I,r.order);for(const A of r.groups)_classPrivateFieldGet(this,w).set(A.id,new k(A.name,A.intent));if("OFF"===r.baseState)for(const A of _classPrivateFieldGet(this,w).values())A._setVisible(v,!1);for(const A of r.on)_classPrivateFieldGet(this,w).get(A)._setVisible(v,!0);for(const A of r.off)_classPrivateFieldGet(this,w).get(A)._setVisible(v,!1);_classPrivateFieldSet(this,T,new Map);for(const[A,y]of _classPrivateFieldGet(this,w))_classPrivateFieldGet(this,T).set(A,y.visible)}}isVisible(r){if(0===_classPrivateFieldGet(this,w).size)return!0;if(!r)return(0,o.warn)("Optional content group not defined."),!0;if("OCG"===r.type)return _classPrivateFieldGet(this,w).has(r.id)?_classPrivateFieldGet(this,w).get(r.id).visible:((0,o.warn)(`Optional content group not found: ${r.id}`),!0);if("OCMD"===r.type){if(r.expression)return _classPrivateMethodGet(this,V,D).call(this,r.expression);if(!r.policy||"AnyOn"===r.policy){for(const A of r.ids){if(!_classPrivateFieldGet(this,w).has(A))return(0,o.warn)(`Optional content group not found: ${A}`),!0;if(_classPrivateFieldGet(this,w).get(A).visible)return!0}return!1}if("AllOn"===r.policy){for(const A of r.ids){if(!_classPrivateFieldGet(this,w).has(A))return(0,o.warn)(`Optional content group not found: ${A}`),!0;if(!_classPrivateFieldGet(this,w).get(A).visible)return!1}return!0}if("AnyOff"===r.policy){for(const A of r.ids){if(!_classPrivateFieldGet(this,w).has(A))return(0,o.warn)(`Optional content group not found: ${A}`),!0;if(!_classPrivateFieldGet(this,w).get(A).visible)return!0}return!1}if("AllOff"===r.policy){for(const A of r.ids){if(!_classPrivateFieldGet(this,w).has(A))return(0,o.warn)(`Optional content group not found: ${A}`),!0;if(_classPrivateFieldGet(this,w).get(A).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,o.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,A=!0){_classPrivateFieldGet(this,w).has(r)?(_classPrivateFieldGet(this,w).get(r)._setVisible(v,!!A),_classPrivateFieldSet(this,$,null)):(0,o.warn)(`Optional content group not found: ${r}`)}get hasInitialVisibility(){if(null!==_classPrivateFieldGet(this,$))return _classPrivateFieldGet(this,$);for(const[r,A]of _classPrivateFieldGet(this,w)){const y=_classPrivateFieldGet(this,T).get(r);if(A.visible!==y)return _classPrivateFieldSet(this,$,!1)}return _classPrivateFieldSet(this,$,!0)}getOrder(){return _classPrivateFieldGet(this,w).size?_classPrivateFieldGet(this,I)?_classPrivateFieldGet(this,I).slice():[..._classPrivateFieldGet(this,w).keys()]:null}getGroups(){return _classPrivateFieldGet(this,w).size>0?(0,o.objectFromMap)(_classPrivateFieldGet(this,w)):null}getGroup(r){return _classPrivateFieldGet(this,w).get(r)||null}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var o=M(1),v=M(8);s.PDFDataTransportStream=class B{constructor(T,I){(0,o.assert)(I,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=T.progressiveDone||!1,this._contentDispositionFilename=T.contentDispositionFilename||null;const V=T.initialData;if((null==V?void 0:V.length)>0){const O=new Uint8Array(V).buffer;this._queuedChunks.push(O)}this._pdfDataRangeTransport=I,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._contentLength=T.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((O,D)=>{this._onReceiveData({begin:O,chunk:D})}),this._pdfDataRangeTransport.addProgressListener((O,D)=>{this._onProgress({loaded:O,total:D})}),this._pdfDataRangeTransport.addProgressiveReadListener(O=>{this._onReceiveData({chunk:O})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(T){const I=new Uint8Array(T.chunk).buffer;if(void 0===T.begin)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const V=this._rangeReaders.some(function(O){return O._begin===T.begin&&(O._enqueue(I),!0)});(0,o.assert)(V,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var T,I;return null!==(T=null===(I=this._fullRequestReader)||void 0===I?void 0:I._loaded)&&void 0!==T?T:0}_onProgress(T){if(void 0===T.total){const I=this._rangeReaders[0];null!=I&&I.onProgress&&I.onProgress({loaded:T.loaded})}else{const I=this._fullRequestReader;null!=I&&I.onProgress&&I.onProgress({loaded:T.loaded,total:T.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const I=this._rangeReaders.indexOf(T);I>=0&&this._rangeReaders.splice(I,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new k(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,I){if(I<=this._progressiveDataLength)return null;const V=new $(this,T,I);return this._pdfDataRangeTransport.requestDataRange(T,I),this._rangeReaders.push(V),V}cancelAllRequests(T){this._fullRequestReader&&this._fullRequestReader.cancel(T);for(const I of this._rangeReaders.slice(0))I.cancel(T);this._pdfDataRangeTransport.abort()}};class k{constructor(T,I,V=!1,O=null){this._stream=T,this._done=V||!1,this._filename=(0,v.isPdfFile)(O)?O:null,this._queuedChunks=I||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var T=this;return _asyncToGenerator(function*(){if(T._queuedChunks.length>0)return{value:T._queuedChunks.shift(),done:!1};if(T._done)return{value:void 0,done:!0};const I=(0,o.createPromiseCapability)();return T._requests.push(I),I.promise})()}cancel(T){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ${constructor(T,I,V){this._stream=T,this._begin=I,this._end=V,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(0===this._requests.length)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var T=this;return _asyncToGenerator(function*(){if(T._queuedChunk){const V=T._queuedChunk;return T._queuedChunk=null,{value:V,done:!1}}if(T._done)return{value:void 0,done:!0};const I=(0,o.createPromiseCapability)();return T._requests.push(I),I.promise})()}cancel(T){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(q,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class M{static textContent(v){const B=[],k={items:B,styles:Object.create(null)};return function $(w){var T;if(!w)return;let I=null;const V=w.name;if("#text"===V)I=w.value;else{if(!M.shouldBuildText(V))return;null!=w&&null!==(T=w.attributes)&&void 0!==T&&T.textContent?I=w.attributes.textContent:w.value&&(I=w.value)}if(null!==I&&B.push({str:I}),w.children)for(const O of w.children)$(O)}(v),k}static shouldBuildText(v){return!("textarea"===v||"input"===v||"option"===v||"select"===v)}}s.XfaText=M},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var o=M(9);const v=function(w){return new Promise((T,I)=>{__webpack_require__(172).readFile(w,(O,D)=>{!O&&D?T(new Uint8Array(D)):I(new Error(O))})})};s.NodeCanvasFactory=class B extends o.BaseCanvasFactory{_createCanvas(T,I){return __webpack_require__(3414).createCanvas(T,I)}},s.NodeCMapReaderFactory=class k extends o.BaseCMapReaderFactory{_fetchData(T,I){return v(T).then(V=>({cMapData:V,compressionType:I}))}},s.NodeStandardFontDataFactory=class $ extends o.BaseStandardFontDataFactory{_fetchData(T){return v(T)}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var o=M(7),v=M(1),B=M(23),k=M(24);s.AnnotationEditorLayer=(()=>{var w=new WeakMap,T=new WeakMap,I=new WeakMap,V=new WeakMap,O=new WeakMap,D=new WeakMap,S=new WeakMap,r=new WeakMap,A=new WeakSet,y=new WeakSet,b=new WeakSet,F=new WeakSet;class p{constructor(E){_classPrivateMethodInitSpec(this,F),_classPrivateMethodInitSpec(this,b),_classPrivateMethodInitSpec(this,y),_classPrivateMethodInitSpec(this,A),_classPrivateFieldInitSpec(this,w,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,S,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,r,{writable:!0,value:void 0}),p._initialized||(p._initialized=!0,B.FreeTextEditor.initialize(E.l10n),k.InkEditor.initialize(E.l10n),E.uiManager.registerEditorTypes([B.FreeTextEditor,k.InkEditor])),_classPrivateFieldSet(this,r,E.uiManager),this.annotationStorage=E.annotationStorage,this.pageIndex=E.pageIndex,this.div=E.div,_classPrivateFieldSet(this,w,E.accessibilityManager),_classPrivateFieldGet(this,r).addLayer(this)}updateToolbar(E){_classPrivateFieldGet(this,r).updateToolbar(E)}updateMode(E=_classPrivateFieldGet(this,r).getMode()){_classPrivateMethodGet(this,F,m).call(this),E===v.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet(this,r).unselectAll()}addInkEditorIfNeeded(E){if(E||_classPrivateFieldGet(this,r).getMode()===v.AnnotationEditorType.INK){if(!E)for(const g of _classPrivateFieldGet(this,O).values())if(g.isEmpty())return void g.setInBackground();_classPrivateMethodGet(this,b,a).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(E){_classPrivateFieldGet(this,r).setEditingState(E)}addCommands(E){_classPrivateFieldGet(this,r).addCommands(E)}enable(){this.div.style.pointerEvents="auto";for(const E of _classPrivateFieldGet(this,O).values())E.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const E of _classPrivateFieldGet(this,O).values())E.disableEditing()}setActiveEditor(E){_classPrivateFieldGet(this,r).getActive()!==E&&_classPrivateFieldGet(this,r).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,V)),this.div.addEventListener("pointerup",_classPrivateFieldGet(this,I))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,V)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,I))}attach(E){_classPrivateFieldGet(this,O).set(E.id,E)}detach(E){var u;_classPrivateFieldGet(this,O).delete(E.id),null===(u=_classPrivateFieldGet(this,w))||void 0===u||u.removePointerInTextLayer(E.contentDiv)}remove(E){_classPrivateFieldGet(this,r).removeEditor(E),this.detach(E),this.annotationStorage.remove(E.id),E.div.style.display="none",setTimeout(()=>{E.div.style.display="",E.div.remove(),E.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet(this,r).focusMainContainer()},0),_classPrivateFieldGet(this,S)||this.addInkEditorIfNeeded(!1)}add(E){if(_classPrivateMethodGet(this,A,t).call(this,E),_classPrivateFieldGet(this,r).addEditor(E),this.attach(E),!E.isAttachedToDOM){const u=E.render();this.div.append(u),E.isAttachedToDOM=!0}this.moveEditorInDOM(E),E.onceAdded(),this.addToAnnotationStorage(E)}moveEditorInDOM(E){var u;null===(u=_classPrivateFieldGet(this,w))||void 0===u||u.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addToAnnotationStorage(E){!E.isEmpty()&&!this.annotationStorage.has(E.id)&&this.annotationStorage.setValue(E.id,E)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addANewEditor(E){this.addCommands({cmd:()=>{this.addOrRebuild(E)},undo:()=>{E.remove()},mustExec:!0})}addUndoableEditor(E){this.addCommands({cmd:()=>{this.addOrRebuild(E)},undo:()=>{E.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(this,r).getId()}deserialize(E){switch(E.annotationType){case v.AnnotationEditorType.FREETEXT:return B.FreeTextEditor.deserialize(E,this);case v.AnnotationEditorType.INK:return k.InkEditor.deserialize(E,this)}return null}setSelected(E){_classPrivateFieldGet(this,r).setSelected(E)}toggleSelected(E){_classPrivateFieldGet(this,r).toggleSelected(E)}isSelected(E){return _classPrivateFieldGet(this,r).isSelected(E)}unselect(E){_classPrivateFieldGet(this,r).unselect(E)}pointerup(E){if(!(0!==E.button||E.ctrlKey&&o.KeyboardManager.platform.isMac)&&E.target===this.div&&_classPrivateFieldGet(this,D)){if(_classPrivateFieldSet(this,D,!1),!_classPrivateFieldGet(this,T))return void _classPrivateFieldSet(this,T,!0);_classPrivateMethodGet(this,b,a).call(this,E)}}pointerdown(E){if(0!==E.button||E.ctrlKey&&o.KeyboardManager.platform.isMac||E.target!==this.div)return;_classPrivateFieldSet(this,D,!0);const g=_classPrivateFieldGet(this,r).getActive();_classPrivateFieldSet(this,T,!g||g.isEmpty())}drop(E){const u=E.dataTransfer.getData("text/plain"),g=_classPrivateFieldGet(this,r).getEditor(u);if(!g)return;E.preventDefault(),E.dataTransfer.dropEffect="move",_classPrivateMethodGet(this,A,t).call(this,g);const R=this.div.getBoundingClientRect();g.translate(E.clientX-R.x-g.startX,E.clientY-R.y-g.startY),this.moveEditorInDOM(g),g.div.focus()}dragover(E){E.preventDefault()}destroy(){var E;(null===(E=_classPrivateFieldGet(this,r).getActive())||void 0===E?void 0:E.parent)===this&&_classPrivateFieldGet(this,r).setActiveEditor(null);for(const g of _classPrivateFieldGet(this,O).values()){var u;null===(u=_classPrivateFieldGet(this,w))||void 0===u||u.removePointerInTextLayer(g.contentDiv),g.isAttachedToDOM=!1,g.div.remove(),g.parent=null}this.div=null,_classPrivateFieldGet(this,O).clear(),_classPrivateFieldGet(this,r).removeLayer(this)}render(E){this.viewport=E.viewport,(0,o.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const u of _classPrivateFieldGet(this,r).getEditors(this.pageIndex))this.add(u);this.updateMode()}update(E){this.viewport=E.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[E,u,g,R]=this.viewport.viewBox;return[g-E,R-u]}get viewportBaseDimensions(){const{width:E,height:u,rotation:g}=this.viewport;return g%180==0?[E,u]:[u,E]}setDimensions(){const{width:E,height:u,rotation:g}=this.viewport,R=g%180!=0,L=Math.floor(E)+"px",z=Math.floor(u)+"px";this.div.style.width=R?z:L,this.div.style.height=R?L:z,this.div.setAttribute("data-main-rotation",g)}}function t(C){var E;C.parent!==this&&(this.attach(C),C.pageIndex=this.pageIndex,null===(E=C.parent)||void 0===E||E.detach(C),C.parent=this,C.div&&C.isAttachedToDOM&&(C.div.remove(),this.div.append(C.div)))}function e(C){switch(_classPrivateFieldGet(this,r).getMode()){case v.AnnotationEditorType.FREETEXT:return new B.FreeTextEditor(C);case v.AnnotationEditorType.INK:return new k.InkEditor(C)}return null}function a(C){const E=this.getNextId(),u=_classPrivateMethodGet(this,y,e).call(this,{parent:this,id:E,x:C.offsetX,y:C.offsetY});return u&&this.add(u),u}function m(){_classPrivateFieldSet(this,S,!0);for(const C of _classPrivateFieldGet(this,O).values())C.isEmpty()&&C.remove();_classPrivateFieldSet(this,S,!1)}return _defineProperty(p,"_initialized",!1),p})()},(q,s,M)=>{var o;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var v=M(1),B=M(7),k=M(6),$=new WeakMap,w=new WeakMap,T=new WeakMap,I=new WeakMap,V=new WeakMap,O=new WeakMap,D=new WeakMap,S=new WeakSet,r=new WeakSet,A=new WeakSet,y=new WeakSet;class b extends k.AnnotationEditor{constructor(m){super({...m,name:"freeTextEditor"}),_classPrivateMethodInitSpec(this,y),_classPrivateMethodInitSpec(this,A),_classPrivateMethodInitSpec(this,r),_classPrivateMethodInitSpec(this,S),_classPrivateFieldInitSpec(this,$,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec(this,w,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:void 0}),_classPrivateFieldSet(this,I,m.color||b._defaultColor||k.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(this,D,m.fontSize||b._defaultFontSize)}static initialize(m){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(E=>[E,m.get(E)]));const C=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(C.getPropertyValue("--freetext-padding"))}static updateDefaultParams(m,C){switch(m){case v.AnnotationEditorParamsType.FREETEXT_SIZE:b._defaultFontSize=C;break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:b._defaultColor=C}}updateParams(m,C){switch(m){case v.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,S,F).call(this,C);break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,r,p).call(this,C)}}static get defaultPropertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,b._defaultFontSize],[v.AnnotationEditorParamsType.FREETEXT_COLOR,b._defaultColor||k.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,D)],[v.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,I)]]}getInitialTranslation(){return[-b._internalPadding*this.parent.scaleFactor,-(b._internalPadding+_classPrivateFieldGet(this,D))*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(v.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,T)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,w)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,$)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,T)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,w)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,$)),this.div.focus(),this.isEditing=!1)}focusin(m){super.focusin(m),m.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),_classPrivateFieldGet(this,O)||(_classPrivateFieldSet(this,O,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet(this,V,_classPrivateMethodGet(this,A,t).call(this).trimEnd()),_classPrivateMethodGet(this,y,e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(m){this.enableEditMode(),this.editorDiv.focus()}keydown(m){m.target===this.div&&"Enter"===m.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(m){b._keyboardManager.exec(this,m)}editorDivFocus(m){this.isEditing=!0}editorDivBlur(m){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let m,C;this.width&&(m=this.x,C=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),b._l10nPromise.get("editor_free_text_aria_label").then(u=>{var g;return null===(g=this.editorDiv)||void 0===g?void 0:g.setAttribute("aria-label",u)}),b._l10nPromise.get("free_text_default_content").then(u=>{var g;return null===(g=this.editorDiv)||void 0===g?void 0:g.setAttribute("default-content",u)}),this.editorDiv.contentEditable=!0;const{style:E}=this.editorDiv;if(E.fontSize=`calc(${_classPrivateFieldGet(this,D)}px * var(--scale-factor))`,E.color=_classPrivateFieldGet(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,B.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[u,g]=this.parent.viewportBaseDimensions;this.setAt(m*u,C*g,this.width*u,this.height*g);for(const R of _classPrivateFieldGet(this,V).split("\n")){const L=document.createElement("div");L.append(R?document.createTextNode(R):document.createElement("br")),this.editorDiv.append(L)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(m,C){const E=super.deserialize(m,C);return _classPrivateFieldSet(E,D,m.fontSize),_classPrivateFieldSet(E,I,v.Util.makeHexColor(...m.color)),_classPrivateFieldSet(E,V,m.value),E}serialize(){if(this.isEmpty())return null;const m=b._internalPadding*this.parent.scaleFactor,C=this.getRect(m,m),E=k.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:v.AnnotationEditorType.FREETEXT,color:E,fontSize:_classPrivateFieldGet(this,D),value:_classPrivateFieldGet(this,V),pageIndex:this.parent.pageIndex,rect:C,rotation:this.rotation}}}function F(a){const m=E=>{this.editorDiv.style.fontSize=`calc(${E}px * var(--scale-factor))`,this.translate(0,-(E-_classPrivateFieldGet(this,D))*this.parent.scaleFactor),_classPrivateFieldSet(this,D,E),_classPrivateMethodGet(this,y,e).call(this)},C=_classPrivateFieldGet(this,D);this.parent.addCommands({cmd:()=>{m(a)},undo:()=>{m(C)},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function p(a){const m=_classPrivateFieldGet(this,I);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet(this,I,a),this.editorDiv.style.color=a},undo:()=>{_classPrivateFieldSet(this,I,m),this.editorDiv.style.color=m},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function t(){const a=this.editorDiv.getElementsByTagName("div");if(0===a.length)return this.editorDiv.innerText;const m=[];for(let C=0,E=a.length;C<E;C++){const g=a[C].firstChild;m.push("#text"===(null==g?void 0:g.nodeName)?g.data:"")}return m.join("\n")}function e(){const[a,m]=this.parent.viewportBaseDimensions,C=this.div.getBoundingClientRect();this.width=C.width/a,this.height=C.height/m}o=b,_defineProperty(b,"_freeTextDefaultContent",""),_defineProperty(b,"_l10nPromise",void 0),_defineProperty(b,"_internalPadding",0),_defineProperty(b,"_defaultColor",null),_defineProperty(b,"_defaultFontSize",10),_defineProperty(b,"_keyboardManager",new B.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],o.prototype.commitOrRemove]])),_defineProperty(b,"_type","freetext"),s.FreeTextEditor=b},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0,Object.defineProperty(s,"fitCurve",{enumerable:!0,get:function(){return B.fitCurve}});var o=M(1),v=M(6),B=M(25),k=M(7);const $=16;s.InkEditor=(()=>{var T,I=new WeakMap,V=new WeakMap,O=new WeakMap,D=new WeakMap,S=new WeakMap,r=new WeakMap,A=new WeakMap,y=new WeakMap,b=new WeakMap,F=new WeakMap,p=new WeakMap,t=new WeakMap,e=new WeakMap,a=new WeakMap,m=new WeakSet,C=new WeakSet,E=new WeakSet,u=new WeakSet,g=new WeakSet,R=new WeakSet,L=new WeakSet,z=new WeakSet,W=new WeakSet,N=new WeakSet,U=new WeakSet,Q=new WeakSet,re=new WeakSet,j=new WeakSet,h=new WeakSet,n=new WeakSet,_=new WeakSet,d=new WeakSet,f=new WeakSet,i=new WeakSet,c=new WeakSet,l=new WeakSet;class P extends v.AnnotationEditor{constructor(J){super({...J,name:"inkEditor"}),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,c),_classPrivateMethodInitSpec(this,i),_classPrivateMethodInitSpec(this,f),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,_),_classPrivateMethodInitSpec(this,n),_classPrivateMethodInitSpec(this,h),_classPrivateMethodInitSpec(this,j),_classPrivateMethodInitSpec(this,re),_classPrivateMethodInitSpec(this,Q),_classPrivateMethodInitSpec(this,U),_classPrivateMethodInitSpec(this,N),_classPrivateMethodInitSpec(this,W),_classPrivateMethodInitSpec(this,z),_classPrivateMethodInitSpec(this,L),_classPrivateMethodInitSpec(this,R),_classPrivateMethodInitSpec(this,g),_classPrivateMethodInitSpec(this,u),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,C),_classPrivateMethodInitSpec(this,m),_classPrivateFieldInitSpec(this,I,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec(this,S,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec(this,r,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec(this,A,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,b,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,p,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,t,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,a,{writable:!0,value:null}),this.color=J.color||null,this.thickness=J.thickness||null,this.opacity=J.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(J){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(ae=>[ae,J.get(ae)]))}static updateDefaultParams(J,ae){switch(J){case o.AnnotationEditorParamsType.INK_THICKNESS:P._defaultThickness=ae;break;case o.AnnotationEditorParamsType.INK_COLOR:P._defaultColor=ae;break;case o.AnnotationEditorParamsType.INK_OPACITY:P._defaultOpacity=ae/100}}updateParams(J,ae){switch(J){case o.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,m,x).call(this,ae);break;case o.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,C,H).call(this,ae);break;case o.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,E,K).call(this,ae)}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,P._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,P._defaultColor||v.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*P._defaultOpacity)]]}get propertiesToUpdate(){var J;return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||P._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||P._defaultColor||v.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(J=this.opacity)&&void 0!==J?J:P._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(_classPrivateMethodGet(this,U,me).call(this),_classPrivateMethodGet(this,Q,ie).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet(this,re,oe).call(this)),_classPrivateMethodGet(this,c,G).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(this,p).disconnect(),_classPrivateFieldSet(this,p,null),super.remove())}enableEditMode(){_classPrivateFieldGet(this,y)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,A)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,r)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,A)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,r)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(this,y)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(this,y,!0),this.div.classList.add("disabled"),_classPrivateMethodGet(this,c,G).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(J){super.focusin(J),this.enableEditMode()}canvasPointerdown(J){0!==J.button||!this.isInEditMode()||_classPrivateFieldGet(this,y)||(this.setInForeground(),"mouse"!==J.type&&this.div.focus(),J.stopPropagation(),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,S)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,D)),_classPrivateMethodGet(this,R,pe).call(this,J.offsetX,J.offsetY))}canvasPointermove(J){J.stopPropagation(),_classPrivateMethodGet(this,L,le).call(this,J.offsetX,J.offsetY)}canvasPointerup(J){0===J.button&&this.isInEditMode()&&0!==this.currentPath.length&&(J.stopPropagation(),_classPrivateMethodGet(this,N,_e).call(this,J),this.setInBackground())}canvasPointerleave(J){_classPrivateMethodGet(this,N,_e).call(this,J),this.setInBackground()}render(){if(this.div)return this.div;let J,ae;this.width&&(J=this.x,ae=this.y),super.render(),P._l10nPromise.get("editor_ink_aria_label").then(Ae=>{var be;return null===(be=this.div)||void 0===be?void 0:be.setAttribute("aria-label",Ae)});const[ge,Z,X,Y]=_classPrivateMethodGet(this,u,se).call(this);if(this.setAt(ge,Z,0,0),this.setDims(X,Y),_classPrivateMethodGet(this,U,me).call(this),this.width){const[Ae,be]=this.parent.viewportBaseDimensions;this.setAt(J*Ae,ae*be,this.width*Ae,this.height*be),_classPrivateFieldSet(this,b,!0),_classPrivateMethodGet(this,re,oe).call(this),this.setDims(this.width*Ae,this.height*be),_classPrivateMethodGet(this,W,de).call(this),_classPrivateMethodGet(this,l,ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet(this,Q,ie).call(this),this.div}setDimensions(J,ae){const ge=Math.round(J),Z=Math.round(ae);if(_classPrivateFieldGet(this,t)===ge&&_classPrivateFieldGet(this,e)===Z)return;_classPrivateFieldSet(this,t,ge),_classPrivateFieldSet(this,e,Z),this.canvas.style.visibility="hidden",_classPrivateFieldGet(this,I)&&Math.abs(_classPrivateFieldGet(this,I)-J/ae)>.01&&(ae=Math.ceil(J/_classPrivateFieldGet(this,I)),this.setDims(J,ae));const[X,Y]=this.parent.viewportBaseDimensions;this.width=J/X,this.height=ae/Y,_classPrivateFieldGet(this,y)&&_classPrivateMethodGet(this,j,Pe).call(this,J,ae),_classPrivateMethodGet(this,re,oe).call(this),_classPrivateMethodGet(this,W,de).call(this),this.canvas.style.visibility="visible"}static deserialize(J,ae){const ge=super.deserialize(J,ae);ge.thickness=J.thickness,ge.color=o.Util.makeHexColor(...J.color),ge.opacity=J.opacity;const[Z,X]=ae.pageDimensions,Y=ge.width*Z,Ae=ge.height*X,be=ae.scaleFactor,he=J.thickness/2;_classPrivateFieldSet(ge,I,Y/Ae),_classPrivateFieldSet(ge,y,!0),_classPrivateFieldSet(ge,t,Math.round(Y)),_classPrivateFieldSet(ge,e,Math.round(Ae));for(const{bezier:ve}of J.paths){const Ee=[];ge.paths.push(Ee);let Se=be*(ve[0]-he),we=be*(Ae-ve[1]-he);for(let Te=2,Re=ve.length;Te<Re;Te+=6){const Ge=be*(ve[Te+4]-he),Oe=be*(Ae-ve[Te+5]-he);Ee.push([[Se,we],[be*(ve[Te]-he),be*(Ae-ve[Te+1]-he)],[be*(ve[Te+2]-he),be*(Ae-ve[Te+3]-he)],[Ge,Oe]]),Se=Ge,we=Oe}const ke=_classStaticPrivateMethodGet(this,P,Me).call(this,Ee);ge.bezierPath2D.push(ke)}const ce=_classPrivateMethodGet(ge,f,Fe).call(ge);return _classPrivateFieldSet(ge,O,Math.max($,ce[2]-ce[0])),_classPrivateFieldSet(ge,V,Math.max($,ce[3]-ce[1])),_classPrivateMethodGet(ge,j,Pe).call(ge,Y,Ae),ge}serialize(){if(this.isEmpty())return null;const J=this.getRect(0,0),ae=this.rotation%180==0?J[3]-J[1]:J[2]-J[0],ge=v.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:ge,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,n,fe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,ae),pageIndex:this.parent.pageIndex,rect:J,rotation:this.rotation}}}function x(ne){const J=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ne,_classPrivateMethodGet(this,c,G).call(this)},undo:()=>{this.thickness=J,_classPrivateMethodGet(this,c,G).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function H(ne){const J=this.color;this.parent.addCommands({cmd:()=>{this.color=ne,_classPrivateMethodGet(this,W,de).call(this)},undo:()=>{this.color=J,_classPrivateMethodGet(this,W,de).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function K(ne){ne/=100;const J=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ne,_classPrivateMethodGet(this,W,de).call(this)},undo:()=>{this.opacity=J,_classPrivateMethodGet(this,W,de).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function se(){const{width:ne,height:J,rotation:ae}=this.parent.viewport;switch(ae){case 90:return[0,ne,ne,J];case 180:return[ne,J,ne,J];case 270:return[J,0,ne,J];default:return[0,0,ne,J]}}function te(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,k.opacityToHex)(this.opacity)}`}function pe(ne,J){var ae;this.isEditing=!0,_classPrivateFieldGet(this,b)||(_classPrivateFieldSet(this,b,!0),_classPrivateMethodGet(this,re,oe).call(this),this.thickness||(this.thickness=T._defaultThickness),this.color||(this.color=T._defaultColor||v.AnnotationEditor._defaultLineColor),null!==(ae=this.opacity)&&void 0!==ae||(this.opacity=T._defaultOpacity)),this.currentPath.push([ne,J]),_classPrivateFieldSet(this,F,null),_classPrivateMethodGet(this,g,te).call(this),this.ctx.beginPath(),this.ctx.moveTo(ne,J),_classPrivateFieldSet(this,a,()=>{_classPrivateFieldGet(this,a)&&(_classPrivateFieldGet(this,F)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):_classPrivateMethodGet(this,W,de).call(this),this.ctx.lineTo(..._classPrivateFieldGet(this,F)),_classPrivateFieldSet(this,F,null),this.ctx.stroke()),window.requestAnimationFrame(_classPrivateFieldGet(this,a)))}),window.requestAnimationFrame(_classPrivateFieldGet(this,a))}function le(ne,J){const[ae,ge]=this.currentPath.at(-1);ne===ae&&J===ge||(this.currentPath.push([ne,J]),_classPrivateFieldSet(this,F,[ne,J]))}function ue(ne,J){this.ctx.closePath(),_classPrivateFieldSet(this,a,null),ne=Math.min(Math.max(ne,0),this.canvas.width),J=Math.min(Math.max(J,0),this.canvas.height);const[ae,ge]=this.currentPath.at(-1);let Z;if((ne!==ae||J!==ge)&&this.currentPath.push([ne,J]),1!==this.currentPath.length)Z=(0,B.fitCurve)(this.currentPath,30,null);else{const be=[ne,J];Z=[[be,be.slice(),be.slice(),be]]}const X=_classStaticPrivateMethodGet(T,T,Me).call(T,Z);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(Z),this.bezierPath2D.push(X),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_classPrivateMethodGet(this,U,me).call(this),_classPrivateMethodGet(this,Q,ie).call(this)),_classPrivateMethodGet(this,c,G).call(this))},mustExec:!0})}function de(){if(this.isEmpty())return void _classPrivateMethodGet(this,h,Be).call(this);_classPrivateMethodGet(this,g,te).call(this);const{canvas:ne,ctx:J}=this;J.setTransform(1,0,0,1,0,0),J.clearRect(0,0,ne.width,ne.height),_classPrivateMethodGet(this,h,Be).call(this);for(const ae of this.bezierPath2D)J.stroke(ae)}function _e(ne){_classPrivateMethodGet(this,z,ue).call(this,ne.offsetX,ne.offsetY),this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,S)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,D)),this.parent.addToAnnotationStorage(this)}function me(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",T._l10nPromise.get("editor_ink_canvas_aria_label").then(ne=>{var J;return null===(J=this.canvas)||void 0===J?void 0:J.setAttribute("aria-label",ne)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ie(){_classPrivateFieldSet(this,p,new ResizeObserver(ne=>{const J=ne[0].contentRect;J.width&&J.height&&this.setDimensions(J.width,J.height)})),_classPrivateFieldGet(this,p).observe(this.div)}function oe(){if(!_classPrivateFieldGet(this,b))return;const[ne,J]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ne),this.canvas.height=Math.ceil(this.height*J),_classPrivateMethodGet(this,h,Be).call(this)}function Pe(ne,J){const ae=_classPrivateMethodGet(this,i,ye).call(this),ge=(ne-ae)/_classPrivateFieldGet(this,O),Z=(J-ae)/_classPrivateFieldGet(this,V);this.scaleFactor=Math.min(ge,Z)}function Be(){const ne=_classPrivateMethodGet(this,i,ye).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ne,this.translationY*this.scaleFactor+ne)}function Me(ne){const J=new Path2D;for(let ae=0,ge=ne.length;ae<ge;ae++){const[Z,X,Y,Ae]=ne[ae];0===ae&&J.moveTo(...Z),J.bezierCurveTo(X[0],X[1],Y[0],Y[1],Ae[0],Ae[1])}return J}function fe(ne,J,ae,ge){const X=[],Y=this.thickness/2;let Ae,be;for(const he of this.paths){Ae=[],be=[];for(let ce=0,ve=he.length;ce<ve;ce++){const[Ee,Se,we,ke]=he[ce],Te=ne*(Ee[0]+J)+Y,Re=ge-ne*(Ee[1]+ae)-Y,De=ne*(Se[0]+J)+Y,Le=ge-ne*(Se[1]+ae)-Y,Ne=ne*(we[0]+J)+Y,We=ge-ne*(we[1]+ae)-Y,Ge=ne*(ke[0]+J)+Y,Oe=ge-ne*(ke[1]+ae)-Y;0===ce&&(Ae.push(Te,Re),be.push(Te,Re)),Ae.push(De,Le,Ne,We,Ge,Oe),_classPrivateMethodGet(this,_,Ce).call(this,Te,Re,De,Le,Ne,We,Ge,Oe,4,be)}X.push({bezier:Ae,points:be})}return X}function Ce(ne,J,ae,ge,Z,X,Y,Ae,be,he){if(_classPrivateMethodGet(this,d,xe).call(this,ne,J,ae,ge,Z,X,Y,Ae))he.push(Y,Ae);else{for(let ce=1;ce<be-1;ce++){const ve=ce/be,Ee=1-ve;let Se=ve*ne+Ee*ae,we=ve*J+Ee*ge,ke=ve*ae+Ee*Z,Te=ve*ge+Ee*X;Se=ve*Se+Ee*ke,we=ve*we+Ee*Te,ke=ve*ke+Ee*(ve*Z+Ee*Y),Te=ve*Te+Ee*(ve*X+Ee*Ae),Se=ve*Se+Ee*ke,we=ve*we+Ee*Te,he.push(Se,we)}he.push(Y,Ae)}}function xe(ne,J,ae,ge,Z,X,Y,Ae){const ce=(3*ge-2*J-Ae)**2,Ee=(3*X-J-2*Ae)**2;return Math.max((3*ae-2*ne-Y)**2,(3*Z-ne-2*Y)**2)+Math.max(ce,Ee)<=10}function Fe(){let ne=1/0,J=-1/0,ae=1/0,ge=-1/0;for(const Z of this.paths)for(const[X,Y,Ae,be]of Z){const he=o.Util.bezierBoundingBox(...X,...Y,...Ae,...be);ne=Math.min(ne,he[0]),ae=Math.min(ae,he[1]),J=Math.max(J,he[2]),ge=Math.max(ge,he[3])}return[ne,ae,J,ge]}function ye(){return _classPrivateFieldGet(this,y)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function G(ne=!1){if(this.isEmpty())return;if(!_classPrivateFieldGet(this,y))return void _classPrivateMethodGet(this,W,de).call(this);const J=_classPrivateMethodGet(this,f,Fe).call(this),ae=_classPrivateMethodGet(this,i,ye).call(this);_classPrivateFieldSet(this,O,Math.max($,J[2]-J[0])),_classPrivateFieldSet(this,V,Math.max($,J[3]-J[1]));const ge=Math.ceil(ae+_classPrivateFieldGet(this,O)*this.scaleFactor),Z=Math.ceil(ae+_classPrivateFieldGet(this,V)*this.scaleFactor),[X,Y]=this.parent.viewportBaseDimensions;this.width=ge/X,this.height=Z/Y,_classPrivateFieldSet(this,I,ge/Z),_classPrivateMethodGet(this,l,ee).call(this);const Ae=this.translationX,be=this.translationY;this.translationX=-J[0],this.translationY=-J[1],_classPrivateMethodGet(this,re,oe).call(this),_classPrivateMethodGet(this,W,de).call(this),_classPrivateFieldSet(this,t,ge),_classPrivateFieldSet(this,e,Z),this.setDims(ge,Z);const he=ne?ae/this.scaleFactor/2:0;this.translate(Ae-this.translationX-he,be-this.translationY-he)}function ee(){const{style:ne}=this.div;_classPrivateFieldGet(this,I)>=1?(ne.minHeight="16px",ne.minWidth=`${Math.round(_classPrivateFieldGet(this,I)*$)}px`):(ne.minWidth="16px",ne.minHeight=`${Math.round($/_classPrivateFieldGet(this,I))}px`)}return T=P,_defineProperty(P,"_defaultColor",null),_defineProperty(P,"_defaultOpacity",1),_defineProperty(P,"_defaultThickness",1),_defineProperty(P,"_l10nPromise",void 0),_defineProperty(P,"_type","ink"),P})()},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.fitCurve=void 0;const o=M(26);s.fitCurve=o},q=>{function M(S,r,A,y,b){var p,t,e,a,m,C,E,u,g,R,L,z,W;if(2===S.length)return z=O.vectorLen(O.subtract(S[0],S[1]))/3,[p=[S[0],O.addArrays(S[0],O.mulItems(r,z)),O.addArrays(S[1],O.mulItems(A,z)),S[1]]];if(t=function $(S){var A,y,b,r=[];return S.forEach((F,p)=>{A=p?y+O.vectorLen(O.subtract(F,b)):0,r.push(A),y=A,b=F}),r=r.map(F=>F/y)}(S),[p,a,C]=o(S,t,t,r,A,b),0===a||a<y)return[p];if(a<y*y)for(e=t,m=a,E=C,W=0;W<20;W++){if(e=B(p,S,e),[p,a,C]=o(S,t,e,r,A,b),a<y)return[p];if(C===E){let N=a/m;if(N>.9999&&N<1.0001)break}m=a,E=C}return L=[],(u=O.subtract(S[C-1],S[C+1])).every(N=>0===N)&&(u=O.subtract(S[C-1],S[C]),[u[0],u[1]]=[-u[1],u[0]]),g=O.normalize(u),R=O.mulItems(g,-1),(L=L.concat(M(S.slice(0,C+1),r,g,y,b))).concat(M(S.slice(C),R,A,y,b))}function o(S,r,A,y,b,F){var p,t,e;return p=function v(S,r,A,y){var b,F,p,t,e,a,E,u,g,R,L,z,W,N,U,Q=S[0],re=S[S.length-1];for(b=[Q,null,null,re],F=O.zeros_Xx2x2(r.length),L=0,z=r.length;L<z;L++)(p=F[L])[0]=O.mulItems(A,3*(N=r[L])*((U=1-N)*U)),p[1]=O.mulItems(y,3*U*(N*N));for(t=[[0,0],[0,0]],e=[0,0],L=0,z=S.length;L<z;L++)N=r[L],t[0][0]+=O.dot((p=F[L])[0],p[0]),t[0][1]+=O.dot(p[0],p[1]),t[1][0]+=O.dot(p[0],p[1]),t[1][1]+=O.dot(p[1],p[1]),W=O.subtract(S[L],D.q([Q,Q,re,re],N)),e[0]+=O.dot(p[0],W),e[1]+=O.dot(p[1],W);return E=0==(a=t[0][0]*t[1][1]-t[1][0]*t[0][1])?0:(e[0]*t[1][1]-e[1]*t[0][1])/a,u=0===a?0:(t[0][0]*e[1]-t[1][0]*e[0])/a,E<(g=1e-6*(R=O.vectorLen(O.subtract(Q,re))))||u<g?(b[1]=O.addArrays(Q,O.mulItems(A,R/3)),b[2]=O.addArrays(re,O.mulItems(y,R/3))):(b[1]=O.addArrays(Q,O.mulItems(A,E)),b[2]=O.addArrays(re,O.mulItems(y,u))),b}(S,A,y,b),[t,e]=function w(S,r,A){var y,b,F,p,t,e,a,m;b=0,F=Math.floor(S.length/2);const C=T(r,10);for(t=0,e=S.length;t<e;t++)a=S[t],m=I(0,A[t],C,10),(y=(p=O.subtract(D.q(r,m),a))[0]*p[0]+p[1]*p[1])>b&&(b=y,F=t);return[b,F]}(S,p,r),F&&F({bez:p,points:S,params:r,maxErr:t,maxPoint:e}),[p,t,e]}function B(S,r,A){return A.map((y,b)=>function k(S,r,A){var y=O.subtract(D.q(S,A),r),b=D.qprime(S,A),F=O.mulMatrix(y,b),p=O.sum(O.squareItems(b))+2*O.mulMatrix(y,D.qprimeprime(S,A));return 0===p?A:A-F/p}(S,r[b],y))}var T=function(S,r){for(var A,y=[0],b=S[0],F=0,p=1;p<=r;p++)A=D.q(S,p/r),F+=O.vectorLen(O.subtract(A,b)),y.push(F),b=A;return y.map(t=>t/F)};function I(S,r,A,y){if(r<0)return 0;if(r>1)return 1;for(var F,t,e,a=1;a<=y;a++)if(r<=A[a]){e=(r-(F=A[a-1]))/(A[a]-F)*(a/y-(t=(a-1)/y))+t;break}return e}function V(S,r){return O.normalize(O.subtract(S,r))}class O{static zeros_Xx2x2(r){for(var A=[];r--;)A.push([0,0]);return A}static mulItems(r,A){return r.map(y=>y*A)}static mulMatrix(r,A){return r.reduce((y,b,F)=>y+b*A[F],0)}static subtract(r,A){return r.map((y,b)=>y-A[b])}static addArrays(r,A){return r.map((y,b)=>y+A[b])}static addItems(r,A){return r.map(y=>y+A)}static sum(r){return r.reduce((A,y)=>A+y)}static dot(r,A){return O.mulMatrix(r,A)}static vectorLen(r){return Math.hypot(...r)}static divItems(r,A){return r.map(y=>y/A)}static squareItems(r){return r.map(A=>A*A)}static normalize(r){return this.divItems(r,this.vectorLen(r))}}class D{static q(r,A){var y=1-A,b=O.mulItems(r[0],y*y*y),F=O.mulItems(r[1],3*y*y*A),p=O.mulItems(r[2],3*y*A*A),t=O.mulItems(r[3],A*A*A);return O.addArrays(O.addArrays(b,F),O.addArrays(p,t))}static qprime(r,A){var y=1-A,b=O.mulItems(O.subtract(r[1],r[0]),3*y*y),F=O.mulItems(O.subtract(r[2],r[1]),6*y*A),p=O.mulItems(O.subtract(r[3],r[2]),3*A*A);return O.addArrays(O.addArrays(b,F),p)}static qprimeprime(r,A){return O.addArrays(O.mulItems(O.addArrays(O.subtract(r[2],O.mulItems(r[1],2)),r[0]),6*(1-A)),O.mulItems(O.addArrays(O.subtract(r[3],O.mulItems(r[2],2)),r[1]),6*A))}}q.exports=function s(S,r,A){if(!Array.isArray(S))throw new TypeError("First argument should be an array");if(S.forEach(p=>{if(!Array.isArray(p)||p.some(t=>"number"!=typeof t)||p.length!==S[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(S=S.filter((p,t)=>0===t||!p.every((e,a)=>e===S[t-1][a]))).length<2)return[];const y=S.length,b=V(S[1],S[0]),F=V(S[y-2],S[y-1]);return M(S,b,F,r,A)},q.exports.fitCubic=M,q.exports.createTangent=V},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayer=void 0;var o=M(1),v=M(8),B=M(5),k=M(28),$=M(29);const w=1e3,I=new WeakSet;function V(f){return{width:f[2]-f[0],height:f[3]-f[1]}}class O{static create(i){switch(i.data.annotationType){case o.AnnotationType.LINK:return new S(i);case o.AnnotationType.TEXT:return new r(i);case o.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new y(i);case"Btn":return i.data.radioButton?new F(i):i.data.checkBox?new b(i):new p(i);case"Ch":return new t(i)}return new A(i);case o.AnnotationType.POPUP:return new e(i);case o.AnnotationType.FREETEXT:return new m(i);case o.AnnotationType.LINE:return new C(i);case o.AnnotationType.SQUARE:return new E(i);case o.AnnotationType.CIRCLE:return new u(i);case o.AnnotationType.POLYLINE:return new g(i);case o.AnnotationType.CARET:return new L(i);case o.AnnotationType.INK:return new z(i);case o.AnnotationType.POLYGON:return new R(i);case o.AnnotationType.HIGHLIGHT:return new W(i);case o.AnnotationType.UNDERLINE:return new N(i);case o.AnnotationType.SQUIGGLY:return new U(i);case o.AnnotationType.STRIKEOUT:return new Q(i);case o.AnnotationType.STAMP:return new re(i);case o.AnnotationType.FILEATTACHMENT:return new j(i);default:return new D(i)}}}class D{constructor(i,{isRenderable:c=!1,ignoreBorder:l=!1,createQuadrilaterals:P=!1}={}){this.isRenderable=c,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,c&&(this.container=this._createContainer(l)),P&&(this.quadrilaterals=this._createQuadrilaterals(l))}_createContainer(i=!1){const c=this.data,l=this.page,P=this.viewport,x=document.createElement("section"),{width:H,height:K}=V(c.rect),[se,te,pe,le]=P.viewBox,ue=pe-se,de=le-te;x.setAttribute("data-annotation-id",c.id);const _e=o.Util.normalizeRect([c.rect[0],l.view[3]-c.rect[1]+l.view[1],c.rect[2],l.view[3]-c.rect[3]+l.view[1]]);if(!i&&c.borderStyle.width>0){x.style.borderWidth=`${c.borderStyle.width}px`;const ie=c.borderStyle.horizontalCornerRadius,oe=c.borderStyle.verticalCornerRadius;switch(ie>0||oe>0?x.style.borderRadius=`calc(${ie}px * var(--scale-factor)) / calc(${oe}px * var(--scale-factor))`:this instanceof F&&(x.style.borderRadius=`calc(${H}px * var(--scale-factor)) / calc(${K}px * var(--scale-factor))`),c.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:x.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:x.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:x.style.borderBottomStyle="solid"}const Pe=c.borderColor||null;Pe?x.style.borderColor=o.Util.makeHexColor(0|Pe[0],0|Pe[1],0|Pe[2]):x.style.borderWidth=0}x.style.left=100*(_e[0]-se)/ue+"%",x.style.top=100*(_e[1]-te)/de+"%";const{rotation:me}=c;return c.hasOwnCanvas||0===me?(x.style.width=100*H/ue+"%",x.style.height=100*K/de+"%"):this.setRotation(me,x),x}setRotation(i,c=this.container){const[l,P,x,H]=this.viewport.viewBox,K=x-l,se=H-P,{width:te,height:pe}=V(this.data.rect);let le,ue;i%180==0?(le=100*te/K,ue=100*pe/se):(le=100*pe/K,ue=100*te/se),c.style.width=`${le}%`,c.style.height=`${ue}%`,c.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(c,l,P)=>{const x=P.detail[c];P.target.style[l]=k.ColorConverters[`${x[0]}_HTML`](x.slice(1))};return(0,o.shadow)(this,"_commonActions",{display:c=>{const l=c.detail.display%2==1;this.container.style.visibility=l?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l,print:0===c.detail.display||3===c.detail.display})},print:c=>{this.annotationStorage.setValue(this.data.id,{print:c.detail.print})},hidden:c=>{this.container.style.visibility=c.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:c.detail.hidden})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.detail.readonly?c.target.setAttribute("readonly",""):c.target.removeAttribute("readonly")},required:c=>{this._setRequired(c.target,c.detail.required)},bgColor:c=>{i("bgColor","backgroundColor",c)},fillColor:c=>{i("fillColor","backgroundColor",c)},fgColor:c=>{i("fgColor","color",c)},textColor:c=>{i("textColor","color",c)},borderColor:c=>{i("borderColor","borderColor",c)},strokeColor:c=>{i("strokeColor","borderColor",c)},rotation:c=>{const l=c.detail.rotation;this.setRotation(l),this.annotationStorage.setValue(this.data.id,{rotation:l})}})}_dispatchEventFromSandbox(i,c){const l=this._commonActions;for(const P of Object.keys(c.detail)){const x=i[P]||l[P];x&&x(c)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const c=this.annotationStorage.getRawValue(this.data.id);if(!c)return;const l=this._commonActions;for(const[P,x]of Object.entries(c)){const H=l[P];H&&(H({detail:{[P]:x},target:i}),delete c[P])}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const c=[],l=this.data.rect;for(const P of this.data.quadPoints)this.data.rect=[P[2].x,P[2].y,P[1].x,P[1].y],c.push(this._createContainer(i));return this.data.rect=l,c}_createPopup(i,c){let l=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,l=this.quadrilaterals[0]),i||((i=document.createElement("div")).className="popupTriggerArea",l.append(i));const x=new a({container:l,trigger:i,color:c.color,titleObj:c.titleObj,modificationDate:c.modificationDate,contentsObj:c.contentsObj,richText:c.richText,hideWrapper:!0}).render();x.style.left="100%",l.append(x)}_renderQuadrilaterals(i){for(const c of this.quadrilaterals)c.className=i;return this.quadrilaterals}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,c=null){const l=[];if(this._fieldObjects){const P=this._fieldObjects[i];if(P)for(const{page:x,id:H,exportValues:K}of P){if(-1===x||H===c)continue;const se="string"==typeof K?K:null,te=document.querySelector(`[data-element-id="${H}"]`);!te||I.has(te)?l.push({id:H,exportValue:se,domElement:te}):(0,o.warn)(`_getElementsByName - element not allowed: ${H}`)}return l}for(const P of document.getElementsByName(i)){const{id:x,exportValue:H}=P;x!==c&&I.has(P)&&l.push({id:x,exportValue:H,domElement:P})}return l}static get platform(){const i=typeof navigator<"u"?navigator.platform:"";return(0,o.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class S extends D{constructor(i,c=null){super(i,{isRenderable:!0,ignoreBorder:!(null==c||!c.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:c}=this,l=document.createElement("a");l.setAttribute("data-element-id",i.id);let P=!1;return i.url?(c.addLinkAttributes(l,i.url,i.newWindow),P=!0):i.action?(this._bindNamedAction(l,i.action),P=!0):i.dest?(this._bindLink(l,i.dest),P=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(l,i),P=!0),i.resetForm?(this._bindResetFormAction(l,i.resetForm),P=!0):this.isTooltipOnly&&!P&&(this._bindLink(l,""),P=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((x,H)=>{const K=0===H?l:l.cloneNode();return x.append(K),x}):(this.container.className="linkAnnotation",P&&this.container.append(l),this.container)}_bindLink(i,c){i.href=this.linkService.getDestinationHash(c),i.onclick=()=>(c&&this.linkService.goToDestination(c),!1),(c||""===c)&&(i.className="internalLink")}_bindNamedAction(i,c){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(c),!1),i.className="internalLink"}_bindJSAction(i,c){i.href=this.linkService.getAnchorUrl("");const l=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const P of Object.keys(c.actions)){const x=l.get(P);x&&(i[x]=()=>{var H;return null===(H=this.linkService.eventBus)||void 0===H||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c.id,name:P}}),!1})}i.onclick||(i.onclick=()=>!1),i.className="internalLink"}_bindResetFormAction(i,c){const l=i.onclick;if(l||(i.href=this.linkService.getAnchorUrl("")),i.className="internalLink",!this._fieldObjects)return(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(l||(i.onclick=()=>!1));i.onclick=()=>{l&&l();const{fields:P,refs:x,include:H}=c,K=[];if(0!==P.length||0!==x.length){const le=new Set(x);for(const ue of P){const de=this._fieldObjects[ue]||[];for(const{id:_e}of de)le.add(_e)}for(const ue of Object.values(this._fieldObjects))for(const de of ue)le.has(de.id)===H&&K.push(de)}else for(const le of Object.values(this._fieldObjects))K.push(...le);const se=this.annotationStorage,te=[];for(const le of K){const{id:ue}=le;switch(te.push(ue),le.type){case"text":case"combobox":case"listbox":se.setValue(ue,{value:le.defaultValue||""});break;case"checkbox":case"radiobutton":se.setValue(ue,{value:le.defaultValue===le.exportValues});break;default:continue}const de=document.querySelector(`[data-element-id="${ue}"]`);de&&(I.has(de)?de.dispatchEvent(new Event("resetform")):(0,o.warn)(`_bindResetFormAction - element not allowed: ${ue}`))}var pe;return this.enableScripting&&(null===(pe=this.linkService.eventBus)||void 0===pe||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:te,name:"ResetForm"}})),!1}}}class r extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str)})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class A extends D{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:c,isMac:l}=D.platform;return c&&i.ctrlKey||l&&i.metaKey}_setEventListener(i,c,l,P){c.includes("mouse")?i.addEventListener(c,x=>{var H;null===(H=this.linkService.eventBus)||void 0===H||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:P(x),shift:x.shiftKey,modifier:this._getKeyModifier(x)}})}):i.addEventListener(c,x=>{var H;null===(H=this.linkService.eventBus)||void 0===H||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:P(x)}})})}_setEventListeners(i,c,l){for(const[x,H]of c){var P;("Action"===H||null!==(P=this.data.actions)&&void 0!==P&&P[H])&&this._setEventListener(i,x,H,l)}}_setBackgroundColor(i){const c=this.data.backgroundColor||null;i.style.backgroundColor=null===c?"transparent":o.Util.makeHexColor(c[0],c[1],c[2])}_setTextStyle(i){const{fontColor:l}=this.data.defaultAppearanceData,P=this.data.defaultAppearanceData.fontSize||9,x=i.style;let H;if(this.data.multiLine){const K=Math.abs(this.data.rect[3]-this.data.rect[1]),se=Math.round(K/(o.LINE_FACTOR*P))||1;H=Math.min(P,Math.round(K/se/o.LINE_FACTOR))}else{const K=Math.abs(this.data.rect[3]-this.data.rect[1]);H=Math.min(P,Math.round(K/o.LINE_FACTOR))}x.fontSize=`calc(${H}px * var(--scale-factor))`,x.color=o.Util.makeHexColor(l[0],l[1],l[2]),null!==this.data.textAlignment&&(x.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(i,c){c?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",c)}}class y extends A{constructor(i){super(i,{isRenderable:i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue})}setPropertyOnSiblings(i,c,l,P){const x=this.annotationStorage;for(const H of this._getElementsByName(i.name,i.id))H.domElement&&(H.domElement[c]=l),x.setValue(H.id,{[P]:l})}render(){const i=this.annotationStorage,c=this.data.id;this.container.className="textWidgetAnnotation";let l=null;if(this.renderForms){const x=i.getValue(c,{value:this.data.fieldValue});let H=x.formattedValue||x.value||"";const K=i.getValue(c,{charLimit:this.data.maxLen}).charLimit;K&&H.length>K&&(H=H.slice(0,K));const se={userValue:H,formattedValue:null,valueOnFocus:""};this.data.multiLine?(l=document.createElement("textarea"),l.textContent=H,this.data.doNotScroll&&(l.style.overflowY="hidden")):(l=document.createElement("input"),l.type="text",l.setAttribute("value",H),this.data.doNotScroll&&(l.style.overflowX="hidden")),I.add(l),l.setAttribute("data-element-id",c),l.disabled=this.data.readOnly,l.name=this.data.fieldName,l.tabIndex=w,this._setRequired(l,this.data.required),K&&(l.maxLength=K),l.addEventListener("input",pe=>{i.setValue(c,{value:pe.target.value}),this.setPropertyOnSiblings(l,"value",pe.target.value,"value")}),l.addEventListener("resetform",pe=>{var le;const ue=null!==(le=this.data.defaultFieldValue)&&void 0!==le?le:"";l.value=se.userValue=ue,se.formattedValue=null});let te=pe=>{const{formattedValue:le}=se;null!=le&&(pe.target.value=le),pe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var P;l.addEventListener("focus",le=>{se.userValue&&(le.target.value=se.userValue),se.valueOnFocus=le.target.value}),l.addEventListener("updatefromsandbox",le=>{this._dispatchEventFromSandbox({value(de){var _e;se.userValue=null!==(_e=de.detail.value)&&void 0!==_e?_e:"",i.setValue(c,{value:se.userValue.toString()}),de.target.value=se.userValue},formattedValue(de){const{formattedValue:_e}=de.detail;se.formattedValue=_e,null!=_e&&de.target!==document.activeElement&&(de.target.value=_e),i.setValue(c,{formattedValue:_e})},selRange(de){de.target.setSelectionRange(...de.detail.selRange)},charLimit:de=>{var _e;const{charLimit:me}=de.detail,{target:ie}=de;if(0===me)return void ie.removeAttribute("maxLength");ie.setAttribute("maxLength",me);let oe=se.userValue;!oe||oe.length<=me||(oe=oe.slice(0,me),ie.value=se.userValue=oe,i.setValue(c,{value:oe}),null===(_e=this.linkService.eventBus)||void 0===_e||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:oe,willCommit:!0,commitKey:1,selStart:ie.selectionStart,selEnd:ie.selectionEnd}}))}},le)}),l.addEventListener("keydown",le=>{var ue;let de=-1;if("Escape"===le.key?de=0:"Enter"===le.key?de=2:"Tab"===le.key&&(de=3),-1===de)return;const{value:_e}=le.target;se.valueOnFocus!==_e&&(se.userValue=_e,null===(ue=this.linkService.eventBus)||void 0===ue||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:_e,willCommit:!0,commitKey:de,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}}))});const pe=te;te=null,l.addEventListener("blur",le=>{const{value:ue}=le.target;var de;se.userValue=ue,this._mouseState.isDown&&se.valueOnFocus!==ue&&(null===(de=this.linkService.eventBus)||void 0===de||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:ue,willCommit:!0,commitKey:1,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}})),pe(le)}),null!==(P=this.data.actions)&&void 0!==P&&P.Keystroke&&l.addEventListener("beforeinput",le=>{var ue;const{data:de,target:_e}=le,{value:me,selectionStart:ie,selectionEnd:oe}=_e;let Pe=ie,Be=oe;switch(le.inputType){case"deleteWordBackward":{const Me=me.substring(0,ie).match(/\w*[^\w]*$/);Me&&(Pe-=Me[0].length);break}case"deleteWordForward":{const Me=me.substring(ie).match(/^[^\w]*\w*/);Me&&(Be+=Me[0].length);break}case"deleteContentBackward":ie===oe&&(Pe-=1);break;case"deleteContentForward":ie===oe&&(Be+=1)}le.preventDefault(),null===(ue=this.linkService.eventBus)||void 0===ue||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:me,change:de||"",willCommit:!1,selStart:Pe,selEnd:Be}})}),this._setEventListeners(l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.value)}if(te&&l.addEventListener("blur",te),this.data.comb){const le=(this.data.rect[2]-this.data.rect[0])/K;l.classList.add("comb"),l.style.letterSpacing=`calc(${le}px * var(--scale-factor) - 1ch)`}}else l=document.createElement("div"),l.textContent=this.data.fieldValue,l.style.verticalAlign="middle",l.style.display="table-cell";return this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class b extends A{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,c=this.data,l=c.id;let P=i.getValue(l,{value:c.exportValue===c.fieldValue}).value;"string"==typeof P&&(P="Off"!==P,i.setValue(l,{value:P})),this.container.className="buttonWidgetAnnotation checkBox";const x=document.createElement("input");return I.add(x),x.setAttribute("data-element-id",l),x.disabled=c.readOnly,this._setRequired(x,this.data.required),x.type="checkbox",x.name=c.fieldName,P&&x.setAttribute("checked",!0),x.setAttribute("exportValue",c.exportValue),x.tabIndex=w,x.addEventListener("change",H=>{const{name:K,checked:se}=H.target;for(const te of this._getElementsByName(K,l)){const pe=se&&te.exportValue===c.exportValue;te.domElement&&(te.domElement.checked=pe),i.setValue(te.id,{value:pe})}i.setValue(l,{value:se})}),x.addEventListener("resetform",H=>{H.target.checked=(c.defaultFieldValue||"Off")===c.exportValue}),this.enableScripting&&this.hasJSActions&&(x.addEventListener("updatefromsandbox",H=>{this._dispatchEventFromSandbox({value(se){se.target.checked="Off"!==se.detail.value,i.setValue(l,{value:se.target.checked})}},H)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class F extends A{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,c=this.data,l=c.id;let P=i.getValue(l,{value:c.fieldValue===c.buttonValue}).value;"string"==typeof P&&(P=P!==c.buttonValue,i.setValue(l,{value:P}));const x=document.createElement("input");if(I.add(x),x.setAttribute("data-element-id",l),x.disabled=c.readOnly,this._setRequired(x,this.data.required),x.type="radio",x.name=c.fieldName,P&&x.setAttribute("checked",!0),x.tabIndex=w,x.addEventListener("change",H=>{const{name:K,checked:se}=H.target;for(const te of this._getElementsByName(K,l))i.setValue(te.id,{value:!1});i.setValue(l,{value:se})}),x.addEventListener("resetform",H=>{const K=c.defaultFieldValue;H.target.checked=null!=K&&K===c.buttonValue}),this.enableScripting&&this.hasJSActions){const H=c.buttonValue;x.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({value:te=>{const pe=H===te.detail.value;for(const le of this._getElementsByName(te.target.name)){const ue=pe&&le.id===l;le.domElement&&(le.domElement.checked=ue),i.setValue(le.id,{value:ue})}}},K)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)}return this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class p extends S{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const c=i.lastChild;return this.enableScripting&&this.hasJSActions&&c&&(this._setDefaultPropertiesFromJS(c),c.addEventListener("updatefromsandbox",l=>{this._dispatchEventFromSandbox({},l)})),i}}class t extends A{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,c=this.data.id,l=i.getValue(c,{value:this.data.fieldValue}),P=document.createElement("select");I.add(P),P.setAttribute("data-element-id",c),P.disabled=this.data.readOnly,this._setRequired(P,this.data.required),P.name=this.data.fieldName,P.tabIndex=w;let x=this.data.combo&&this.data.options.length>0;this.data.combo||(P.size=this.data.options.length,this.data.multiSelect&&(P.multiple=!0)),P.addEventListener("resetform",te=>{const pe=this.data.defaultFieldValue;for(const le of P.options)le.selected=le.value===pe});for(const te of this.data.options){const pe=document.createElement("option");pe.textContent=te.displayValue,pe.value=te.exportValue,l.value.includes(te.exportValue)&&(pe.setAttribute("selected",!0),x=!1),P.append(pe)}let H=null;if(x){const te=document.createElement("option");te.value=" ",te.setAttribute("hidden",!0),te.setAttribute("selected",!0),P.prepend(te),H=()=>{te.remove(),P.removeEventListener("input",H),H=null},P.addEventListener("input",H)}const K=(te,pe)=>{const le=pe?"value":"textContent",ue=te.target.options;return te.target.multiple?Array.prototype.filter.call(ue,de=>de.selected).map(de=>de[le]):-1===ue.selectedIndex?null:ue[ue.selectedIndex][le]},se=te=>Array.prototype.map.call(te.target.options,le=>({displayValue:le.textContent,exportValue:le.value}));return this.enableScripting&&this.hasJSActions?(P.addEventListener("updatefromsandbox",te=>{this._dispatchEventFromSandbox({value(le){var ue;null===(ue=H)||void 0===ue||ue();const de=le.detail.value,_e=new Set(Array.isArray(de)?de:[de]);for(const me of P.options)me.selected=_e.has(me.value);i.setValue(c,{value:K(le,!0)})},multipleSelection(le){P.multiple=!0},remove(le){const ue=P.options,de=le.detail.remove;ue[de].selected=!1,P.remove(de),ue.length>0&&-1===Array.prototype.findIndex.call(ue,me=>me.selected)&&(ue[0].selected=!0),i.setValue(c,{value:K(le,!0),items:se(le)})},clear(le){for(;0!==P.length;)P.remove(0);i.setValue(c,{value:null,items:[]})},insert(le){const{index:ue,displayValue:de,exportValue:_e}=le.detail.insert,me=P.children[ue],ie=document.createElement("option");ie.textContent=de,ie.value=_e,me?me.before(ie):P.append(ie),i.setValue(c,{value:K(le,!0),items:se(le)})},items(le){const{items:ue}=le.detail;for(;0!==P.length;)P.remove(0);for(const de of ue){const{displayValue:_e,exportValue:me}=de,ie=document.createElement("option");ie.textContent=_e,ie.value=me,P.append(ie)}P.options.length>0&&(P.options[0].selected=!0),i.setValue(c,{value:K(le,!0),items:se(le)})},indices(le){const ue=new Set(le.detail.indices);for(const de of le.target.options)de.selected=ue.has(de.index);i.setValue(c,{value:K(le,!0)})},editable(le){le.target.disabled=!le.detail.editable}},te)}),P.addEventListener("input",te=>{var pe;const le=K(te,!0),ue=K(te,!1);i.setValue(c,{value:le}),null===(pe=this.linkService.eventBus)||void 0===pe||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:ue,changeEx:le,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(P,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],te=>te.target.checked)):P.addEventListener("input",function(te){i.setValue(c,{value:K(te,!0)})}),this.data.combo&&this._setTextStyle(P),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class e extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const l=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===l.length)return this.container;const P=new a({container:this.container,trigger:Array.from(l),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),x=this.page,H=o.Util.normalizeRect([this.data.parentRect[0],x.view[3]-this.data.parentRect[1]+x.view[1],this.data.parentRect[2],x.view[3]-this.data.parentRect[3]+x.view[1]]),K=H[0]+this.data.parentRect[2]-this.data.parentRect[0],se=H[1],[te,pe,le,ue]=this.viewport.viewBox,_e=ue-pe;return this.container.style.left=100*(K-te)/(le-te)+"%",this.container.style.top=100*(se-pe)/_e+"%",this.container.append(P.render()),this.container}}class a{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var i,c;const P=document.createElement("div");P.className="popupWrapper",this.hideElement=this.hideWrapper?P:this.container,this.hideElement.hidden=!0;const x=document.createElement("div");x.className="popup";const H=this.color;H&&(x.style.backgroundColor=o.Util.makeHexColor(0|.7*(255-H[0])+H[0],0|.7*(255-H[1])+H[1],0|.7*(255-H[2])+H[2]));const K=document.createElement("h1");K.dir=this.titleObj.dir,K.textContent=this.titleObj.str,x.append(K);const se=v.PDFDateString.toDateObject(this.modificationDate);if(se){const te=document.createElement("span");te.className="popupDate",te.textContent="{{date}}, {{time}}",te.dataset.l10nId="annotation_date_string",te.dataset.l10nArgs=JSON.stringify({date:se.toLocaleDateString(),time:se.toLocaleTimeString()}),x.append(te)}if(null===(i=this.richText)||void 0===i||!i.str||null!==(c=this.contentsObj)&&void 0!==c&&c.str&&this.contentsObj.str!==this.richText.str){const te=this._formatContents(this.contentsObj);x.append(te)}else $.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:x}),x.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const te of this.trigger)te.addEventListener("click",this._toggle.bind(this)),te.addEventListener("mouseover",this._show.bind(this,!1)),te.addEventListener("mouseout",this._hide.bind(this,!1));return x.addEventListener("click",this._hide.bind(this,!0)),P.append(x),P}_formatContents({str:i,dir:c}){const l=document.createElement("p");l.className="popupContent",l.dir=c;const P=i.split(/(?:\r\n?|\n)/);for(let x=0,H=P.length;x<H;++x)l.append(document.createTextNode(P[x])),x<H-1&&l.append(document.createElement("br"));return l}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class m extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const c of this.textContent){const l=document.createElement("span");l.textContent=c,i.append(l)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class C extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:c,height:l}=V(i.rect),P=this.svgFactory.create(c,l,!0),x=this.svgFactory.createElement("svg:line");return x.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),x.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),x.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),x.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),x.setAttribute("stroke-width",i.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),P.append(x),this.container.append(P),this._createPopup(x,i),this.container}}class E extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:c,height:l}=V(i.rect),P=this.svgFactory.create(c,l,!0),x=i.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",x/2),H.setAttribute("y",x/2),H.setAttribute("width",c-x),H.setAttribute("height",l-x),H.setAttribute("stroke-width",x||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),P.append(H),this.container.append(P),this._createPopup(H,i),this.container}}class u extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:c,height:l}=V(i.rect),P=this.svgFactory.create(c,l,!0),x=i.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",c/2),H.setAttribute("cy",l/2),H.setAttribute("rx",c/2-x/2),H.setAttribute("ry",l/2-x/2),H.setAttribute("stroke-width",x||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),P.append(H),this.container.append(P),this._createPopup(H,i),this.container}}class g extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:c,height:l}=V(i.rect),P=this.svgFactory.create(c,l,!0);let x=[];for(const K of i.vertices)x.push(K.x-i.rect[0]+","+(i.rect[3]-K.y));x=x.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",x),H.setAttribute("stroke-width",i.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),P.append(H),this.container.append(P),this._createPopup(H,i),this.container}}class R extends g{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class L extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class z extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:c,height:l}=V(i.rect),P=this.svgFactory.create(c,l,!0);for(const x of i.inkLists){let H=[];for(const se of x)H.push(`${se.x-i.rect[0]},${i.rect[3]-se.y}`);H=H.join(" ");const K=this.svgFactory.createElement(this.svgElementName);K.setAttribute("points",H),K.setAttribute("stroke-width",i.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),this._createPopup(K,i),P.append(K)}return this.container.append(P),this.container}}class W extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class N extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class U extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Q extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class re extends D{constructor(i){var c,l,P;super(i,{isRenderable:!!(i.data.hasPopup||null!==(c=i.data.titleObj)&&void 0!==c&&c.str||null!==(l=i.data.contentsObj)&&void 0!==l&&l.str||null!==(P=i.data.richText)&&void 0!==P&&P.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class j extends D{constructor(i){var c;super(i,{isRenderable:!0});const{filename:l,content:P}=this.data.file;this.filename=(0,v.getFilenameFromUrl)(l),this.content=P,null===(c=this.linkService.eventBus)||void 0===c||c.dispatch("fileattachmentannotation",{source:this,filename:l,content:P})}render(){var i,c;this.container.className="fileAttachmentAnnotation";const l=document.createElement("div");return l.className="popupTriggerArea",l.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(i=this.data.titleObj)&&void 0!==i&&i.str||null!==(c=this.data.contentsObj)&&void 0!==c&&c.str||this.data.richText)&&this._createPopup(l,this.data),this.container.append(l),this.container}_download(){var i;null===(i=this.downloadManager)||void 0===i||i.openOrDownloadData(this.container,this.content,this.filename)}}class h{static render(i){const{annotations:c,div:l,viewport:P,accessibilityManager:x}=i;_classStaticPrivateMethodGet(this,h,_).call(this,l,P);let H=0;for(const K of c){if(K.annotationType!==o.AnnotationType.POPUP){const{width:te,height:pe}=V(K.rect);if(te<=0||pe<=0)continue}const se=O.create({data:K,layer:l,page:i.page,viewport:P,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:!1!==i.renderForms,svgFactory:new v.DOMSVGFactory,annotationStorage:i.annotationStorage||new B.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(se.isRenderable){const te=se.render();if(K.hidden&&(te.style.visibility="hidden"),Array.isArray(te))for(const pe of te)pe.style.zIndex=H++,_classStaticPrivateMethodGet(h,h,n).call(h,pe,K.id,l,x);else te.style.zIndex=H++,se instanceof e?l.prepend(te):_classStaticPrivateMethodGet(h,h,n).call(h,te,K.id,l,x)}}_classStaticPrivateMethodGet(this,h,d).call(this,l,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:c,div:l,viewport:P}=i;_classStaticPrivateMethodGet(this,h,_).call(this,l,P),_classStaticPrivateMethodGet(this,h,d).call(this,l,c),l.hidden=!1}}function n(f,i,c,l){const P=f.firstChild||f;P.id=`${v.AnnotationPrefix}${i}`,c.append(f),null==l||l.moveElementInDOM(c,f,P,!1)}function _(f,{width:i,height:c,rotation:l}){const{style:P}=f,x=l%180!=0,H=Math.floor(i)+"px",K=Math.floor(c)+"px";P.width=x?K:H,P.height=x?H:K,f.setAttribute("data-main-rotation",l)}function d(f,i){if(i){for(const[c,l]of i){const P=f.querySelector(`[data-annotation-id="${c}"]`);if(!P)continue;const{firstChild:x}=P;x?"CANVAS"===x.nodeName?x.replaceWith(l):x.before(l):P.append(l)}i.clear()}}s.AnnotationLayer=h},(q,s)=>{function M(v){return Math.floor(255*Math.max(0,Math.min(1,v))).toString(16).padStart(2,"0")}Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0,s.ColorConverters=class o{static CMYK_G([B,k,$,w]){return["G",1-Math.min(1,.3*B+.59*$+.11*k+w)]}static G_CMYK([B]){return["CMYK",0,0,0,1-B]}static G_RGB([B]){return["RGB",B,B,B]}static G_HTML([B]){const k=M(B);return`#${k}${k}${k}`}static RGB_G([B,k,$]){return["G",.3*B+.59*k+.11*$]}static RGB_HTML([B,k,$]){return`#${M(B)}${M(k)}${M($)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([B,k,$,w]){return["RGB",1-Math.min(1,B+w),1-Math.min(1,$+w),1-Math.min(1,k+w)]}static CMYK_HTML(B){const k=this.CMYK_RGB(B).slice(1);return this.RGB_HTML(k)}static RGB_CMYK([B,k,$]){const w=1-B,T=1-k,I=1-$;return["CMYK",w,T,I,Math.min(w,T,I)]}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var o=M(20);s.XfaLayer=class v{static setupStorage(k,$,w,T,I){const V=T.getValue($,{value:null});switch(w.name){case"textarea":if(null!==V.value&&(k.textContent=V.value),"print"===I)break;k.addEventListener("input",O=>{T.setValue($,{value:O.target.value})});break;case"input":if("radio"===w.attributes.type||"checkbox"===w.attributes.type){if(V.value===w.attributes.xfaOn?k.setAttribute("checked",!0):V.value===w.attributes.xfaOff&&k.removeAttribute("checked"),"print"===I)break;k.addEventListener("change",O=>{T.setValue($,{value:O.target.getAttribute(O.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==V.value&&k.setAttribute("value",V.value),"print"===I)break;k.addEventListener("input",O=>{T.setValue($,{value:O.target.value})})}break;case"select":if(null!==V.value)for(const O of w.children)O.attributes.value===V.value&&(O.attributes.selected=!0);k.addEventListener("input",O=>{const D=O.target.options;T.setValue($,{value:-1===D.selectedIndex?"":D[D.selectedIndex].value})})}}static setAttributes({html:k,element:$,storage:w=null,intent:T,linkService:I}){const{attributes:V}=$,O=k instanceof HTMLAnchorElement;"radio"===V.type&&(V.name=`${V.name}-${T}`);for(const[D,S]of Object.entries(V))if(null!=S)switch(D){case"class":S.length&&k.setAttribute(D,S.join(" "));break;case"dataId":break;case"id":k.setAttribute("data-element-id",S);break;case"style":Object.assign(k.style,S);break;case"textContent":k.textContent=S;break;default:(!O||"href"!==D&&"newWindow"!==D)&&k.setAttribute(D,S)}O&&I.addLinkAttributes(k,V.href,V.newWindow),w&&V.dataId&&this.setupStorage(k,V.dataId,$,w)}static render(k){const $=k.annotationStorage,w=k.linkService,T=k.xfaHtml,I=k.intent||"display",V=document.createElement(T.name);T.attributes&&this.setAttributes({html:V,element:T,intent:I,linkService:w});const O=[[T,-1,V]],D=k.div;if(D.append(V),k.viewport){const A=`matrix(${k.viewport.transform.join(",")})`;D.style.transform=A}"richText"!==I&&D.setAttribute("class","xfaLayer xfaFont");const S=[];for(;O.length>0;){var r;const[A,y,b]=O.at(-1);if(y+1===A.children.length){O.pop();continue}const F=A.children[++O.at(-1)[1]];if(null===F)continue;const{name:p}=F;if("#text"===p){const e=document.createTextNode(F.value);S.push(e),b.append(e);continue}let t;if(t=null!=F&&null!==(r=F.attributes)&&void 0!==r&&r.xmlns?document.createElementNS(F.attributes.xmlns,p):document.createElement(p),b.append(t),F.attributes&&this.setAttributes({html:t,element:F,storage:$,intent:I,linkService:w}),F.children&&F.children.length>0)O.push([F,-1,t]);else if(F.value){const e=document.createTextNode(F.value);o.XfaText.shouldBuildText(p)&&S.push(e),t.append(e)}}for(const A of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:S}}static update(k){const $=`matrix(${k.viewport.transform.join(",")})`;k.div.style.transform=$,k.div.hidden=!1}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=function b(F){const p=new y({textContent:F.textContent,textContentStream:F.textContentStream,container:F.container,viewport:F.viewport,textDivs:F.textDivs,textContentItemsStr:F.textContentItemsStr,enhanceTextSelection:F.enhanceTextSelection});return p._render(F.timeout),p};var o=M(1),v=M(8);const k=30,w=new Map,T=/^\s+$/g;function V(F,p,t,e){const a=document.createElement("span"),m=F._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==p.str,hasEOL:p.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==p.str,hasEOL:p.hasEOL,fontSize:0};F._textDivs.push(a);const C=o.Util.transform(F._viewport.transform,p.transform);let E=Math.atan2(C[1],C[0]);const u=t[p.fontName];u.vertical&&(E+=Math.PI/2);const g=Math.hypot(C[2],C[3]),R=g*function I(F,p){const t=w.get(F);if(t)return t;p.save(),p.font=`30px ${F}`;const e=p.measureText("");let a=e.fontBoundingBoxAscent,m=Math.abs(e.fontBoundingBoxDescent);if(a){p.restore();const E=a/(a+m);return w.set(F,E),E}p.strokeStyle="red",p.clearRect(0,0,k,k),p.strokeText("g",0,0);let C=p.getImageData(0,0,k,k).data;m=0;for(let E=C.length-1-3;E>=0;E-=4)if(C[E]>0){m=Math.ceil(E/4/k);break}p.clearRect(0,0,k,k),p.strokeText("A",0,k),C=p.getImageData(0,0,k,k).data,a=0;for(let E=0,u=C.length;E<u;E+=4)if(C[E]>0){a=k-Math.floor(E/4/k);break}if(p.restore(),a){const E=a/(a+m);return w.set(F,E),E}return w.set(F,.8),.8}(u.fontFamily,e);let L,z;0===E?(L=C[4],z=C[5]-R):(L=C[4]+R*Math.sin(E),z=C[5]-R*Math.cos(E)),a.style.left=`${L}px`,a.style.top=`${z}px`,a.style.fontSize=`${g}px`,a.style.fontFamily=u.fontFamily,m.fontSize=g,a.setAttribute("role","presentation"),a.textContent=p.str,a.dir=p.dir,F._fontInspectorEnabled&&(a.dataset.fontName=p.fontName),0!==E&&(m.angle=E*(180/Math.PI));let W=!1;if(p.str.length>1||F._enhanceTextSelection&&T.test(p.str))W=!0;else if(" "!==p.str&&p.transform[0]!==p.transform[3]){const N=Math.abs(p.transform[0]),U=Math.abs(p.transform[3]);N!==U&&Math.max(N,U)/Math.min(N,U)>1.5&&(W=!0)}if(W&&(m.canvasWidth=u.vertical?p.height*F._viewport.scale:p.width*F._viewport.scale),F._textDivProperties.set(a,m),F._textContentStream&&F._layoutText(a),F._enhanceTextSelection&&m.hasText){let N=1,U=0;0!==E&&(N=Math.cos(E),U=Math.sin(E));const Q=(u.vertical?p.height:p.width)*F._viewport.scale,re=g;let j,h;0!==E?(j=[N,U,-U,N,L,z],h=o.Util.getAxialAlignedBoundingBox([0,0,Q,re],j)):h=[L,z,L+Q,z+re],F._bounds.push({left:h[0],top:h[1],right:h[2],bottom:h[3],div:a,size:[Q,re],m:j})}}function O(F){if(F._canceled)return;const p=F._textDivs,t=F._capability,e=p.length;if(e>1e5)return F._renderingDone=!0,void t.resolve();if(!F._textContentStream)for(let a=0;a<e;a++)F._layoutText(p[a]);F._renderingDone=!0,t.resolve()}function D(F,p,t){let e=0;for(let a=0;a<t;a++){const m=F[p++];m>0&&(e=e?Math.min(m,e):m)}return e}function A(F,p){p.sort(function(a,m){return a.x1-m.x1||a.index-m.index});const e=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const a of p){let m=0;for(;m<e.length&&e[m].end<=a.y1;)m++;let C=e.length-1;for(;C>=0&&e[C].start>=a.y2;)C--;let E,u,g,R,L=-1/0;for(g=m;g<=C;g++){let N;E=e[g],u=E.boundary,N=u.x2>a.x1?u.index>a.index?u.x1New:a.x1:void 0===u.x2New?(u.x2+a.x1)/2:u.x2New,N>L&&(L=N)}for(a.x1New=L,g=m;g<=C;g++)E=e[g],u=E.boundary,void 0===u.x2New?u.x2>a.x1?u.index>a.index&&(u.x2New=u.x2):u.x2New=L:u.x2New>L&&(u.x2New=Math.max(L,u.x2));const z=[];let W=null;for(g=m;g<=C;g++){E=e[g],u=E.boundary;const N=u.x2>a.x2?u:a;W===N?z.at(-1).end=E.end:(z.push({start:E.start,end:E.end,boundary:N}),W=N)}for(e[m].start<a.y1&&(z[0].start=a.y1,z.unshift({start:e[m].start,end:a.y1,boundary:e[m].boundary})),a.y2<e[C].end&&(z.at(-1).end=a.y2,z.push({start:a.y2,end:e[C].end,boundary:e[C].boundary})),g=m;g<=C;g++){if(E=e[g],u=E.boundary,void 0!==u.x2New)continue;let N=!1;for(R=m-1;!N&&R>=0&&e[R].start>=u.y1;R--)N=e[R].boundary===u;for(R=C+1;!N&&R<e.length&&e[R].end<=u.y2;R++)N=e[R].boundary===u;for(R=0;!N&&R<z.length;R++)N=z[R].boundary===u;N||(u.x2New=L)}Array.prototype.splice.apply(e,[m,C-m+1,...z])}for(const a of e){const m=a.boundary;void 0===m.x2New&&(m.x2New=Math.max(F,m.x2))}}class y{constructor({textContent:p,textContentStream:t,container:e,viewport:a,textDivs:m,textContentItemsStr:C,enhanceTextSelection:E}){var u;E&&(0,v.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=p,this._textContentStream=t,this._container=e,this._document=e.ownerDocument,this._viewport=a,this._textDivs=m||[],this._textContentItemsStr=C||[],this._enhanceTextSelection=!!E,this._fontInspectorEnabled=!(null===(u=globalThis.FontInspector)||void 0===u||!u.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(p,t){for(let e=0,a=p.length;e<a;e++)if(void 0!==p[e].str)this._textContentItemsStr.push(p[e].str),V(this,p[e],t,this._layoutTextCtx);else if("beginMarkedContentProps"===p[e].type||"beginMarkedContent"===p[e].type){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==p[e].id&&this._container.setAttribute("id",`${p[e].id}`),m.append(this._container)}else"endMarkedContent"===p[e].type&&(this._container=this._container.parentNode)}_layoutText(p){const t=this._textDivProperties.get(p);let e="";if(0!==t.canvasWidth&&t.hasText){const{fontFamily:a}=p.style,{fontSize:m}=t;(m!==this._layoutTextLastFontSize||a!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${m*this._devicePixelRatio}px ${a}`,this._layoutTextLastFontSize=m,this._layoutTextLastFontFamily=a);const{width:C}=this._layoutTextCtx.measureText(p.textContent);if(C>0){const E=this._devicePixelRatio*t.canvasWidth/C;this._enhanceTextSelection&&(t.scale=E),e=`scaleX(${E})`}}if(0!==t.angle&&(e=`rotate(${t.angle}deg) ${e}`),e.length>0&&(this._enhanceTextSelection&&(t.originalTransform=e),p.style.transform=e),t.hasText&&this._container.append(p),t.hasEOL){const a=document.createElement("br");a.setAttribute("role","presentation"),this._container.append(a)}}_render(p=0){const t=(0,o.createPromiseCapability)();let e=Object.create(null);const a=this._document.createElement("canvas");if(a.height=a.width=k,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),t.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const m=()=>{this._reader.read().then(({value:C,done:E})=>{E?t.resolve():(Object.assign(e,C.styles),this._processItems(C.items,e),m())},t.reject)};this._reader=this._textContentStream.getReader(),m()}}t.promise.then(()=>{e=null,p?this._renderTimer=setTimeout(()=>{O(this),this._renderTimer=null},p):O(this)},this._capability.reject)}expandTextDivs(p=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function S(F){const p=F._bounds,t=F._viewport,e=function r(F,p,t){const e=t.map(function(m,C){return{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom,index:C,x1New:void 0,x2New:void 0}});A(F,e);const a=new Array(t.length);for(const m of e)a[m.index]={left:m.x1New,top:0,right:m.x2New,bottom:0};t.map(function(m,C){const E=a[C],u=e[C];u.x1=m.top,u.y1=F-E.right,u.x2=m.bottom,u.y2=F-E.left,u.index=C,u.x1New=void 0,u.x2New=void 0}),A(p,e);for(const m of e){const C=m.index;a[C].top=m.x1New,a[C].bottom=m.x2New}return a}(t.width,t.height,p);for(let a=0;a<e.length;a++){const m=p[a].div,C=F._textDivProperties.get(m);if(0===C.angle){C.paddingLeft=p[a].left-e[a].left,C.paddingTop=p[a].top-e[a].top,C.paddingRight=e[a].right-p[a].right,C.paddingBottom=e[a].bottom-p[a].bottom,F._textDivProperties.set(m,C);continue}const E=e[a],u=p[a],g=u.m,R=g[0],L=g[1],z=[[0,0],[0,u.size[1]],[u.size[0],0],u.size],W=new Float64Array(64);for(let U=0,Q=z.length;U<Q;U++){const re=o.Util.applyTransform(z[U],g);W[U+0]=R&&(E.left-re[0])/R,W[U+4]=L&&(E.top-re[1])/L,W[U+8]=R&&(E.right-re[0])/R,W[U+12]=L&&(E.bottom-re[1])/L,W[U+16]=L&&(E.left-re[0])/-L,W[U+20]=R&&(E.top-re[1])/R,W[U+24]=L&&(E.right-re[0])/-L,W[U+28]=R&&(E.bottom-re[1])/R,W[U+32]=R&&(E.left-re[0])/-R,W[U+36]=L&&(E.top-re[1])/-L,W[U+40]=R&&(E.right-re[0])/-R,W[U+44]=L&&(E.bottom-re[1])/-L,W[U+48]=L&&(E.left-re[0])/L,W[U+52]=R&&(E.top-re[1])/-R,W[U+56]=L&&(E.right-re[0])/L,W[U+60]=R&&(E.bottom-re[1])/-R}const N=1+Math.min(Math.abs(R),Math.abs(L));C.paddingLeft=D(W,32,16)/N,C.paddingTop=D(W,48,16)/N,C.paddingRight=D(W,0,16)/N,C.paddingBottom=D(W,16,16)/N,F._textDivProperties.set(m,C)}}(this),this._bounds=null);const t=[],e=[];for(let a=0,m=this._textDivs.length;a<m;a++){const C=this._textDivs[a],E=this._textDivProperties.get(C);E.hasText&&(p?(t.length=0,e.length=0,E.originalTransform&&t.push(E.originalTransform),E.paddingTop>0?(e.push(`${E.paddingTop}px`),t.push(`translateY(${-E.paddingTop}px)`)):e.push(0),e.push(E.paddingRight>0?E.paddingRight/E.scale+"px":0),e.push(E.paddingBottom>0?`${E.paddingBottom}px`:0),E.paddingLeft>0?(e.push(E.paddingLeft/E.scale+"px"),t.push(`translateX(${-E.paddingLeft/E.scale}px)`)):e.push(0),C.style.padding=e.join(" "),t.length&&(C.style.transform=t.join(" "))):(C.style.padding=null,C.style.transform=E.originalTransform))}}}s.TextLayerRenderTask=y},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var o=M(8),v=M(1),B=M(3);let k=class{constructor(){(0,v.unreachable)("Not implemented: SVGGraphics")}};s.SVGGraphics=k;{let r=function(t){let e=[];const a=[];for(const m of t)"save"!==m.fn?"restore"===m.fn?e=a.pop():e.push(m):(e.push({fnId:92,fn:"group",items:[]}),a.push(e),e=e.at(-1).items);return e},A=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let a=e.length-1;if("0"!==e[a])return e;do{a--}while("0"===e[a]);return e.substring(0,"."===e[a]?a:a+1)},y=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${A(t[0])} ${A(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=180*Math.acos(t[0])/Math.PI;return`rotate(${A(e)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${A(t[4])} ${A(t[5])})`;return`matrix(${A(t[0])} ${A(t[1])} ${A(t[2])} ${A(t[3])} ${A(t[4])} ${A(t[5])})`};const $={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},w="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/1999/xlink",I=["butt","round","square"],V=["miter","round","bevel"],O=function(t,e="",a=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!a)return URL.createObjectURL(new Blob([t],{type:e}));const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${e};base64,`;for(let E=0,u=t.length;E<u;E+=3){const g=255&t[E],R=255&t[E+1],L=255&t[E+2];C+=m[g>>2]+m[(3&g)<<4|R>>4]+m[E+1<u?(15&R)<<2|L>>6:64]+m[E+2<u?63&L:64]}return C},D=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),a=new Int32Array(256);for(let L=0;L<256;L++){let z=L;for(let W=0;W<8;W++)z=1&z?3988292384^z>>1&2147483647:z>>1&2147483647;a[L]=z}function C(L,z,W,N){let U=N;const Q=z.length;W[U]=Q>>24&255,W[U+1]=Q>>16&255,W[U+2]=Q>>8&255,W[U+3]=255&Q,U+=4,W[U]=255&L.charCodeAt(0),W[U+1]=255&L.charCodeAt(1),W[U+2]=255&L.charCodeAt(2),W[U+3]=255&L.charCodeAt(3),U+=4,W.set(z,U),U+=z.length;const re=function m(L,z,W){let N=-1;for(let U=z;U<W;U++)N=N>>>8^a[255&(N^L[U])];return-1^N}(W,N+4,U);W[U]=re>>24&255,W[U+1]=re>>16&255,W[U+2]=re>>8&255,W[U+3]=255&re}function g(L){let z=L.length;const W=65535,N=Math.ceil(z/W),U=new Uint8Array(2+z+5*N+4);let Q=0;U[Q++]=120,U[Q++]=156;let re=0;for(;z>W;)U[Q++]=0,U[Q++]=255,U[Q++]=255,U[Q++]=0,U[Q++]=0,U.set(L.subarray(re,re+W),Q),Q+=W,re+=W,z-=W;U[Q++]=1,U[Q++]=255&z,U[Q++]=z>>8&255,U[Q++]=255&~z,U[Q++]=(65535&~z)>>8&255,U.set(L.subarray(re),Q),Q+=L.length-re;const j=function E(L,z,W){let N=1,U=0;for(let Q=z;Q<W;++Q)N=(N+(255&L[Q]))%65521,U=(U+N)%65521;return U<<16|N}(L,0,L.length);return U[Q++]=j>>24&255,U[Q++]=j>>16&255,U[Q++]=j>>8&255,U[Q++]=255&j,U}return function(z,W,N){return function R(L,z,W,N){const U=L.width,Q=L.height;let re,j,h;const n=L.data;switch(z){case v.ImageKind.GRAYSCALE_1BPP:j=0,re=1,h=U+7>>3;break;case v.ImageKind.RGB_24BPP:j=2,re=8,h=3*U;break;case v.ImageKind.RGBA_32BPP:j=6,re=8,h=4*U;break;default:throw new Error("invalid format")}const _=new Uint8Array((1+h)*Q);let d=0,f=0;for(let H=0;H<Q;++H)_[d++]=0,_.set(n.subarray(f,f+h),d),f+=h,d+=h;if(z===v.ImageKind.GRAYSCALE_1BPP&&N){d=0;for(let H=0;H<Q;H++){d++;for(let K=0;K<h;K++)_[d++]^=255}}const i=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,255&U,Q>>24&255,Q>>16&255,Q>>8&255,255&Q,re,j,0,0,0]),c=function u(L){if(!B.isNodeJS)return g(L);try{let z;z=parseInt(process.versions.node)>=8?L:Buffer.from(L);const W=__webpack_require__(2258).deflateSync(z,{level:9});return W instanceof Uint8Array?W:new Uint8Array(W)}catch(z){(0,v.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+z)}return g(L)}(_),P=new Uint8Array(t.length+36+i.length+c.length);let x=0;return P.set(t,x),x+=t.length,C("IHDR",i,P,x),x+=12+i.length,C("IDATA",c,P,x),x+=12+c.length,C("IEND",new Uint8Array(0),P,x),O(P,"image/png",W)}(z,void 0===z.kind?v.ImageKind.GRAYSCALE_1BPP:z.kind,W,N)}}();class S{constructor(){this.fontSizeScale=1,this.fontWeight=$.fontWeight,this.fontSize=0,this.textMatrix=v.IDENTITY_MATRIX,this.fontMatrix=v.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=v.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=$.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,a){this.x=e,this.y=a}}let b=0,F=0,p=0;s.SVGGraphics=k=class{constructor(t,e,a=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new S,this.transformMatrix=v.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[];for(const m in v.OPS)this._operatorIdMapping[v.OPS[m]]=m}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,a=t.argsArray;for(let m=0,C=e.length;m<C;m++)if(e[m]===v.OPS.dependency)for(const E of a[m]){const u=E.startsWith("g_")?this.commonObjs:this.objs,g=new Promise(R=>{u.get(E,R)});this.current.dependencies.push(g)}return Promise.all(this.current.dependencies)}transform(t,e,a,m,C,E){this.transformMatrix=v.Util.transform(this.transformMatrix,[t,e,a,m,C,E]),this.tgrp=null}getSVG(t,e){this.viewport=e;const a=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=v.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),a))}convertOpList(t){const e=this._operatorIdMapping,a=t.argsArray,m=t.fnArray,C=[];for(let E=0,u=m.length;E<u;E++){const g=m[E];C.push({fnId:g,fn:e[g],args:a[E]})}return r(C)}executeOpTree(t){for(const e of t){const a=e.fn,C=e.args;switch(0|e.fnId){case v.OPS.beginText:this.beginText();break;case v.OPS.dependency:break;case v.OPS.setLeading:this.setLeading(C);break;case v.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case v.OPS.setFont:this.setFont(C);break;case v.OPS.showText:case v.OPS.showSpacedText:this.showText(C[0]);break;case v.OPS.endText:this.endText();break;case v.OPS.moveText:this.moveText(C[0],C[1]);break;case v.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case v.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case v.OPS.setHScale:this.setHScale(C[0]);break;case v.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case v.OPS.setTextRise:this.setTextRise(C[0]);break;case v.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case v.OPS.setLineWidth:this.setLineWidth(C[0]);break;case v.OPS.setLineJoin:this.setLineJoin(C[0]);break;case v.OPS.setLineCap:this.setLineCap(C[0]);break;case v.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case v.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case v.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case v.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case v.OPS.setFillColorN:this.setFillColorN(C);break;case v.OPS.shadingFill:this.shadingFill(C[0]);break;case v.OPS.setDash:this.setDash(C[0],C[1]);break;case v.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case v.OPS.setFlatness:this.setFlatness(C[0]);break;case v.OPS.setGState:this.setGState(C[0]);break;case v.OPS.fill:this.fill();break;case v.OPS.eoFill:this.eoFill();break;case v.OPS.stroke:this.stroke();break;case v.OPS.fillStroke:this.fillStroke();break;case v.OPS.eoFillStroke:this.eoFillStroke();break;case v.OPS.clip:this.clip("nonzero");break;case v.OPS.eoClip:this.clip("evenodd");break;case v.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case v.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case v.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case v.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case v.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case v.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case v.OPS.closePath:this.closePath();break;case v.OPS.closeStroke:this.closeStroke();break;case v.OPS.closeFillStroke:this.closeFillStroke();break;case v.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case v.OPS.nextLine:this.nextLine();break;case v.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case v.OPS.constructPath:this.constructPath(C[0],C[1]);break;case v.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,v.warn)(`Unimplemented operator ${a}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,a,m,C,E){const u=this.current;u.textMatrix=u.lineMatrix=[t,e,a,m,C,E],u.textMatrixScale=Math.hypot(t,e),u.x=u.lineX=0,u.y=u.lineY=0,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${A(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",A(-u.y)),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtElement.append(u.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=v.IDENTITY_MATRIX,t.lineMatrix=v.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const a=this.current;a.x=a.lineX+=t,a.y=a.lineY+=e,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${A(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",A(-a.y))}showText(t){const e=this.current,a=e.font,m=e.fontSize;if(0===m)return;const C=e.fontSizeScale,E=e.charSpacing,u=e.wordSpacing,g=e.fontDirection,R=e.textHScale*g,L=a.vertical,z=L?1:-1,W=a.defaultVMetrics,N=m*e.fontMatrix[0];let U=0;for(const j of t){if(null===j){U+=g*u;continue}if("number"==typeof j){U+=z*j*m/1e3;continue}const h=(j.isSpace?u:0)+E,n=j.fontChar;let _,d,i,f=j.width;if(L){let c;const l=j.vmetric||W;c=j.vmetric?l[1]:.5*f,c=-c*N,f=l?-l[0]:f,_=c/C,d=(U+l[2]*N)/C}else _=U/C,d=0;(j.isInFont||a.missingFile)&&(e.xcoords.push(e.x+_),L&&e.ycoords.push(-e.y+d),e.tspan.textContent+=n),i=L?f*N-h*g:f*N+h*g,U+=i}e.tspan.setAttributeNS(null,"x",e.xcoords.map(A).join(" ")),e.tspan.setAttributeNS(null,"y",L?e.ycoords.map(A).join(" "):A(-e.y)),L?e.y-=U:e.x+=U*R,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${A(e.fontSize)}px`),e.fontStyle!==$.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==$.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const Q=e.textRenderingMode&v.TextRenderingMode.FILL_STROKE_MASK;Q===v.TextRenderingMode.FILL||Q===v.TextRenderingMode.FILL_STROKE?(e.fillColor!==$.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.tspan.setAttributeNS(null,"fill",e.textRenderingMode===v.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(Q===v.TextRenderingMode.STROKE||Q===v.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(e.tspan,1/(e.textMatrixScale||1));let re=e.textMatrix;0!==e.textRise&&(re=re.slice(),re[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${y(re)} scale(${A(R)}, -1)`),e.txtElement.setAttributeNS(w,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=O(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,a=this.commonObjs.get(t[0]);let m=t[1];e.font=a,this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]&&(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),e.fontMatrix=a.fontMatrix||v.FONT_IDENTITY_MATRIX;let C="normal";a.black?C="900":a.bold&&(C="bold");const E=a.italic?"italic":"normal";m<0?(m=-m,e.fontDirection=-1):e.fontDirection=1,e.fontSize=m,e.fontFamily=a.loadedName,e.fontWeight=C,e.fontStyle=E,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",A(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var t;const e=this.current;e.textRenderingMode&v.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=e.txtElement)&&void 0!==t&&t.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=I[t]}setLineJoin(t){this.current.lineJoin=V[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,a){this.current.strokeColor=v.Util.makeHexColor(t,e,a)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,a){this.current.fillColor=v.Util.makeHexColor(t,e,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,a=this.viewport.height,m=v.Util.inverseTransform(this.transformMatrix),C=v.Util.applyTransform([0,0],m),E=v.Util.applyTransform([0,a],m),u=v.Util.applyTransform([e,0],m),g=v.Util.applyTransform([e,a],m),R=Math.min(C[0],E[0],u[0],g[0]),L=Math.min(C[1],E[1],u[1],g[1]),z=Math.max(C[0],E[0],u[0],g[0]),W=Math.max(C[1],E[1],u[1],g[1]),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",R),N.setAttributeNS(null,"y",L),N.setAttributeNS(null,"width",z-R),N.setAttributeNS(null,"height",W-L),N.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&N.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(N)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],a=t[2],m=t[3]||v.IDENTITY_MATRIX,[C,E,u,g]=t[4],R=t[5],L=t[6],z=t[7],W="shading"+p++,[N,U,Q,re]=v.Util.normalizeRect([...v.Util.applyTransform([C,E],m),...v.Util.applyTransform([u,g],m)]),[j,h]=v.Util.singularValueDecompose2dScale(m),n=R*j,_=L*h,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",W),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",n),d.setAttributeNS(null,"height",_),d.setAttributeNS(null,"x",`${N}`),d.setAttributeNS(null,"y",`${U}`);const f=this.svg,i=this.transformMatrix,c=this.current.fillColor,l=this.current.strokeColor,P=this.svgFactory.create(Q-N,re-U);if(this.svg=P,this.transformMatrix=m,2===z){const x=v.Util.makeHexColor(...e);this.current.fillColor=x,this.current.strokeColor=x}return this.executeOpTree(this.convertOpList(a)),this.svg=f,this.transformMatrix=i,this.current.fillColor=c,this.current.strokeColor=l,d.append(P.childNodes[0]),this.defs.append(d),`url(#${W})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+p++,a=t[3];let m;switch(t[1]){case"axial":const C=t[4],E=t[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",e),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",C[0]),m.setAttributeNS(null,"y1",C[1]),m.setAttributeNS(null,"x2",E[0]),m.setAttributeNS(null,"y2",E[1]);break;case"radial":const u=t[4],g=t[5],R=t[6],L=t[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",e),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",g[0]),m.setAttributeNS(null,"cy",g[1]),m.setAttributeNS(null,"r",L),m.setAttributeNS(null,"fx",u[0]),m.setAttributeNS(null,"fy",u[1]),m.setAttributeNS(null,"fr",R);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const C of a){const E=this.svgFactory.createElement("svg:stop");E.setAttributeNS(null,"offset",C[0]),E.setAttributeNS(null,"stop-color",C[1]),m.append(E)}return this.defs.append(m),`url(#${e})`;case"Mesh":return(0,v.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const a=this.current;let m=a.x,C=a.y,E=[],u=0;for(const g of t)switch(0|g){case v.OPS.rectangle:m=e[u++],C=e[u++];const z=m+e[u++],W=C+e[u++];E.push("M",A(m),A(C),"L",A(z),A(C),"L",A(z),A(W),"L",A(m),A(W),"Z");break;case v.OPS.moveTo:m=e[u++],C=e[u++],E.push("M",A(m),A(C));break;case v.OPS.lineTo:m=e[u++],C=e[u++],E.push("L",A(m),A(C));break;case v.OPS.curveTo:m=e[u+4],C=e[u+5],E.push("C",A(e[u]),A(e[u+1]),A(e[u+2]),A(e[u+3]),A(m),A(C)),u+=6;break;case v.OPS.curveTo2:E.push("C",A(m),A(C),A(e[u]),A(e[u+1]),A(e[u+2]),A(e[u+3])),m=e[u+2],C=e[u+3],u+=4;break;case v.OPS.curveTo3:m=e[u+2],C=e[u+3],E.push("C",A(e[u]),A(e[u+1]),A(m),A(C),A(m),A(C)),u+=4;break;case v.OPS.closePath:E.push("Z")}E=E.join(" "),a.path&&t.length>0&&t[0]!==v.OPS.rectangle&&t[0]!==v.OPS.moveTo?E=a.path.getAttributeNS(null,"d")+E:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(a.path)),a.path.setAttributeNS(null,"d",E),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(m,C)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+b++,a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",e),a.setAttributeNS(null,"transform",y(this.transformMatrix));const m=t.element.cloneNode(!0);if(m.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,a.append(m),this.defs.append(a),t.activeClipUrl){t.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;a.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,a]of t)switch(e){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,v.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const a=this.current;let m=a.dashArray;1!==e&&m.length>0&&(m=m.map(function(C){return e*C})),t.setAttributeNS(null,"stroke",a.strokeColor),t.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",A(a.miterLimit)),t.setAttributeNS(null,"stroke-linecap",a.lineCap),t.setAttributeNS(null,"stroke-linejoin",a.lineJoin),t.setAttributeNS(null,"stroke-width",A(e*a.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",m.map(A).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",A(e*a.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,v.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const a=t.width,m=t.height,C=D(t,this.forceDataSchema,!!e),E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",A(a)),E.setAttributeNS(null,"height",A(m)),this.current.element=E,this.clip("nonzero");const u=this.svgFactory.createElement("svg:image");u.setAttributeNS(T,"xlink:href",C),u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y",A(-m)),u.setAttributeNS(null,"width",A(a)+"px"),u.setAttributeNS(null,"height",A(m)+"px"),u.setAttributeNS(null,"transform",`scale(${A(1/a)} ${A(-1/m)})`),e?e.append(u):this._ensureTransformGroup().append(u)}paintImageMaskXObject(t){const e=this.current,a=t.width,m=t.height,C=e.fillColor;e.maskId="mask"+F++;const E=this.svgFactory.createElement("svg:mask");E.setAttributeNS(null,"id",e.maskId);const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width",A(a)),u.setAttributeNS(null,"height",A(m)),u.setAttributeNS(null,"fill",C),u.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.append(E),this._ensureTransformGroup().append(u),this.paintInlineImageXObject(t,E)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const a=e[2]-e[0],m=e[3]-e[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",e[0]),C.setAttributeNS(null,"y",e[1]),C.setAttributeNS(null,"width",A(a)),C.setAttributeNS(null,"height",A(m)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),a=this.svgFactory.createElement("svg:defs");e.append(a),this.defs=a;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",y(t.transform)),e.append(m),this.svg=m,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var o=M(1),v=M(33);const B=__webpack_require__(172),k=__webpack_require__(2001),$=__webpack_require__(3779),w=__webpack_require__(6558),T=/^file:\/\/\/[a-zA-Z]:\//;s.PDFNodeStream=class V{constructor(p){this.source=p,this.url=function I(F){const p=w.parse(F);return"file:"===p.protocol||p.host?p:/^[a-z]:[/\\]/i.test(F)?w.parse(`file:///${F}`):(p.host||(p.protocol="file:"),p)}(p.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p,t;return null!==(p=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==p?p:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new r(this),this._fullRequestReader}getRangeReader(p,t){if(t<=this._progressiveDataLength)return null;const e=this.isFsUrl?new b(this,p,t):new A(this,p,t);return this._rangeRequestReaders.push(e),e}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const t of this._rangeRequestReaders.slice(0))t.cancel(p)}};class O{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=p.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var p=this;return _asyncToGenerator(function*(){if(yield p._readCapability.promise,p._done)return{value:void 0,done:!0};if(p._storedError)throw p._storedError;const t=p._readableStream.read();return null===t?(p._readCapability=(0,o.createPromiseCapability)(),p.read()):(p._loaded+=t.length,p.onProgress&&p.onProgress({loaded:p._loaded,total:p._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(p){this._readableStream?this._readableStream.destroy(p):this._error(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!p.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var p=this;return _asyncToGenerator(function*(){if(yield p._readCapability.promise,p._done)return{value:void 0,done:!0};if(p._storedError)throw p._storedError;const t=p._readableStream.read();return null===t?(p._readCapability=(0,o.createPromiseCapability)(),p.read()):(p._loaded+=t.length,p.onProgress&&p.onProgress({loaded:p._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(p){this._readableStream?this._readableStream.destroy(p):this._error(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function S(F,p){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:p}}class r extends O{constructor(p){super(p);const t=e=>{if(404===e.statusCode){const E=new o.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=E,void this._headersCapability.reject(E)}this._headersCapability.resolve(),this._setReadableStream(e);const a=E=>this._readableStream.headers[E.toLowerCase()],{allowRangeRequests:m,suggestedLength:C}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=C||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(a)};this._request=null,this._request="http:"===this._url.protocol?k.request(S(this._url,p.httpHeaders),t):$.request(S(this._url,p.httpHeaders),t),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class A extends D{constructor(p,t,e){super(p),this._httpHeaders={};for(const m in p.httpHeaders){const C=p.httpHeaders[m];typeof C>"u"||(this._httpHeaders[m]=C)}this._httpHeaders.Range=`bytes=${t}-${e-1}`;const a=m=>{if(404!==m.statusCode)this._setReadableStream(m);else{const C=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C}};this._request=null,this._request="http:"===this._url.protocol?k.request(S(this._url,this._httpHeaders),a):$.request(S(this._url,this._httpHeaders),a),this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class y extends O{constructor(p){super(p);let t=decodeURIComponent(this._url.path);T.test(this._url.href)&&(t=t.replace(/^\//,"")),B.lstat(t,(e,a)=>{if(e)return"ENOENT"===e.code&&(e=new o.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=a.size,this._setReadableStream(B.createReadStream(t)),this._headersCapability.resolve()})}}class b extends D{constructor(p,t,e){super(p);let a=decodeURIComponent(this._url.path);T.test(this._url.href)&&(a=a.replace(/^\//,"")),this._setReadableStream(B.createReadStream(a,{start:t,end:e-1}))}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=function w(I,V){return 404===I||0===I&&V.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+V+'".'):new o.UnexpectedResponseException(`Unexpected server response (${I}) while retrieving PDF "${V}".`,I)},s.extractFilenameFromHeader=function $(I){const V=I("Content-Disposition");if(V){let O=(0,v.getFilenameFromContentDispositionHeader)(V);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,B.isPdfFile)(O))return O}return null},s.validateRangeRequestCapabilities=function k({getResponseHeader:I,isHttp:V,rangeChunkSize:O,disableRange:D}){const S={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(I("Content-Length"),10);return!Number.isInteger(r)||(S.suggestedLength=r,r<=2*O)||D||!V||"bytes"!==I("Accept-Ranges")||"identity"!==(I("Content-Encoding")||"identity")||(S.allowRangeRequests=!0),S},s.validateResponseStatus=function T(I){return 200===I||206===I};var o=M(1),v=M(34),B=M(8)},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=function v(B){let k=!0,$=w("filename\\*","i").exec(B);if($){$=$[1];let r=O($);return r=unescape(r),r=D(r),r=S(r),I(r)}if($=function V(r){const A=[];let y;const b=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(y=b.exec(r));){let[,p,t,e]=y;if(p=parseInt(p,10),p in A){if(0===p)break}else A[p]=[t,e]}const F=[];for(let p=0;p<A.length&&p in A;++p){let[t,e]=A[p];e=O(e),t&&(e=unescape(e),0===p&&(e=D(e))),F.push(e)}return F.join("")}(B),$)return I(S($));if($=w("filename","i").exec(B),$){$=$[1];let r=O($);return r=S(r),I(r)}function w(r,A){return new RegExp("(?:^|;)\\s*"+r+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function T(r,A){if(r){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const y=new TextDecoder(r,{fatal:!0}),b=(0,o.stringToBytes)(A);A=y.decode(b),k=!1}catch{}}return A}function I(r){return k&&/[\x80-\xff]/.test(r)&&(r=T("utf-8",r),k&&(r=T("iso-8859-1",r))),r}function O(r){if(r.startsWith('"')){const A=r.slice(1).split('\\"');for(let y=0;y<A.length;++y){const b=A[y].indexOf('"');-1!==b&&(A[y]=A[y].slice(0,b),A.length=y+1),A[y]=A[y].replace(/\\(.)/g,"$1")}r=A.join('"')}return r}function D(r){const A=r.indexOf("'");return-1===A?r:T(r.slice(0,A),r.slice(A+1).replace(/^[^']*'/,""))}function S(r){return!r.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(r)?r:r.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,y,b,F){if("q"===b||"Q"===b)return T(y,F=(F=F.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(p,t){return String.fromCharCode(parseInt(t,16))}));try{F=atob(F)}catch{}return T(y,F)})}return""};var o=M(1)},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var o=M(1),v=M(33);class w{constructor(D,S={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&S.httpHeaders||Object.create(null),this.withCredentials=S.withCredentials||!1,this.getXhr=S.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,S,r){const A={begin:D,end:S};for(const y in r)A[y]=r[y];return this.request(A)}requestFull(D){return this.request(D)}request(D){const S=this.getXhr(),r=this.currXhrId++,A=this.pendingRequests[r]={xhr:S};S.open("GET",this.url),S.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const b=this.httpHeaders[y];typeof b>"u"||S.setRequestHeader(y,b)}return this.isHttp&&"begin"in D&&"end"in D?(S.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),A.expectedStatus=206):A.expectedStatus=200,S.responseType="arraybuffer",D.onError&&(S.onerror=function(y){D.onError(S.status)}),S.onreadystatechange=this.onStateChange.bind(this,r),S.onprogress=this.onProgress.bind(this,r),A.onHeadersReceived=D.onHeadersReceived,A.onDone=D.onDone,A.onError=D.onError,A.onProgress=D.onProgress,S.send(null),r}onProgress(D,S){var r;const A=this.pendingRequests[D];A&&(null===(r=A.onProgress)||void 0===r||r.call(A,S))}onStateChange(D,S){const r=this.pendingRequests[D];if(!r)return;const A=r.xhr;if(A.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4!==A.readyState||!(D in this.pendingRequests))return;var y;if(delete this.pendingRequests[D],0===A.status&&this.isHttp)return void(null===(y=r.onError)||void 0===y||y.call(r,A.status));const b=A.status||200;var p;if((200!==b||206!==r.expectedStatus)&&b!==r.expectedStatus)return void(null===(p=r.onError)||void 0===p||p.call(r,A.status));const t=function $(O){const D=O.response;return"string"!=typeof D?D:(0,o.stringToBytes)(D).buffer}(A);if(206===b){const a=A.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);r.onDone({begin:parseInt(m[1],10),chunk:t})}else if(t)r.onDone({begin:0,chunk:t});else{var e;null===(e=r.onError)||void 0===e||e.call(r,A.status)}}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const S=this.pendingRequests[D].xhr;delete this.pendingRequests[D],S.abort()}}s.PDFNetworkStream=class T{constructor(D){this._source=D,this._manager=new w(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const S=this._rangeRequestReaders.indexOf(D);S>=0&&this._rangeRequestReaders.splice(S,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new I(this._manager,this._source),this._fullRequestReader}getRangeReader(D,S){const r=new V(this._manager,D,S);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(D){var S;null===(S=this._fullRequestReader)||void 0===S||S.cancel(D);for(const r of this._rangeRequestReaders.slice(0))r.cancel(D)}};class I{constructor(D,S){this._manager=D;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._fullRequestId=D.requestFull(r),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=S.disableRange||!1,this._contentLength=S.length,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,S=this._manager.getRequestXhr(D),r=b=>S.getResponseHeader(b),{allowRangeRequests:A,suggestedLength:y}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});A&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,v.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var S;null===(S=this.onProgress)||void 0===S||S.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(D._cachedChunks.length>0)return{value:D._cachedChunks.shift(),done:!1};if(D._done)return{value:void 0,done:!0};const S=(0,o.createPromiseCapability)();return D._requests.push(S),S.promise})()}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V{constructor(D,S,r){this._manager=D;const A={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(S,r,A),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;null===(D=this.onClosed)||void 0===D||D.call(this,this)}_onDone(D){const S=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:S,done:!1}):this._queuedChunk=S,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,v.createResponseStatusError)(D,this._url);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){var S;this.isStreamingSupported||null===(S=this.onProgress)||void 0===S||S.call(this,{loaded:D.loaded})}get isStreamingSupported(){return!1}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(null!==D._queuedChunk){const r=D._queuedChunk;return D._queuedChunk=null,{value:r,done:!1}}if(D._done)return{value:void 0,done:!0};const S=(0,o.createPromiseCapability)();return D._requests.push(S),S.promise})()}cancel(D){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(q,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var o=M(1),v=M(33);function B(I,V,O){return{method:"GET",headers:I,signal:O.signal,mode:"cors",credentials:V?"include":"same-origin",redirect:"follow"}}function k(I){const V=new Headers;for(const O in I){const D=I[O];typeof D>"u"||V.append(O,D)}return V}s.PDFFetchStream=class ${constructor(V){this.source=V,this.isHttp=/^https?:/i.test(V.url),this.httpHeaders=this.isHttp&&V.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var V,O;return null!==(V=null===(O=this._fullRequestReader)||void 0===O?void 0:O._loaded)&&void 0!==V?V:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w(this),this._fullRequestReader}getRangeReader(V,O){if(O<=this._progressiveDataLength)return null;const D=new T(this,V,O);return this._rangeRequestReaders.push(D),D}cancelAllRequests(V){this._fullRequestReader&&this._fullRequestReader.cancel(V);for(const O of this._rangeRequestReaders.slice(0))O.cancel(V)}};class w{constructor(V){this._stream=V,this._reader=null,this._loaded=0,this._filename=null;const O=V.source;this._withCredentials=O.withCredentials||!1,this._contentLength=O.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._headers=k(this._stream.httpHeaders);const D=O.url;fetch(D,B(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,v.validateResponseStatus)(S.status))throw(0,v.createResponseStatusError)(S.status,D);this._reader=S.body.getReader(),this._headersCapability.resolve();const r=b=>S.headers.get(b),{allowRangeRequests:A,suggestedLength:y}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=y||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var V=this;return _asyncToGenerator(function*(){yield V._headersCapability.promise;const{value:O,done:D}=yield V._reader.read();return D?{value:O,done:D}:(V._loaded+=O.byteLength,V.onProgress&&V.onProgress({loaded:V._loaded,total:V._contentLength}),{value:new Uint8Array(O).buffer,done:!1})})()}cancel(V){this._reader&&this._reader.cancel(V),this._abortController.abort()}}class T{constructor(V,O,D){this._stream=V,this._reader=null,this._loaded=0;const S=V.source;this._withCredentials=S.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=k(this._stream.httpHeaders),this._headers.append("Range",`bytes=${O}-${D-1}`);const r=S.url;fetch(r,B(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,v.validateResponseStatus)(A.status))throw(0,v.createResponseStatusError)(A.status,r);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var V=this;return _asyncToGenerator(function*(){yield V._readCapability.promise;const{value:O,done:D}=yield V._reader.read();return D?{value:O,done:D}:(V._loaded+=O.byteLength,V.onProgress&&V.onProgress({loaded:V._loaded}),{value:new Uint8Array(O).buffer,done:!1})})()}cancel(V){this._reader&&this._reader.cancel(V),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(q){var s=__webpack_module_cache__[q];if(void 0!==s)return s.exports;var M=__webpack_module_cache__[q]={exports:{}};return __webpack_modules__[q](M,M.exports,__w_pdfjs_require__),M.exports}var __nested_webpack_exports__={};return(()=>{var q=__nested_webpack_exports__;Object.defineProperty(q,"__esModule",{value:!0}),Object.defineProperty(q,"AnnotationEditorLayer",{enumerable:!0,get:function(){return v.AnnotationEditorLayer}}),Object.defineProperty(q,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(q,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(q,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return B.AnnotationEditorUIManager}}),Object.defineProperty(q,"AnnotationLayer",{enumerable:!0,get:function(){return k.AnnotationLayer}}),Object.defineProperty(q,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(q,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(q,"GlobalWorkerOptions",{enumerable:!0,get:function(){return $.GlobalWorkerOptions}}),Object.defineProperty(q,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(q,"LoopbackPort",{enumerable:!0,get:function(){return M.LoopbackPort}}),Object.defineProperty(q,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(q,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(q,"PDFDataRangeTransport",{enumerable:!0,get:function(){return M.PDFDataRangeTransport}}),Object.defineProperty(q,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(q,"PDFWorker",{enumerable:!0,get:function(){return M.PDFWorker}}),Object.defineProperty(q,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(q,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(q,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(q,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(q,"SVGGraphics",{enumerable:!0,get:function(){return I.SVGGraphics}}),Object.defineProperty(q,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return s.UNSUPPORTED_FEATURES}}),Object.defineProperty(q,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(q,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(q,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(q,"XfaLayer",{enumerable:!0,get:function(){return V.XfaLayer}}),Object.defineProperty(q,"build",{enumerable:!0,get:function(){return M.build}}),Object.defineProperty(q,"createPromiseCapability",{enumerable:!0,get:function(){return s.createPromiseCapability}}),Object.defineProperty(q,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(q,"getDocument",{enumerable:!0,get:function(){return M.getDocument}}),Object.defineProperty(q,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(q,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(q,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(q,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(q,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(q,"renderTextLayer",{enumerable:!0,get:function(){return T.renderTextLayer}}),Object.defineProperty(q,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(q,"version",{enumerable:!0,get:function(){return M.version}});var s=__w_pdfjs_require__(1),M=__w_pdfjs_require__(4),o=__w_pdfjs_require__(8),v=__w_pdfjs_require__(22),B=__w_pdfjs_require__(7),k=__w_pdfjs_require__(27),$=__w_pdfjs_require__(15),w=__w_pdfjs_require__(3),T=__w_pdfjs_require__(30),I=__w_pdfjs_require__(31),V=__w_pdfjs_require__(29);if(w.isNodeJS){const{PDFNodeStream:S}=__w_pdfjs_require__(32);(0,M.setPDFNetworkStreamFactory)(r=>new S(r))}else{const{PDFNetworkStream:S}=__w_pdfjs_require__(35),{PDFFetchStream:r}=__w_pdfjs_require__(36);(0,M.setPDFNetworkStreamFactory)(A=>(0,o.isValidFetchUrl)(A.url)?new r(A):new S(A))}})(),__nested_webpack_exports__})(),module.exports=M()},1016:(q,s,M)=>{var o=M(1860).default,v=M(5764).default,B=M(4467).default,k=M(7156).default,$=M(9159).default,w=M(468).default,T=M(5661).default;globalThis,q.exports=(()=>{"use strict";var I=[,(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultXfaLayerFactory=r.DefaultTextLayerFactory=r.DefaultStructTreeLayerFactory=r.DefaultAnnotationLayerFactory=r.DefaultAnnotationEditorLayerFactory=void 0;var y=A(2),b=A(5),F=A(4),p=A(6),t=A(8),e=A(9),a=A(10);r.DefaultAnnotationLayerFactory=class m{createAnnotationLayerBuilder({pageDiv:L,pdfPage:z,annotationStorage:W=null,imageResourcesPath:N="",renderForms:U=!0,l10n:Q=F.NullL10n,enableScripting:re=!1,hasJSActionsPromise:j=null,mouseState:h=null,fieldObjectsPromise:n=null,annotationCanvasMap:_=null,accessibilityManager:d=null}){return new b.AnnotationLayerBuilder({pageDiv:L,pdfPage:z,imageResourcesPath:N,renderForms:U,linkService:new p.SimpleLinkService,l10n:Q,annotationStorage:W,enableScripting:re,hasJSActionsPromise:j,fieldObjectsPromise:n,mouseState:h,annotationCanvasMap:_,accessibilityManager:d})}},r.DefaultAnnotationEditorLayerFactory=class C{createAnnotationEditorLayerBuilder({uiManager:L=null,pageDiv:z,pdfPage:W,accessibilityManager:N=null,l10n:U,annotationStorage:Q=null}){return new y.AnnotationEditorLayerBuilder({uiManager:L,pageDiv:z,pdfPage:W,accessibilityManager:N,l10n:U,annotationStorage:Q})}},r.DefaultStructTreeLayerFactory=class E{createStructTreeLayerBuilder({pdfPage:L}){return new t.StructTreeLayerBuilder({pdfPage:L})}},r.DefaultTextLayerFactory=class u{createTextLayerBuilder({textLayerDiv:L,pageIndex:z,viewport:W,enhanceTextSelection:N=!1,eventBus:U,highlighter:Q,accessibilityManager:re=null}){return new e.TextLayerBuilder({textLayerDiv:L,pageIndex:z,viewport:W,enhanceTextSelection:N,eventBus:U,highlighter:Q,accessibilityManager:re})}},r.DefaultXfaLayerFactory=class g{createXfaLayerBuilder({pageDiv:L,pdfPage:z,annotationStorage:W=null}){return new a.XfaLayerBuilder({pageDiv:L,pdfPage:z,annotationStorage:W,linkService:new p.SimpleLinkService})}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayerBuilder=void 0;var y=A(3),b=A(4),F=new WeakMap;r.AnnotationEditorLayerBuilder=class p{constructor(e){$(this,F,{writable:!0,value:void 0}),this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.annotationStorage=e.annotationStorage||null,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n||b.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,T(this,F,e.uiManager)}render(e,a="display"){var m=this;return k(function*(){if("display"!==a||m._cancelled)return;const C=e.clone({dontFlip:!0});if(m.div)return m.annotationEditorLayer.update({viewport:C}),void m.show();m.div=document.createElement("div"),m.div.className="annotationEditorLayer",m.div.tabIndex=0,m.pageDiv.append(m.div),m.annotationEditorLayer=new y.AnnotationEditorLayer({uiManager:w(m,F),div:m.div,annotationStorage:m.annotationStorage,accessibilityManager:m.accessibilityManager,pageIndex:m.pdfPage._pageIndex,l10n:m.l10n,viewport:C}),m.annotationEditorLayer.render({viewport:C,div:m.div,annotations:null,intent:a})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},S=>{let r;r=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:M(9627),S.exports=r},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NullL10n=void 0,r.fixupLangCode=function F(e){return b[null==e?void 0:e.toLowerCase()]||e},r.getL10nFallback=y;const A={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function y(e,a){switch(e){case"find_match_count":e=`find_match_count[${1===a.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===a.limit?"one":"other"}]`}return A[e]||""}const b={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};r.NullL10n={getLanguage:()=>k(function*(){return"en-us"})(),getDirection:()=>k(function*(){return"ltr"})(),get:(e,a=null,m=y(e,a))=>k(function*(){return function p(e,a){return a?e.replace(/\{\{\s*(\w+)\s*\}\}/g,(m,C)=>C in a?a[C]:"{{"+C+"}}"):e}(m,a)})(),translate:e=>k(function*(){})()}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayerBuilder=void 0;var y=A(3),b=A(4);r.AnnotationLayerBuilder=class F{constructor({pageDiv:t,pdfPage:e,linkService:a,downloadManager:m,annotationStorage:C=null,imageResourcesPath:E="",renderForms:u=!0,l10n:g=b.NullL10n,enableScripting:R=!1,hasJSActionsPromise:L=null,fieldObjectsPromise:z=null,mouseState:W=null,annotationCanvasMap:N=null,accessibilityManager:U=null}){this.pageDiv=t,this.pdfPage=e,this.linkService=a,this.downloadManager=m,this.imageResourcesPath=E,this.renderForms=u,this.l10n=g,this.annotationStorage=C,this.enableScripting=R,this._hasJSActionsPromise=L,this._fieldObjectsPromise=z,this._mouseState=W,this._annotationCanvasMap=N,this._accessibilityManager=U,this.div=null,this._cancelled=!1}render(t,e="display"){var a=this;return k(function*(){const[m,C=!1,E=null]=yield Promise.all([a.pdfPage.getAnnotations({intent:e}),a._hasJSActionsPromise,a._fieldObjectsPromise]);if(a._cancelled||0===m.length)return;const u={viewport:t.clone({dontFlip:!0}),div:a.div,annotations:m,page:a.pdfPage,imageResourcesPath:a.imageResourcesPath,renderForms:a.renderForms,linkService:a.linkService,downloadManager:a.downloadManager,annotationStorage:a.annotationStorage,enableScripting:a.enableScripting,hasJSActions:C,fieldObjects:E,mouseState:a._mouseState,annotationCanvasMap:a._annotationCanvasMap,accessibilityManager:a._accessibilityManager};a.div?y.AnnotationLayer.update(u):(a.div=document.createElement("div"),a.div.className="annotationLayer",a.pageDiv.append(a.div),u.div=a.div,y.AnnotationLayer.render(u),a.l10n.translate(a.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleLinkService=r.PDFLinkService=r.LinkTarget=void 0;var y=A(7);const F={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function p(u,{url:g,target:R,rel:L,enabled:z=!0}={}){if(!g||"string"!=typeof g)throw new Error('A valid "url" parameter must provided.');const W=(0,y.removeNullCharacters)(g);z?u.href=u.title=W:(u.href="",u.title=`Disabled: ${W}`,u.onclick=()=>!1);let N="";switch(R){case F.NONE:break;case F.SELF:N="_self";break;case F.BLANK:N="_blank";break;case F.PARENT:N="_parent";break;case F.TOP:N="_top"}u.target=N,u.rel="string"==typeof L?L:"noopener noreferrer nofollow"}r.LinkTarget=F;var t=new WeakMap,e=new WeakSet;class a{constructor({eventBus:g,externalLinkTarget:R=null,externalLinkRel:L=null,ignoreDestinationZoom:z=!1}={}){o(this,e),$(this,t,{writable:!0,value:new Map}),this.eventBus=g,this.externalLinkTarget=R,this.externalLinkRel=L,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=z,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(g,R=null){this.baseUrl=R,this.pdfDocument=g,w(this,t).clear()}setViewer(g){this.pdfViewer=g}setHistory(g){this.pdfHistory=g}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(g){this.pdfViewer.currentPageNumber=g}get rotation(){return this.pdfViewer.pagesRotation}set rotation(g){this.pdfViewer.pagesRotation=g}goToDestination(g){var R=this;return k(function*(){if(!R.pdfDocument)return;let L,z;"string"==typeof g?(L=g,z=yield R.pdfDocument.getDestination(g)):(L=null,z=yield g),Array.isArray(z)?B(R,e,m).call(R,g,L,z):console.error(`PDFLinkService.goToDestination: "${z}" is not a valid destination array, for dest="${g}".`)})()}goToPage(g){if(!this.pdfDocument)return;const R="string"==typeof g&&this.pdfViewer.pageLabelToPageNumber(g)||0|g;Number.isInteger(R)&&R>0&&R<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(R)),this.pdfViewer.scrollPageIntoView({pageNumber:R})):console.error(`PDFLinkService.goToPage: "${g}" is not a valid page.`)}addLinkAttributes(g,R,L=!1){p(g,{url:R,target:L?F.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(g){if("string"==typeof g){if(g.length>0)return this.getAnchorUrl("#"+escape(g))}else if(Array.isArray(g)){const R=JSON.stringify(g);if(R.length>0)return this.getAnchorUrl("#"+escape(R))}return this.getAnchorUrl("")}getAnchorUrl(g){return(this.baseUrl||"")+g}setHash(g){if(!this.pdfDocument)return;let R,L;if(g.includes("=")){const z=(0,y.parseQueryString)(g);if(z.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:z.get("search").replace(/"/g,""),phraseSearch:"true"===z.get("phrase")}),z.has("page")&&(R=0|z.get("page")||1),z.has("zoom")){const W=z.get("zoom").split(","),N=W[0],U=parseFloat(N);N.includes("Fit")?"Fit"===N||"FitB"===N?L=[null,{name:N}]:"FitH"===N||"FitBH"===N||"FitV"===N||"FitBV"===N?L=[null,{name:N},W.length>1?0|W[1]:null]:"FitR"===N?5!==W.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):L=[null,{name:N},0|W[1],0|W[2],0|W[3],0|W[4]]:console.error(`PDFLinkService.setHash: "${N}" is not a valid zoom value.`):L=[null,{name:"XYZ"},W.length>1?0|W[1]:null,W.length>2?0|W[2]:null,U?U/100:N]}L?this.pdfViewer.scrollPageIntoView({pageNumber:R||this.page,destArray:L,allowNegativeOffset:!0}):R&&(this.page=R),z.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:z.get("pagemode")}),z.has("nameddest")&&this.goToDestination(z.get("nameddest"))}else{L=unescape(g);try{L=JSON.parse(L),Array.isArray(L)||(L=L.toString())}catch{}if("string"==typeof L||v(a,a,C).call(a,L))return void this.goToDestination(L);console.error(`PDFLinkService.setHash: "${unescape(g)}" is not a valid destination.`)}}executeNamedAction(g){var R,L;switch(g){case"GoBack":null===(R=this.pdfHistory)||void 0===R||R.back();break;case"GoForward":null===(L=this.pdfHistory)||void 0===L||L.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:g})}cachePageRef(g,R){if(!R)return;const L=0===R.gen?`${R.num}R`:`${R.num}R${R.gen}`;w(this,t).set(L,g)}_cachedPageNumber(g){if(!g)return null;const R=0===g.gen?`${g.num}R`:`${g.num}R${g.gen}`;return w(this,t).get(R)||null}isPageVisible(g){return this.pdfViewer.isPageVisible(g)}isPageCached(g){return this.pdfViewer.isPageCached(g)}}function m(u,g=null,R){const L=R[0];let z;if("object"==typeof L&&null!==L){if(z=this._cachedPageNumber(L),!z)return void this.pdfDocument.getPageIndex(L).then(W=>{this.cachePageRef(W+1,L),B(this,e,m).call(this,u,g,R)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${L}" is not a valid page reference, for dest="${u}".`)})}else{if(!Number.isInteger(L))return void console.error(`PDFLinkService.#goToDestinationHelper: "${L}" is not a valid destination reference, for dest="${u}".`);z=L+1}!z||z<1||z>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${z}" is not a valid page number, for dest="${u}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:g,explicitDest:R,pageNumber:z})),this.pdfViewer.scrollPageIntoView({pageNumber:z,destArray:R,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function C(u){if(!Array.isArray(u))return!1;const g=u.length;if(g<2)return!1;const R=u[0];if(!("object"==typeof R&&Number.isInteger(R.num)&&Number.isInteger(R.gen)||Number.isInteger(R)&&R>=0))return!1;const L=u[1];if("object"!=typeof L||"string"!=typeof L.name)return!1;let z=!0;switch(L.name){case"XYZ":if(5!==g)return!1;break;case"Fit":case"FitB":return 2===g;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==g)return!1;break;case"FitR":if(6!==g)return!1;z=!1;break;default:return!1}for(let W=2;W<g;W++){const N=u[W];if(!("number"==typeof N||z&&null===N))return!1}return!0}r.PDFLinkService=a,r.SimpleLinkService=class E{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(g){}get rotation(){return 0}set rotation(g){}goToDestination(g){return k(function*(){})()}goToPage(g){}addLinkAttributes(g,R,L=!1){p(g,{url:R,enabled:this.externalLinkEnabled})}getDestinationHash(g){return"#"}getAnchorUrl(g){return"#"}setHash(g){}executeNamedAction(g){}cachePageRef(g,R){}isPageVisible(g){return!0}isPageCached(g){return!0}}},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.animationStarted=r.VERTICAL_PADDING=r.UNKNOWN_SCALE=r.TextLayerMode=r.SpreadMode=r.SidebarView=r.ScrollMode=r.SCROLLBAR_PADDING=r.RenderingStates=r.RendererType=r.ProgressBar=r.PresentationModeState=r.OutputScale=r.MIN_SCALE=r.MAX_SCALE=r.MAX_AUTO_SCALE=r.DEFAULT_SCALE_VALUE=r.DEFAULT_SCALE_DELTA=r.DEFAULT_SCALE=r.AutoPrintRegExp=void 0,r.apiPageLayoutToViewerModes=function Be(fe){let Ce=L.VERTICAL,xe=z.NONE;switch(fe){case"SinglePage":Ce=L.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Ce=L.PAGE;case"TwoColumnLeft":xe=z.ODD;break;case"TwoPageRight":Ce=L.PAGE;case"TwoColumnRight":xe=z.EVEN}return{scrollMode:Ce,spreadMode:xe}},r.apiPageModeToSidebarView=function Me(fe){switch(fe){case"UseNone":return u.NONE;case"UseThumbs":return u.THUMBS;case"UseOutlines":return u.OUTLINE;case"UseAttachments":return u.ATTACHMENTS;case"UseOC":return u.LAYERS}return u.NONE},r.approximateFraction=function d(fe){if(Math.floor(fe)===fe)return[fe,1];const Ce=1/fe;if(Ce>8)return[1,8];if(Math.floor(Ce)===Ce)return[1,Ce];const Fe=fe>1?Ce:fe;let J,ye=0,G=1,ee=1,ne=1;for(;;){const ae=ye+ee,ge=G+ne;if(ge>8)break;Fe<=ae/ge?(ee=ae,ne=ge):(ye=ae,G=ge)}return J=Fe-ye/G<ee/ne-Fe?Fe===fe?[ye,G]:[G,ye]:Fe===fe?[ee,ne]:[ne,ee],J},r.backtrackBeforeAllVisibleElements=c,r.binarySearchFirstItem=_,r.docStyle=void 0,r.getActiveOrFocusedElement=function Pe(){let fe=document,Ce=fe.activeElement||fe.querySelector(":focus");for(;null!==(xe=Ce)&&void 0!==xe&&xe.shadowRoot;){var xe;fe=Ce.shadowRoot,Ce=fe.activeElement||fe.querySelector(":focus")}return Ce},r.getPageSizeInches=function i({view:fe,userUnit:Ce,rotate:xe}){const[Fe,ye,G,ee]=fe,ne=xe%180!=0,J=(G-Fe)/72*Ce,ae=(ee-ye)/72*Ce;return{width:ne?ae:J,height:ne?J:ae}},r.getVisibleElements=function l({scrollEl:fe,views:Ce,sortByVisibility:xe=!1,horizontal:Fe=!1,rtl:ye=!1}){const G=fe.scrollTop,ee=G+fe.clientHeight,ne=fe.scrollLeft,J=ne+fe.clientWidth,Z=[],X=new Set,Y=Ce.length;let Ae=_(Ce,Fe?function ge(ve){const Ee=ve.div,Se=Ee.offsetLeft+Ee.clientLeft;return ye?Se<J:Se+Ee.clientWidth>ne}:function ae(ve){const Ee=ve.div;return Ee.offsetTop+Ee.clientTop+Ee.clientHeight>G});Ae>0&&Ae<Y&&!Fe&&(Ae=c(Ae,Ce,G));let be=Fe?J:-1;for(let ve=Ae;ve<Y;ve++){const Ee=Ce[ve],Se=Ee.div,we=Se.offsetLeft+Se.clientLeft,ke=Se.offsetTop+Se.clientTop,Te=Se.clientWidth,Re=Se.clientHeight,De=we+Te,Le=ke+Re;if(-1===be)Le>=ee&&(be=Le);else if((Fe?we:ke)>be)break;if(Le<=G||ke>=ee||De<=ne||we>=J)continue;const Ne=Math.max(0,G-ke)+Math.max(0,Le-ee),Oe=(Te-(Math.max(0,ne-we)+Math.max(0,De-J)))/Te;Z.push({id:Ee.id,x:we,y:ke,view:Ee,percent:(Re-Ne)/Re*Oe*100|0,widthPercent:100*Oe|0}),X.add(Ee.id)}const he=Z[0],ce=Z.at(-1);return xe&&Z.sort(function(ve,Ee){const Se=ve.percent-Ee.percent;return Math.abs(Se)>.001?-Se:ve.id-Ee.id}),{first:he,last:ce,views:Z,ids:X}},r.isPortraitOrientation=function pe(fe){return fe.width<=fe.height},r.isValidRotation=function K(fe){return Number.isInteger(fe)&&fe%90==0},r.isValidScrollMode=function se(fe){return Number.isInteger(fe)&&Object.values(L).includes(fe)&&fe!==L.UNKNOWN},r.isValidSpreadMode=function te(fe){return Number.isInteger(fe)&&Object.values(z).includes(fe)&&fe!==z.UNKNOWN},r.noContextMenuHandler=function P(fe){fe.preventDefault()},r.normalizeWheelEventDelta=function H(fe){let Ce=x(fe);return 0===fe.deltaMode?Ce/=900:1===fe.deltaMode&&(Ce/=30),Ce},r.normalizeWheelEventDirection=x,r.parseQueryString=function re(fe){const Ce=new Map;for(const[xe,Fe]of new URLSearchParams(fe))Ce.set(xe.toLowerCase(),Fe);return Ce},r.removeNullCharacters=function n(fe,Ce=!1){return"string"!=typeof fe?(console.error("The argument must be a string."),fe):(Ce&&(fe=fe.replace(h," ")),fe.replace(j,""))},r.roundToDivide=function f(fe,Ce){const xe=fe%Ce;return 0===xe?fe:Math.round(fe-xe+Ce)},r.scrollIntoView=function U(fe,Ce,xe=!1){let Fe=fe.offsetParent;if(!Fe)return void console.error("offsetParent is not set -- cannot scroll");let ye=fe.offsetTop+fe.clientTop,G=fe.offsetLeft+fe.clientLeft;for(;Fe.clientHeight===Fe.scrollHeight&&Fe.clientWidth===Fe.scrollWidth||xe&&(Fe.classList.contains("markedContent")||"hidden"===getComputedStyle(Fe).overflow);)if(ye+=Fe.offsetTop,G+=Fe.offsetLeft,Fe=Fe.offsetParent,!Fe)return;Ce&&(void 0!==Ce.top&&(ye+=Ce.top),void 0!==Ce.left&&(G+=Ce.left,Fe.scrollLeft=G)),Fe.scrollTop=ye},r.watchScroll=function Q(fe,Ce){const xe=function(G){ye||(ye=window.requestAnimationFrame(function(){ye=null;const ne=fe.scrollLeft,J=Fe.lastX;ne!==J&&(Fe.right=ne>J),Fe.lastX=ne;const ae=fe.scrollTop,ge=Fe.lastY;ae!==ge&&(Fe.down=ae>ge),Fe.lastY=ae,Ce(Fe)}))},Fe={right:!0,down:!0,lastX:fe.scrollLeft,lastY:fe.scrollTop,_eventHandler:xe};let ye=null;return fe.addEventListener("scroll",xe,!0),Fe},r.DEFAULT_SCALE_VALUE="auto",r.DEFAULT_SCALE=1,r.DEFAULT_SCALE_DELTA=1.1,r.MIN_SCALE=.1,r.MAX_SCALE=10,r.UNKNOWN_SCALE=0,r.MAX_AUTO_SCALE=1.25,r.SCROLLBAR_PADDING=40,r.VERTICAL_PADDING=5,r.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},r.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const u={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};r.SidebarView=u,r.RendererType={CANVAS:"canvas",SVG:"svg"},r.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const L={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};r.ScrollMode=L;const z={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};r.SpreadMode=z,r.AutoPrintRegExp=/\bprint\s*\(/,r.OutputScale=class N{constructor(){const Ce=window.devicePixelRatio||1;this.sx=Ce,this.sy=Ce}get scaled(){return 1!==this.sx||1!==this.sy}};const j=/\x00/g,h=/[\x01-\x1F]/g;function _(fe,Ce,xe=0){let Fe=xe,ye=fe.length-1;if(ye<0||!Ce(fe[ye]))return fe.length;if(Ce(fe[Fe]))return Fe;for(;Fe<ye;){const G=Fe+ye>>1;Ce(fe[G])?ye=G:Fe=G+1}return Fe}function c(fe,Ce,xe){if(fe<2)return fe;let Fe=Ce[fe].div,ye=Fe.offsetTop+Fe.clientTop;ye>=xe&&(Fe=Ce[fe-1].div,ye=Fe.offsetTop+Fe.clientTop);for(let G=fe-2;G>=0&&(Fe=Ce[G].div,!(Fe.offsetTop+Fe.clientTop+Fe.clientHeight<=ye));--G)fe=G;return fe}function x(fe){let Ce=Math.hypot(fe.deltaX,fe.deltaY);const xe=Math.atan2(fe.deltaY,fe.deltaX);return-.25*Math.PI<xe&&xe<.75*Math.PI&&(Ce=-Ce),Ce}const le=new Promise(function(fe){window.requestAnimationFrame(fe)});r.animationStarted=le;const ue=document.documentElement.style;r.docStyle=ue;var _e=new WeakMap,me=new WeakMap,ie=new WeakMap;r.ProgressBar=class oe{constructor(Ce){if($(this,_e,{writable:!0,value:null}),$(this,me,{writable:!0,value:0}),$(this,ie,{writable:!0,value:!0}),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const xe=document.getElementById(Ce);T(this,_e,xe.classList)}get percent(){return w(this,me)}set percent(Ce){T(this,me,function de(fe,Ce,xe){return Math.min(Math.max(fe,Ce),xe)}(Ce,0,100)),isNaN(Ce)?w(this,_e).add("indeterminate"):(w(this,_e).remove("indeterminate"),ue.setProperty("--progressBar-percent",`${w(this,me)}%`))}setWidth(Ce){if(!Ce)return;const Fe=Ce.parentNode.offsetWidth-Ce.offsetWidth;Fe>0&&ue.setProperty("--progressBar-end-offset",`${Fe}px`)}hide(){w(this,ie)&&(T(this,ie,!1),w(this,_e).add("hidden"))}show(){w(this,ie)||(T(this,ie,!0),w(this,_e).remove("hidden"))}}},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.StructTreeLayerBuilder=void 0;const A={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},y=/^H(\d+)$/;r.StructTreeLayerBuilder=class b{constructor({pdfPage:p}){this.pdfPage=p}render(p){return this._walk(p)}_setAttributes(p,t){void 0!==p.alt&&t.setAttribute("aria-label",p.alt),void 0!==p.id&&t.setAttribute("aria-owns",p.id),void 0!==p.lang&&t.setAttribute("lang",p.lang)}_walk(p){if(!p)return null;const t=document.createElement("span");if("role"in p){const{role:e}=p,a=e.match(y);a?(t.setAttribute("role","heading"),t.setAttribute("aria-level",a[1])):A[e]&&t.setAttribute("role",A[e])}if(this._setAttributes(p,t),p.children)if(1===p.children.length&&"id"in p.children[0])this._setAttributes(p.children[0],t);else for(const e of p.children)t.append(this._walk(e));return t}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerBuilder=void 0;var y=A(3);r.TextLayerBuilder=class F{constructor({textLayerDiv:t,eventBus:e,pageIndex:a,viewport:m,highlighter:C=null,enhanceTextSelection:E=!1,accessibilityManager:u=null}){this.textLayerDiv=t,this.eventBus=e,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=a+1,this.viewport=m,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=C,this.enhanceTextSelection=E,this.accessibilityManager=u,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.append(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){var e,a;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null===(e=this.highlighter)||void 0===e||e.setTextMapping(this.textDivs,this.textContentItemsStr),null===(a=this.accessibilityManager)||void 0===a||a.setTextMapping(this.textDivs);const m=document.createDocumentFragment();this.textLayerRenderTask=(0,y.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:m,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var C,E;this.textLayerDiv.append(m),this._finishRendering(),null===(C=this.highlighter)||void 0===C||C.enable(),null===(E=this.accessibilityManager)||void 0===E||E.enable()},function(C){})}cancel(){var t,e;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null===(t=this.highlighter)||void 0===t||t.disable(),null===(e=this.accessibilityManager)||void 0===e||e.disable()}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_bindMouse(){const t=this.textLayerDiv;let e=null;t.addEventListener("mousedown",a=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(e&&(clearTimeout(e),e=null));const m=t.querySelector(".endOfContent");if(!m)return;let C=a.target!==t;if(C=C&&"none"!==window.getComputedStyle(m).getPropertyValue("-moz-user-select"),C){const E=t.getBoundingClientRect(),u=Math.max(0,(a.pageY-E.top)/E.height);m.style.top=(100*u).toFixed(2)+"%"}m.classList.add("active")}),t.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(e=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),e=null},300));const a=t.querySelector(".endOfContent");a&&(a.style.top="",a.classList.remove("active"))})}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayerBuilder=void 0;var y=A(3);r.XfaLayerBuilder=class b{constructor({pageDiv:p,pdfPage:t,annotationStorage:e=null,linkService:a,xfaHtml:m=null}){this.pageDiv=p,this.pdfPage=t,this.annotationStorage=e,this.linkService=a,this.xfaHtml=m,this.div=null,this._cancelled=!1}render(p,t="display"){if("print"===t){const e={viewport:p.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},a=document.createElement("div");this.pageDiv.append(a),e.div=a;const m=y.XfaLayer.render(e);return Promise.resolve(m)}return this.pdfPage.getXfa().then(e=>{if(this._cancelled||!e)return{textDivs:[]};const a={viewport:p.clone({dontFlip:!0}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?y.XfaLayer.update(a):(this.div=document.createElement("div"),this.pageDiv.append(this.div),a.div=this.div,y.XfaLayer.render(a))}).catch(e=>{console.error(e)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFViewer=r.PDFSinglePageViewer=void 0;var y=A(7),b=A(12);r.PDFViewer=class F extends b.BaseViewer{},r.PDFSinglePageViewer=class p extends b.BaseViewer{_resetView(){super._resetView(),this._scrollMode=y.ScrollMode.PAGE,this._spreadMode=y.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}},(S,r,A)=>{let y;Object.defineProperty(r,"__esModule",{value:!0}),r.PagesCountLimit=r.PDFPageViewBuffer=r.BaseViewer=void 0;var b=A(3),F=A(7),p=A(2),t=A(5),e=A(4),a=A(13),m=A(16),C=A(6),E=A(8),u=A(17),g=A(9),R=A(10);const z="enablePermissions",W={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function N(ye){return Object.values(b.AnnotationEditorType).includes(ye)&&ye!==b.AnnotationEditorType.DISABLE}r.PagesCountLimit=W;var U=new WeakMap,Q=new WeakMap,re=new WeakSet;y=Symbol.iterator;class j{constructor(G){o(this,re),$(this,U,{writable:!0,value:new Set}),$(this,Q,{writable:!0,value:0}),T(this,Q,G)}push(G){const ee=w(this,U);ee.has(G)&&ee.delete(G),ee.add(G),ee.size>w(this,Q)&&B(this,re,h).call(this)}resize(G,ee=null){T(this,Q,G);const ne=w(this,U);if(ee){const J=ne.size;let ae=1;for(const ge of ne)if(ee.has(ge.id)&&(ne.delete(ge),ne.add(ge)),++ae>J)break}for(;ne.size>w(this,Q);)B(this,re,h).call(this)}has(G){return w(this,U).has(G)}[y](){return w(this,U).keys()}}function h(){const ye=w(this,U).keys().next().value;null==ye||ye.destroy(),w(this,U).delete(ye)}r.PDFPageViewBuffer=j;var n=new WeakMap,_=new WeakMap,d=new WeakMap,f=new WeakMap,i=new WeakMap,c=new WeakMap,l=new WeakMap,P=new WeakMap,x=new WeakSet,H=new WeakSet,K=new WeakSet,se=new WeakSet,te=new WeakSet,pe=new WeakSet,le=new WeakSet,ue=new WeakSet,de=new WeakSet;class _e{constructor(G){var ee,ne,J,ae,ge;if(o(this,de),o(this,ue),o(this,le),o(this,pe),o(this,te),o(this,se),o(this,K),o(this,H),o(this,x),$(this,n,{writable:!0,value:null}),$(this,_,{writable:!0,value:b.AnnotationEditorType.DISABLE}),$(this,d,{writable:!0,value:null}),$(this,f,{writable:!0,value:b.AnnotationMode.ENABLE_FORMS}),$(this,i,{writable:!0,value:!1}),$(this,c,{writable:!0,value:0}),$(this,l,{writable:!0,value:null}),$(this,P,{writable:!0,value:null}),this.constructor===_e)throw new Error("Cannot initialize BaseViewer.");const Z="2.16.105";if(b.version!==Z)throw new Error(`The API version "${b.version}" does not match the Viewer version "${Z}".`);if(this.container=G.container,this.viewer=G.viewer||G.container.firstElementChild,"DIV"!==(null===(ee=this.container)||void 0===ee?void 0:ee.tagName.toUpperCase())||"DIV"!==(null===(ne=this.viewer)||void 0===ne?void 0:ne.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=G.eventBus,this.linkService=G.linkService||new C.SimpleLinkService,this.downloadManager=G.downloadManager||null,this.findController=G.findController||null,this._scriptingManager=G.scriptingManager||null,this.removePageBorders=G.removePageBorders||!1,this.textLayerMode=null!==(J=G.textLayerMode)&&void 0!==J?J:F.TextLayerMode.ENABLE,T(this,f,null!==(ae=G.annotationMode)&&void 0!==ae?ae:b.AnnotationMode.ENABLE_FORMS),T(this,_,null!==(ge=G.annotationEditorMode)&&void 0!==ge?ge:b.AnnotationEditorType.DISABLE),this.imageResourcesPath=G.imageResourcesPath||"",this.enablePrintAutoRotate=G.enablePrintAutoRotate||!1,this.renderer=G.renderer||F.RendererType.CANVAS,this.useOnlyCssZoom=G.useOnlyCssZoom||!1,this.maxCanvasPixels=G.maxCanvasPixels,this.l10n=G.l10n||e.NullL10n,T(this,i,G.enablePermissions||!1),this.pageColors=G.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!G.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new m.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=G.renderingQueue,this.scroll=(0,F.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=F.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(G){return this._pages[G]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(G){return null==G?void 0:G.pdfPage})}get renderForms(){return w(this,f)===b.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(G){if(!Number.isInteger(G))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(G,!0)||console.error(`currentPageNumber: "${G}" is not a valid page.`))}_setCurrentPageNumber(G,ee=!1){var ne,J;if(this._currentPageNumber===G)return ee&&B(this,pe,Me).call(this),!0;if(!(0<G&&G<=this.pagesCount))return!1;const ae=this._currentPageNumber;return this._currentPageNumber=G,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:G,pageLabel:null!==(ne=null===(J=this._pageLabels)||void 0===J?void 0:J[G-1])&&void 0!==ne?ne:null,previous:ae}),ee&&B(this,pe,Me).call(this),!0}get currentPageLabel(){var G,ee;return null!==(G=null===(ee=this._pageLabels)||void 0===ee?void 0:ee[this._currentPageNumber-1])&&void 0!==G?G:null}set currentPageLabel(G){if(!this.pdfDocument)return;let ee=0|G;if(this._pageLabels){const ne=this._pageLabels.indexOf(G);ne>=0&&(ee=ne+1)}this._setCurrentPageNumber(ee,!0)||console.error(`currentPageLabel: "${G}" is not a valid page.`)}get currentScale(){return this._currentScale!==F.UNKNOWN_SCALE?this._currentScale:F.DEFAULT_SCALE}set currentScale(G){if(isNaN(G))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(G,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(G){this.pdfDocument&&this._setScale(G,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(G){if(!(0,F.isValidRotation)(G))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((G%=360)<0&&(G+=360),this._pagesRotation===G))return;this._pagesRotation=G;const ee=this._currentPageNumber,ne={rotation:G};for(const J of this._pages)J.update(ne);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:G,pageNumber:ee}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(G){var ee=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),w(this,d)&&(w(this,d).destroy(),T(this,d,null))),this.pdfDocument=G,!G)return;const ne=G.isPureXfa,J=G.numPages,ae=G.getPage(1),ge=G.getOptionalContentConfig(),Z=w(this,i)?G.getPermissions():Promise.resolve();if(J>W.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const X=this._scrollMode=F.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:X})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:J})},()=>{}),this._onBeforeDraw=X=>{const Y=this._pages[X.pageNumber-1];Y&&w(this,n).push(Y)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=X=>{X.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:X.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,w(this,P)&&(document.removeEventListener("visibilitychange",w(this,P)),T(this,P,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([ae,Z]).then(([X,Y])=>{if(G!==this.pdfDocument)return;this._firstPageCapability.resolve(X),this._optionalContentConfigPromise=ge;const{annotationEditorMode:Ae,annotationMode:be,textLayerMode:he}=B(this,x,me).call(this,Y);if(Ae!==b.AnnotationEditorType.DISABLE){const De=Ae;ne?console.warn("Warning: XFA-editing is not implemented."):N(De)?(T(this,d,new b.AnnotationEditorUIManager(this.container,this.eventBus)),De!==b.AnnotationEditorType.NONE&&w(this,d).updateMode(De)):console.error(`Invalid AnnotationEditor mode: ${De}`)}const ce=this._scrollMode===F.ScrollMode.PAGE?null:this.viewer,ve=this.currentScale,Ee=X.getViewport({scale:ve*b.PixelsPerInch.PDF_TO_CSS_UNITS}),Se=he===F.TextLayerMode.DISABLE||ne?null:this,we=be!==b.AnnotationMode.DISABLE?this:null,ke=ne?this:null,Te=w(this,d)?this:null;for(let De=1;De<=J;++De){const Le=new a.PDFPageView({container:ce,eventBus:this.eventBus,id:De,scale:ve,defaultViewport:Ee.clone(),optionalContentConfigPromise:ge,renderingQueue:this.renderingQueue,textLayerFactory:Se,textLayerMode:he,annotationLayerFactory:we,annotationMode:be,xfaLayerFactory:ke,annotationEditorLayerFactory:Te,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Le)}const Re=this._pages[0];Re&&(Re.setPdfPage(X),this.linkService.cachePageRef(1,X.ref)),this._scrollMode===F.ScrollMode.PAGE?B(this,K,oe).call(this):this._spreadMode!==F.SpreadMode.NONE&&this._updateSpreadMode(),B(this,H,ie).call(this).then(k(function*(){if(ee.findController&&ee.findController.setDocument(G),ee._scriptingManager&&ee._scriptingManager.setDocument(G),w(ee,d)&&ee.eventBus.dispatch("annotationeditormodechanged",{source:ee,mode:w(ee,_)}),G.loadingParams.disableAutoFetch||J>W.FORCE_LAZY_PAGE_INIT)return void ee._pagesCapability.resolve();let De=J-1;if(De<=0)ee._pagesCapability.resolve();else for(let Le=2;Le<=J;++Le){const Ne=G.getPage(Le).then(We=>{const Ge=ee._pages[Le-1];Ge.pdfPage||Ge.setPdfPage(We),ee.linkService.cachePageRef(Le,We.ref),0==--De&&ee._pagesCapability.resolve()},We=>{console.error(`Unable to get page ${Le} to initialize viewer`,We),0==--De&&ee._pagesCapability.resolve()});Le%W.PAUSE_EAGER_PAGE_INIT==0&&(yield Ne)}})),this.eventBus.dispatch("pagesinit",{source:this}),G.getMetadata().then(({info:De})=>{G===this.pdfDocument&&De.Language&&(this.viewer.lang=De.Language)}),this.defaultRenderingQueue&&this.update()}).catch(X=>{console.error("Unable to initialize viewer",X),this._pagesCapability.reject(X)})}setPageLabels(G){if(this.pdfDocument){G?Array.isArray(G)&&this.pdfDocument.numPages===G.length?this._pageLabels=G:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let J=0,ae=this._pages.length;J<ae;J++){var ee,ne;this._pages[J].setPageLabel(null!==(ee=null===(ne=this._pageLabels)||void 0===ne?void 0:ne[J])&&void 0!==ee?ee:null)}}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=F.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,T(this,n,new j(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,b.createPromiseCapability)(),this._onePageRenderedCapability=(0,b.createPromiseCapability)(),this._pagesCapability=(0,b.createPromiseCapability)(),this._scrollMode=F.ScrollMode.VERTICAL,this._previousScrollMode=F.ScrollMode.UNKNOWN,this._spreadMode=F.SpreadMode.NONE,T(this,l,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),w(this,P)&&(document.removeEventListener("visibilitychange",w(this,P)),T(this,P,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(z)}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(G,ee,ne=!1,J=!1){if(this._currentScaleValue=ee.toString(),B(this,te,Be).call(this,G))return void(J&&this.eventBus.dispatch("scalechanging",{source:this,scale:G,presetValue:ee}));F.docStyle.setProperty("--scale-factor",G*b.PixelsPerInch.PDF_TO_CSS_UNITS);const ae={scale:G};for(const ge of this._pages)ge.update(ae);if(this._currentScale=G,!ne){let Z,ge=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ge=this._location.pageNumber,Z=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ge,destArray:Z,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:G,presetValue:J?ee:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==F.SpreadMode.NONE&&this._scrollMode!==F.ScrollMode.HORIZONTAL?2:1}_setScale(G,ee=!1){let ne=parseFloat(G);if(ne>0)this._setScaleUpdatePages(ne,G,ee,!1);else{const J=this._pages[this._currentPageNumber-1];if(!J)return;let ae=F.SCROLLBAR_PADDING,ge=F.VERTICAL_PADDING;this.isInPresentationMode?ae=ge=4:this.removePageBorders?ae=ge=0:this._scrollMode===F.ScrollMode.HORIZONTAL&&([ae,ge]=[ge,ae]);const Z=(this.container.clientWidth-ae)/J.width*J.scale/this._pageWidthScaleFactor,X=(this.container.clientHeight-ge)/J.height*J.scale;switch(G){case"page-actual":ne=1;break;case"page-width":ne=Z;break;case"page-height":ne=X;break;case"page-fit":ne=Math.min(Z,X);break;case"auto":const Y=(0,F.isPortraitOrientation)(J)?Z:Math.min(X,Z);ne=Math.min(F.MAX_AUTO_SCALE,Y);break;default:return void console.error(`_setScale: "${G}" is an unknown zoom value.`)}this._setScaleUpdatePages(ne,G,ee,!0)}}pageLabelToPageNumber(G){if(!this._pageLabels)return null;const ee=this._pageLabels.indexOf(G);return ee<0?null:ee+1}scrollPageIntoView({pageNumber:G,destArray:ee=null,allowNegativeOffset:ne=!1,ignoreDestinationZoom:J=!1}){if(!this.pdfDocument)return;const ae=Number.isInteger(G)&&this._pages[G-1];if(!ae)return void console.error(`scrollPageIntoView: "${G}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!ee)return void this._setCurrentPageNumber(G,!0);let Ae,be,ge=0,Z=0,X=0,Y=0;const he=ae.rotation%180!=0,ce=(he?ae.height:ae.width)/ae.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS,ve=(he?ae.width:ae.height)/ae.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;let Ee=0;switch(ee[1].name){case"XYZ":ge=ee[2],Z=ee[3],Ee=ee[4],ge=null!==ge?ge:0,Z=null!==Z?Z:ve;break;case"Fit":case"FitB":Ee="page-fit";break;case"FitH":case"FitBH":Z=ee[2],Ee="page-width",null===Z&&this._location?(ge=this._location.left,Z=this._location.top):("number"!=typeof Z||Z<0)&&(Z=ve);break;case"FitV":case"FitBV":ge=ee[2],X=ce,Y=ve,Ee="page-height";break;case"FitR":ge=ee[2],Z=ee[3],X=ee[4]-ge,Y=ee[5]-Z,Ae=(this.container.clientWidth-(this.removePageBorders?0:F.SCROLLBAR_PADDING))/X/b.PixelsPerInch.PDF_TO_CSS_UNITS,be=(this.container.clientHeight-(this.removePageBorders?0:F.VERTICAL_PADDING))/Y/b.PixelsPerInch.PDF_TO_CSS_UNITS,Ee=Math.min(Math.abs(Ae),Math.abs(be));break;default:return void console.error(`scrollPageIntoView: "${ee[1].name}" is not a valid destination type.`)}if(J||(Ee&&Ee!==this._currentScale?this.currentScaleValue=Ee:this._currentScale===F.UNKNOWN_SCALE&&(this.currentScaleValue=F.DEFAULT_SCALE_VALUE)),"page-fit"===Ee&&!ee[4])return void B(this,se,Pe).call(this,ae);const Se=[ae.viewport.convertToViewportPoint(ge,Z),ae.viewport.convertToViewportPoint(ge+X,Z+Y)];let we=Math.min(Se[0][0],Se[1][0]),ke=Math.min(Se[0][1],Se[1][1]);ne||(we=Math.max(we,0),ke=Math.max(ke,0)),B(this,se,Pe).call(this,ae,{left:we,top:ke})}_updateLocation(G){const ee=this._currentScale,ne=this._currentScaleValue,J=parseFloat(ne)===ee?Math.round(1e4*ee)/100:ne,ae=G.id,Z=this.container,X=this._pages[ae-1].getPagePoint(Z.scrollLeft-G.x,Z.scrollTop-G.y),Y=Math.round(X[0]),Ae=Math.round(X[1]);let be=`#page=${ae}`;this.isInPresentationMode||(be+=`&zoom=${J},${Y},${Ae}`),this._location={pageNumber:ae,scale:J,top:Ae,left:Y,rotation:this._pagesRotation,pdfOpenParams:be}}update(){const G=this._getVisiblePages(),ee=G.views,ne=ee.length;if(0===ne)return;const J=Math.max(10,2*ne+1);w(this,n).resize(J,G.ids),this.renderingQueue.renderHighestPriority(G);const ae=this._spreadMode===F.SpreadMode.NONE&&(this._scrollMode===F.ScrollMode.PAGE||this._scrollMode===F.ScrollMode.VERTICAL),ge=this._currentPageNumber;let Z=!1;for(const X of ee){if(X.percent<100)break;if(X.id===ge&&ae){Z=!0;break}}this._setCurrentPageNumber(Z?ge:ee[0].id),this._updateLocation(G.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(G){return this.container.contains(G)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===F.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===F.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const G=this._scrollMode===F.ScrollMode.PAGE?w(this,l).pages:this._pages,ee=this._scrollMode===F.ScrollMode.HORIZONTAL;return(0,F.getVisibleElements)({scrollEl:this.container,views:G,sortByVisibility:!0,horizontal:ee,rtl:ee&&this._isContainerRtl})}isPageVisible(G){return!!this.pdfDocument&&(Number.isInteger(G)&&G>0&&G<=this.pagesCount?this._getVisiblePages().ids.has(G):(console.error(`isPageVisible: "${G}" is not a valid page.`),!1))}isPageCached(G){if(!this.pdfDocument)return!1;if(!(Number.isInteger(G)&&G>0&&G<=this.pagesCount))return console.error(`isPageCached: "${G}" is not a valid page.`),!1;const ee=this._pages[G-1];return w(this,n).has(ee)}cleanup(){for(const G of this._pages)G.renderingState!==F.RenderingStates.FINISHED&&G.reset()}_cancelRendering(){for(const G of this._pages)G.cancelRendering()}forceRendering(G){const ee=G||this._getVisiblePages(),ne=B(this,ue,xe).call(this,ee),ae=this.renderingQueue.getHighestPriority(ee,this._pages,ne,this._spreadMode!==F.SpreadMode.NONE&&this._scrollMode!==F.ScrollMode.HORIZONTAL);return B(this,de,Fe).call(this,ee.ids),!!ae&&(B(this,le,fe).call(this,ae).then(()=>{this.renderingQueue.renderView(ae)}),!0)}createTextLayerBuilder({textLayerDiv:G,pageIndex:ee,viewport:ne,enhanceTextSelection:J=!1,eventBus:ae,highlighter:ge,accessibilityManager:Z=null}){return new g.TextLayerBuilder({textLayerDiv:G,eventBus:ae,pageIndex:ee,viewport:ne,enhanceTextSelection:!this.isInPresentationMode&&J,highlighter:ge,accessibilityManager:Z})}createTextHighlighter({pageIndex:G,eventBus:ee}){return new u.TextHighlighter({eventBus:ee,pageIndex:G,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:G,pdfPage:ee,annotationStorage:ne=(ce=>null===(ce=this.pdfDocument)||void 0===ce?void 0:ce.annotationStorage)(),imageResourcesPath:J="",renderForms:ae=!0,l10n:ge=e.NullL10n,enableScripting:Z=this.enableScripting,hasJSActionsPromise:X=(ce=>null===(ce=this.pdfDocument)||void 0===ce?void 0:ce.hasJSActions())(),mouseState:Y=(ce=>null===(ce=this._scriptingManager)||void 0===ce?void 0:ce.mouseState)(),fieldObjectsPromise:Ae=(ce=>null===(ce=this.pdfDocument)||void 0===ce?void 0:ce.getFieldObjects())(),annotationCanvasMap:be=null,accessibilityManager:he=null}){return new t.AnnotationLayerBuilder({pageDiv:G,pdfPage:ee,annotationStorage:ne,imageResourcesPath:J,renderForms:ae,linkService:this.linkService,downloadManager:this.downloadManager,l10n:ge,enableScripting:Z,hasJSActionsPromise:X,mouseState:Y,fieldObjectsPromise:Ae,annotationCanvasMap:be,accessibilityManager:he})}createAnnotationEditorLayerBuilder({uiManager:G=w(this,d),pageDiv:ee,pdfPage:ne,accessibilityManager:J=null,l10n:ae,annotationStorage:ge=(Z=>null===(Z=this.pdfDocument)||void 0===Z?void 0:Z.annotationStorage)()}){return new p.AnnotationEditorLayerBuilder({uiManager:G,pageDiv:ee,pdfPage:ne,annotationStorage:ge,accessibilityManager:J,l10n:ae})}createXfaLayerBuilder({pageDiv:G,pdfPage:ee,annotationStorage:ne=(J=>null===(J=this.pdfDocument)||void 0===J?void 0:J.annotationStorage)()}){return new R.XfaLayerBuilder({pageDiv:G,pdfPage:ee,annotationStorage:ne,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:G}){return new E.StructTreeLayerBuilder({pdfPage:G})}get hasEqualPageSizes(){const G=this._pages[0];for(let ee=1,ne=this._pages.length;ee<ne;++ee){const J=this._pages[ee];if(J.width!==G.width||J.height!==G.height)return!1}return!0}getPagesOverview(){return this._pages.map(G=>{const ee=G.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,F.isPortraitOrientation)(ee)?{width:ee.width,height:ee.height,rotation:ee.rotation}:{width:ee.height,height:ee.width,rotation:(ee.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(G){if(!(G instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${G}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=G;const ee={optionalContentConfigPromise:G};for(const ne of this._pages)ne.update(ee);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:G})}get scrollMode(){return this._scrollMode}set scrollMode(G){if(this._scrollMode!==G){if(!(0,F.isValidScrollMode)(G))throw new Error(`Invalid scroll mode: ${G}`);this.pagesCount>W.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=G,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:G}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(G=null){const ee=this._scrollMode,ne=this.viewer;ne.classList.toggle("scrollHorizontal",ee===F.ScrollMode.HORIZONTAL),ne.classList.toggle("scrollWrapped",ee===F.ScrollMode.WRAPPED),this.pdfDocument&&G&&(ee===F.ScrollMode.PAGE?B(this,K,oe).call(this):this._previousScrollMode===F.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(G,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(G){if(this._spreadMode!==G){if(!(0,F.isValidSpreadMode)(G))throw new Error(`Invalid spread mode: ${G}`);this._spreadMode=G,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:G}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(G=null){if(!this.pdfDocument)return;const ee=this.viewer,ne=this._pages;if(this._scrollMode===F.ScrollMode.PAGE)B(this,K,oe).call(this);else if(ee.textContent="",this._spreadMode===F.SpreadMode.NONE)for(const J of this._pages)ee.append(J.div);else{const J=this._spreadMode-1;let ae=null;for(let ge=0,Z=ne.length;ge<Z;++ge)null===ae?(ae=document.createElement("div"),ae.className="spread",ee.append(ae)):ge%2===J&&(ae=ae.cloneNode(!1),ee.append(ae)),ae.append(ne[ge].div)}G&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(G,!0),this.update())}_getPageAdvance(G,ee=!1){switch(this._scrollMode){case F.ScrollMode.WRAPPED:{const{views:ne}=this._getVisiblePages(),J=new Map;for(const{id:ae,y:ge,percent:Z,widthPercent:X}of ne){if(0===Z||X<100)continue;let Y=J.get(ge);Y||J.set(ge,Y||(Y=[])),Y.push(ae)}for(const ae of J.values()){const ge=ae.indexOf(G);if(-1===ge)continue;const Z=ae.length;if(1===Z)break;if(ee)for(let X=ge-1,Y=0;X>=Y;X--){const be=ae[X+1]-1;if(ae[X]<be)return G-be}else for(let X=ge+1,Y=Z;X<Y;X++){const be=ae[X-1]+1;if(ae[X]>be)return be-G}if(ee){const X=ae[0];if(X<G)return G-X+1}else{const X=ae[Z-1];if(X>G)return X-G+1}break}break}case F.ScrollMode.HORIZONTAL:break;case F.ScrollMode.PAGE:case F.ScrollMode.VERTICAL:{if(this._spreadMode===F.SpreadMode.NONE)break;const ne=this._spreadMode-1;if(ee&&G%2!==ne)break;if(!ee&&G%2===ne)break;const{views:J}=this._getVisiblePages(),ae=ee?G-1:G+1;for(const{id:ge,percent:Z,widthPercent:X}of J)if(ge===ae){if(Z>0&&100===X)return 2;break}break}}return 1}nextPage(){const G=this._currentPageNumber,ee=this.pagesCount;if(G>=ee)return!1;const ne=this._getPageAdvance(G,!1)||1;return this.currentPageNumber=Math.min(G+ne,ee),!0}previousPage(){const G=this._currentPageNumber;if(G<=1)return!1;const ee=this._getPageAdvance(G,!0)||1;return this.currentPageNumber=Math.max(G-ee,1),!0}increaseScale(G=1){let ee=this._currentScale;do{ee=(ee*F.DEFAULT_SCALE_DELTA).toFixed(2),ee=Math.ceil(10*ee)/10,ee=Math.min(F.MAX_SCALE,ee)}while(--G>0&&ee<F.MAX_SCALE);this.currentScaleValue=ee}decreaseScale(G=1){let ee=this._currentScale;do{ee=(ee/F.DEFAULT_SCALE_DELTA).toFixed(2),ee=Math.floor(10*ee)/10,ee=Math.max(F.MIN_SCALE,ee)}while(--G>0&&ee>F.MIN_SCALE);this.currentScaleValue=ee}updateContainerHeightCss(){const G=this.container.clientHeight;G!==w(this,c)&&(T(this,c,G),F.docStyle.setProperty("--viewer-container-height",`${G}px`))}get annotationEditorMode(){return w(this,d)?w(this,_):b.AnnotationEditorType.DISABLE}set annotationEditorMode(G){if(!w(this,d))throw new Error("The AnnotationEditor is not enabled.");if(w(this,_)!==G){if(!N(G))throw new Error(`Invalid AnnotationEditor mode: ${G}`);this.pdfDocument&&(T(this,_,G),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:G}),w(this,d).updateMode(G))}}set annotationEditorParams({type:G,value:ee}){if(!w(this,d))throw new Error("The AnnotationEditor is not enabled.");w(this,d).updateParams(G,ee)}refresh(){if(!this.pdfDocument)return;const G={};for(const ee of this._pages)ee.update(G);this.update()}}function me(ye){const G={annotationEditorMode:w(this,_),annotationMode:w(this,f),textLayerMode:this.textLayerMode};return ye&&(ye.includes(b.PermissionFlag.COPY)||this.viewer.classList.add(z),ye.includes(b.PermissionFlag.MODIFY_CONTENTS)||(G.annotationEditorMode=b.AnnotationEditorType.DISABLE),!ye.includes(b.PermissionFlag.MODIFY_ANNOTATIONS)&&!ye.includes(b.PermissionFlag.FILL_INTERACTIVE_FORMS)&&w(this,f)===b.AnnotationMode.ENABLE_FORMS&&(G.annotationMode=b.AnnotationMode.ENABLE)),G}function ie(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const ye=new Promise(G=>{T(this,P,()=>{"hidden"===document.visibilityState&&(G(),document.removeEventListener("visibilitychange",w(this,P)),T(this,P,null))}),document.addEventListener("visibilitychange",w(this,P))});return Promise.race([this._onePageRenderedCapability.promise,ye])}function oe(){if(this._scrollMode!==F.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const ye=this._currentPageNumber,G=w(this,l),ee=this.viewer;if(ee.textContent="",G.pages.length=0,this._spreadMode!==F.SpreadMode.NONE||this.isInPresentationMode){const ne=new Set,J=this._spreadMode-1;-1===J?ne.add(ye-1):ye%2!==J?(ne.add(ye-1),ne.add(ye)):(ne.add(ye-2),ne.add(ye-1));const ae=document.createElement("div");if(ae.className="spread",this.isInPresentationMode){const ge=document.createElement("div");ge.className="dummyPage",ae.append(ge)}for(const ge of ne){const Z=this._pages[ge];Z&&(ae.append(Z.div),G.pages.push(Z))}ee.append(ae)}else{const ne=this._pages[ye-1];ee.append(ne.div),G.pages.push(ne)}G.scrollDown=ye>=G.previousPageNumber,G.previousPageNumber=ye}function Pe(ye,G=null){const{div:ee,id:ne}=ye;if(this._scrollMode===F.ScrollMode.PAGE&&(this._setCurrentPageNumber(ne),B(this,K,oe).call(this),this.update()),!G&&!this.isInPresentationMode){const J=ee.offsetLeft+ee.clientLeft,ae=J+ee.clientWidth,{scrollLeft:ge,clientWidth:Z}=this.container;(this._scrollMode===F.ScrollMode.HORIZONTAL||J<ge||ae>ge+Z)&&(G={left:0,top:0})}(0,F.scrollIntoView)(ee,G)}function Be(ye){return ye===this._currentScale||Math.abs(ye-this._currentScale)<1e-15}function Me(){const ye=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),B(this,se,Pe).call(this,ye)}function fe(ye){return Ce.apply(this,arguments)}function Ce(){return(Ce=k(function*(ye){if(ye.pdfPage)return ye.pdfPage;try{var G,ee;const ne=yield this.pdfDocument.getPage(ye.id);return ye.pdfPage||ye.setPdfPage(ne),null!==(G=(ee=this.linkService)._cachedPageNumber)&&void 0!==G&&G.call(ee,ne.ref)||this.linkService.cachePageRef(ye.id,ne.ref),ne}catch(ne){return console.error("Unable to get page for page view",ne),null}})).apply(this,arguments)}function xe(ye){var G,ee;if(1===(null===(G=ye.first)||void 0===G?void 0:G.id))return!0;if((null===(ee=ye.last)||void 0===ee?void 0:ee.id)===this.pagesCount)return!1;switch(this._scrollMode){case F.ScrollMode.PAGE:return w(this,l).scrollDown;case F.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function Fe(ye){for(const G of ye){const ee=this._pages[G-1];null==ee||ee.toggleLoadingIconSpinner(!0)}for(const G of w(this,n))ye.has(G.id)||G.toggleLoadingIconSpinner(!1)}r.BaseViewer=_e},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFPageView=void 0;var y=A(3),b=A(7),F=A(14),p=A(4),t=A(15);const e=F.compatibilityParams.maxCanvasPixels||16777216;var a=new WeakMap,m=new WeakMap;r.PDFPageView=class C{constructor(u){var g,R,L,z;$(this,a,{writable:!0,value:y.AnnotationMode.ENABLE_FORMS}),$(this,m,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});const W=u.container,N=u.defaultViewport;this.id=u.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=u.scale||b.DEFAULT_SCALE,this.viewport=N,this.pdfPageRotate=N.rotation,this._optionalContentConfigPromise=u.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!==(g=u.textLayerMode)&&void 0!==g?g:b.TextLayerMode.ENABLE,T(this,a,null!==(R=u.annotationMode)&&void 0!==R?R:y.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=u.imageResourcesPath||"",this.useOnlyCssZoom=u.useOnlyCssZoom||!1,this.maxCanvasPixels=u.maxCanvasPixels||e,this.pageColors=u.pageColors||null,this.eventBus=u.eventBus,this.renderingQueue=u.renderingQueue,this.textLayerFactory=u.textLayerFactory,this.annotationLayerFactory=u.annotationLayerFactory,this.annotationEditorLayerFactory=u.annotationEditorLayerFactory,this.xfaLayerFactory=u.xfaLayerFactory,this.textHighlighter=null===(L=u.textHighlighterFactory)||void 0===L?void 0:L.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=u.structTreeLayerFactory,this.renderer=u.renderer||b.RendererType.CANVAS,this.l10n=u.l10n||p.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=b.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null!==(z=this.renderingQueue)&&void 0!==z&&z.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const U=document.createElement("div");if(U.className="page",U.style.width=Math.floor(this.viewport.width)+"px",U.style.height=Math.floor(this.viewport.height)+"px",U.setAttribute("data-page-number",this.id),U.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Q=>{U.setAttribute("aria-label",Q)}),this.div=U,null==W||W.append(U),this._isStandalone){const{optionalContentConfigPromise:Q}=u;Q&&Q.then(re=>{Q===this._optionalContentConfigPromise&&(w(this,m).initialOptionalContent=re.hasInitialVisibility)})}}setPdfPage(u){this.pdfPage=u,this.pdfPageRotate=u.rotate,this.viewport=u.getViewport({scale:this.scale*y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var u=this;return k(function*(){let g=null;try{yield u.annotationLayer.render(u.viewport,"display")}catch(R){console.error(`_renderAnnotationLayer: "${R}".`),g=R}finally{u.eventBus.dispatch("annotationlayerrendered",{source:u,pageNumber:u.id,error:g})}})()}_renderAnnotationEditorLayer(){var u=this;return k(function*(){let g=null;try{yield u.annotationEditorLayer.render(u.viewport,"display")}catch(R){console.error(`_renderAnnotationEditorLayer: "${R}".`),g=R}finally{u.eventBus.dispatch("annotationeditorlayerrendered",{source:u,pageNumber:u.id,error:g})}})()}_renderXfaLayer(){var u=this;return k(function*(){let g=null;try{const R=yield u.xfaLayer.render(u.viewport,"display");u.textHighlighter&&u._buildXfaTextContentItems(R.textDivs)}catch(R){console.error(`_renderXfaLayer: "${R}".`),g=R}finally{u.eventBus.dispatch("xfalayerrendered",{source:u,pageNumber:u.id,error:g})}})()}_buildXfaTextContentItems(u){var g=this;return k(function*(){const R=yield g.pdfPage.getTextContent(),L=[];for(const z of R.items)L.push(z.str);g.textHighlighter.setTextMapping(u,L),g.textHighlighter.enable()})()}_resetZoomLayer(u=!1){if(!this.zoomLayer)return;const g=this.zoomLayer.firstChild;this.paintedViewportMap.delete(g),g.width=0,g.height=0,u&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:u=!1,keepAnnotationLayer:g=!1,keepAnnotationEditorLayer:R=!1,keepXfaLayer:L=!1}={}){var z,W,N;this.cancelRendering({keepAnnotationLayer:g,keepAnnotationEditorLayer:R,keepXfaLayer:L}),this.renderingState=b.RenderingStates.INITIAL;const U=this.div;U.style.width=Math.floor(this.viewport.width)+"px",U.style.height=Math.floor(this.viewport.height)+"px";const Q=U.childNodes,re=u&&this.zoomLayer||null,j=g&&(null===(z=this.annotationLayer)||void 0===z?void 0:z.div)||null,h=R&&(null===(W=this.annotationEditorLayer)||void 0===W?void 0:W.div)||null,n=L&&(null===(N=this.xfaLayer)||void 0===N?void 0:N.div)||null;for(let d=Q.length-1;d>=0;d--){const f=Q[d];switch(f){case re:case j:case h:case n:continue}f.remove()}var _;U.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),h?this.annotationEditorLayer.hide():null===(_=this.annotationEditorLayer)||void 0===_||_.destroy(),n&&this.xfaLayer.hide(),re||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(d=>{var f;null===(f=this.loadingIconDiv)||void 0===f||f.setAttribute("aria-label",d)}),U.append(this.loadingIconDiv)}update({scale:u=0,rotation:g=null,optionalContentConfigPromise:R=null}){if(this.scale=u||this.scale,"number"==typeof g&&(this.rotation=g),R instanceof Promise&&(this._optionalContentConfigPromise=R,R.then(W=>{R===this._optionalContentConfigPromise&&(w(this,m).initialOptionalContent=W.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&b.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let z=!1;if(this.canvas&&this.maxCanvasPixels>0){const W=this.outputScale;(Math.floor(this.viewport.width)*W.sx|0)*(Math.floor(this.viewport.height)*W.sy|0)>this.maxCanvasPixels&&(z=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&z)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:u=!1,keepAnnotationEditorLayer:g=!1,keepXfaLayer:R=!1}={}){var L;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!u||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!g||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||R&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(L=this.textHighlighter)||void 0===L||L.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:u,redrawAnnotationLayer:g=!1,redrawAnnotationEditorLayer:R=!1,redrawXfaLayer:L=!1}){const z=this.viewport.width,W=this.viewport.height,N=this.div;u.style.width=u.parentNode.style.width=N.style.width=Math.floor(z)+"px",u.style.height=u.parentNode.style.height=N.style.height=Math.floor(W)+"px";const U=this.viewport.rotation-this.paintedViewportMap.get(u).rotation,Q=Math.abs(U);let re=1,j=1;if((90===Q||270===Q)&&(re=W/z,j=z/W),u.style.transform=`rotate(${U}deg) scale(${re}, ${j})`,this.textLayer){const h=this.textLayer.viewport,_=Math.abs(this.viewport.rotation-h.rotation);let d=z/h.width;(90===_||270===_)&&(d=z/h.height);const f=this.textLayer.textLayerDiv;let i,c;switch(_){case 0:i=c=0;break;case 90:i=0,c="-"+f.style.height;break;case 180:i="-"+f.style.width,c="-"+f.style.height;break;case 270:i="-"+f.style.width,c=0;break;default:console.error("Bad rotation value.")}f.style.transform=`rotate(${_}deg) scale(${d}) translate(${i}, ${c})`,f.style.transformOrigin="0% 0%"}g&&this.annotationLayer&&this._renderAnnotationLayer(),R&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),L&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(u,g){return this.viewport.convertToPdfPoint(u,g)}toggleLoadingIconSpinner(u=!1){var g;null===(g=this.loadingIconDiv)||void 0===g||g.classList.toggle("notVisible",!u)}draw(){var u,g,R,L=this;this.renderingState!==b.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:z,pdfPage:W}=this;if(!W)return this.renderingState=b.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=b.RenderingStates.RUNNING;const N=document.createElement("div");N.style.width=z.style.width,N.style.height=z.style.height,N.classList.add("canvasWrapper");const U=(null===(u=this.annotationLayer)||void 0===u?void 0:u.div)||(null===(g=this.annotationEditorLayer)||void 0===g?void 0:g.div);U?U.before(N):z.append(N);let Q=null;if(this.textLayerMode!==b.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||(this._accessibilityManager=new t.TextAccessibilityManager);const _=document.createElement("div");_.className="textLayer",_.style.width=N.style.width,_.style.height=N.style.height,U?U.before(_):z.append(_),Q=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:_,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===b.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=Q,w(this,a)!==y.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:z,pdfPage:W,imageResourcesPath:this.imageResourcesPath,renderForms:w(this,a)===y.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}))),null!==(R=this.xfaLayer)&&void 0!==R&&R.div&&z.append(this.xfaLayer.div);let re=null;this.renderingQueue&&(re=_=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=b.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=b.RenderingStates.RUNNING,_()});_()});const j=function(){var _=k(function*(d=null){if(h===L.paintTask&&(L.paintTask=null),d instanceof y.RenderingCancelledException)L._renderError=null;else if(L._renderError=d,L.renderingState=b.RenderingStates.FINISHED,L.loadingIconDiv&&(L.loadingIconDiv.remove(),delete L.loadingIconDiv),L._resetZoomLayer(!0),w(L,m).regularAnnotations=!h.separateAnnots,L.eventBus.dispatch("pagerendered",{source:L,pageNumber:L.id,cssTransform:!1,timestamp:performance.now(),error:L._renderError}),d)throw d});return function(){return _.apply(this,arguments)}}(),h=this.renderer===b.RendererType.SVG?this.paintOnSvg(N):this.paintOnCanvas(N);h.onRenderContinue=re,this.paintTask=h;const n=h.promise.then(()=>j(null).then(()=>{if(Q){const _=W.streamTextContent({includeMarkedContent:!0});Q.setTextContentStream(_),Q.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||(this.annotationEditorLayer=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:z,pdfPage:W,l10n:this.l10n,accessibilityManager:this._accessibilityManager})),this._renderAnnotationEditorLayer())})}),function(_){return j(_)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:z,pdfPage:W})),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=_=>{_.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(d=>{if(!d||!this.canvas)return;const f=this.structTreeLayer.render(d);f.classList.add("structTree"),this.canvas.append(f)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:W})),z.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),n}paintOnCanvas(u){const g=(0,y.createPromiseCapability)(),R={promise:g.promise,onRenderContinue(d){d()},cancel(){_.cancel()},get separateAnnots(){return _.separateAnnots}},L=this.viewport,z=document.createElement("canvas");z.setAttribute("role","presentation"),z.hidden=!0;let W=!0;const N=function(){W&&(z.hidden=!1,W=!1)};u.append(z),this.canvas=z;const U=z.getContext("2d",{alpha:!1}),Q=this.outputScale=new b.OutputScale;if(this.useOnlyCssZoom){const d=L.clone({scale:y.PixelsPerInch.PDF_TO_CSS_UNITS});Q.sx*=d.width/L.width,Q.sy*=d.height/L.height}if(this.maxCanvasPixels>0){const f=Math.sqrt(this.maxCanvasPixels/(L.width*L.height));Q.sx>f||Q.sy>f?(Q.sx=f,Q.sy=f,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const re=(0,b.approximateFraction)(Q.sx),j=(0,b.approximateFraction)(Q.sy);z.width=(0,b.roundToDivide)(L.width*Q.sx,re[0]),z.height=(0,b.roundToDivide)(L.height*Q.sy,j[0]),z.style.width=(0,b.roundToDivide)(L.width,re[1])+"px",z.style.height=(0,b.roundToDivide)(L.height,j[1])+"px",this.paintedViewportMap.set(z,L);const n={canvasContext:U,transform:Q.scaled?[Q.sx,0,0,Q.sy,0,0]:null,viewport:this.viewport,annotationMode:w(this,a),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},_=this.pdfPage.render(n);return _.onContinue=function(d){N(),R.onRenderContinue?R.onRenderContinue(d):d()},_.promise.then(function(){N(),g.resolve()},function(d){N(),g.reject(d)}),R}paintOnSvg(u){let g=!1;const R=()=>{if(g)throw new y.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},L=this.pdfPage,z=this.viewport.clone({scale:y.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:L.getOperatorList({annotationMode:w(this,a)}).then(N=>(R(),new y.SVGGraphics(L.commonObjs,L.objs).getSVG(N,z).then(Q=>{R(),this.svg=Q,this.paintedViewportMap.set(Q,z),Q.style.width=u.style.width,Q.style.height=u.style.height,this.renderingState=b.RenderingStates.FINISHED,u.append(Q)}))),onRenderContinue(N){N()},cancel(){g=!0},get separateAnnots(){return!1}}}setPageLabel(u){this.pageLabel="string"==typeof u?u:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:u,regularAnnotations:g}=w(this,m);return u&&g?this.canvas:null}}},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.compatibilityParams=r.OptionKind=r.AppOptions=void 0;const A=Object.create(null);r.compatibilityParams=A;{const t=navigator.userAgent||"",e=navigator.platform||"",a=navigator.maxTouchPoints||1,m=/Android/.test(t);(/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===e&&a>1||m)&&(A.maxCanvasPixels=5242880)}const y={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};r.OptionKind=y;const b={annotationEditorMode:{value:-1,kind:y.VIEWER+y.PREFERENCE},annotationMode:{value:2,kind:y.VIEWER+y.PREFERENCE},cursorToolOnLoad:{value:0,kind:y.VIEWER+y.PREFERENCE},defaultZoomValue:{value:"",kind:y.VIEWER+y.PREFERENCE},disableHistory:{value:!1,kind:y.VIEWER},disablePageLabels:{value:!1,kind:y.VIEWER+y.PREFERENCE},enablePermissions:{value:!1,kind:y.VIEWER+y.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:y.VIEWER+y.PREFERENCE},enableScripting:{value:!0,kind:y.VIEWER+y.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:y.VIEWER},externalLinkTarget:{value:0,kind:y.VIEWER+y.PREFERENCE},historyUpdateUrl:{value:!1,kind:y.VIEWER+y.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:y.VIEWER+y.PREFERENCE},imageResourcesPath:{value:"./images/",kind:y.VIEWER},maxCanvasPixels:{value:16777216,kind:y.VIEWER},forcePageColors:{value:!1,kind:y.VIEWER+y.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:y.VIEWER+y.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:y.VIEWER+y.PREFERENCE},pdfBugEnabled:{value:!1,kind:y.VIEWER+y.PREFERENCE},printResolution:{value:150,kind:y.VIEWER},sidebarViewOnLoad:{value:-1,kind:y.VIEWER+y.PREFERENCE},scrollModeOnLoad:{value:-1,kind:y.VIEWER+y.PREFERENCE},spreadModeOnLoad:{value:-1,kind:y.VIEWER+y.PREFERENCE},textLayerMode:{value:1,kind:y.VIEWER+y.PREFERENCE},useOnlyCssZoom:{value:!1,kind:y.VIEWER+y.PREFERENCE},viewerCssTheme:{value:0,kind:y.VIEWER+y.PREFERENCE},viewOnLoad:{value:0,kind:y.VIEWER+y.PREFERENCE},cMapPacked:{value:!0,kind:y.API},cMapUrl:{value:"../web/cmaps/",kind:y.API},disableAutoFetch:{value:!1,kind:y.API+y.PREFERENCE},disableFontFace:{value:!1,kind:y.API+y.PREFERENCE},disableRange:{value:!1,kind:y.API+y.PREFERENCE},disableStream:{value:!1,kind:y.API+y.PREFERENCE},docBaseUrl:{value:"",kind:y.API},enableXfa:{value:!0,kind:y.API+y.PREFERENCE},fontExtraProperties:{value:!1,kind:y.API},isEvalSupported:{value:!0,kind:y.API},maxImageSize:{value:-1,kind:y.API},pdfBug:{value:!1,kind:y.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:y.API},verbosity:{value:1,kind:y.API},workerPort:{value:null,kind:y.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:y.WORKER}};b.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:y.VIEWER},b.disablePreferences={value:!1,kind:y.VIEWER},b.locale={value:navigator.language||"en-US",kind:y.VIEWER},b.renderer={value:"canvas",kind:y.VIEWER+y.PREFERENCE},b.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:y.VIEWER};const F=Object.create(null);r.AppOptions=class p{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const a=F[e];if(void 0!==a)return a;const m=b[e];var C;return void 0!==m?null!==(C=A[e])&&void 0!==C?C:m.value:void 0}static getAll(e=null){const a=Object.create(null);for(const C in b){var m;const E=b[C];if(e){if(!(e&E.kind))continue;if(e===y.PREFERENCE){const g=E.value,R=typeof g;if("boolean"===R||"string"===R||"number"===R&&Number.isInteger(g)){a[C]=g;continue}throw new Error(`Invalid type for preference: ${C}`)}}const u=F[C];a[C]=void 0!==u?u:null!==(m=A[C])&&void 0!==m?m:E.value}return a}static set(e,a){F[e]=a}static setAll(e){for(const a in e)F[a]=e[a]}static remove(e){delete F[e]}static _hasUserOptions(){return Object.keys(F).length>0}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextAccessibilityManager=void 0;var y=A(7),b=new WeakMap,F=new WeakMap,p=new WeakMap,t=new WeakMap,e=new WeakSet;class a{constructor(){o(this,e),$(this,b,{writable:!0,value:!1}),$(this,F,{writable:!0,value:null}),$(this,p,{writable:!0,value:new Map}),$(this,t,{writable:!0,value:new Map})}setTextMapping(u){T(this,F,u)}enable(){if(w(this,b))throw new Error("TextAccessibilityManager is already enabled.");if(!w(this,F))throw new Error("Text divs and strings have not been set.");if(T(this,b,!0),T(this,F,w(this,F).slice()),w(this,F).sort(v(a,a,m)),w(this,p).size>0){const u=w(this,F);for(const[g,R]of w(this,p))document.getElementById(g)?B(this,e,C).call(this,g,u[R]):w(this,p).delete(g)}for(const[u,g]of w(this,t))this.addPointerInTextLayer(u,g);w(this,t).clear()}disable(){w(this,b)&&(w(this,t).clear(),T(this,F,null),T(this,b,!1))}removePointerInTextLayer(u){var g;if(!w(this,b))return void w(this,t).delete(u);const R=w(this,F);if(!R||0===R.length)return;const{id:L}=u,z=w(this,p).get(L);if(void 0===z)return;const W=R[z];w(this,p).delete(L);let N=W.getAttribute("aria-owns");null!==(g=N)&&void 0!==g&&g.includes(L)&&(N=N.split(" ").filter(U=>U!==L).join(" "),N?W.setAttribute("aria-owns",N):(W.removeAttribute("aria-owns"),W.setAttribute("role","presentation")))}addPointerInTextLayer(u,g){const{id:R}=u;if(!R)return;if(!w(this,b))return void w(this,t).set(u,g);g&&this.removePointerInTextLayer(u);const L=w(this,F);if(!L||0===L.length)return;const z=(0,y.binarySearchFirstItem)(L,N=>v(a,a,m).call(a,u,N)<0),W=Math.max(0,z-1);B(this,e,C).call(this,R,L[W]),w(this,p).set(R,W)}moveElementInDOM(u,g,R,L){if(this.addPointerInTextLayer(R,L),!u.hasChildNodes())return void u.append(g);const z=Array.from(u.childNodes).filter(U=>U!==g);if(0===z.length)return;const W=R||g,N=(0,y.binarySearchFirstItem)(z,U=>v(a,a,m).call(a,W,U)<0);0===N?z[0].before(g):z[N-1].after(g)}}function m(E,u){const g=E.getBoundingClientRect(),R=u.getBoundingClientRect();if(0===g.width&&0===g.height)return 1;if(0===R.width&&0===R.height)return-1;const W=g.y+g.height/2,Q=R.y+R.height/2;return W<=R.y&&Q>=g.y+g.height?-1:Q<=g.y&&W>=R.y+R.height?1:g.x+g.width/2-(R.x+R.width/2)}function C(E,u){const g=u.getAttribute("aria-owns");null!=g&&g.includes(E)||u.setAttribute("aria-owns",g?`${g} ${E}`:E),u.removeAttribute("role")}r.TextAccessibilityManager=a},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFRenderingQueue=void 0;var y=A(3),b=A(7);r.PDFRenderingQueue=class p{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){var a;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&null!==(a=this.pdfThumbnailViewer)&&void 0!==a&&a.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,a,m,C=!1){const E=e.views,u=E.length;if(0===u)return null;for(let W=0;W<u;W++){const N=E[W].view;if(!this.isViewFinished(N))return N}const g=e.first.id,R=e.last.id;if(R-g+1>u){const W=e.ids;for(let N=1,U=R-g;N<U;N++){const Q=m?g+N:R-N;if(W.has(Q))continue;const re=a[Q-1];if(!this.isViewFinished(re))return re}}let L=m?R:g-2,z=a[L];return z&&!this.isViewFinished(z)||C&&(L+=m?1:-1,z=a[L],z&&!this.isViewFinished(z))?z:null}isViewFinished(e){return e.renderingState===b.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case b.RenderingStates.FINISHED:return!1;case b.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case b.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case b.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(a=>{a instanceof y.RenderingCancelledException||console.error(`renderView: "${a}"`)})}return!0}}},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextHighlighter=void 0,r.TextHighlighter=class A{constructor({findController:b,eventBus:F,pageIndex:p}){this.findController=b,this.matches=[],this.eventBus=F,this.pageIdx=p,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(b,F){this.textDivs=b,this.textContentItemsStr=F}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=b=>{(b.pageIndex===this.pageIdx||-1===b.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(b,F){if(!b)return[];const{textContentItemsStr:p}=this;let t=0,e=0;const a=p.length-1,m=[];for(let C=0,E=b.length;C<E;C++){let u=b[C];for(;t!==a&&u>=e+p[t].length;)e+=p[t].length,t++;t===p.length&&console.error("Could not find a matching mapping");const g={begin:{divIdx:t,offset:u-e}};for(u+=F[C];t!==a&&u>e+p[t].length;)e+=p[t].length,t++;g.end={divIdx:t,offset:u-e},m.push(g)}return m}_renderMatches(b){if(0===b.length)return;const{findController:F,pageIdx:p}=this,{textContentItemsStr:t,textDivs:e}=this,a=p===F.selected.pageIdx,m=F.selected.matchIdx;let E=null;function g(W,N){const U=W.divIdx;return e[U].textContent="",R(U,0,W.offset,N)}function R(W,N,U,Q){let re=e[W];if(re.nodeType===Node.TEXT_NODE){const n=document.createElement("span");re.before(n),n.append(re),e[W]=n,re=n}const j=t[W].substring(N,U),h=document.createTextNode(j);if(Q){const n=document.createElement("span");return n.className=`${Q} appended`,n.append(h),re.append(n),Q.includes("selected")?n.offsetLeft:0}return re.append(h),0}let L=m,z=L+1;if(F.state.highlightAll)L=0,z=b.length;else if(!a)return;for(let W=L;W<z;W++){const N=b[W],U=N.begin,Q=N.end,re=a&&W===m,j=re?" selected":"";let h=0;if(E&&U.divIdx===E.divIdx?R(E.divIdx,E.offset,U.offset):(null!==E&&R(E.divIdx,E.offset,void 0),g(U)),U.divIdx===Q.divIdx)h=R(U.divIdx,U.offset,Q.offset,"highlight"+j);else{h=R(U.divIdx,U.offset,void 0,"highlight begin"+j);for(let n=U.divIdx+1,_=Q.divIdx;n<_;n++)e[n].className="highlight middle"+j;g(Q,"highlight end"+j)}E=Q,re&&F.scrollMatchIntoView({element:e[U.divIdx],selectedLeft:h,pageIndex:p,matchIndex:m})}E&&R(E.divIdx,E.offset,void 0)}_updateMatches(){if(!this.enabled)return;const{findController:b,matches:F,pageIdx:p}=this,{textContentItemsStr:t,textDivs:e}=this;let a=-1;for(let E=0,u=F.length;E<u;E++){const g=F[E];for(let L=Math.max(a,g.begin.divIdx),z=g.end.divIdx;L<=z;L++){const W=e[L];W.textContent=t[L],W.className=""}a=g.end.divIdx+1}null!=b&&b.highlightMatches&&(this.matches=this._convertMatches(b.pageMatches[p]||null,b.pageMatchesLength[p]||null),this._renderMatches(this.matches))}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DownloadManager=void 0;var y=A(3);function b(p,t){const e=document.createElement("a");if(!e.click)throw new Error('DownloadManager: "a.click()" is not supported.');e.href=p,e.target="_parent","download"in e&&(e.download=t),(document.body||document.documentElement).append(e),e.click(),e.remove()}r.DownloadManager=class F{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(t,e){(0,y.createValidAbsoluteUrl)(t,"http://example.com")?b(t+"#pdfjs.action=download",e):console.error(`downloadUrl - not a valid URL: ${t}`)}downloadData(t,e,a){b(URL.createObjectURL(new Blob([t],{type:a})),e)}openOrDownloadData(t,e,a){const m=(0,y.isPdfFile)(a),C=m?"application/pdf":"";if(m){let u,E=this._openBlobUrls.get(t);E||(E=URL.createObjectURL(new Blob([e],{type:C})),this._openBlobUrls.set(t,E)),u="?file="+encodeURIComponent(E+"#"+a);try{return window.open(u),!0}catch(g){console.error(`openOrDownloadData: ${g}`),URL.revokeObjectURL(E),this._openBlobUrls.delete(t)}}return this.downloadData(e,a,C),!1}download(t,e,a){b(URL.createObjectURL(t),a)}}},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WaitOnType=r.EventBus=r.AutomationEventBus=void 0,r.waitOnEventOrTimeout=function y({target:p,name:t,delay:e=0}){return new Promise(function(a,m){if("object"!=typeof p||!t||"string"!=typeof t||!(Number.isInteger(e)&&e>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function C(R){p instanceof b?p._off(t,E):p.removeEventListener(t,E),g&&clearTimeout(g),a(R)}const E=C.bind(null,A.EVENT);p instanceof b?p._on(t,E):p.addEventListener(t,E);const u=C.bind(null,A.TIMEOUT),g=setTimeout(u,e)})};const A={EVENT:"event",TIMEOUT:"timeout"};r.WaitOnType=A;class b{constructor(){this._listeners=Object.create(null)}on(t,e,a=null){this._on(t,e,{external:!0,once:null==a?void 0:a.once})}off(t,e,a=null){this._off(t,e,{external:!0,once:null==a?void 0:a.once})}dispatch(t,e){const a=this._listeners[t];if(!a||0===a.length)return;let m;for(const{listener:C,external:E,once:u}of a.slice(0))u&&this._off(t,C),E?(m||(m=[])).push(C):C(e);if(m){for(const C of m)C(e);m=null}}_on(t,e,a=null){var m;((m=this._listeners)[t]||(m[t]=[])).push({listener:e,external:!0===(null==a?void 0:a.external),once:!0===(null==a?void 0:a.once)})}_off(t,e,a=null){const m=this._listeners[t];if(m)for(let C=0,E=m.length;C<E;C++)if(m[C].listener===e)return void m.splice(C,1)}}r.EventBus=b,r.AutomationEventBus=class F extends b{dispatch(t,e){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GenericL10n=void 0,A(21);var y=A(4);const b=document.webL10n;r.GenericL10n=class F{constructor(t){this._lang=t,this._ready=new Promise((e,a)=>{b.setLanguage((0,y.fixupLangCode)(t),()=>{e(b)})})}getLanguage(){var t=this;return k(function*(){return(yield t._ready).getLanguage()})()}getDirection(){var t=this;return k(function*(){return(yield t._ready).getDirection()})()}get(t,e=null,a=(0,y.getL10nFallback)(t,e)){var m=this;return k(function*(){return(yield m._ready).get(t,e,a)})()}translate(t){var e=this;return k(function*(){return(yield e._ready).translate(t)})()}}},()=>{document.webL10n=function(S,r,A){var y={},b="",F="textContent",p="",t={},e="loading",a=!0;function g(n,_,d){_=_||function(c){},d=d||function(){};var f=new XMLHttpRequest;f.open("GET",n,a),f.overrideMimeType&&f.overrideMimeType("text/plain; charset=utf-8"),f.onreadystatechange=function(){4==f.readyState&&(200==f.status||0===f.status?_(f.responseText):d())},f.onerror=d,f.ontimeout=d;try{f.send(null)}catch{d()}}function L(n,_){n&&(n=n.toLowerCase()),_=_||function(){},function z(){y={},b="",p=""}(),p=n;var d=function m(){return r.querySelectorAll('link[type="application/l10n"]')}(),f=d.length;if(0!==f){var P,x=0;P=function(){++x>=f&&(_(),e="complete")};for(var K=0;K<f;K++)new H(d[K]).load(n,P)}else{var i=function C(){var n=r.querySelector('script[type="application/l10n"]');return n?JSON.parse(n.innerHTML):null}();if(i&&i.locales&&i.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(y=i.locales[n])){var c=i.default_locale.toLowerCase();for(var l in i.locales){if((l=l.toLowerCase())===n){y=i.locales[n];break}l===c&&(y=i.locales[c])}}_()}else console.log("no resource to load, early way out");e="complete"}function H(te){var pe=te.href;this.load=function(le,ue){!function R(n,_,d,f){var i=n.replace(/[^\/]*$/,"")||"./";function c(P){return P.lastIndexOf("\\")<0?P:P.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}g(n,function(P){b+=P,function l(P,x){var H={},K=/^\s*|\s*$/,se=/^\s*#|^\s*$/,te=/^\s*\[(.*)\]\s*$/,pe=/^\s*@import\s+url\((.*)\)\s*$/i,le=/^([^=\s]*)\s*=\s*(.+)$/;function ue(_e,me,ie){var oe=_e.replace(K,"").split(/[\r\n]+/),Pe="*",Be=_.split("-",1)[0],Me=!1,fe="";!function Ce(){for(;;){if(!oe.length)return void ie();var xe=oe.shift();if(!se.test(xe)){if(me){if(fe=te.exec(xe)){Pe=fe[1].toLowerCase(),Me="*"!==Pe&&Pe!==_&&Pe!==Be;continue}if(Me)continue;if(fe=pe.exec(xe))return void de(i+fe[1],Ce)}var Fe=xe.match(le);Fe&&3==Fe.length&&(H[Fe[1]]=c(Fe[2]))}}}()}function de(_e,me){g(_e,function(ie){ue(ie,!1,me)},function(){console.warn(_e+" not found."),me()})}ue(P,!0,function(){x(H)})}(P,function(x){for(var H in x){var K,se,te=H.lastIndexOf(".");te>0?(K=H.substring(0,te),se=H.substring(te+1)):(K=H,se=F),y[K]||(y[K]={}),y[K][se]=x[H]}d&&d()})},f)}(pe,le,ue,function(){console.warn(pe+" not found."),console.warn('"'+le+'" resource not found'),p="",ue()})}}}function N(n,_,d){var f=y[n];if(!f){if(console.warn("#"+n+" is undefined."),!d)return null;f=d}var i={};for(var c in f){var l=f[c];l=Q(l=U(l,_,n,c),_,n),i[c]=l}return i}function U(n,_,d,f){var c=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(n);if(!c||!c.length)return n;var x,l=c[1],P=c[2];return _&&P in _?x=_[P]:P in y&&(x=y[P]),l in t&&(n=(0,t[l])(n,x,d,f)),n}function Q(n,_,d){return n.replace(/\{\{\s*(.+?)\s*\}\}/g,function(i,c){return _&&c in _?_[c]:c in y?y[c]:(console.log("argument {{"+c+"}} for #"+d+" is undefined."),i)})}function re(n){var _=function u(n){if(!n)return{};var _=n.getAttribute("data-l10n-id"),d=n.getAttribute("data-l10n-args"),f={};if(d)try{f=JSON.parse(d)}catch{console.warn("could not parse arguments for #"+_)}return{id:_,args:f}}(n);if(_.id){var d=N(_.id,_.args);if(!d)return void console.warn("#"+_.id+" is undefined.");if(d[F]){if(0===function j(n){if(n.children)return n.children.length;if(typeof n.childElementCount<"u")return n.childElementCount;for(var _=0,d=0;d<n.childNodes.length;d++)_+=1===n.nodeType?1:0;return _}(n))n[F]=d[F];else{for(var f=n.childNodes,i=!1,c=0,l=f.length;c<l;c++)3===f[c].nodeType&&/\S/.test(f[c].nodeValue)&&(i?f[c].nodeValue="":(f[c].nodeValue=d[F],i=!0));if(!i){var P=r.createTextNode(d[F]);n.prepend(P)}}delete d[F]}for(var x in d)n[x]=d[x]}}return t.plural=function(n,_,d,f){var i=parseFloat(_);if(isNaN(i)||f!=F)return n;t._pluralRules||(t._pluralRules=function W(n){function d(l,P){return-1!==P.indexOf(l)}function f(l,P,x){return P<=l&&l<=x}var i={0:function(l){return"other"},1:function(l){return f(l%100,3,10)?"few":0===l?"zero":f(l%100,11,99)?"many":2==l?"two":1==l?"one":"other"},2:function(l){return 0!==l&&l%10==0?"many":2==l?"two":1==l?"one":"other"},3:function(l){return 1==l?"one":"other"},4:function(l){return f(l,0,1)?"one":"other"},5:function(l){return f(l,0,2)&&2!=l?"one":"other"},6:function(l){return 0===l?"zero":l%10==1&&l%100!=11?"one":"other"},7:function(l){return 2==l?"two":1==l?"one":"other"},8:function(l){return f(l,3,6)?"few":f(l,7,10)?"many":2==l?"two":1==l?"one":"other"},9:function(l){return 0===l||1!=l&&f(l%100,1,19)?"few":1==l?"one":"other"},10:function(l){return f(l%10,2,9)&&!f(l%100,11,19)?"few":l%10!=1||f(l%100,11,19)?"other":"one"},11:function(l){return f(l%10,2,4)&&!f(l%100,12,14)?"few":l%10==0||f(l%10,5,9)||f(l%100,11,14)?"many":l%10==1&&l%100!=11?"one":"other"},12:function(l){return f(l,2,4)?"few":1==l?"one":"other"},13:function(l){return f(l%10,2,4)&&!f(l%100,12,14)?"few":1!=l&&f(l%10,0,1)||f(l%10,5,9)||f(l%100,12,14)?"many":1==l?"one":"other"},14:function(l){return f(l%100,3,4)?"few":l%100==2?"two":l%100==1?"one":"other"},15:function(l){return 0===l||f(l%100,2,10)?"few":f(l%100,11,19)?"many":1==l?"one":"other"},16:function(l){return l%10==1&&11!=l?"one":"other"},17:function(l){return 3==l?"few":0===l?"zero":6==l?"many":2==l?"two":1==l?"one":"other"},18:function(l){return 0===l?"zero":f(l,0,2)&&0!==l&&2!=l?"one":"other"},19:function(l){return f(l,2,10)?"few":f(l,0,1)?"one":"other"},20:function(l){return!f(l%10,3,4)&&l%10!=9||f(l%100,10,19)||f(l%100,70,79)||f(l%100,90,99)?l%1e6==0&&0!==l?"many":l%10!=2||d(l%100,[12,72,92])?l%10!=1||d(l%100,[11,71,91])?"other":"one":"two":"few"},21:function(l){return 0===l?"zero":1==l?"one":"other"},22:function(l){return f(l,0,1)||f(l,11,99)?"one":"other"},23:function(l){return f(l%10,1,2)||l%20==0?"one":"other"},24:function(l){return f(l,3,10)||f(l,13,19)?"few":d(l,[2,12])?"two":d(l,[1,11])?"one":"other"}},c={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[n.replace(/-.*$/,"")];return c in i?i[c]:(console.warn("plural form unknown for ["+n+"]"),function(){return"other"})}(p));var c="["+t._pluralRules(i)+"]";return 0===i&&d+"[zero]"in y?n=y[d+"[zero]"][f]:1==i&&d+"[one]"in y?n=y[d+"[one]"][f]:2==i&&d+"[two]"in y?n=y[d+"[two]"][f]:d+c in y?n=y[d+c][f]:d+"[other]"in y&&(n=y[d+"[other]"][f]),n},{get:function(n,_,d){var c,f=n.lastIndexOf("."),i=F;f>0&&(i=n.substring(f+1),n=n.substring(0,f)),d&&((c={})[i]=d);var l=N(n,_,c);return l&&i in l?l[i]:"{{"+n+"}}"},getData:function(){return y},getText:function(){return b},getLanguage:function(){return p},setLanguage:function(n,_){L(n,function(){_&&_()})},getDirection:function(){var _=p.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(_)>=0?"rtl":"ltr"},translate:function h(n){for(var _=function E(n){return n?n.querySelectorAll("*[data-l10n-id]"):[]}(n=n||r.documentElement),d=_.length,f=0;f<d;f++)re(_[f]);re(n)},getReadyState:function(){return e},ready:function(n){n&&("complete"==e||"interactive"==e?S.setTimeout(function(){n()}):r.addEventListener&&r.addEventListener("localized",function _(){r.removeEventListener("localized",_),n()}))}}}(window,document)},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFindController=r.FindState=void 0;var y=A(7),b=A(3),F=A(23);const p={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};r.FindState=p;const m={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},C=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),E=[...C.values()].map(he=>String.fromCharCode(he)).join(""),u=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]+/gu,g=/([.*+?^${}()|[\]\\])|([!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65\u{10100}-\u{10102}\u{1039F}\u{103D0}\u{1056F}\u{10857}\u{1091F}\u{1093F}\u{10A50}-\u{10A58}\u{10A7F}\u{10AF0}-\u{10AF6}\u{10B39}-\u{10B3F}\u{10B99}-\u{10B9C}\u{10EAD}\u{10F55}-\u{10F59}\u{10F86}-\u{10F89}\u{11047}-\u{1104D}\u{110BB}\u{110BC}\u{110BE}-\u{110C1}\u{11140}-\u{11143}\u{11174}\u{11175}\u{111C5}-\u{111C8}\u{111CD}\u{111DB}\u{111DD}-\u{111DF}\u{11238}-\u{1123D}\u{112A9}\u{1144B}-\u{1144F}\u{1145A}\u{1145B}\u{1145D}\u{114C6}\u{115C1}-\u{115D7}\u{11641}-\u{11643}\u{11660}-\u{1166C}\u{116B9}\u{1173C}-\u{1173E}\u{1183B}\u{11944}-\u{11946}\u{119E2}\u{11A3F}-\u{11A46}\u{11A9A}-\u{11A9C}\u{11A9E}-\u{11AA2}\u{11B00}-\u{11B09}\u{11C41}-\u{11C45}\u{11C70}\u{11C71}\u{11EF7}\u{11EF8}\u{11F43}-\u{11F4F}\u{11FFF}\u{12470}-\u{12474}\u{12FF1}\u{12FF2}\u{16A6E}\u{16A6F}\u{16AF5}\u{16B37}-\u{16B3B}\u{16B44}\u{16E97}-\u{16E9A}\u{16FE2}\u{1BC9F}\u{1DA87}-\u{1DA8B}\u{1E95E}\u{1E95F}])|(\s+)|([\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}])|([A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{10340}\u{10342}-\u{10349}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10F70}-\u{10F81}\u{10FB0}-\u{10FC4}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11071}\u{11072}\u{11075}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11147}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}-\u{11461}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11740}-\u{11746}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{1192F}\u{1193F}\u{11941}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AB0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{11F02}\u{11F04}-\u{11F10}\u{11F12}-\u{11F33}\u{11FB0}\u{12000}-\u{12399}\u{12480}-\u{12543}\u{12F90}-\u{12FF0}\u{13000}-\u{1342F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A70}-\u{16ABE}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E4D0}-\u{1E4EB}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}])/gu,R=/([^\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}])[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,L=/^[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*([^\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}])/u,z=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,W=new Map,N="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]";let U=null,Q=null;function re(he){const ce=[];let ve,Ee;for(;null!==(ve=z.exec(he));){let{index:Ge}=ve;for(const Oe of ve[0]){let Ie=W.get(Oe);Ie||(Ie=Oe.normalize("NFD").length,W.set(Oe,Ie)),ce.push([Ie,Ge++])}}if(0===ce.length&&U)Ee=U;else if(ce.length>0&&Q)Ee=Q;else{const Oe=`([${Object.keys(m).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;Ee=0===ce.length?U=new RegExp(Oe+"|(\\u0000)","gum"):Q=new RegExp(Oe+`|(${N})`,"gum")}const Se=[];for(;null!==(ve=u.exec(he));)Se.push([ve[0].length,ve.index]);let we=he.normalize("NFD");const ke=[[0,0]];let Te=0,Re=0,De=0,Le=0,Ne=0,We=!1;return we=we.replace(Ee,(Ge,Oe,Ie,ze,$e,Ke,Ue)=>{var qe;if(Ue-=Le,Oe){const je=m[Ge],Ve=je.length;for(let He=1;He<Ve;He++)ke.push([Ue-De+He,De-He]);return De-=Ve-1,je}if(Ie){var Ye;const je=Ie.endsWith("\n"),Ve=je?Ie.length-2:Ie.length;We=!0;let He=Ve;Ue+Ne===(null===(Ye=Se[Te])||void 0===Ye?void 0:Ye[1])&&(He-=Se[Te][0],++Te);for(let Xe=1;Xe<=He;Xe++)ke.push([Ue-1-De+Xe,De-Xe]);return De-=He,Le+=He,je?(ke.push([(Ue+=Ve-1)-De+1,1+De]),De+=1,Le+=1,Ne+=1,Ie.slice(0,Ve)):Ie}if(ze)return ke.push([Ue-De+1,1+De]),De+=1,Le+=1,Ne+=1,ze.charAt(0);if($e)return ke.push([Ue-De+1,De-1]),De-=1,Le+=1,Ne+=1," ";if(Ue+Ne===(null===(qe=ce[Re])||void 0===qe?void 0:qe[1])){const je=ce[Re][0]-1;++Re;for(let Ve=1;Ve<=je;Ve++)ke.push([Ue-(De-Ve),De-Ve]);De-=je,Le+=je}return Ke}),ke.push([we.length,De]),[we,ke,We]}function j(he,ce,ve){if(!he)return[ce,ve];const Ee=ce,Se=ce+ve;let we=(0,y.binarySearchFirstItem)(he,Te=>Te[0]>=Ee);he[we][0]>Ee&&--we;let ke=(0,y.binarySearchFirstItem)(he,Te=>Te[0]>=Se,we);return he[ke][0]>Se&&--ke,[Ee+he[we][1],ve+he[ke][1]-he[we][1]]}var h=new WeakSet,n=new WeakSet,_=new WeakMap,d=new WeakSet,f=new WeakSet,i=new WeakSet,c=new WeakSet,l=new WeakSet,P=new WeakSet,x=new WeakSet,H=new WeakSet,K=new WeakSet,se=new WeakSet,te=new WeakSet,pe=new WeakSet,le=new WeakSet,ue=new WeakSet,de=new WeakSet,_e=new WeakSet,me=new WeakSet;function oe(he){if(!he)return;const ce=this._pdfDocument,{type:ve}=he;(null===this._state||B(this,d,Me).call(this,he))&&(this._dirtyMatch=!0),this._state=he,"highlightallchange"!==ve&&B(this,me,be).call(this,p.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ce&&this._pdfDocument!==ce)return;B(this,P,ye).call(this);const Ee=!this._highlightMatches,Se=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ve?this._dirtyMatch?B(this,K,ne).call(this):"again"===ve?(B(this,K,ne).call(this),Ee&&this._state.highlightAll&&B(this,H,ee).call(this)):"highlightallchange"===ve?(Se?B(this,K,ne).call(this):this._highlightMatches=!0,B(this,H,ee).call(this)):B(this,K,ne).call(this):this._findTimeout=setTimeout(()=>{B(this,K,ne).call(this),this._findTimeout=null},250)})}function Pe(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,b.createPromiseCapability)()}function Be(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=re(this._state.query)),this._normalizedQuery}function Me(he){if(he.query!==this._state.query)return!0;switch(he.type){case"again":const ce=this._selected.pageIdx+1,ve=this._linkService;return ce>=1&&ce<=ve.pagesCount&&ce!==ve.page&&!ve.isPageVisible(ce);case"highlightallchange":return!1}return!0}function fe(he,ce,ve){let Ee=he.slice(0,ce).match(R);if(Ee){const Se=he.charCodeAt(ce),we=Ee[1].charCodeAt(0);if((0,F.getCharacterType)(Se)===(0,F.getCharacterType)(we))return!1}if(Ee=he.slice(ce+ve).match(L),Ee){const Se=he.charCodeAt(ce+ve-1),we=Ee[1].charCodeAt(0);if((0,F.getCharacterType)(Se)===(0,F.getCharacterType)(we))return!1}return!0}function Ce(he,ce,ve,Ee){const Se=[],we=[],ke=this._pageDiffs[ve];let Te;for(;null!==(Te=he.exec(Ee));){if(ce&&!B(this,f,fe).call(this,Ee,Te.index,Te[0].length))continue;const[Re,De]=j(ke,Te.index,Te[0].length);De&&(Se.push(Re),we.push(De))}this._pageMatches[ve]=Se,this._pageMatchesLength[ve]=we}function xe(he,ce){const{matchDiacritics:ve}=this._state;let Ee=!1;return(he=he.replace(g,(we,ke,Te,Re,De,Le)=>ke?`[ ]*\\${ke}[ ]*`:Te?`[ ]*${Te}[ ]*`:Re?"[ ]+":ve?De||Le:De?C.has(De.charCodeAt(0))?De:"":ce?(Ee=!0,`${Le}\\p{M}*`):Le)).endsWith("[ ]*")&&(he=he.slice(0,he.length-4)),ve&&ce&&(Ee=!0,he=`${he}(?=[${E}]|[^\\p{M}]|$)`),[Ee,he]}function Fe(he){let ce=w(this,_);if(0===ce.length)return;const{caseSensitive:ve,entireWord:Ee,phraseSearch:Se}=this._state,we=this._pageContents[he],ke=this._hasDiacritics[he];let Te=!1;if(Se)[Te,ce]=B(this,c,xe).call(this,ce,ke);else{const Le=ce.match(/\S+/g);Le&&(ce=Le.sort().reverse().map(Ne=>{const[We,Ge]=B(this,c,xe).call(this,Ne,ke);return Te||(Te=We),`(${Ge})`}).join("|"))}ce=new RegExp(ce,`g${Te?"u":""}${ve?"":"i"}`),B(this,i,Ce).call(this,ce,Ee,he,we),this._state.highlightAll&&B(this,x,G).call(this,he),this._resumePageIdx===he&&(this._resumePageIdx=null,B(this,te,ae).call(this));const De=this._pageMatches[he].length;De>0&&(this._matchesCountTotal+=De,B(this,_e,Ae).call(this))}function ye(){if(this._extractTextPromises.length>0)return;let he=Promise.resolve();for(let ce=0,ve=this._linkService.pagesCount;ce<ve;ce++){const Ee=(0,b.createPromiseCapability)();this._extractTextPromises[ce]=Ee.promise,he=he.then(()=>this._pdfDocument.getPage(ce+1).then(Se=>Se.getTextContent()).then(Se=>{const we=[];for(const ke of Se.items)we.push(ke.str),ke.hasEOL&&we.push("\n");[this._pageContents[ce],this._pageDiffs[ce],this._hasDiacritics[ce]]=re(we.join("")),Ee.resolve()},Se=>{console.error(`Unable to get text content for page ${ce+1}`,Se),this._pageContents[ce]="",this._pageDiffs[ce]=null,this._hasDiacritics[ce]=!1,Ee.resolve()}))}}function G(he){this._scrollMatches&&this._selected.pageIdx===he&&(this._linkService.page=he+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:he})}function ee(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function ne(){const he=this._state.findPrevious,ce=this._linkService.page-1,ve=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ce,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,B(this,H,ee).call(this);for(let Se=0;Se<ve;Se++)this._pendingFindMatches.has(Se)||(this._pendingFindMatches.add(Se),this._extractTextPromises[Se].then(()=>{this._pendingFindMatches.delete(Se),B(this,l,Fe).call(this,Se)}))}if(""===w(this,_))return void B(this,me,be).call(this,p.FOUND);if(this._resumePageIdx)return;const Ee=this._offset;if(this._pagesToSearch=ve,null!==Ee.matchIdx){if(!he&&Ee.matchIdx+1<this._pageMatches[Ee.pageIdx].length||he&&Ee.matchIdx>0)return Ee.matchIdx=he?Ee.matchIdx-1:Ee.matchIdx+1,void B(this,le,Z).call(this,!0);B(this,pe,ge).call(this,he)}B(this,te,ae).call(this)}function J(he){const ce=this._offset,ve=he.length,Ee=this._state.findPrevious;return ve?(ce.matchIdx=Ee?ve-1:0,B(this,le,Z).call(this,!0),!0):(B(this,pe,ge).call(this,Ee),!!(ce.wrapped&&(ce.matchIdx=null,this._pagesToSearch<0))&&(B(this,le,Z).call(this,!1),!0))}function ae(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let he=null;do{const ce=this._offset.pageIdx;if(he=this._pageMatches[ce],!he){this._resumePageIdx=ce;break}}while(!B(this,se,J).call(this,he))}function ge(he){const ce=this._offset,ve=this._linkService.pagesCount;ce.pageIdx=he?ce.pageIdx-1:ce.pageIdx+1,ce.matchIdx=null,this._pagesToSearch--,(ce.pageIdx>=ve||ce.pageIdx<0)&&(ce.pageIdx=he?ve-1:0,ce.wrapped=!0)}function Z(he=!1){let ce=p.NOT_FOUND;const ve=this._offset.wrapped;if(this._offset.wrapped=!1,he){const Ee=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ce=ve?p.WRAPPED:p.FOUND,-1!==Ee&&Ee!==this._selected.pageIdx&&B(this,x,G).call(this,Ee)}B(this,me,be).call(this,ce,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,B(this,x,G).call(this,this._selected.pageIdx))}function X(he){const ce=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ce&&this._pdfDocument!==ce||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),B(this,me,be).call(this,p.FOUND),this._highlightMatches=!1,B(this,H,ee).call(this))})}function Y(){const{pageIdx:he,matchIdx:ce}=this._selected;let ve=0,Ee=this._matchesCountTotal;if(-1!==ce){for(let we=0;we<he;we++){var Se;ve+=(null===(Se=this._pageMatches[we])||void 0===Se?void 0:Se.length)||0}ve+=ce+1}return(ve<1||ve>Ee)&&(ve=Ee=0),{current:ve,total:Ee}}function Ae(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:B(this,de,Y).call(this)})}function be(he,ce=!1){var ve,Ee;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:he,previous:ce,matchesCount:B(this,de,Y).call(this),rawQuery:null!==(ve=null===(Ee=this._state)||void 0===Ee?void 0:Ee.query)&&void 0!==ve?ve:null})}r.PDFFindController=class ie{constructor({linkService:ce,eventBus:ve}){o(this,me),o(this,_e),o(this,de),o(this,ue),o(this,le),o(this,pe),o(this,te),o(this,se),o(this,K),o(this,H),o(this,x),o(this,P),o(this,l),o(this,c),o(this,i),o(this,f),o(this,d),$(this,_,{get:Be,set:void 0}),o(this,n),o(this,h),this._linkService=ce,this._eventBus=ve,B(this,n,Pe).call(this),ve._on("find",B(this,h,oe).bind(this)),ve._on("findbarclose",B(this,ue,X).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(ce){this._pdfDocument&&B(this,n,Pe).call(this),ce&&(this._pdfDocument=ce,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ce=null,selectedLeft:ve=0,pageIndex:Ee=-1,matchIndex:Se=-1}){this._scrollMatches&&ce&&-1!==Se&&Se===this._selected.matchIdx&&-1!==Ee&&Ee===this._selected.pageIdx&&(this._scrollMatches=!1,(0,y.scrollIntoView)(ce,{top:-50,left:ve+-400},!0))}}},(S,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterType=void 0,r.getCharacterType=function u(g){return function y(g){return g<11904}(g)?function b(g){return 0==(65408&g)}(g)?function t(g){return 32===g||9===g||13===g||10===g}(g)?A.SPACE:function F(g){return g>=97&&g<=122||g>=65&&g<=90}(g)||function p(g){return g>=48&&g<=57}(g)||95===g?A.ALPHA_LETTER:A.PUNCT:function E(g){return 3584==(65408&g)}(g)?A.THAI_LETTER:160===g?A.SPACE:A.ALPHA_LETTER:function e(g){return g>=13312&&g<=40959||g>=63744&&g<=64255}(g)?A.HAN_LETTER:function a(g){return g>=12448&&g<=12543}(g)?A.KATAKANA_LETTER:function m(g){return g>=12352&&g<=12447}(g)?A.HIRAGANA_LETTER:function C(g){return g>=65376&&g<=65439}(g)?A.HALFWIDTH_KATAKANA_LETTER:A.ALPHA_LETTER};const A={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};r.CharacterType=A},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFHistory=void 0,r.isDestArraysEqual=C,r.isDestHashesEqual=m;var y=A(7),b=A(19);function e(){return document.location.hash}function m(E,u){return"string"==typeof E&&"string"==typeof u&&(E===u||(0,y.parseQueryString)(E).get("nameddest")===u)}function C(E,u){function g(R,L){if(typeof R!=typeof L||Array.isArray(R)||Array.isArray(L))return!1;if(null!==R&&"object"==typeof R&&null!==L){if(Object.keys(R).length!==Object.keys(L).length)return!1;for(const z in R)if(!g(R[z],L[z]))return!1;return!0}return R===L||Number.isNaN(R)&&Number.isNaN(L)}if(!Array.isArray(E)||!Array.isArray(u)||E.length!==u.length)return!1;for(let R=0,L=E.length;R<L;R++)if(!g(E[R],u[R]))return!1;return!0}r.PDFHistory=class a{constructor({linkService:u,eventBus:g}){this.linkService=u,this.eventBus=g,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",R=>{this._isPagesLoaded=!!R.pagesCount},{once:!0})})}initialize({fingerprint:u,resetHistory:g=!1,updateUrl:R=!1}){if(!u||"string"!=typeof u)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const L=""!==this._fingerprint&&this._fingerprint!==u;this._fingerprint=u,this._updateUrl=!0===R,this._initialized=!0,this._bindEvents();const z=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=e(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(z,!0)||g){const{hash:N,page:U,rotation:Q}=this._parseCurrentHash(!0);return!N||L||g?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:N,page:U,rotation:Q},!0)}const W=z.destination;this._updateInternalState(W,z.uid,!0),void 0!==W.rotation&&(this._initialRotation=W.rotation),W.dest?(this._initialBookmark=JSON.stringify(W.dest),this._destination.page=null):W.hash?this._initialBookmark=W.hash:W.page&&(this._initialBookmark=`page=${W.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:u=null,explicitDest:g,pageNumber:R}){if(!this._initialized)return;if(u&&"string"!=typeof u)return void console.error(`PDFHistory.push: "${u}" is not a valid namedDest parameter.`);if(!Array.isArray(g))return void console.error(`PDFHistory.push: "${g}" is not a valid explicitDest parameter.`);if(!this._isValidPage(R)&&(null!==R||this._destination))return void console.error(`PDFHistory.push: "${R}" is not a valid pageNumber parameter.`);const L=u||JSON.stringify(g);if(!L)return;let z=!1;if(this._destination&&(m(this._destination.hash,L)||C(this._destination.dest,g))){if(this._destination.page)return;z=!0}this._popStateInProgress&&!z||(this._pushOrReplaceState({dest:g,hash:L,page:R,rotation:this.linkService.rotation},z),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(u){var g;if(this._initialized){if(!this._isValidPage(u))return void console.error(`PDFHistory.pushPage: "${u}" is not a valid page number.`);(null===(g=this._destination)||void 0===g?void 0:g.page)!==u&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${u}`,page:u,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(u,g=!1){const R=g||!this._destination,L={fingerprint:this._fingerprint,uid:R?this._uid:this._uid+1,destination:u};let z;if(this._updateInternalState(u,L.uid),this._updateUrl&&null!=u&&u.hash){const W=document.location.href.split("#")[0];W.startsWith("file://")||(z=`${W}#${u.hash}`)}R?window.history.replaceState(L,"",z):window.history.pushState(L,"",z)}_tryPushCurrentPosition(u=!1){if(!this._position)return;let g=this._position;if(u&&(g=Object.assign(Object.create(null),this._position),g.temporary=!0),!this._destination)return void this._pushOrReplaceState(g);if(this._destination.temporary)return void this._pushOrReplaceState(g,!0);if(this._destination.hash===g.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let R=!1;if(this._destination.page>=g.first&&this._destination.page<=g.page){if(void 0!==this._destination.dest||!this._destination.first)return;R=!0}this._pushOrReplaceState(g,R)}_isValidPage(u){return Number.isInteger(u)&&u>0&&u<=this.linkService.pagesCount}_isValidState(u,g=!1){if(!u)return!1;if(u.fingerprint!==this._fingerprint){if(!g)return!1;{if("string"!=typeof u.fingerprint||u.fingerprint.length!==this._fingerprint.length)return!1;const[R]=performance.getEntriesByType("navigation");if("reload"!==(null==R?void 0:R.type))return!1}}return!(!Number.isInteger(u.uid)||u.uid<0||null===u.destination||"object"!=typeof u.destination)}_updateInternalState(u,g,R=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),R&&null!=u&&u.temporary&&delete u.temporary,this._destination=u,this._uid=g,this._maxUid=Math.max(this._maxUid,g),this._numPositionUpdates=0}_parseCurrentHash(u=!1){const g=unescape(e()).substring(1),R=(0,y.parseQueryString)(g),L=R.get("nameddest")||"";let z=0|R.get("page");return(!this._isValidPage(z)||u&&L.length>0)&&(z=null),{hash:g,page:z,rotation:this.linkService.rotation}}_updateViewarea({location:u}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:u.pdfOpenParams.substring(1),page:this.linkService.page,first:u.pageNumber,rotation:u.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:u}){const g=e(),R=this._currentHash!==g;if(this._currentHash=g,!u){this._uid++;const{hash:z,page:W,rotation:N}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:z,page:W,rotation:N},!0)}if(!this._isValidState(u))return;this._popStateInProgress=!0,R&&(this._blockHashChange++,(0,b.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const L=u.destination;this._updateInternalState(L,u.uid,!0),(0,y.isValidRotation)(L.rotation)&&(this.linkService.rotation=L.rotation),L.dest?this.linkService.goToDestination(L.dest):L.hash?this.linkService.setHash(L.hash):L.page&&(this.linkService.page=L.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFScriptingManager=void 0;var y=A(7),b=A(3);r.PDFScriptingManager=class F{constructor({eventBus:t,sandboxBundleSrc:e=null,scriptingFactory:a=null,docPropertiesLookup:m=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=t,this._sandboxBundleSrc=e,this._scriptingFactory=a,this._docPropertiesLookup=m,this._scriptingFactory||window.addEventListener("updatefromsandbox",C=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:C.detail})})}setViewer(t){this._pdfViewer=t}setDocument(t){var e=this;return k(function*(){var a;if(e._pdfDocument&&(yield e._destroyScripting()),e._pdfDocument=t,!t)return;const[m,C,E]=yield Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(m||E){if(t===e._pdfDocument){try{e._scripting=e._createScripting()}catch(u){return console.error(`PDFScriptingManager.setDocument: "${null==u?void 0:u.message}".`),void(yield e._destroyScripting())}e._internalEvents.set("updatefromsandbox",u=>{(null==u?void 0:u.source)===window&&e._updateFromSandbox(u.detail)}),e._internalEvents.set("dispatcheventinsandbox",u=>{var g;null===(g=e._scripting)||void 0===g||g.dispatchEventInSandbox(u.detail)}),e._internalEvents.set("pagechanging",({pageNumber:u,previous:g})=>{u!==g&&(e._dispatchPageClose(g),e._dispatchPageOpen(u))}),e._internalEvents.set("pagerendered",({pageNumber:u})=>{e._pageOpenPending.has(u)&&u===e._pdfViewer.currentPageNumber&&e._dispatchPageOpen(u)}),e._internalEvents.set("pagesdestroy",function(){var u=k(function*(g){var R,L;yield e._dispatchPageClose(e._pdfViewer.currentPageNumber),yield null===(R=e._scripting)||void 0===R?void 0:R.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null===(L=e._closeCapability)||void 0===L||L.resolve()});return function(g){return u.apply(this,arguments)}}()),e._domEvents.set("mousedown",u=>{e._mouseState.isDown=!0}),e._domEvents.set("mouseup",u=>{e._mouseState.isDown=!1});for(const[u,g]of e._internalEvents)e._eventBus._on(u,g);for(const[u,g]of e._domEvents)window.addEventListener(u,g,!0);try{const u=yield e._getDocProperties();if(t!==e._pdfDocument)return;yield e._scripting.createSandbox({objects:m,calculationOrder:C,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...u,actions:E}}),e._eventBus.dispatch("sandboxcreated",{source:e})}catch(u){return console.error(`PDFScriptingManager.setDocument: "${null==u?void 0:u.message}".`),void(yield e._destroyScripting())}yield null===(a=e._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"doc",name:"Open"}),yield e._dispatchPageOpen(e._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{t===e._pdfDocument&&(e._ready=!0)})}}else yield e._destroyScripting()})()}dispatchWillSave(t){var e=this;return k(function*(){var a;return null===(a=e._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(t){var e=this;return k(function*(){var a;return null===(a=e._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(t){var e=this;return k(function*(){var a;return null===(a=e._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(t){var e=this;return k(function*(){var a;return null===(a=e._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var t;return(null===(t=this._destroyCapability)||void 0===t?void 0:t.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,b.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,b.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,b.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,b.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(t){var e=this;return k(function*(){const a=e._pdfViewer.isInPresentationMode||e._pdfViewer.isChangingPresentationMode,{id:m,siblings:C,command:E,value:u}=t;if(!m){switch(E){case"clear":console.clear();break;case"error":console.error(u);break;case"layout":if(a)return;const L=(0,y.apiPageLayoutToViewerModes)(u);e._pdfViewer.spreadMode=L.spreadMode;break;case"page-num":e._pdfViewer.currentPageNumber=u+1;break;case"print":yield e._pdfViewer.pagesPromise,e._eventBus.dispatch("print",{source:e});break;case"println":console.log(u);break;case"zoom":if(a)return;e._pdfViewer.currentScaleValue=u;break;case"SaveAs":e._eventBus.dispatch("download",{source:e});break;case"FirstPage":e._pdfViewer.currentPageNumber=1;break;case"LastPage":e._pdfViewer.currentPageNumber=e._pdfViewer.pagesCount;break;case"NextPage":e._pdfViewer.nextPage();break;case"PrevPage":e._pdfViewer.previousPage();break;case"ZoomViewIn":if(a)return;e._pdfViewer.increaseScale();break;case"ZoomViewOut":if(a)return;e._pdfViewer.decreaseScale()}return}if(a&&t.focus)return;delete t.id,delete t.siblings;const g=C?[m,...C]:[m];for(const L of g){const z=document.querySelector(`[data-element-id="${L}"]`);var R;z?z.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):null===(R=e._pdfDocument)||void 0===R||R.annotationStorage.setValue(L,t)}})()}_dispatchPageOpen(t,e=!1){var a=this;return k(function*(){const m=a._pdfDocument,C=a._visitedPages;if(e&&(a._closeCapability=(0,b.createPromiseCapability)()),!a._closeCapability)return;const E=a._pdfViewer.getPageView(t-1);if((null==E?void 0:E.renderingState)!==y.RenderingStates.FINISHED)return void a._pageOpenPending.add(t);a._pageOpenPending.delete(t);const u=k(function*(){var g,R;const L=yield C.has(t)?null:null===(g=E.pdfPage)||void 0===g?void 0:g.getJSActions();m===a._pdfDocument&&(yield null===(R=a._scripting)||void 0===R?void 0:R.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:L}))})();C.set(t,u)})()}_dispatchPageClose(t){var e=this;return k(function*(){var a;const m=e._pdfDocument,C=e._visitedPages;if(!e._closeCapability||e._pageOpenPending.has(t))return;const E=C.get(t);E&&(C.set(t,null),yield E,m===e._pdfDocument&&(yield null===(a=e._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))})()}_getDocProperties(){var t=this;return k(function*(){if(t._docPropertiesLookup)return t._docPropertiesLookup(t._pdfDocument);const{docPropertiesLookup:e}=A(26);return e(t._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,b.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:t}=A(26);return new t(this._sandboxBundleSrc)}_destroyScripting(){var t=this;return k(function*(){var e,a;if(!t._scripting)return t._pdfDocument=null,void(null===(a=t._destroyCapability)||void 0===a||a.resolve());t._closeCapability&&(yield Promise.race([t._closeCapability.promise,new Promise(m=>{setTimeout(m,1e3)})]).catch(m=>{}),t._closeCapability=null),t._pdfDocument=null;try{yield t._scripting.destroySandbox()}catch{}for(const[m,C]of t._internalEvents)t._eventBus._off(m,C);t._internalEvents.clear();for(const[m,C]of t._domEvents)window.removeEventListener(m,C,!0);t._domEvents.clear(),t._pageOpenPending.clear(),t._visitedPages.clear(),t._scripting=null,delete t._mouseState.isDown,t._ready=!1,null===(e=t._destroyCapability)||void 0===e||e.resolve()})()}}},(S,r,A)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GenericScripting=void 0,r.docPropertiesLookup=function b(t){return F.apply(this,arguments)};var y=A(3);function F(){return(F=k(function*(t){const a="".split("#")[0];let{info:m,metadata:C,contentDispositionFilename:E,contentLength:u}=yield t.getMetadata();if(!u){const{length:g}=yield t.getDownloadInfo();u=g}return{...m,baseURL:a,filesize:u,filename:E||(0,y.getPdfFilenameFromUrl)(""),metadata:null==C?void 0:C.getRaw(),authors:null==C?void 0:C.get("dc:creator"),numPages:t.numPages,URL:""}})).apply(this,arguments)}r.GenericScripting=class p{constructor(e){this._ready=(0,y.loadScript)(e,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(e){var a=this;return k(function*(){(yield a._ready).create(e)})()}dispatchEventInSandbox(e){var a=this;return k(function*(){const m=yield a._ready;setTimeout(()=>m.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return k(function*(){(yield e._ready).nukeSandbox()})()}}}],V={};function O(S){var r=V[S];if(void 0!==r)return r.exports;var A=V[S]={exports:{}};return I[S](A,A.exports,O),A.exports}var D={};return(()=>{var S=D;Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return F.AnnotationLayerBuilder}}),Object.defineProperty(S,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return r.DefaultAnnotationLayerFactory}}),Object.defineProperty(S,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return r.DefaultStructTreeLayerFactory}}),Object.defineProperty(S,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return r.DefaultTextLayerFactory}}),Object.defineProperty(S,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return r.DefaultXfaLayerFactory}}),Object.defineProperty(S,"DownloadManager",{enumerable:!0,get:function(){return p.DownloadManager}}),Object.defineProperty(S,"EventBus",{enumerable:!0,get:function(){return t.EventBus}}),Object.defineProperty(S,"GenericL10n",{enumerable:!0,get:function(){return e.GenericL10n}}),Object.defineProperty(S,"LinkTarget",{enumerable:!0,get:function(){return A.LinkTarget}}),Object.defineProperty(S,"NullL10n",{enumerable:!0,get:function(){return a.NullL10n}}),Object.defineProperty(S,"PDFFindController",{enumerable:!0,get:function(){return m.PDFFindController}}),Object.defineProperty(S,"PDFHistory",{enumerable:!0,get:function(){return C.PDFHistory}}),Object.defineProperty(S,"PDFLinkService",{enumerable:!0,get:function(){return A.PDFLinkService}}),Object.defineProperty(S,"PDFPageView",{enumerable:!0,get:function(){return E.PDFPageView}}),Object.defineProperty(S,"PDFScriptingManager",{enumerable:!0,get:function(){return u.PDFScriptingManager}}),Object.defineProperty(S,"PDFSinglePageViewer",{enumerable:!0,get:function(){return b.PDFSinglePageViewer}}),Object.defineProperty(S,"PDFViewer",{enumerable:!0,get:function(){return b.PDFViewer}}),Object.defineProperty(S,"ProgressBar",{enumerable:!0,get:function(){return y.ProgressBar}}),Object.defineProperty(S,"RenderingStates",{enumerable:!0,get:function(){return y.RenderingStates}}),Object.defineProperty(S,"ScrollMode",{enumerable:!0,get:function(){return y.ScrollMode}}),Object.defineProperty(S,"SimpleLinkService",{enumerable:!0,get:function(){return A.SimpleLinkService}}),Object.defineProperty(S,"SpreadMode",{enumerable:!0,get:function(){return y.SpreadMode}}),Object.defineProperty(S,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return g.StructTreeLayerBuilder}}),Object.defineProperty(S,"TextLayerBuilder",{enumerable:!0,get:function(){return R.TextLayerBuilder}}),Object.defineProperty(S,"XfaLayerBuilder",{enumerable:!0,get:function(){return L.XfaLayerBuilder}}),Object.defineProperty(S,"parseQueryString",{enumerable:!0,get:function(){return y.parseQueryString}});var r=O(1),A=O(6),y=O(7),b=O(11),F=O(5),p=O(18),t=O(19),e=O(20),a=O(4),m=O(22),C=O(24),E=O(13),u=O(25),g=O(8),R=O(9),L=O(10)})(),D})()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:q=>{function s(o,v,B,k,$,w,T){try{var I=o[w](T),V=I.value}catch(O){return void B(O)}I.done?v(V):Promise.resolve(V).then(k,$)}q.exports=function M(o){return function(){var v=this,B=arguments;return new Promise(function(k,$){var w=o.apply(v,B);function T(V){s(w,k,$,T,I,"next",V)}function I(V){s(w,k,$,T,I,"throw",V)}T(void 0)})}},q.exports.__esModule=!0,q.exports.default=q.exports},6521:q=>{q.exports=function s(M,o){if(o.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")},q.exports.__esModule=!0,q.exports.default=q.exports},8912:q=>{q.exports=function s(M,o){return o.get?o.get.call(M):o.value},q.exports.__esModule=!0,q.exports.default=q.exports},3448:q=>{q.exports=function s(M,o,v){if(o.set)o.set.call(M,v);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=v}},q.exports.__esModule=!0,q.exports.default=q.exports},2625:q=>{q.exports=function s(M,o){if(M!==o)throw new TypeError("Private static access of wrong provenance")},q.exports.__esModule=!0,q.exports.default=q.exports},2506:q=>{q.exports=function s(M,o){if(void 0===M)throw new TypeError("attempted to "+o+" private static field before its declaration")},q.exports.__esModule=!0,q.exports.default=q.exports},4069:q=>{q.exports=function s(M,o,v){if(!o.has(M))throw new TypeError("attempted to "+v+" private field on non-instance");return o.get(M)},q.exports.__esModule=!0,q.exports.default=q.exports},468:(q,s,M)=>{var o=M(8912),v=M(4069);q.exports=function B(k,$){var w=v(k,$,"get");return o(k,w)},q.exports.__esModule=!0,q.exports.default=q.exports},9159:(q,s,M)=>{var o=M(6521);q.exports=function v(B,k,$){o(B,k),k.set(B,$)},q.exports.__esModule=!0,q.exports.default=q.exports},5661:(q,s,M)=>{var o=M(3448),v=M(4069);q.exports=function B(k,$,w){var T=v(k,$,"set");return o(k,T,w),w},q.exports.__esModule=!0,q.exports.default=q.exports},4467:q=>{q.exports=function s(M,o,v){if(!o.has(M))throw new TypeError("attempted to get private field on non-instance");return v},q.exports.__esModule=!0,q.exports.default=q.exports},1860:(q,s,M)=>{var o=M(6521);q.exports=function v(B,k){o(B,k),k.add(B)},q.exports.__esModule=!0,q.exports.default=q.exports},1280:(q,s,M)=>{var o=M(8912),v=M(2625),B=M(2506);q.exports=function k($,w,T){return v($,w),B(T,"get"),o($,T)},q.exports.__esModule=!0,q.exports.default=q.exports},9382:(q,s,M)=>{var o=M(3448),v=M(2625),B=M(2506);q.exports=function k($,w,T,I){return v($,w),B(T,"set"),o($,T,I),I},q.exports.__esModule=!0,q.exports.default=q.exports},5764:(q,s,M)=>{var o=M(2625);q.exports=function v(B,k,$){return o(B,k),$},q.exports.__esModule=!0,q.exports.default=q.exports},8416:(q,s,M)=>{var o=M(4062);q.exports=function v(B,k,$){return(k=o(k))in B?Object.defineProperty(B,k,{value:$,enumerable:!0,configurable:!0,writable:!0}):B[k]=$,B},q.exports.__esModule=!0,q.exports.default=q.exports},5036:(q,s,M)=>{var o=M(8698).default;q.exports=function v(B,k){if("object"!==o(B)||null===B)return B;var $=B[Symbol.toPrimitive];if(void 0!==$){var w=$.call(B,k||"default");if("object"!==o(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(B)},q.exports.__esModule=!0,q.exports.default=q.exports},4062:(q,s,M)=>{var o=M(8698).default,v=M(5036);q.exports=function B(k){var $=v(k,"string");return"symbol"===o($)?$:String($)},q.exports.__esModule=!0,q.exports.default=q.exports},8698:q=>{function s(M){return q.exports=s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},q.exports.__esModule=!0,q.exports.default=q.exports,s(M)}q.exports=s,q.exports.__esModule=!0,q.exports.default=q.exports},4874:(q,s,M)=>{"use strict";M.d(s,{rQ:()=>re,xC:()=>j});var o=M(1002);function k(h,n,_){return(n=function B(h){var n=function v(h,n){if("object"!==(0,o.Z)(h)||null===h)return h;var _=h[Symbol.toPrimitive];if(void 0!==_){var d=_.call(h,n||"default");if("object"!==(0,o.Z)(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(h)}(h,"string");return"symbol"===(0,o.Z)(n)?n:String(n)}(n))in h?Object.defineProperty(h,n,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[n]=_,h}var $=M(6242),w=M(2438),T=M(8645),I=M(7715),V=M(9773),O=M(7394);class D extends O.w0{constructor(n,_){super()}schedule(n,_=0){return this}}const S={setInterval(h,n,..._){const{delegate:d}=S;return null!=d&&d.setInterval?d.setInterval(h,n,..._):setInterval(h,n,..._)},clearInterval(h){const{delegate:n}=S;return((null==n?void 0:n.clearInterval)||clearInterval)(h)},delegate:void 0};var r=M(9039);const y={now:()=>(y.delegate||Date).now(),delegate:void 0};class b{constructor(n,_=b.now){this.schedulerActionCtor=n,this.now=_}schedule(n,_=0,d){return new this.schedulerActionCtor(this,n).schedule(d,_)}}b.now=y.now;const p=new class F extends b{constructor(n,_=b.now){super(n,_),this.actions=[],this._active=!1}flush(n){const{actions:_}=this;if(this._active)return void _.push(n);let d;this._active=!0;do{if(d=n.execute(n.state,n.delay))break}while(n=_.shift());if(this._active=!1,d){for(;n=_.shift();)n.unsubscribe();throw d}}}(class A extends D{constructor(n,_){super(n,_),this.scheduler=n,this.work=_,this.pending=!1}schedule(n,_=0){var d;if(this.closed)return this;this.state=n;const f=this.id,i=this.scheduler;return null!=f&&(this.id=this.recycleAsyncId(i,f,_)),this.pending=!0,this.delay=_,this.id=null!==(d=this.id)&&void 0!==d?d:this.requestAsyncId(i,this.id,_),this}requestAsyncId(n,_,d=0){return S.setInterval(n.flush.bind(n,this),d)}recycleAsyncId(n,_,d=0){if(null!=d&&this.delay===d&&!1===this.pending)return _;null!=_&&S.clearInterval(_)}execute(n,_){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const d=this._execute(n,_);if(d)return d;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,_){let f,d=!1;try{this.work(n)}catch(i){d=!0,f=i||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),f}unsubscribe(){if(!this.closed){const{id:n,scheduler:_}=this,{actions:d}=_;this.work=this.state=this.scheduler=null,this.pending=!1,(0,r.P)(d,this),null!=n&&(this.id=this.recycleAsyncId(_,n,null)),this.delay=null,super.unsubscribe()}}});var e=M(9360),a=M(8251),C=M(2181),E=M(9627),u=M.t(E,2),g=M(1016),R=M.t(g,2);const L=["pdfViewerContainer"];function N(h,n,_){h[n]=_}function U(){return typeof window>"u"}U()||N(u,"verbosity",E.VerbosityLevel.INFOS);var Q=function(h){return h[h.DISABLED=0]="DISABLED",h[h.ENABLED=1]="ENABLED",h[h.ENHANCED=2]="ENHANCED",h}(Q||{});let re=(()=>{var h;class n{set cMapsUrl(d){this._cMapsUrl=d}set page(d){const f=d=parseInt(d,10)||1;this._pdf&&(d=this.getValidPageNumber(d)),this._page=d,f!==d&&this.pageChange.emit(d)}set renderText(d){this._renderText=d}set renderTextMode(d){this._renderTextMode=d}set originalSize(d){this._originalSize=d}set showAll(d){this._showAll=d}set stickToPage(d){this._stickToPage=d}set zoom(d){d<=0||(this._zoom=d)}get zoom(){return this._zoom}set zoomScale(d){this._zoomScale=d}get zoomScale(){return this._zoomScale}set rotation(d){"number"==typeof d&&d%90==0?this._rotation=d:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(d){this._externalLinkTarget=d}set autoresize(d){this._canAutoResize=!!d}set fitToPage(d){this._fitToPage=!!d}set showBorders(d){this._showBorders=!!d}static getLinkTarget(d){switch(d){case"blank":return g.LinkTarget.BLANK;case"none":return g.LinkTarget.NONE;case"self":return g.LinkTarget.SELF;case"parent":return g.LinkTarget.PARENT;case"top":return g.LinkTarget.TOP}return null}constructor(d,f){if(k(this,"element",void 0),k(this,"ngZone",void 0),k(this,"pdfViewerContainer",void 0),k(this,"eventBus",void 0),k(this,"pdfLinkService",void 0),k(this,"pdfFindController",void 0),k(this,"pdfViewer",void 0),k(this,"isVisible",!1),k(this,"_cMapsUrl",typeof u<"u"?`https://unpkg.com/pdfjs-dist@${E.version}/cmaps/`:null),k(this,"_imageResourcesPath",typeof u<"u"?`https://unpkg.com/pdfjs-dist@${E.version}/web/images/`:void 0),k(this,"_renderText",!0),k(this,"_renderTextMode",Q.ENABLED),k(this,"_stickToPage",!1),k(this,"_originalSize",!0),k(this,"_pdf",void 0),k(this,"_page",1),k(this,"_zoom",1),k(this,"_zoomScale","page-width"),k(this,"_rotation",0),k(this,"_showAll",!0),k(this,"_canAutoResize",!0),k(this,"_fitToPage",!1),k(this,"_externalLinkTarget","blank"),k(this,"_showBorders",!1),k(this,"lastLoaded",void 0),k(this,"_latestScrolledPage",void 0),k(this,"resizeTimeout",null),k(this,"pageScrollTimeout",null),k(this,"isInitialized",!1),k(this,"loadingTask",void 0),k(this,"destroy$",new T.x),k(this,"afterLoadComplete",new $.vpe),k(this,"pageRendered",new $.vpe),k(this,"pageInitialized",new $.vpe),k(this,"textLayerRendered",new $.vpe),k(this,"onError",new $.vpe),k(this,"onProgress",new $.vpe),k(this,"pageChange",new $.vpe(!0)),k(this,"src",void 0),this.element=d,this.ngZone=f,U())return;let i;const c=E.version;i=window[`pdfWorkerSrc${c}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${c}/legacy/build/pdf.worker.min.js`),N(E.GlobalWorkerOptions,"workerSrc",i)}ngAfterViewChecked(){if(this.isInitialized)return;const d=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=d?!1===this.isVisible&&null!=d&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(d){if(!U()&&this.isVisible)if("src"in d)this.loadPDF();else if(this._pdf){if("renderText"in d?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:Q.DISABLED,this.resetPdfDocument()):"showAll"in d&&(this.setupViewer(),this.resetPdfDocument()),"page"in d){const{page:f}=d;if(f.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,I.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,V.R)(this.destroy$)).subscribe({next:d=>{const f=this._rotation+d.rotate,i=d.getViewport({scale:this._zoom,rotation:f}).width*n.CSS_UNITS;let c=this._zoom,l=!0;if(!this._originalSize||this._fitToPage&&i>this.pdfViewerContainer.nativeElement.clientWidth){const P=d.getViewport({scale:1,rotation:f});c=this.getScale(P.width,P.height),l=!this._stickToPage}this.pdfViewer._setScale(c,l)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const d=n.getLinkTarget(this._externalLinkTarget);return d?{externalLinkTarget:d}:{}}initEventBus(){this.eventBus=function z(h,n){const _=new h.EventBus;return function W(h,n){(0,w.R)(h,"documentload").pipe((0,V.R)(n)).subscribe(()=>{const _=document.createEvent("CustomEvent");_.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(_)}),(0,w.R)(h,"pagerendered").pipe((0,V.R)(n)).subscribe(({pageNumber:_,cssTransform:d,source:f})=>{const i=document.createEvent("CustomEvent");i.initCustomEvent("pagerendered",!0,!0,{pageNumber:_,cssTransform:d}),f.div.dispatchEvent(i)}),(0,w.R)(h,"textlayerrendered").pipe((0,V.R)(n)).subscribe(({pageNumber:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:_}),d.textLayerDiv.dispatchEvent(f)}),(0,w.R)(h,"pagechanging").pipe((0,V.R)(n)).subscribe(({pageNumber:_,source:d})=>{const f=document.createEvent("UIEvents");f.initEvent("pagechanging",!0,!0),f.pageNumber=_,d.container.dispatchEvent(f)}),(0,w.R)(h,"pagesinit").pipe((0,V.R)(n)).subscribe(({source:_})=>{const d=document.createEvent("CustomEvent");d.initCustomEvent("pagesinit",!0,!0,null),_.container.dispatchEvent(d)}),(0,w.R)(h,"pagesloaded").pipe((0,V.R)(n)).subscribe(({pagesCount:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("pagesloaded",!0,!0,{pagesCount:_}),d.container.dispatchEvent(f)}),(0,w.R)(h,"scalechange").pipe((0,V.R)(n)).subscribe(({scale:_,presetValue:d,source:f})=>{const i=document.createEvent("UIEvents");i.initEvent("scalechange",!0,!0),i.scale=_,i.presetValue=d,f.container.dispatchEvent(i)}),(0,w.R)(h,"updateviewarea").pipe((0,V.R)(n)).subscribe(({location:_,source:d})=>{const f=document.createEvent("UIEvents");f.initEvent("updateviewarea",!0,!0),f.location=_,d.container.dispatchEvent(f)}),(0,w.R)(h,"find").pipe((0,V.R)(n)).subscribe(({source:_,type:d,query:f,phraseSearch:i,caseSensitive:c,highlightAll:l,findPrevious:P})=>{if(_===window)return;const x=document.createEvent("CustomEvent");x.initCustomEvent("find"+d,!0,!0,{query:f,phraseSearch:i,caseSensitive:c,highlightAll:l,findPrevious:P}),window.dispatchEvent(x)}),(0,w.R)(h,"attachmentsloaded").pipe((0,V.R)(n)).subscribe(({attachmentsCount:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:_}),d.container.dispatchEvent(f)}),(0,w.R)(h,"sidebarviewchanged").pipe((0,V.R)(n)).subscribe(({view:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("sidebarviewchanged",!0,!0,{view:_}),d.outerContainer.dispatchEvent(f)}),(0,w.R)(h,"pagemode").pipe((0,V.R)(n)).subscribe(({mode:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("pagemode",!0,!0,{mode:_}),d.pdfViewer.container.dispatchEvent(f)}),(0,w.R)(h,"namedaction").pipe((0,V.R)(n)).subscribe(({action:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("namedaction",!0,!0,{action:_}),d.pdfViewer.container.dispatchEvent(f)}),(0,w.R)(h,"presentationmodechanged").pipe((0,V.R)(n)).subscribe(({active:_,switchInProgress:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("presentationmodechanged",!0,!0,{active:_,switchInProgress:d}),window.dispatchEvent(f)}),(0,w.R)(h,"outlineloaded").pipe((0,V.R)(n)).subscribe(({outlineCount:_,source:d})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("outlineloaded",!0,!0,{outlineCount:_}),d.container.dispatchEvent(f)})}(_,n),_}(R,this.destroy$),(0,w.R)(this.eventBus,"pagerendered").pipe((0,V.R)(this.destroy$)).subscribe(d=>{this.pageRendered.emit(d)}),(0,w.R)(this.eventBus,"pagesinit").pipe((0,V.R)(this.destroy$)).subscribe(d=>{this.pageInitialized.emit(d)}),(0,w.R)(this.eventBus,"pagechanging").pipe((0,V.R)(this.destroy$)).subscribe(({pageNumber:d})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=d,this.pageChange.emit(d)},100)}),(0,w.R)(this.eventBus,"textlayerrendered").pipe((0,V.R)(this.destroy$)).subscribe(d=>{this.textLayerRendered.emit(d)})}initPDFServices(){this.pdfLinkService=new g.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new g.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:Q.DISABLED,findController:this.pdfFindController,l10n:new g.GenericL10n("en"),imageResourcesPath:this._imageResourcesPath}}setupViewer(){N(u,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new g.PDFViewer(this.getPDFOptions()):new g.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(d){return d<1?1:d>this._pdf.numPages?this._pdf.numPages:d}getDocumentParams(){const d=typeof this.src;if(!this._cMapsUrl)return this.src;const f={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===d?f.url=this.src:"object"===d&&(void 0!==this.src.byteLength?f.data=this.src:Object.assign(f,this.src)),f}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=E.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=f=>{this.onProgress.emit(f)};const d=this.src;(0,I.D)(this.loadingTask.promise).pipe((0,V.R)(this.destroy$)).subscribe({next:f=>{this._pdf=f,this.lastLoaded=d,this.afterLoadComplete.emit(f),this.resetPdfDocument(),this.update()},error:f=>{this.lastLoaded=null,this.onError.emit(f)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(d,f){const i=this._showBorders?2*n.BORDER_WIDTH:0,c=this.pdfViewerContainer.nativeElement.clientWidth-i,l=this.pdfViewerContainer.nativeElement.clientHeight-i;if(0===l||0===f||0===c||0===d)return 1;let P=1;switch(this._zoomScale){case"page-fit":P=Math.min(l/f,c/d);break;case"page-height":P=l/f;break;default:P=c/d}return this._zoom*P/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){U()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){U()||this.ngZone.runOutsideAngular(()=>{(0,w.R)(window,"resize").pipe(function m(h,n=p){return(0,e.e)((_,d)=>{let f=null,i=null,c=null;const l=()=>{if(f){f.unsubscribe(),f=null;const x=i;i=null,d.next(x)}};function P(){const x=c+h,H=n.now();if(H<x)return f=this.schedule(void 0,x-H),void d.add(f);l()}_.subscribe((0,a.x)(d,x=>{i=x,c=n.now(),f||(f=n.schedule(P,h),d.add(f))},()=>{l(),d.complete()},void 0,()=>{i=f=null}))})}(100),(0,C.h)(()=>this._canAutoResize&&!!this._pdf),(0,V.R)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return h=n,k(n,"CSS_UNITS",96/72),k(n,"BORDER_WIDTH",9),k(n,"\u0275fac",function(d){return new(d||h)($.Y36($.SBq),$.Y36($.R0b))}),k(n,"\u0275cmp",$.Xpm({type:h,selectors:[["pdf-viewer"]],viewQuery:function(d,f){if(1&d&&$.Gf(L,5),2&d){let i;$.iGM(i=$.CRH())&&(f.pdfViewerContainer=i.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[$.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(d,f){1&d&&($.TgZ(0,"div",0,1),$._UZ(2,"div",2),$.qZA())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})),n})(),j=(()=>{var h;class n{}return h=n,k(n,"\u0275fac",function(d){return new(d||h)}),k(n,"\u0275mod",$.oAB({type:h})),k(n,"\u0275inj",$.cJS({})),n})()},1002:(q,s,M)=>{"use strict";function o(v){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(v)}M.d(s,{Z:()=>o})}}]);