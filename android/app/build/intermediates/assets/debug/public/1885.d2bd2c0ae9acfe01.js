"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1885],{1885:(A,g,s)=>{s.r(g),s.d(g,{MttoOtGeneraNoProgramaPage:()=>M});var u=s(5861),p=s(6895),d=s(433),a=s(5562),h=s(9098),O=s(532),o=s(8256),b=s(1456),D=s(849),m=s(1407);function P(_,c){if(1&_&&(o.TgZ(0,"ion-select-option",19),o._uU(1),o.qZA()),2&_){const n=c.$implicit;o.Q6J("value",n.Y06001),o.xp6(1),o.hij("",n.Y06002," ")}}let M=(()=>{class _{constructor(n,e,t,r,i,l,T,C){this.navCtrl=n,this.modalCtrl=e,this.ApiServices=t,this.storage=r,this.route=i,this.router=l,this.alertController=T,this.loadingController=C,this.scanActive=!0,this.Cancelar="Cancelar",this.disableButton=!1,this.DsOrdenTrabajo={},this.DsOrdenTrabajo.codsmg="",this.DsOrdenTrabajo.Y06002="",this.DsOrdenTrabajo.dias_trabajados_manual=0,this.DsOrdenTrabajo.nombres_tecnico="",console.log(this.DsOrdenTrabajo)}ngOnInit(){this.load_cbos_pieza_material_maquina()}FOpenPopUpEquipo(){var n=this;return(0,u.Z)(function*(){let e,t;e=n.DsOrdenTrabajo.codsmg,t=n.DsOrdenTrabajo.idactivos;const r=yield n.modalCtrl.create({component:O.MttoOtPopEquipoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{nombre_tecnico:e,titulo_modal:"Maestro de Equipos",id_personal:t}});return r.onDidDismiss().then(i=>{null!=i.data&&(n.dataReturned=i.data,console.log("dataReturned::206",i),n.DsOrdenTrabajo.codsmg=i.data.nombres,n.DsOrdenTrabajo.idactivos=i.data.id)}),yield r.present()})()}select_change_site(n){for(const e of this.rest_site)e.Y06001==n.detail.value&&(this.DsOrdenTrabajo.Y06002=e.Y06002,this.DsOrdenTrabajo.Y06001=e.Y06001)}FOpenModalTecnico(n){var e=this;return(0,u.Z)(function*(){let t,r;t=e.DsOrdenTrabajo.nombres_tecnico,r=e.DsOrdenTrabajo.ot_id_tecnico;const i=yield e.modalCtrl.create({component:h.MttoOtPopTecnicoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{nombre_tecnico:t,titulo_modal:"Tecnicos de Mantto",id_personal:r}});return i.onDidDismiss().then(l=>{null!=l.data&&(e.dataReturned=l.data,console.log("dataReturned::206",l),e.DsOrdenTrabajo.nombres_tecnico=l.data.nombres,e.DsOrdenTrabajo.ot_id_tecnico=l.data.id)}),yield i.present()})()}load_cbos_pieza_material_maquina(){this.loadingController.create({message:"Cargando listas...",translucent:!0}).then(e=>{e.present(),this.ApiServices.load_cbo_site().then(t=>{this.rest_site=t.site}).finally(()=>{this.loadingController.dismiss()})})}ngOnDestroy(){}FCancelarForm(){}FSaveForm(n){this.loadingController.create({message:"Guardando...",translucent:!0}).then(t=>{t.present(),this.DsOrdenTrabajo.acc="14",this.ApiServices.SaveOtNoProgramada(this.DsOrdenTrabajo).then(r=>{let i;if(i=r[0],this.loadingController.dismiss(),0==i.o_nres)alert("Error, no se pudo guardar correctamente.");else if(1==n){this.DsOrdenTrabajo.id_orden_trab_cab=i.o_nres,this.DsOrdenTrabajo.nroot=i.p2,this.DsOrdenTrabajo.codequipo=this.DsOrdenTrabajo.codsmg,this.DsOrdenTrabajo.fcreaot=i.p1,this.DsOrdenTrabajo.idot=i.o_nres;let l={state:this.DsOrdenTrabajo};console.log("navigationExtras",l),this.navCtrl.navigateForward(["winprincipal"],l)}}).finally(()=>{console.log("finalyyyy")})})}}return _.\u0275fac=function(n){return new(n||_)(o.Y36(a.SH),o.Y36(a.IN),o.Y36(b.k),o.Y36(D.K),o.Y36(m.gz),o.Y36(m.F0),o.Y36(a.Br),o.Y36(a.HT))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-mtto-ot-genera-no-programa"]],standalone:!0,features:[o.jDz],decls:59,vars:27,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text","disabled"],[3,"hidden"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],["type","text","placeholder","Buscar Equipo","mode","ios","readonly","",3,"ngModel","value","click","ngModelChange"],["cancelText","Cancelar","placeholder","Seleccionar Site","color","primary","interface","action-sheet","mode","ios",3,"selectedText","ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["ngDefaultControl","",3,"ngModel","ngModelChange"],["type","text","placeholder","Buscar Tecnico","mode","ios","readonly","",3,"ngModel","value","click","ngModelChange"],[2,"text-align","center"],["color","danger",3,"disabled","click"],["name","close-outline"],["color","primary",3,"disabled","click"],["name","save-outline"],["color","secondary",3,"disabled","click"],[3,"value"]],template:function(n,e){1&n&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),o._uU(3,"Generar O.T. No Programada"),o.qZA(),o.TgZ(4,"ion-buttons",2),o._UZ(5,"ion-back-button",3),o.qZA()()(),o.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item",4)(9,"ion-grid",4)(10,"ion-row",5)(11,"ion-col",6),o._uU(12," Equipo: "),o.qZA(),o.TgZ(13,"ion-col",7)(14,"ion-item")(15,"ion-searchbar",8),o.NdJ("click",function(){return e.FOpenPopUpEquipo()})("ngModelChange",function(r){return e.DsOrdenTrabajo.codsmg=r}),o.qZA()(),o._UZ(16,"div"),o.qZA()(),o.TgZ(17,"ion-row",5)(18,"ion-col",6),o._uU(19," Procedencia: "),o.qZA(),o.TgZ(20,"ion-col",7)(21,"ion-select",9),o.NdJ("ionChange",function(r){return e.select_change_site(r)})("ngModelChange",function(r){return e.DsOrdenTrabajo.Y06001=r}),o.YNc(22,P,2,2,"ion-select-option",10),o.qZA(),o._UZ(23,"div"),o.qZA()(),o.TgZ(24,"ion-row",5)(25,"ion-col",6),o._uU(26," D\xedas Operativos: "),o.qZA(),o.TgZ(27,"ion-col",7)(28,"app-input-with-button",11),o.NdJ("ngModelChange",function(r){return e.DsOrdenTrabajo.dias_trabajados_manual=r}),o.qZA(),o._UZ(29,"div"),o.qZA()(),o.TgZ(30,"ion-row",5)(31,"ion-col",6),o._uU(32," Tecnico: "),o.qZA(),o.TgZ(33,"ion-col",7)(34,"ion-item")(35,"ion-searchbar",12),o.NdJ("click",function(){return e.FOpenModalTecnico(0)})("ngModelChange",function(r){return e.DsOrdenTrabajo.nombres_tecnico=r}),o.qZA()(),o._UZ(36,"div"),o.qZA()()()()()(),o.TgZ(37,"ion-footer")(38,"ion-grid")(39,"ion-row"),o._UZ(40,"ion-col"),o.TgZ(41,"ion-col",13)(42,"ion-buttons")(43,"ion-button",14),o.NdJ("click",function(){return e.FCancelarForm()}),o._UZ(44,"ion-icon",15),o._uU(45,"\xa0 Cancelar "),o.qZA(),o._uU(46," \xa0\xa0\xa0\xa0 "),o.TgZ(47,"ion-button",16),o.NdJ("click",function(){return e.FSaveForm(1)}),o._UZ(48,"ion-icon",17),o._uU(49,"\xa0 "),o.TgZ(50,"strong"),o._uU(51," Guardar y Asignar Servicios "),o.qZA()(),o._uU(52," \xa0\xa0\xa0\xa0 "),o.TgZ(53,"ion-button",18),o.NdJ("click",function(){return e.FSaveForm(2)}),o._UZ(54,"ion-icon",17),o._uU(55,"\xa0 "),o.TgZ(56,"strong"),o._uU(57," Guardar y Cerrar "),o.qZA()()()(),o._UZ(58,"ion-col"),o.qZA()()()),2&n&&(o.xp6(5),o.Q6J("text",e.Cancelar)("disabled",e.disableButton),o.xp6(3),o.Q6J("hidden",e.scanActive),o.xp6(1),o.Q6J("hidden",e.scanActive),o.xp6(6),o.s9C("value",e.DsOrdenTrabajo.codsmg),o.Q6J("ngModel",e.DsOrdenTrabajo.codsmg),o.xp6(1),o.Tol(e.ClassNotiEquipo),o.xp6(5),o.Q6J("selectedText",e.DsOrdenTrabajo.Y06002)("ngModel",e.DsOrdenTrabajo.Y06001),o.xp6(1),o.Q6J("ngForOf",e.rest_site),o.xp6(1),o.Tol(e.CssNotiSite),o.xp6(5),o.Q6J("ngModel",e.DsOrdenTrabajo.dias_trabajados_manual),o.xp6(1),o.Tol(e.CssNotiDiasOpera),o.xp6(6),o.s9C("value",e.DsOrdenTrabajo.nombres_tecnico),o.Q6J("ngModel",e.DsOrdenTrabajo.nombres_tecnico),o.xp6(1),o.Tol(e.CssNotiTenico),o.xp6(7),o.Q6J("disabled",e.disableButton),o.xp6(4),o.Q6J("disabled",e.disableButton),o.xp6(6),o.Q6J("disabled",e.disableButton))},dependencies:[a.Pc,a.oU,a.YG,a.Sm,a.wI,a.W2,a.fr,a.jY,a.Gu,a.gu,a.Ie,a.q_,a.Nd,a.VI,a.t9,a.n0,a.wd,a.sr,a.QI,a.j9,a.cs,p.ez,p.sg,d.u5,d.Fj,d.JJ,d.On]}),_})()}}]);