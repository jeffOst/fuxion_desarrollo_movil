"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1773],{1773:(T,g,s)=>{s.r(g),s.d(g,{ProdAteServDejarPiezaCalidadPage:()=>A});var M=s(5861),m=s(6814),_=s(95),n=s(6728),P=s(1811),e=s(6242),C=s(5472),v=s(4248),F=s(6485);let A=(()=>{var c;class h{constructor(t,o,i,a,d,l,r){this.navCtrl=t,this.router=o,this.modalCtrl=i,this.alertController=a,this.loadingController=d,this.ApiServices=l,this.location=r,this.Cancelar="Cancelar",this.readonly_qr=!1,this.FormModel={},this.navParams=this.router.getCurrentNavigation().extras.state,console.log(this.navParams),console.log("this.FormModel",this.FormModel),this.navParams&&(this.FormModel.correorden=this.navParams.correorden,console.log("this.navParams",this.navParams),this.FormModel.idofpterminado=this.navParams.idofpterminado,this.FormModel.codigo_pt=this.navParams.Y04001,this.FormModel.descripcion_pt=this.navParams.descripcion_pt,this.FormModel.nombres_tecnico=this.navParams.nombres_tecnico,this.FormModel.EQUIPOID=this.navParams.EQUIPOID,this.FormModel.idsolicitante_scc=this.navParams.idsolicitante_scc,this.FormModel.cantidad=this.navParams.cantidad,this.FormModel.cantidad_atendido=this.navParams.cantidad_atendido,console.log("this.FormModel",this.FormModel),this.CssReproceso=1==this.navParams.flag_reproceso?"CssReproceso":"",console.log("this.CssReproceso=",this.CssReproceso),this.hide_div_reproceso=1==this.navParams.flag_reproceso,this.FormModel.fecha_reproceso=this.navParams.fecha_reproceso,this.FormModel.cantidad_reproceso=this.navParams.cantidad_reproceso,this.FormModel.idrevisiondet_reproceso=this.navParams.idrevisiondet_reproceso)}ngOnInit(){this.FormModel.cantidad_scc=0,this.hide_div_reproceso||this.listServiciosPendientes()}FCancelarForm(){this.location.back()}FSaveForm(){let t="",i=0;this.CssNotiTecnico="field_required_ok",(null==this.FormModel.nombres_tecnico||""==this.FormModel.nombres_tecnico)&&(i=2,t=" Fala seleccionar  Tecnico",this.CssNotiTecnico="field_required"),this.CssNotiCantidad="field_required_ok",(null==this.FormModel.cantidad_scc||""==this.FormModel.cantidad_scc)&&(i=2,t=" Fala agregar cantidad",this.CssNotiCantidad="field_required"),1==i||2==i?this.alertController.create({header:"Solicita Control Calidad",cssClass:"success",subHeader:"",mode:"ios",message:""+t,buttons:[{text:"Aceptar",cssClass:"bgcolor:danger",handler:()=>{}}]}).then(d=>{d.present()}):this.loadingController.create({message:"Cargando...",translucent:!0}).then(d=>{d.present(),this.FormModel.acc="13",this.ApiServices.SaveControlCalidadByOf(this.FormModel).then(l=>{let r;if(this.loadingController.dismiss(),r=l[0],console.log(r),console.log(r.o_nres),0==r.o_nres)alert("Error, "+r.o_msj);else{this.FormModel.idsolicitudcontrolcab=r.o_nres;let p={state:this.FormModel};console.log("navigationExtras",p),this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],p),alert(r.o_msj)}}).finally(()=>{console.log("finalyyyy")})})}FOpenModalTecnico(t){var o=this;return(0,M.Z)(function*(){let i,a;i=o.FormModel.nombres_tecnico,a=o.FormModel.idsolicitante_scc;const l=yield o.modalCtrl.create({component:P.ProdAteServPopPersonalPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{nombre_tecnico:i,titulo_modal:"Lista de Tecnicos",id_personal:a}});return l.onDidDismiss().then(r=>{null!=r.data&&(o.FormModel.nombres_tecnico=r.data.nombres,o.FormModel.idsolicitante_scc=r.data.id)}),yield l.present()})()}listServiciosPendientes(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(o=>{o.present(),this.ApiServices.LoadFormDejarPiezasCalidad(this.FormModel.idofpterminado).then(i=>{console.log("this.results=>>>",i),this.FormModel.cantidad_atendido=i[0].cnt_recibo,this.FormModel.cantidad_scc=this.FormModel.cantidad-this.FormModel.cantidad_atendido,console.log("this.results=>>>",i)}).finally(()=>{this.loadingController.dismiss()})})}}return(c=h).\u0275fac=function(t){return new(t||c)(e.Y36(C.SH),e.Y36(v.F0),e.Y36(n.IN),e.Y36(n.Br),e.Y36(n.HT),e.Y36(F.Z),e.Y36(m.Ye))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-prod-ate-serv-dejar-pieza-calidad"]],standalone:!0,features:[e.jDz],decls:63,vars:19,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],[3,"ngModel","ngModelChange"],["type","text","readonly","",3,"ngModel","value","ngModelChange"],["size","9",1,"ion-text-start"],["readonly","",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[2,"text-align","center"],["color","danger",3,"disabled","click"],["name","close-outline"],["color","primary",3,"disabled","click"],["name","save-outline"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Solicitud Revisi\xf3n Q.C."),e.qZA(),e.TgZ(4,"ion-buttons",2),e._UZ(5,"ion-back-button",3),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item")(9,"ion-grid")(10,"ion-row",4)(11,"ion-col",5),e._uU(12," Orden de Fabricaci\xf3n \xa0:"),e.qZA(),e.TgZ(13,"ion-col",6)(14,"ion-input",7),e.NdJ("ngModelChange",function(a){return o.FormModel.correorden=a}),e.qZA()()(),e.TgZ(15,"ion-row",4)(16,"ion-col",5),e._uU(17," Codigo P.T. \xa0:"),e.qZA(),e.TgZ(18,"ion-col",6)(19,"ion-input",7),e.NdJ("ngModelChange",function(a){return o.FormModel.codigo_pt=a}),e.qZA()()(),e.TgZ(20,"ion-row",4)(21,"ion-col",5),e._uU(22," Descripci\xf3n del Componente \xa0:"),e.qZA(),e.TgZ(23,"ion-col",6)(24,"ion-input",7),e.NdJ("ngModelChange",function(a){return o.FormModel.descripcion_pt=a}),e.qZA()()(),e.TgZ(25,"ion-row",4)(26,"ion-col",5),e._uU(27," Tecnico: "),e.qZA(),e.TgZ(28,"ion-col",6)(29,"ion-input",8),e.NdJ("ngModelChange",function(a){return o.FormModel.nombres_tecnico=a}),e.qZA(),e._UZ(30,"div"),e.qZA()(),e.TgZ(31,"ion-row",4)(32,"ion-col",5),e._uU(33,"Total Piezas: "),e.qZA(),e.TgZ(34,"ion-col",9)(35,"ion-input",10),e.NdJ("ngModelChange",function(a){return o.FormModel.cantidad=a}),e.qZA()()(),e.TgZ(36,"ion-row",4)(37,"ion-col",5),e._uU(38,"Atendido Piezas: "),e.qZA(),e.TgZ(39,"ion-col",9)(40,"ion-input",10),e.NdJ("ngModelChange",function(a){return o.FormModel.cantidad_atendido=a}),e.qZA()()(),e.TgZ(41,"ion-row",4)(42,"ion-col",5),e._uU(43," Cantidad: "),e.qZA(),e.TgZ(44,"ion-col",9)(45,"ion-input",11),e.NdJ("ngModelChange",function(a){return o.FormModel.cantidad_scc=a}),e.qZA(),e._UZ(46,"div"),e.qZA()()()()()(),e.TgZ(47,"ion-footer")(48,"ion-grid")(49,"ion-row"),e._UZ(50,"ion-col"),e.TgZ(51,"ion-col",12)(52,"ion-buttons")(53,"ion-button",13),e.NdJ("click",function(){return o.FCancelarForm()}),e._UZ(54,"ion-icon",14),e._uU(55,"\xa0 Cancelar "),e.qZA(),e._uU(56," \xa0\xa0\xa0\xa0 "),e.TgZ(57,"ion-button",15),e.NdJ("click",function(){return o.FSaveForm()}),e._UZ(58,"ion-icon",16),e._uU(59,"\xa0 "),e.TgZ(60,"strong"),e._uU(61," Iniciar "),e.qZA()()()(),e._UZ(62,"ion-col"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("text",o.Cancelar),e.xp6(9),e.Q6J("ngModel",o.FormModel.correorden),e.xp6(5),e.Q6J("ngModel",o.FormModel.codigo_pt),e.uIk("disabled",o.readonly_qr),e.xp6(5),e.Q6J("ngModel",o.FormModel.descripcion_pt),e.uIk("disabled",o.readonly_qr),e.xp6(5),e.s9C("value",o.FormModel.nombres_tecnico),e.Q6J("ngModel",o.FormModel.nombres_tecnico),e.xp6(1),e.Tol(o.CssNotiTecnico),e.xp6(5),e.Q6J("ngModel",o.FormModel.cantidad),e.xp6(5),e.Q6J("ngModel",o.FormModel.cantidad_atendido),e.xp6(5),e.Q6J("ngModel",o.FormModel.cantidad_scc),e.xp6(1),e.Tol(o.CssNotiCantidad),e.xp6(7),e.Q6J("disabled",o.disableButton),e.xp6(4),e.Q6J("disabled",o.disableButton))},dependencies:[n.Pc,n.YG,n.Sm,n.wI,n.W2,n.fr,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.q_,n.Nd,n.wd,n.sr,n.as,n.j9,n.oU,m.ez,_.u5,_.JJ,_.On]}),h})()}}]);