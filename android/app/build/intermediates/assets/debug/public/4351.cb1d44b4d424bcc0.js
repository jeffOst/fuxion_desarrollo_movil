"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4351],{4351:(S,m,s)=>{s.r(m),s.d(m,{RrhhListAprobHePage:()=>Z});var h=s(5861),p=s(6814),_=s(95),n=s(6728),f=s(6471),e=s(6242),C=s(5472),A=s(2014),x=s(8715);const T=["IdHtmlInputSearch"];function b(d,g){if(1&d){const r=e.EpF();e.TgZ(0,"ion-item",23)(1,"ion-grid",24)(2,"ion-row",25)(3,"ion-col",26)(4,"ion-checkbox",27),e.NdJ("ngModelChange",function(i){const a=e.CHM(r).$implicit;return e.KtG(a.isChecked=i)})("ionChange",function(){const o=e.CHM(r).$implicit,a=e.oxw();return e.KtG(a.onCheckboxChange(o))}),e.qZA()(),e.TgZ(5,"ion-col",28),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",29),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",26)(10,"ion-label",30),e._uU(11),e.qZA()(),e.TgZ(12,"ion-col",26)(13,"ion-label",30),e._uU(14),e.qZA()(),e.TgZ(15,"ion-col",26),e._uU(16),e.qZA(),e.TgZ(17,"ion-col",29),e._uU(18),e.qZA(),e.TgZ(19,"ion-col",26),e._uU(20),e.qZA()()()()}if(2&d){const r=g.$implicit,t=e.oxw();e.Q6J("hidden",t.scanActive),e.xp6(4),e.Q6J("ngModel",r.isChecked),e.xp6(2),e.Oqu(r.nomb_apell),e.xp6(2),e.Oqu(r.actividad_he),e.xp6(3),e.Oqu(r.fech_registro_ini),e.xp6(3),e.Oqu(r.cantidad),e.xp6(2),e.Oqu(r.DESCRIPCION),e.xp6(2),e.Oqu(r.supervisor),e.xp6(2),e.Oqu(r.tipo_horas)}}let Z=(()=>{var d;class g{constructor(t,i,o,a,l){this.navCtrl=t,this.alertController=i,this.storage=o,this.loadingController=a,this.ApiService=l,this.disableButton=!0,this.searchTerm="",this.estaCargando=!1,this.scanActive=!0,this.selectedItems=[],this.selectedString=""}ngOnInit(){}ionViewWillEnter(){let t;this.estaCargando=!0,this.storage.get("USER_INFO").then(i=>{t=i,this.NombresUsuarioLocal=t.user_name,this.IdUsuarioLocal=t.user_id,this.FListaInicial()})}FListaInicial(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(i=>{i.present(),console.log("ingresa a realizar la consulta"),this.ApiService.ListFindOts(this.NgModInputSearch,this.IdUsuarioLocal,"H",this.SelectFiltra=this.SelectFiltra?this.SelectFiltra.toString():"",this.SelectFiltra2=this.SelectFiltra2?this.SelectFiltra2.toString():"",2).then(o=>{this.DataSetGrid=o,this.loadingController.dismiss(),this.estaCargando=!1}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(o=>{console.log("thennnnn",o),console.log(this.SelectFiltra),i.dismiss()})})}FListaFiltrado(t){this.searchTerm=t.target.value,console.log(t),console.log(t.inputType),this.disableButton=""===this.searchTerm.trim()||"deleteContentBackward"===t.inputType,this.searchTerm.trim().length>=6&&this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(o=>{o.present(),this.ApiService.ListAprobHorasExtras(this.NgModInputSearch,this.IdUsuarioLocal,"H",this.SelectFiltra,this.SelectFiltra2).then(a=>{this.DataSetGrid=a,this.loadingController.dismiss(),this.estaCargando=!1}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(a=>{console.log("thennnnn",a),o.dismiss()})})}FSelectedItem(t){console.log("como pasa row",t),this.navCtrl.navigateForward(["rrhh-win-horas-extras"],{state:{Row:t}})}onCheckboxChange(t){if(t.isChecked)this.selectedItems.push(t.idreghoex);else{const i=this.selectedItems.indexOf(t.idreghoex);i>-1&&this.selectedItems.splice(i,1)}this.updateSelectedString()}updateSelectedString(){this.selectedString=this.selectedItems.join(", "),console.log("Selected items:",this.selectedString)}FNewwin(){this.navCtrl.navigateForward(["rrhh-win-horas-extras"]),this.navCtrl.navigateForward(["rrhh-win-horas-extras"],{state:{Row:{DESCRIPCION:"MANTENIMIENTO",actividad_he:"COSTO TALLER",cantidad:"3",estado_reg_hhee:"0",fech_registro_ini:"",idprogram_prod:"1",idreghoex:"0",nomb_apell:"REVOLLEDO CASTILLA, PEDRO CRISTOBAL"}}})}aprobhorasextras(){var t=this;return(0,h.Z)(function*(){var o;yield(yield t.alertController.create({header:"Confirmaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas aprobar las horas extras?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Operaci\xf3n cancelada por el usuario.")}},{text:"Aceptar",handler:(o=(0,h.Z)(function*(){yield(yield t.loadingController.create({message:"Procesando..."})).present(),yield t.ApiService.AprobaHorasExtras(t.selectedString,t.IdUsuarioLocal).then(function(){var l=(0,h.Z)(function*(c){t.loadingController.dismiss();let u="0"==c[0].o_nres?"alerta-error":"alerta-ok";yield(yield t.alertController.create({header:"ALERTA",subHeader:"Confirmaci\xf3n",cssClass:u,mode:"ios",animated:!0,message:c[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==c[0].o_nres&&t.FListaInicial()}}]})).present()});return function(c){return l.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394"),t.resetSelection()}).catch(l=>{t.loadingController.dismiss(),console.log("errror:::>>>>>>>>>",l)})}),function(){return o.apply(this,arguments)})}]})).present()})()}resetSelection(){this.selectedItems=[],this.selectedString="",console.log("Valores limpiados:",this.selectedString,this.selectedItems)}rechazarhorasextras(){var t=this;return(0,h.Z)(function*(){var o;yield(yield t.alertController.create({header:"Confirmaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas rechazar las horas seleccionadas?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Operaci\xf3n cancelada por el usuario.")}},{text:"Aceptar",handler:(o=(0,h.Z)(function*(){yield(yield t.loadingController.create({message:"Procesando..."})).present(),yield t.ApiService.rechazaHorasExtras(t.selectedString,t.IdUsuarioLocal).then(function(){var l=(0,h.Z)(function*(c){t.loadingController.dismiss();let u="0"==c[0].o_nres?"alerta-error":"alerta-ok";yield(yield t.alertController.create({header:"ALERTA",subHeader:"Confirmaci\xf3n",cssClass:u,mode:"ios",animated:!0,message:c[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==c[0].o_nres&&t.FListaInicial()}}]})).present()});return function(c){return l.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394"),t.resetSelection()}).catch(l=>{t.loadingController.dismiss(),console.log("errror:::>>>>>>>>>",l)})}),function(){return o.apply(this,arguments)})}]})).present()})()}}return(d=g).\u0275fac=function(t){return new(t||d)(e.Y36(C.SH),e.Y36(n.Br),e.Y36(A.K),e.Y36(n.HT),e.Y36(x.z))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-rrhh-list-aprob-he"]],viewQuery:function(t,i){if(1&t&&e.Gf(T,5),2&t){let o;e.iGM(o=e.CRH())&&(i.IdHtmlInputSearch=o.first)}},standalone:!0,features:[e.jDz],decls:43,vars:1,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],["titulo","Lista de Horas Extras"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["mode","ios","animated","true","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros","color","secondary","search-icon","search-circle"],["IdHtmlInputSearch",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],["scroll-x","true"],[1,"",2,"width","100% !important"],[2,"width","100% !important"],["size-sm","1","size-md","1","size-xl","1",1,"headgrid"],["size-sm","3","size-md","3","size-xl","3",1,"headgrid"],[2,"color","black"],["size-sm","2","size-md","2","size-xl","2",1,"headgrid"],["button","",3,"hidden",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","danger","mode","ios","title","Rechazar",3,"click"],["name","close"],["color","primary","mode","ios","title","Aprobacion",3,"click"],["name","checkmark"],["button","",3,"hidden"],["fixed","false",2,"width","150% !important"],[2,"width","100% !important","font-size","0.7em"],["size-sm","1","size-md","1","size-xl","1"],[3,"ngModel","ngModelChange","ionChange"],["size-sm","3","size-md","3","size-xl","3"],["size-sm","2","size-md","2","size-xl","2"],[1,"ion-text-wrap"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),e._UZ(4,"app-header",3),e.qZA(),e.TgZ(5,"ion-col",4),e._UZ(6,"ion-label",5),e.qZA()()(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-searchbar",6,7),e.TgZ(10,"ion-icon",8,9),e.NdJ("click",function(){return i.FListaInicial()}),e.qZA()()(),e.TgZ(12,"ion-content",10)(13,"ion-list",11)(14,"ion-row",12),e._UZ(15,"ion-col",13),e.TgZ(16,"ion-col",14)(17,"ion-label",15),e._uU(18,"Operario"),e.qZA()(),e.TgZ(19,"ion-col",16)(20,"ion-label",15),e._uU(21,"Actividad"),e.qZA()(),e.TgZ(22,"ion-col",13)(23,"ion-label",15),e._uU(24,"Fecha"),e.qZA()(),e.TgZ(25,"ion-col",13)(26,"ion-label",15),e._uU(27,"Horas"),e.qZA()(),e.TgZ(28,"ion-col",13)(29,"ion-label",15),e._uU(30,"Etado"),e.qZA()(),e.TgZ(31,"ion-col",16)(32,"ion-label",15),e._uU(33,"Supervisor"),e.qZA()(),e.TgZ(34,"ion-col",13)(35,"ion-label",15),e._uU(36,"T. Horas"),e.qZA()()(),e.YNc(37,b,21,9,"ion-item",17),e.qZA()(),e.TgZ(38,"ion-fab",18)(39,"ion-fab-button",19),e.NdJ("click",function(){return i.rechazarhorasextras()}),e._UZ(40,"ion-icon",20),e.qZA(),e.TgZ(41,"ion-fab-button",21),e.NdJ("click",function(){return i.aprobhorasextras()}),e._UZ(42,"ion-icon",22),e.qZA()()),2&t&&(e.xp6(37),e.Q6J("ngForOf",i.DataSetGrid))},dependencies:[n.Pc,n.nz,n.wI,n.W2,n.IJ,n.W4,n.jY,n.gu,n.Ie,n.Q$,n.q_,n.Nd,n.VI,n.sr,n.w,n.j9,p.ez,p.sg,_.u5,_.JJ,_.On,f.G]}),g})()}}]);