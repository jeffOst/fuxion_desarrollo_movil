"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[950],{950:(P,T,l)=>{l.r(T),l.d(T,{MttoListOrdenTrabajoPage:()=>U});var g=l(5861),f=l(6814),p=l(95),a=l(6728),C=l(6471),b=l(3016),t=l(6242),A=l(5472),O=l(1991),Z=l(2014),M=l(6172);const E=["IdHtmlInputSearch"];function v(s,u){if(1&s){const n=t.EpF();t.TgZ(0,"ion-item",25),t.NdJ("click",function(){const i=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.FNuevaCheckList(i))}),t.TgZ(1,"ion-badge",26),t._uU(2),t.qZA(),t.TgZ(3,"ion-label",27)(4,"strong")(5,"div"),t._uU(6),t.qZA()(),t.TgZ(7,"p"),t._uU(8," Nro.O.T.:\xa0"),t.TgZ(9,"ion-text",28),t._uU(10),t.qZA(),t._uU(11," Procedencia:\xa0"),t.TgZ(12,"ion-text",29),t._uU(13),t.qZA(),t._uU(14," F.Creacion:\xa0"),t.TgZ(15,"ion-text",30),t._uU(16),t.qZA(),t._uU(17," Modelo:\xa0"),t.TgZ(18,"ion-text",31),t._uU(19),t.qZA(),t._uU(20,"\xa0 "),t.qZA()(),t.TgZ(21,"ion-badge",32),t._uU(22),t.qZA()()}if(2&s){const n=u.$implicit,o=t.oxw();t.xp6(1),t.s9C("color",n.color_rep_fab),t.xp6(1),t.Oqu(n.rep_fab),t.xp6(1),t.Q6J("hidden",o.scanActive),t.xp6(2),t.Jzz("color:",n.color_reproceso,";"),t.xp6(1),t.hij("",n.codsmg," "),t.xp6(4),t.hij("",n.id_orden_trab_fis_cab," \xa0"),t.xp6(3),t.hij("",n.Y06002," \xa0"),t.xp6(3),t.hij("",n.ot_fech_inicio_labor," \xa0"),t.xp6(3),t.Oqu(n.modelo),t.xp6(2),t.s9C("color",n.color_atendido),t.xp6(1),t.Oqu(n.ma00estado_nombre)}}let U=(()=>{var s;class u{constructor(o,e,i,r,h,c,_){this.navCtrl=o,this.loadingController=e,this.ApiService=i,this.storage=r,this.alertController=h,this.globalVal=c,this.modalCtrl=_,this.estaCargando=!1,this.scanActive=!0,this.disableButton=!0,this.searchTerm=""}ngOnInit(){let o;this.estaCargando=!0,this.storage.get("USER_INFO").then(e=>{o=e,this.NombresUsuarioLocal=o.user_name,this.IdUsuarioLocal=o.user_id,console.log(o)})}InputChange(o){console.log(o),console.log(o.inputType),this.disableButton=""===this.searchTerm.trim()||"deleteContentBackward"===o.inputType}FListaEquipos(o){this.searchTerm=o.target.value,console.log(o),console.log(o.inputType),this.disableButton=""===this.searchTerm.trim()||"deleteContentBackward"===o.inputType,this.searchTerm.trim().length>=6&&this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(i=>{i.present(),this.ApiService.ListFindOts(this.NgModInputSearch,this.IdUsuarioLocal,"H",this.SelectFiltra,this.SelectFiltra2).then(r=>{this.DataSetGrid=r,this.loadingController.dismiss(),this.estaCargando=!1}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(r=>{console.log("thennnnn",r),i.dismiss()})})}filtrar(o){this.SelectFiltra=o.detail.value}filtrar2(o){this.SelectFiltra2=o.detail.value}FListaEquiposAlterno(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(e=>{e.present(),this.ApiService.ListFindOts(this.NgModInputSearch,this.IdUsuarioLocal,"H",this.SelectFiltra=this.SelectFiltra?this.SelectFiltra.toString():"",this.SelectFiltra2=this.SelectFiltra2?this.SelectFiltra2.toString():"").then(i=>{this.DataSetGrid=i,this.loadingController.dismiss(),this.estaCargando=!1}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(i=>{console.log("thennnnn",i),console.log(this.SelectFiltra),e.dismiss()})})}FNuevaCheckList(o){let e={state:{Row:o}};console.log(e),this.globalVal.checklist_paso_pivot="",this.navCtrl.navigateForward(["/mtto-win-orden-trabajo"],e)}ionViewWillEnter(){let o;this.estaCargando=!0,this.storage.get("USER_INFO").then(e=>{o=e,this.NombresUsuarioLocal=o.user_name,this.IdUsuarioLocal=o.user_id,this.FListaEquiposAlterno()})}ngAfterContentChecked(){console.log("ngAfterContentChecked")}ngAfterViewInit(){console.log("ngAfterViewInit")}ngAfterViewChecked(){}FGenerarOtxProduccion(){let e={state:{Row:{familia:1,idusuario:this.IdUsuarioLocal}}};this.globalVal.checklist_paso_pivot="",this.navCtrl.navigateForward(["/mtto-otis-pop-up-equipo"],e)}FGenerarOtxTablero(){let e={state:{Row:{familia:2,idusuario:this.IdUsuarioLocal}}};this.globalVal.checklist_paso_pivot="",this.navCtrl.navigateForward(["/mtto-otis-pop-up-equipo"],e)}OpenModalEquipos(o){var e=this;return(0,g.Z)(function*(){let i;i="1"==o?{familia:1,idusuario:e.IdUsuarioLocal}:{familia:2,idusuario:e.IdUsuarioLocal};const r=yield e.modalCtrl.create({component:b.MttoOtisPopUpEquipoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{Row:i}});return r.onDidDismiss().then(function(){var h=(0,g.Z)(function*(c){if(null!==c){let _;e.dataReturned=c.data,console.log("Modal Sent Data :",e.dataReturned),e.globalVal.checklist_paso_pivot="",_={idequipo:c.data.idequipo,familia:o,idusuario:e.IdUsuarioLocal,idofcab:c.data.idofcab},"0"!=c.data.idequipo&&(e.loadingController.create({message:"Guardando Paso 1...",translucent:!0}).then(d=>{d.present()}),yield e.ApiService.GuardarNuevoEquipo(_).then(function(){var d=(0,g.Z)(function*(m){e.loadingController.dismiss(),console.log(m),e.navCtrl.navigateForward(["/mtto-win-orden-trabajo"],{state:{Row:m.form[0]}})});return function(m){return d.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394")}).catch(d=>{console.log("errror:::>>>>>>>>>",d)}))}});return function(c){return h.apply(this,arguments)}}()),yield r.present()})()}}return(s=u).\u0275fac=function(o){return new(o||s)(t.Y36(A.SH),t.Y36(a.HT),t.Y36(O.k),t.Y36(Z.K),t.Y36(a.Br),t.Y36(M.X),t.Y36(a.IN))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-mtto-list-orden-trabajo"]],viewQuery:function(o,e){if(1&o&&t.Gf(E,5),2&o){let i;t.iGM(i=t.CRH())&&(e.IdHtmlInputSearch=i.first)}},standalone:!0,features:[t.jDz],decls:42,vars:5,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],["titulo","Lista de Ordenes de Trabajo"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["center",""],["label","Filtrar","placeholder","Registro",3,"multiple","ionChange"],["value","1"],["value","2"],["value","3"],["value","5"],["value","4"],["label","Estado","placeholder","Estado",3,"multiple","ionChange"],["mode","ios","animated","true","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros","color","secondary","search-icon","search-circle",3,"ngModel","ngModelChange"],["IdHtmlInputSearch",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[3,"inset"],["button","","detail","true","detail-icon","caret-forward-outline","mode","ios",3,"click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary","mode","ios","title","O.T. de Produccion",3,"click"],[1,"icon-bomba"],["color","primary","mode","ios","title","O.T. de Tablero",3,"click"],["name","today-sharp"],["button","","detail","true","detail-icon","caret-forward-outline","mode","ios",3,"click"],["slot","start",3,"color"],[3,"hidden"],["color","danger"],["color","secondary"],["color","success"],["color","primary"],["slot","end",3,"color"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),t._UZ(4,"app-header",3),t.qZA(),t.TgZ(5,"ion-col",4),t._UZ(6,"ion-label",5),t.qZA()()(),t.TgZ(7,"ion-item")(8,"ion-row",6)(9,"ion-col")(10,"ion-select",7),t.NdJ("ionChange",function(r){return e.filtrar(r)}),t.TgZ(11,"ion-select-option",8),t._uU(12,"RB"),t.qZA(),t.TgZ(13,"ion-select-option",9),t._uU(14,"FB"),t.qZA(),t.TgZ(15,"ion-select-option",10),t._uU(16,"RT"),t.qZA(),t.TgZ(17,"ion-select-option",11),t._uU(18,"FT"),t.qZA(),t.TgZ(19,"ion-select-option",12),t._uU(20,"RM"),t.qZA()()(),t.TgZ(21,"ion-col")(22,"ion-select",13),t.NdJ("ionChange",function(r){return e.filtrar2(r)}),t.TgZ(23,"ion-select-option",8),t._uU(24,"Borrador"),t.qZA(),t.TgZ(25,"ion-select-option",9),t._uU(26,"Pend. Aprob"),t.qZA(),t.TgZ(27,"ion-select-option",10),t._uU(28,"Aprob"),t.qZA()()()()(),t.TgZ(29,"ion-item")(30,"ion-searchbar",14,15),t.NdJ("ngModelChange",function(r){return e.NgModInputSearch=r}),t.qZA(),t.TgZ(32,"ion-icon",16,17),t.NdJ("click",function(){return e.FListaEquiposAlterno()}),t.qZA()()(),t.TgZ(34,"ion-content")(35,"ion-list",18),t.YNc(36,v,23,13,"ion-item",19),t.qZA(),t.TgZ(37,"ion-fab",20)(38,"ion-fab-button",21),t.NdJ("click",function(){return e.OpenModalEquipos("1")}),t._UZ(39,"ion-icon",22),t.qZA(),t.TgZ(40,"ion-fab-button",23),t.NdJ("click",function(){return e.OpenModalEquipos("2")}),t._UZ(41,"ion-icon",24),t.qZA()()()),2&o&&(t.xp6(10),t.Q6J("multiple",!0),t.xp6(12),t.Q6J("multiple",!0),t.xp6(8),t.Q6J("ngModel",e.NgModInputSearch),t.xp6(5),t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngForOf",e.DataSetGrid))},dependencies:[a.Pc,a.yp,a.wI,a.W2,a.IJ,a.W4,a.jY,a.gu,a.Ie,a.Q$,a.q_,a.Nd,a.VI,a.t9,a.n0,a.yW,a.sr,a.QI,a.j9,f.ez,f.sg,p.u5,p.JJ,p.On,C.G]}),u})()}}]);