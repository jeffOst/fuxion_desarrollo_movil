"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4771],{185:(D,_,i)=>{i.r(_),i.d(_,{MttoListDespachoOtisAlmPage:()=>P});var d=i(6814),u=i(95),a=i(6728),h=i(6471),t=i(6242),p=i(5472),m=i(2014),C=i(1991);function b(r,l){if(1&r){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",9),t.NdJ("click",function(){const s=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.FNavigatePageDet(s))}),t.TgZ(2,"ion-label",10)(3,"strong")(4,"div"),t._uU(5),t.qZA()(),t.TgZ(6,"p"),t._uU(7," Nro.O.T:\xa0"),t.TgZ(8,"ion-text",11),t._uU(9),t.qZA(),t._uU(10," Fecha Envio:\xa0"),t.TgZ(11,"ion-text",12),t._uU(12),t.qZA()()()(),t.TgZ(13,"ion-badge",13),t._uU(14),t.qZA()()}if(2&r){const n=l.$implicit,e=t.oxw();t.xp6(2),t.Q6J("hidden",e.scanActive),t.xp6(3),t.hij("",n.codsmg," "),t.xp6(4),t.hij("",n.id_orden_trab_fis_cab," \xa0"),t.xp6(3),t.hij("",n.fecha_envio," \xa0"),t.xp6(1),t.Q6J("ngClass",e.getProgressBarClass(n.avance_repuesto)),t.xp6(1),t.hij("",n.avance_repuesto,"\xa0%")}}let P=(()=>{var r;class l{constructor(e,o,s,c){this.navCtrl=e,this.storage=o,this.loadingController=s,this.ApiService=c,this.estaCargando=!1,this.scanActive=!0}ngOnInit(){let e;this.estaCargando=!0,this.storage.get("USER_INFO").then(o=>{e=o,this.NombresUsuarioLocal=e.user_name,this.IdUsuarioLocal=e.user_id})}ionViewWillEnter(){this.FListaEquiposPendManto()}FListaEquiposPendManto(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(o=>{o.present(),this.ApiService.ListFindOtsManto("43","").then(s=>{this.DataSetGrid=s,this.loadingController.dismiss(),this.estaCargando=!1}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(s=>{o.dismiss()})})}FNavigatePageDet(e){this.FBtnCrearCabeceraGuia(e)}FBtnCrearCabeceraGuia(e){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(s=>{s.present(),this.ApiService.FCreaCabeceraGuiaOti("45",e.id_orden_trab_cab,this.IdUsuarioLocal).then(c=>{let g=c[0].o_nres,M=c[0].o_msj,A=c[0].p2;this.ApiService.FCreaDetalleGuiaOti("49",e.id_orden_trab_cab,g,c[0].p1).then(f=>{this.loadingController.dismiss(),this.estaCargando=!1,this.navCtrl.navigateForward(["/mtto-win-despacho-otis1"],{state:{Row:{cod_bomba:e.codsmg,nro_oti:e.id_orden_trab_fis_cab,id_ot_vale_salida_bgc:e.id_orden_trab_cab,idblockguiaremicab:g,correguia:M,estaboBtnGuia:A}}}),console.log("otra pagina")}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(f=>{s.dismiss()})})})}getProgressBarClass(e){return 0==e||e<50?"bg-danger":e<100&&e>50||e>=100?"bg-success":"bg-danger"}}return(r=l).\u0275fac=function(e){return new(e||r)(t.Y36(p.SH),t.Y36(m.K),t.Y36(a.HT),t.Y36(C.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mtto-list-despacho-otis-alm"]],standalone:!0,features:[t.jDz],decls:13,vars:1,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],[1,"ion-align-self-start"],["titulo","Lista de Bombas por atender"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros"],["IdHtmlInputSearch",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[4,"ngFor","ngForOf"],[3,"click"],[3,"hidden"],["color","danger"],["color","secondary"],[3,"ngClass"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),t._UZ(4,"app-header",3),t.qZA()()()(),t.TgZ(5,"ion-item"),t._UZ(6,"ion-searchbar",4,5),t.TgZ(8,"ion-icon",6,7),t.NdJ("click",function(){return o.FListaEquiposPendManto()}),t.qZA()(),t.TgZ(10,"ion-content")(11,"ion-card"),t.YNc(12,b,15,6,"ion-item",8),t.qZA()()),2&e&&(t.xp6(12),t.Q6J("ngForOf",o.DataSetGrid))},dependencies:[a.Pc,a.yp,a.PM,a.wI,a.W2,a.jY,a.gu,a.Ie,a.Q$,a.Nd,a.VI,a.yW,a.sr,a.j9,d.ez,d.mk,d.sg,u.u5,h.G],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.border-primary[_ngcontent-%COMP%]{border-color:#00f;border-radius:5px}.bg-danger[_ngcontent-%COMP%]{background-color:red;border-radius:5px}.bg-success[_ngcontent-%COMP%]{background-color:green;border-radius:5px}.text-danger[_ngcontent-%COMP%]{color:red;border-radius:5px}"]}),l})()}}]);