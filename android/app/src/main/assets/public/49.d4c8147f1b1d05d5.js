"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[49],{4160:(F,C,l)=>{l.d(C,{J:()=>O});var d=l(5861),E=l(2519),_=l(6242),n=l(9862),t=l(2014);let O=(()=>{var p;class v{constructor(o,e){this.httpClient=o,this.storage=e,this.urlApiProd=E.N.UrlDomainLocal+"aw_modulos/mante/api/CApiInformeTecnico.php",this.urlApiInf=E.N.UrlDomainLocal+"aw_modulos/mante/api/CApiInformeTablero.php",this.confirmRequest=""}ListFindOts(o,e,a){let r=JSON.stringify({acc:1,s:o,idusu:e,iddevice:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}SaveCheckListCab(o,e,a){let r=JSON.stringify({acc:2,id_orden_trab_cab:o,idusu:e,iddevice:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}FormFindPaso1(o,e,a){let r=JSON.stringify({acc:3,idchecklistcab:o,idusu:e,iddevice:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}FLoadPiezasAcordion(o,e,a){let r=JSON.stringify({acc:7,id:o,p2:e,cod_inf:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}FLoadServiciosxPiezas(o,e){let a=JSON.stringify({acc:8,id:o,p2:e});return this.httpClient.post(this.urlApiProd,a).toPromise().then(r=>r)}GuardarFormPaso1(o){var e=this;return(0,d.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let r=e.urlApiProd,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=4",i).toPromise()})()}GuardarinfPaso1(o){var e=this;return(0,d.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let r=e.urlApiInf,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=2",i).toPromise()})()}GuardarinfPaso2(o){var e=this;return(0,d.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let r=e.urlApiInf,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=3",i).toPromise()})()}GuardarinfPaso3(o){var e=this;return(0,d.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let r=e.urlApiInf,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=4",i).toPromise()})()}GuardarinfPaso4(o){var e=this;return(0,d.Z)(function*(){console.log("Dentro::GuardarFormulario::>",o);let r=e.urlApiInf,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=5",i).toPromise()})()}GuardarinfPaso5(o){var e=this;return(0,d.Z)(function*(){let r=e.urlApiInf,i=JSON.stringify(o);return console.log("datos enviados",i),e.httpClient.post(r+"?acc=6",i).toPromise()})()}GuardarFormPaso2(o,e,a,r,i,s,c){var u=this;return(0,d.Z)(function*(){let m,P=u.urlApiProd,A=JSON.stringify({idservicio:o,idpapa:e,idhijo:a,idusuario:r,acc:9,idclase:i,ck:s,cod_material:c});return u.httpClient.post(P+"?acc=6",A).toPromise().then(h=>{console.log(h),m=h,u.confirmSaveBd=m[0].o_nres,u.confirmRequest=m},h=>{console.log(h,"Error- something is wrong!")})})()}FormFindPaso3(o,e,a){let r=JSON.stringify({acc:7,idchecklistcab:o,idusu:e,iddevice:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}GuardarFormPaso3(o){var e=this;return(0,d.Z)(function*(){let a,r=e.urlApiProd,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=8",i).toPromise().then(s=>{console.log(s),a=s,e.confirmSaveBd=a[0].o_nres,e.confirmRequest=a},s=>{console.log(s,"Error- something is wrong!")})})()}FormFindPaso5(o,e,a){let r=JSON.stringify({acc:10,id:o,idusu:e,iddevice:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}GuardarFormPaso5(o){var e=this;return(0,d.Z)(function*(){let r=e.urlApiProd,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=11",i).toPromise()})()}FormFindPaso6(o,e,a){let r=JSON.stringify({acc:12,idchecklistcab:o,idusu:e,iddevice:a});return this.httpClient.post(this.urlApiProd,r).toPromise().then(i=>i)}GuardarFormPaso6(o){var e=this;return(0,d.Z)(function*(){let r=e.urlApiProd,i=JSON.stringify(o);return e.httpClient.post(r+"?acc=13",i).toPromise()})()}GuardarAplicaPaso(o,e,a){var r=this;return(0,d.Z)(function*(){let i,c,s=r.urlApiProd;c={idchecklistcab:o,numeroPaso:e,ck:a};let u=JSON.stringify(c);return r.httpClient.post(s+"?acc=15",u).toPromise().then(m=>{console.log(m),i=m,r.confirmSaveBd=i[0].o_nres,r.confirmRequest=i},m=>{console.log(m,"Error- something is wrong!")})})()}getImages(o){return this.httpClient.get(`${this.urlApiProd}?acc=5&id=`+o)}uploadImage(o,e,a){let r=new FormData;return r.append("file",o,"myimage."+a),r.append("id",e),r.append("acc","6"),r.append("type","image/png"),this.httpClient.post(this.urlApiProd,r)}UpLoadImageMultiple(o,e,a){try{let r=new FormData;r.append("id",e),r.append("acc","15"),r.append("type","image/png");for(let i=0;i<o.length;i++)console.log("image::ruta=>::>",o[i]),r.append("images[]",o[i],`image_${i}.jpg`);return this.httpClient.post(this.urlApiProd,r)}catch(r){console.error("Error al enviar im\xe1genes al API:",r)}}LoadPdfInformeTecnico(o){let e=JSON.stringify({acc:14,idchecklistcab:o});return this.httpClient.post(this.urlApiProd,e).toPromise().then(a=>a)}deleteImage(o){return this.httpClient.delete(`${this.urlApiProd}?acc=16&id=${o}`)}}return(p=v).\u0275fac=function(o){return new(o||p)(_.LFG(n.eN),_.LFG(t.K))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),v})()},49:(F,C,l)=>{l.r(C),l.d(C,{MttoWinInformeTecnico6Page:()=>e});var d=l(5861),E=l(6814),_=l(95),n=l(6728),t=l(6242),O=l(5472),p=l(4160),v=l(2014),I=l(4248),o=l(6172);let e=(()=>{var a;class r{constructor(s,c,u,m,f,P,A,h,T,S){let g;if(this.formBuilder=s,this.navCtrl=c,this.loadingController=u,this.ApiService=m,this.storage=f,this.alertController=P,this.router=A,this.globalVal=h,this.ref=T,this.actionSheetCtrl=S,this.FormInformeTecPaso3=this.formBuilder.group({falla_primaria_ic:[""],falla_secundaria_ic:[""],analisis_del_problema:["",_.kI.required],componentes_de_reclamo:[""],nro_fotos:[""],estado_informe:[""],corre_inf_cab:[""]}),this.storage.get("USER_INFO").then(D=>{g=D,this.NombresUsuarioLocal=g.user_name,this.IdUsuarioLocal=g.user_id,this.storage.get("DEVICE_INFO").then(N=>{g=N,this.NombreDispositivo=g.name,this.IdDispositivo=g.uuid})}),""==this.globalVal.checklist_paso_pivot)try{this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row,h.corre_inf_cab=this.navParamsAny.corre_inf_cab}catch(D){console.log(D),this.corre_inf_cab=h.corre_inf_cab}else this.corre_inf_cab=h.corre_inf_cab}ionViewWillEnter(){this.FLoadForms()}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(c=>{c.present(),this.corre_inf_cab=this.globalVal.corre_inf_cab,console.log(this.corre_inf_cab),this.FormInformeTecPaso3.controls.corre_inf_cab.setValue(this.corre_inf_cab),this.ApiService.FormFindPaso6(this.corre_inf_cab,"1","H").then(u=>{this.EditDataRest=u.form;try{this.FormInformeTecPaso3.setValue({falla_primaria_ic:this.EditDataRest[0].falla_primaria_ic,falla_secundaria_ic:this.EditDataRest[0].falla_secundaria_ic,analisis_del_problema:this.EditDataRest[0].analisis_del_problema,componentes_de_reclamo:this.EditDataRest[0].componentes_de_reclamo,nro_fotos:this.EditDataRest[0].nro_fotos,corre_inf_cab:this.EditDataRest[0].corre_inf_cab,estado_informe:this.EditDataRest[0].estado_informe})}catch(m){console.log("error:::>",m)}}).finally(()=>{this.loadingController.dismiss()})})}SaveFormBorradorPaso2(){var s=this;this.alertSiNo=this.alertController.create({header:"INFORME TECNICO",subHeader:"ANALISIS DEL PROBLEMA",mode:"ios",backdropDismiss:!0,cssClass:"alerta-ok",message:"Confirmar que desea guardar?",buttons:[{text:"Aceptar",cssClass:"alert-button-group",role:"A",handler:()=>{}},{text:"Cancelar",role:"F",handler:()=>{}}]}).then(c=>{c.present(),c.onDidDismiss().then(u=>{"A"==u.role?(this.loadingController.create({message:"Guardando...",translucent:!0}).then(f=>{f.present()}),this.corre_inf_cab=this.globalVal.corre_inf_cab,this.ApiService.GuardarFormPaso6(this.FormInformeTecPaso3.value).then(function(){var f=(0,d.Z)(function*(P){s.loadingController.dismiss();let A="0"==P[0].o_nres?"alerta-error":"alerta-ok";yield(yield s.alertController.create({header:"ORDEN DE TRABAJO",subHeader:"DATOS GENERALES",cssClass:A,mode:"ios",animated:!0,message:P[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==P[0].o_nres?s.navCtrl.navigateForward(["mtto-list-informe-tecnico"]):(console.log(s.ApiService.confirmRequest),s.FormInformeTecPaso3.controls.estado_informe.setValue(1))}}]})).present()});return function(P){return f.apply(this,arguments)}}()).finally(()=>{}).catch(f=>{console.log("errror:::>>>>>>>>>",f)})):this.FormInformeTecPaso3.controls.estado_informe.setValue(1)})})}ngOnInit(){}}return(a=r).\u0275fac=function(s){return new(s||a)(t.Y36(_.QS),t.Y36(O.SH),t.Y36(n.HT),t.Y36(p.J),t.Y36(v.K),t.Y36(n.Br),t.Y36(I.F0),t.Y36(o.X),t.Y36(t.sBO),t.Y36(n.BX))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-mtto-win-informe-tecnico6"]],standalone:!0,features:[t.jDz],decls:46,vars:17,consts:[["mode","ios",1,"ion-no-padding"],["text-capitalize",""],[1,"ion-padding"],[3,"formGroup"],["f","ngForm"],["position","floating"],["mode","ios","formControlName","falla_primaria_ic",3,"autoGrow","autofocus"],["mode","ios","formControlName","falla_secundaria_ic",3,"autoGrow","autofocus"],["mode","ios","formControlName","analisis_del_problema",3,"autoGrow","autofocus"],["mode","ios","formControlName","componentes_de_reclamo",3,"autoGrow","autofocus"],["mode","ios","formControlName","nro_fotos",3,"autoGrow","autofocus"],[2,"text-align","center"],["mode","ios","formControlName","estado_informe",1,"ion_segment_3d",2,"width","110%"],["value","1","layout","icon-end",3,"click"],["name","close","color","danger"],["color","danger"],["value","2","layout","icon-end",3,"click"],["color","success","name","checkmark"],["color","success"]],template:function(s,c){1&s&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1)(3,"ion-label"),t._uU(4,"ANTES DEL DESMONTAJE "),t.qZA()()()(),t.TgZ(5,"ion-content",2)(6,"form",3,4)(8,"ion-list",0)(9,"ion-item")(10,"ion-label",5),t._uU(11," FALLA PRIMARIA: "),t.qZA(),t._UZ(12,"ion-textarea",6),t.qZA(),t.TgZ(13,"ion-item")(14,"ion-label",5),t._uU(15," FALLA SECUNDARIA: "),t.qZA(),t._UZ(16,"ion-textarea",7),t.qZA(),t.TgZ(17,"ion-item")(18,"ion-label",5),t._uU(19," ANALISIS DEL PROBLEMA: "),t.qZA(),t._UZ(20,"ion-textarea",8),t.qZA(),t.TgZ(21,"ion-item")(22,"ion-label",5),t._uU(23," RECLAMO: "),t.qZA(),t._UZ(24,"ion-textarea",9),t.qZA(),t.TgZ(25,"ion-item")(26,"ion-label",5),t._uU(27," CONCLUSIONES SUP.PLANTA: "),t.qZA(),t._UZ(28,"ion-textarea",10),t.qZA()()()(),t.TgZ(29,"ion-footer")(30,"form",3,4)(32,"ion-grid")(33,"ion-row"),t._UZ(34,"ion-col"),t.TgZ(35,"ion-col",11)(36,"ion-segment",12)(37,"ion-segment-button",13),t.NdJ("click",function(){return c.SaveFormBorradorPaso2()}),t._UZ(38,"ion-icon",14),t.TgZ(39,"ion-label",15),t._uU(40,"BORRADOR"),t.qZA()(),t.TgZ(41,"ion-segment-button",16),t.NdJ("click",function(){return c.SaveFormBorradorPaso2()}),t._UZ(42,"ion-icon",17),t.TgZ(43,"ion-label",18),t._uU(44,"TERMINADO"),t.qZA()()()(),t._UZ(45,"ion-col"),t.qZA()()()()),2&s&&(t.xp6(6),t.Q6J("formGroup",c.FormInformeTecPaso3),t.xp6(6),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(4),t.Q6J("autoGrow",!0)("autofocus",!0)("autoGrow",!0),t.xp6(2),t.Q6J("formGroup",c.FormInformeTecPaso3))},dependencies:[n.Pc,n.wI,n.W2,n.fr,n.jY,n.Gu,n.gu,n.Ie,n.Q$,n.q_,n.Nd,n.cJ,n.GO,n.g2,n.wd,n.sr,n.QI,n.j9,E.ez,_.u5,_._Y,_.JJ,_.JL,_.UX,_.sg,_.u]}),r})()}}]);