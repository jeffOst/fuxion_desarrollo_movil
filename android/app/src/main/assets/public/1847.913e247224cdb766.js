"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1847],{1847:(f,S,u)=>{u.d(S,{k:()=>I});var c=u(5861),v=u(4053),g=u(8256),p=u(529),A=u(849);const h="my-items";let I=(()=>{class n{constructor(e,t,o){var r=this;this.httpClient=e,this.http=t,this.storage=o,this.urlApiProd=v.N.UrlDomainLocal+"aw_modulos/prod/api/CApiValesServicios.php",this.key="123456",this.counts_rows=0,this.ArrayItemsSelected=[],this.EditArItemsSelected=[],this.o_nres="",this.o_msj="",this.idhorasxVueltaOtCab="",this.radioRevisionSelected="",this.save_servicios_porinspeccion=function(){var s=(0,c.Z)(function*(a,l){let d;console.log("ver datos de obs"),console.log(l.values.txtObservaciones),r.storage.get("USER_INFO").then(m=>{d=m,r.http.post(r.urlApiProd+"?acc=12&idtecnico="+d.user_id+"&idtablet=this.device.uuid&obs="+l.values.txtObservaciones,a).subscribe(_=>(console.log("resultado de guardado"),console.log(_),r.o_nres=_[0].o_nres,r.o_msj=_[0].o_msj,_),_=>{console.log("Error- something is wrong!")})})});return function(a,l){return s.apply(this,arguments)}}(),console.log("this.device.uuid 1"),console.log("constructor:::====>prodservices.service.ts")}llamarDatosApi(e,t,o,r){let i=this.urlApiProd;console.log("dentro dellamarDatosApillamarDatosApi:  ");let s=JSON.stringify({s:e,acc:1,tipo:t,idtablet:o,idmenu:r});return this.http.post(i,s).toPromise().then(a=>a)}quitar_de_lista_local(e){var t=this;return(0,c.Z)(function*(){let o=t.urlApiProd,r={id:e.idvaleservidetot,name:e.codsmg,avatar:e.avatar,acc:2};t.ArrayItemsSelectedPivot=e,t.http.post(o,r).subscribe(i=>{},i=>{console.log("Error- something is wrong!")}),t.CntAgregado=t.agregar_storage_ok(t.ArrayItemsSelectedPivot)})()}agregar_storage_ok(e){return console.log("agregar_storage_ok(){:::"),console.log(this.ArrayItemsSelected),this.ArrayItemsSelected.push(e),this.storage.set(h,this.ArrayItemsSelected),this.ArrayItemsSelected.length}agregar_a_lista_local(e){var t=this;return(0,c.Z)(function*(){t.ArrayItemsSelectedPivot=e})()}BdRechazarVale(e){var t=this;return(0,c.Z)(function*(){let o=t.urlApiProd,r={id:e.idvaleservidetot,name:e.codsmg,avatar:e.avatar,acc:9};t.ArrayItemsSelectedPivot=e,t.http.post(o,r).subscribe(i=>{},i=>{console.log("Error- something is wrong!")})})()}EjServQuitarItemSelected(e){var t=this;return(0,c.Z)(function*(){let o=t.urlApiProd,r={id:e.idvaleservidetot,avatar:e.avatar,acc:6};t.ArrayItemsSelectedPivot=e,t.http.post(o,r).subscribe(i=>{},i=>{console.log("Error- something is wrong!")}),t.CntAgregado=t.EjeSerQuitarStorage(t.ArrayItemsSelectedPivot)})()}EjeSerQuitarStorage(e){let t=this.ArrayItemsSelected.indexOf(e);return t>-1&&this.ArrayItemsSelected.splice(t,1),this.storage.set(h,this.ArrayItemsSelected),this.ArrayItemsSelected.length}consultaCantFilasSeleted(){return console.log("this.ArrayItemsSelected:::::>"),console.log(this.ArrayItemsSelected),null!==this.ArrayItemsSelected?this.ArrayItemsSelected.length:(this.ArrayItemsSelected=[],0)}getItems(){return console.log(this.storage.length()),this.storage.get(h)}getCountItems(){return this.ArrayItemsSelected.length}deleteItems(e){return this.storage.get(h).then(t=>{if(!t||0===t.length)return null;let o=[];for(let r of t)r.idvaleservidetot_i!==e&&o.push(r);return this.storage.set(h,o)})}list_selected(){return this.ArrayItemsSelected}iniciar_tarea(){var e=this;return(0,c.Z)(function*(){let t,o;e.EditArItemsSelected=e.ArrayItemsSelected,e.storage.get("USER_INFO").then(r=>{t=r;for(let i=0;i<e.EditArItemsSelected.length;i++)e.EditArItemsSelected[i].idtecnico=t.user_id,e.EditArItemsSelected[i].idtablet="device.uuid";return e.http.post(e.urlApiProd+"?acc=3&rd="+e.radioRevisionSelected+"&idtablet=this.device.uuid",e.EditArItemsSelected).subscribe(i=>{if(console.log(i),o=i,0==o[0].o_nres)e._NroCorrelativoTarea="0",e.MsjBd=o[0].o_msj,e.idhorasxVueltaOtCab="0";else{e._NroCorrelativoTarea=o[0].o_nres,e.idhorasxVueltaOtCab=o[0].param1,console.log("::::this.idhorasxVueltaOtCab::::>"),console.log(e.idhorasxVueltaOtCab);for(let s=0;s<e.ArrayItemsSelected.length;s++)console.log("::::request_insert[0].param1::::>"),console.log(o[0].param1),e.ArrayItemsSelected[s].idhorasxvueltaotcab=o[0].param1}e.radioRevisionSelected=""},i=>{console.log("Error- something is wrong!")})})})()}finalizarTareaSaveBd(e,t){var o=this;return(0,c.Z)(function*(){let r;return o.http.post(o.urlApiProd+"?acc=4&id="+o.idhorasxVueltaOtCab+"&role="+t,e).subscribe(s=>{console.log(s),r=s,o.confirmSaveBd=r[0].o_nres,o.EditArItemsSelected.push(),o.ArrayItemsSelected.push()},s=>{console.log("Error- something is wrong!")})})()}retornarListaEjecutados(e,t){let o=this.urlApiProd;return JSON.stringify({s:encodeURI(e),acc:1,idtablet:t}),this.httpClient.get(o+"?acc=5&s="+encodeURI(e)+"&idtablet="+t).pipe()}EditListItemsSeleted(e){let t=this.urlApiProd,o=JSON.stringify({id:e,acc:7,idtablet:"this.device.uuid"});return this.http.post(t,o).toPromise().then(r=>r)}ListarVueltas(e,t){let o=this.urlApiProd,r=JSON.stringify({id:e,acc:8,idtablet:"this.device.uuid",avatar:t});return this.http.post(o,r).toPromise().then(i=>i)}BdEliminarTicked(e){var t=this;return(0,c.Z)(function*(){t.http.post(t.urlApiProd,{id:e.idhorasxvueltaotcab,name:e.corre_hvot,acc:10}).subscribe(i=>{},i=>{console.log("Error- something is wrong!")})})()}llamarMaestroServicios(e,t,o,r,i){let s=this.urlApiProd,a=JSON.stringify({s:e,acc:o,tipo:t,idtablet:i,madre_hija:r});return this.http.post(s,a).toPromise().then(l=>l)}iniciar_tarea_noprogramado(e,t,o,r){var i=this;return(0,c.Z)(function*(){let s,a;i.EditArItemsSelected=i.ArrayItemsSelected,i.storage.get("USER_INFO").then(l=>{s=l;for(let d=0;d<i.EditArItemsSelected.length;d++)i.EditArItemsSelected[d].idtecnico=s.user_id,i.EditArItemsSelected[d].idtablet="this.device.uuid";return i.http.post(i.urlApiProd+"?acc=13&rd="+i.radioRevisionSelected+"&idtablet=this.device.uuid&mod="+e+"&f="+t+"&hi="+o+"&hf="+r,i.EditArItemsSelected).subscribe(d=>{console.log(d),a=d,0==a[0].o_nres?(i._NroCorrelativoTarea="0",i.MsjBd=a[0].o_msj,i.idhorasxVueltaOtCab="0"):(i._NroCorrelativoTarea=a[0].o_nres,i.idhorasxVueltaOtCab=a[0].param1),i.radioRevisionSelected=""},d=>{console.log("Error- something is wrong!")})})})()}listado_resumen_diario(e,t){let o=this.urlApiProd,r=JSON.stringify({s:e,acc:14,horainicio_filtro:t,idtablet:"this.device.uuid"});return this.http.post(o,r).toPromise().then(i=>i)}iniciar_tarea_x_item(e){var t=this;return(0,c.Z)(function*(){let o,r;t.EditArItemsSelected=t.ArrayItemsSelected,t.storage.get("USER_INFO").then(i=>{o=i;for(let s=0;s<t.EditArItemsSelected.length;s++)t.EditArItemsSelected[s].idtecnico=o.user_id,t.EditArItemsSelected[s].idtablet="this.device.uuid";return t.http.post(t.urlApiProd+"?acc=16&rd="+t.radioRevisionSelected+"&idtablet=this.device.uuid&idvaleservidetot="+e,t.EditArItemsSelected).subscribe(s=>{if(console.log(s),r=s,0==r[0].o_nres)t._NroCorrelativoTarea="0",t.MsjBd=r[0].o_msj,t.idhorasxVueltaOtCab="0";else for(let a=0;a<t.ArrayItemsSelected.length;a++)e==t.ArrayItemsSelected[a].idvaleservidetot&&(console.log("_______se actualizoooo el item cab___________"),console.log(t.ArrayItemsSelected),t.ArrayItemsSelected[a].idhorasxvueltaotcab=r[0].param1);t.radioRevisionSelected=""},s=>{console.log("Error- something is wrong!")})})})()}finalizarTareaSaveBdxitem(e,t,o){var r=this;return(0,c.Z)(function*(){let i,s=r.urlApiProd,a="0";for(let l=0;l<r.ArrayItemsSelected.length;l++)o==r.ArrayItemsSelected[l].idvaleservidetot&&(console.log("_______se actualizoooo el item cab___________"),console.log(r.ArrayItemsSelected),a=r.ArrayItemsSelected[l].idhorasxvueltaotcab,r.ArrayItemsSelected.splice(l,1));return r.http.post(s+"?acc=15&id="+o+"&role="+t+"&idhorasxvueltaotcab="+a,e).subscribe(l=>{console.log(l),i=l,r.confirmSaveBd=i[0].o_nres,r.EditArItemsSelected.push(),r.ArrayItemsSelected.push()},l=>{console.log("Error- something is wrong!")})})()}finalizarTareaSaveBdxitemAutomatico(e,t,o){var r=this;return(0,c.Z)(function*(){let s=r.urlApiProd,a="0";for(let l=0;l<r.ArrayItemsSelected.length;l++)o==r.ArrayItemsSelected[l].idvaleservidetot&&(console.log("_______se actualizoooo el item cab___________"),console.log(r.ArrayItemsSelected),a=r.ArrayItemsSelected[l].idhorasxvueltaotcab);return r.http.post(s+"?acc=22&id="+o+"&role="+t+"&idhorasxvueltaotcab="+a,e).subscribe(l=>{console.log(l)},l=>{console.log("Error- something is wrong!")})})()}listado_servicio_noprogramado(e,t,o,r,i){let s=this.urlApiProd,a=JSON.stringify({s:e,acc:t,avatar:o,idpieza:r,idtablet:"this.device.uuid",idtablet2:i});return this.http.post(s,a).toPromise().then(l=>l)}listado_equipos_service(e,t,o,r){let i=this.urlApiProd,s=JSON.stringify({s:e,acc:o,tipo:t,idtablet:"this.device.uuid",madre_hija:r});return this.http.post(i,s).toPromise().then(a=>a)}listado_pt_service(e,t,o,r,i,s,a){let l=this.urlApiProd,d=JSON.stringify({s:e,acc:o,tipo:t,idtablet:"this.device.uuid",madre_hija:r,idmarca:i,idpotencia:s,idtipo:a});return this.http.post(l,d).toPromise().then(m=>m)}load_cbo_marca_tipo_potencia(e){let t=this.urlApiProd,o=JSON.stringify({s:e,acc:18,idtablet:"this.device.uuid"});return this.http.post(t,o).toPromise().then(r=>r)}finalizarTareaAutomatico(){var e=this;return(0,c.Z)(function*(){let t;return e.http.post(e.urlApiProd+"?acc=21&id="+e.idhorasxVueltaOtCab,void 0).subscribe(i=>{console.log(i),t=i,e.confirmSaveBd=t[0].o_nres,e.EditArItemsSelected.push(),e.ArrayItemsSelected.push()},i=>{console.log("Error- something is wrong!")})})()}}return n.\u0275fac=function(e){return new(e||n)(g.LFG(p.eN),g.LFG(p.eN),g.LFG(A.K))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);