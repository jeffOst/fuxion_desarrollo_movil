"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7384],{7384:(I,p,l)=>{l.r(p),l.d(p,{MttoGeneraSolsePage:()=>Z});var _=l(5861),S=l(6814),g=l(95),n=l(6728),u=l(6466),e=l(6242),C=l(5472),v=l(1991),P=l(2014),A=l(4248);const M=["idContent"];function T(a,h){if(1&a){const r=e.EpF();e.TgZ(0,"ion-card",15)(1,"ion-card-header")(2,"ion-row")(3,"ion-col",16),e._uU(4," Correlativo: "),e.qZA(),e.TgZ(5,"ion-col",17)(6,"ion-input",18),e.NdJ("ngModelChange",function(t){const s=e.CHM(r).$implicit;return e.KtG(s.corre_otss=t)}),e.qZA()()()(),e.TgZ(7,"ion-card-content")(8,"ion-grid")(9,"ion-row")(10,"ion-col",16),e._uU(11," Pieza: "),e.qZA(),e.TgZ(12,"ion-col",17)(13,"ion-input",19),e.NdJ("ngModelChange",function(t){const s=e.CHM(r).$implicit;return e.KtG(s.nomclase_os=t)}),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col",16),e._uU(16," Cantidad: "),e.qZA(),e.TgZ(17,"ion-col",17)(18,"ion-input",20),e.NdJ("ngModelChange",function(t){const s=e.CHM(r).$implicit;return e.KtG(s.cantidad_otss=t)}),e.qZA()()(),e.TgZ(19,"ion-row")(20,"ion-col",16),e._uU(21," Codigo QR: "),e.qZA(),e.TgZ(22,"ion-col",21)(23,"ion-input",22),e.NdJ("ngModelChange",function(t){const s=e.CHM(r).$implicit;return e.KtG(s.codigo_qr_os=t)}),e.qZA()()(),e.TgZ(24,"ion-row")(25,"ion-col",23)(26,"ion-button",24),e.NdJ("click",function(){const i=e.CHM(r).index,s=e.oxw();return e.KtG(s.start_scan_qr(i))}),e.TgZ(27,"ion-text",25),e._uU(28,"Iniciar Scaneo Q.R."),e.qZA(),e._UZ(29,"ion-icon",26),e.qZA()()(),e.TgZ(30,"ion-row")(31,"ion-col",23)(32,"ion-button",24),e.NdJ("click",function(){const t=e.CHM(r),i=t.$implicit,s=t.index,d=e.oxw();return e.KtG(d.actulizar_solse_qr(i.idotsolse,s))}),e.TgZ(33,"ion-text",27),e._uU(34,"Actualizar Q.R."),e.qZA(),e._UZ(35,"ion-icon",26),e.qZA()()()()()()}if(2&a){const r=h.$implicit,o=e.oxw();e.Q6J("hidden",o.scanActive),e.xp6(6),e.s9C("value",r.corre_otss),e.Q6J("hidden",o.scanActive)("ngModel",r.corre_otss),e.xp6(2),e.Udp("--background",o.scanActive?"#00000000":"#fff"),e.xp6(5),e.s9C("value",r.nomclase_os),e.Q6J("hidden",o.scanActive)("ngModel",r.nomclase_os),e.xp6(5),e.s9C("value",r.cantidad_otss),e.Q6J("hidden",o.scanActive)("ngModel",r.cantidad_otss),e.xp6(5),e.s9C("value",r.codigo_qr_os),e.Q6J("ngModel",r.codigo_qr_os),e.xp6(3),e.Q6J("hidden",o.scanActive),e.xp6(6),e.Q6J("hidden",o.scanActive)}}let Z=(()=>{var a;class h{constructor(o,t,i,s,d,f,x,O,y,E){this.navCtrl=o,this.loadingController=t,this.serviceApi=i,this.storage=s,this.route=d,this.router=f,this.alertController=x,this.modalCtrl=O,this.platform=y,this.toastController=E,this.idtablet_="",this.ArrayItemsSelectedDesti=[],this.NroOtHtml="",this.CodEquipoHtml="",this.FchCreaOtHtml="",this.IdOtHtml="",this.result=null,this.scanActive=!1,this.realPositionYScroll=0,this.realPositionYScrollAux=0,this.idotsolse_otd="";let m,c=this.router.getCurrentNavigation().extras.state;c&&(console.log(c),this.NroOtHtml=c.NroOtHtml,this.CodEquipoHtml=c.CodEquipoHtml,this.FchCreaOtHtml=c.FchCreaOtHtml,this.IdOtHtml=c.IdOtHtml,this.idotsolse_otd=c.idotsolse_otd),this.storage.get("USER_INFO").then(D=>{m=D,this.NomUsuario=m.user_name,this.idtablet_=m.imei})}ngOnInit(){this.ArrayItemsSelectedDesti=[],this.actulizar_solse(this.IdOtHtml),this.storage.get("DEVICE_INFO").then(o=>{this.id_device=o.uuid,console.log("this.id_device::>",this.id_device)})}ngAfterViewInit(){}ngOnDestroy(){}logScrollStart(){console.log("inicio scroool")}logScrolling(o){this.realPositionYScroll=o.detail.scrollTop,this.platform.height()}ionScrollEnd(){console.log("fin  de scroool")}start_scan_qr(o){var t=this;return(0,_.Z)(function*(){if(t.realPositionYScrollAux=t.realPositionYScroll,console.log("this.realPositionYScrollAux::",t.realPositionYScrollAux),console.log("this.realPositionYScroll::",t.realPositionYScroll),yield t.checkPermiso()){t.scanActive=!0;const s=yield u.mR.startScan();console.log("this.realPositionYScrollAux::",t.realPositionYScrollAux),console.log("this.realPositionYScroll::",t.realPositionYScroll),s.hasContent&&(console.log(s),t.ArrayItemsSelectedDesti[o].codigo_qr_os=s.content,console.log(t.ArrayItemsSelectedDesti[o]),console.log(t.ArrayItemsSelectedDesti),console.log("result.hasContent:::",s.hasContent),t.content.scrollByPoint(0,t.realPositionYScrollAux,1200),t.scanActive=!1)}})()}checkPermiso(){var o=this;return(0,_.Z)(function*(){return new Promise(function(){var t=(0,_.Z)(function*(i,s){const d=yield u.mR.checkPermission({force:!0});d.granted?i(!0):d.denied?yield(yield o.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{u.mR.openAppSettings(),i(!1)}}]})).present():i(!1)});return function(i,s){return t.apply(this,arguments)}}())})()}stopScanner(){u.mR.stopScan(),this.scanActive=!1}load_lista_servicios(o){this.serviceApi.load_lista_solse(o,this.idotsolse_otd).then(t=>{console.log("DENTO SOLSE REST",t),this.ArrayItemsSelectedDesti=t,console.log("DENTO SOLSE ArrayItemsSelectedDesti",this.ArrayItemsSelectedDesti),console.log("finally::this.realPositionYScroll>",this.realPositionYScroll),this.content.scrollByPoint(0,this.realPositionYScroll,1e3)}).finally(()=>{})}actulizar_solse(o){this.loadingController.create({message:"Cargando servicios...",translucent:!0}).then(i=>{i.present(),this.serviceApi.update_solse_ot(this.ArrayItemsSelectedDesti,o).then(s=>{console.log("res::::::>",s),this.results=s,console.log(this.results[0]),this.load_lista_servicios(o),0!=this.results[0].o_nres?(this.load_lista_servicios(this.IdOtHtml),this.ArrayItemsSelectedDesti=[]):alert(this.results[0].o_msj)}).finally(()=>{this.loadingController.dismiss()})})}actulizar_solse_qr(o,t){let i;if(this.CssNotiTipoProceso="field_required_ok",console.log(this.ArrayItemsSelectedDesti[t].codigo_qr_os),null==this.ArrayItemsSelectedDesti[t].codigo_qr_os||""==this.ArrayItemsSelectedDesti[t].codigo_qr_os)return i=" Fala ingresar el c\xf3digo QR ",this.CssNotiTipoProceso="field_required",this.presentToast(" Fala ingresar el c\xf3digo QR ","danger"),!1;this.serviceApi.update_solse_ot_qr(this.ArrayItemsSelectedDesti,o).then(s=>{console.log("res::::::>",s),this.results=s,console.log(this.results[0]),this.load_lista_servicios(o),0!=this.results[0].o_nres?(this.load_lista_servicios(this.IdOtHtml),alert(this.results[0].o_msj),this.ArrayItemsSelectedDesti=[]):alert(this.results[0].o_msj)}).finally(()=>{})}presentToast(o,t="primary"){var i=this;return(0,_.Z)(function*(){(yield i.toastController.create({message:o,duration:2e3,position:"top",color:t})).present()})()}regresar_listado_servicios(){this.navCtrl.navigateForward("winprincipal")}}return(a=h).\u0275fac=function(o){return new(o||a)(e.Y36(C.SH),e.Y36(n.HT),e.Y36(v.k),e.Y36(P.K),e.Y36(A.gz),e.Y36(A.F0),e.Y36(n.Br),e.Y36(n.IN),e.Y36(C.t4),e.Y36(n.yF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mtto-genera-solse"]],viewQuery:function(o,t){if(1&o&&e.Gf(M,5),2&o){let i;e.iGM(i=e.CRH())&&(t.content=i.first)}},standalone:!0,features:[e.jDz],decls:35,vars:10,consts:[[3,"hidden"],["mode","ios"],["text-capitalize",""],["slot","start"],["color","danger",3,"click"],["name","close"],[3,"scrollEvents","ionScrollStart","ionScroll"],["idContent",""],["size-sm","6","size-md","2","size-xl","1"],[1,"text-align:","right"],["size-sm","6","size-md","2","size-xl","2"],[1,"text-align:","left"],["style","\n          border: black;\n          border: 2px solid;\n          background-color: white;\n          border-radius: 25px;\n          width: 95% !important;\n          margin: 2ch !important;\n          padding:0px;","mode","ios","type","button",3,"hidden",4,"ngFor","ngForOf"],["color","success","expand","full",3,"hidden","click"],[1,"scan-box",3,"hidden"],["mode","ios","type","button",2,"border","black","border","2px solid","background-color","white","border-radius","25px","width","95% !important","margin","2ch !important","padding","0px",3,"hidden"],["size","2"],["size","10"],["required","true","color","primary","type","text","mode","ios","disabled","",3,"hidden","ngModel","value","ngModelChange"],["type","text","disabled","","placeholder","Ingrese Solse",3,"hidden","ngModel","value","ngModelChange"],["required","true","color","primary","type","number","mode","ios","disabled","",3,"hidden","ngModel","value","ngModelChange"],["size","10",2,"padding","1px"],["type","text","placeholder","Ingrese Codigo Q.R.",3,"ngModel","value","ngModelChange"],["size","12"],["color","light","expand","full",3,"hidden","click"],["color","primary"],["ios","ios-add-circle","md","md-add-circle"],["color","success"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),e._uU(3,"Lista SOLSE"),e.qZA(),e.TgZ(4,"ion-buttons",3)(5,"ion-button",4),e.NdJ("click",function(){return t.regresar_listado_servicios()}),e._UZ(6,"ion-icon",5),e._uU(7," Regresar "),e.qZA()()()(),e.TgZ(8,"ion-content",6,7),e.NdJ("ionScrollStart",function(){return t.logScrollStart()})("ionScroll",function(s){return t.logScrolling(s)}),e.TgZ(10,"ion-item")(11,"ion-grid")(12,"ion-row")(13,"ion-col",8)(14,"div",9),e._uU(15,"Nro. O.T.:"),e.qZA()(),e.TgZ(16,"ion-col",10)(17,"div",11)(18,"strong"),e._uU(19),e.qZA()()(),e.TgZ(20,"ion-col",8),e._uU(21,"Equipo: "),e.qZA(),e.TgZ(22,"ion-col",10)(23,"strong"),e._uU(24),e.qZA()(),e.TgZ(25,"ion-col",10),e._uU(26,"F.Creacion O.T.:"),e.qZA(),e.TgZ(27,"ion-col",10)(28,"strong"),e._uU(29),e.qZA()()()()(),e.TgZ(30,"ion-list"),e.YNc(31,T,36,16,"ion-card",12),e.qZA(),e.TgZ(32,"ion-button",13),e.NdJ("click",function(){return t.stopScanner()}),e._uU(33," \xa0Detener "),e.qZA(),e._UZ(34,"div",14),e.qZA()),2&o&&(e.Q6J("hidden",t.scanActive),e.xp6(8),e.Udp("--background",t.scanActive?"#00000000":"#fff"),e.Q6J("scrollEvents",!0),e.xp6(11),e.Oqu(t.NroOtHtml),e.xp6(5),e.Oqu(t.CodEquipoHtml),e.xp6(5),e.Oqu(t.FchCreaOtHtml),e.xp6(2),e.Q6J("ngForOf",t.ArrayItemsSelectedDesti),e.xp6(1),e.Q6J("hidden",!t.scanActive),e.xp6(2),e.Q6J("hidden",!t.scanActive))},dependencies:[n.Pc,n.YG,n.Sm,n.PM,n.FN,n.Zi,n.wI,n.W2,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.q_,n.Nd,n.yW,n.wd,n.sr,n.as,n.j9,S.ez,S.sg,g.u5,g.JJ,g.Q7,g.On]}),h})()}}]);