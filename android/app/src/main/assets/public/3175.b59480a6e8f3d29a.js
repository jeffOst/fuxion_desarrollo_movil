"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3175],{3175:(H,u,s)=>{s.r(u),s.d(u,{RrhhHorasCompensadasPage:()=>L});var d=s(5861),m=s(6814),c=s(95),r=s(6728),f=s(5483),C=s(5547),v=s(7766),P=s(5259),A=s(7904),D=s(1756),e=s(6242),E=s(4248),R=s(5472),Z=s(8715),T=s(2014);const p=()=>({standalone:!0});function k(l,h){if(1&l){const n=e.EpF();e.TgZ(0,"ion-datetime",30),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.fechaini_he=o)})("ionChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.onFechaChangeInicio(o))}),e.qZA()}if(2&l){const n=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",n.fechaini_he)("ngModelOptions",e.DdM(4,p))}}function F(l,h){if(1&l){const n=e.EpF();e.TgZ(0,"ion-datetime",31),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.fechafin_he=o)})("ionChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.onFechaChangeFin(o))}),e.qZA()}if(2&l){const n=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",n.fechafin_he)("ngModelOptions",e.DdM(4,p))}}function M(l,h){if(1&l){const n=e.EpF();e.TgZ(0,"ion-button",32),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.SaveFormTerminadoPaso1(1))}),e._UZ(1,"ion-icon",33),e._uU(2,"\xa0 Registrar "),e.qZA()}}function b(l,h){if(1&l){const n=e.EpF();e.TgZ(0,"ion-button",34),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.actTerminadoPaso1())}),e._UZ(1,"ion-icon",33),e._uU(2,"\xa0 Actualizar "),e.qZA()}}let L=(()=>{var l;class h{constructor(t,o,a,i,_,g,U,y){this.router=t,this.modalCtrl=o,this.formBuilder=a,this.ApiService=i,this.loadingController=_,this.alertController=g,this.navCtrl=U,this.storage=y,this.Cancelar="Cancelar",this.scanActive=!1,this.estaCargando=!1,this.filteredSubAreas=[],this.FormCheckListPaso1=this.formBuilder.group({nom_tecni:["",c.kI.required],nom_serv:[""],actividad:[""],motivo:[""],supervisor:["",c.kI.required],area:["",c.kI.required],descrip:["",c.kI.required],maquina:[""],tip_horas:["",c.kI.required],button:[""],cantidad:[""],idtecni:[""],idactivi:[""],idprogra:[""],idmaquina:[""],idmotivo:[""],idarea:[""],idsuper:[""],id_documento:[""],fch_ini:[""],fch_fin:[""]})}ngOnInit(){let t;this.estaCargando=!0,this.storage.get("USER_INFO").then(o=>{t=o,this.NombresUsuarioLocal=t.user_name,this.IdUsuarioLocal=t.user_id,console.log("localStorage",this.NombresUsuarioLocal),console.log("localStorage",this.IdUsuarioLocal),this.FormCheckListPaso1.controls.nom_tecni.setValue(this.NombresUsuarioLocal),this.FormCheckListPaso1.controls.idtecni.setValue(this.IdUsuarioLocal),this.FormCheckListPaso1.controls.tip_horas.setValue("2")}),this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row,console.log("this.navParamsAny",this.navParamsAny.id_areapert),this.disabledbuton=this.navParamsAny.estado_reg_hhee,2==this.disabledbuton?(this.disableButton=!0,this.disableButton1=!0):1==this.disabledbuton?(this.disableButton=!1,this.disableButton1=!0):(this.disableButton=!0,this.disableButton1=!1),this.FormCheckListPaso1.controls.id_documento.setValue(this.navParamsAny.idreghoex)}ionViewWillEnter(){const t=new Date;t.setHours(t.getHours()-5),this.fechaini_he=t.toISOString(),this.fechafin_he=t.toISOString(),this.FormCheckListPaso1.controls.fch_ini.setValue(this.fechaini_he),this.FormCheckListPaso1.controls.fch_fin.setValue(this.fechafin_he),0!=this.navParamsAny.idreghoex&&this.FLoadForms(),console.log("carga mas lento?",this.NombresUsuarioLocal),this.FormCheckListPaso1.controls.nom_tecni.setValue(this.NombresUsuarioLocal),this.FormCheckListPaso1.controls.idtecni.setValue(this.IdUsuarioLocal)}FOpenModalTecnico(t){var o=this;return(0,d.Z)(function*(){const a=yield o.modalCtrl.create({component:C.RrhhPopupTecnicoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{id_maquina:t}});return a.onDidDismiss().then(i=>{null!=i.data&&(o.dataReturned=i.data,console.log("dataReturned::206",i),o.FormCheckListPaso1.controls.maquina.setValue(o.dataReturned.nombres),o.FormCheckListPaso1.controls.idmaquina.setValue(o.dataReturned.id))}),yield a.present()})()}open_popup_servicios(t){var o=this;return(0,d.Z)(function*(){const a=yield o.modalCtrl.create({component:v.RrhhPopupServiciosPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{id_area:t}});return a.onDidDismiss().then(i=>{null!=i.data&&(o.dataReturned1=i.data,console.log("dataReturned::207",i),o.FormCheckListPaso1.controls.nom_serv.setValue(o.dataReturned1.nombres),o.FormCheckListPaso1.controls.idprogra.setValue(o.dataReturned1.id))}),yield a.present()})()}open_popup_motivo(t){var o=this;return(0,d.Z)(function*(){const a=yield o.modalCtrl.create({component:P.RrhhPopupMotivoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{id_motivo:t}});return a.onDidDismiss().then(i=>{null!=i.data&&(o.dataReturned3=i.data,console.log("dataReturned::207",i),o.FormCheckListPaso1.controls.motivo.setValue(o.dataReturned3.nombres),o.FormCheckListPaso1.controls.idmotivo.setValue(o.dataReturned3.id))}),yield a.present()})()}open_popup_supervisor(t){var o=this;return(0,d.Z)(function*(){const a=yield o.modalCtrl.create({component:D.RrhhPopupSupervisorPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{id_supervisor:t}});return a.onDidDismiss().then(i=>{null!=i.data&&(o.dataReturned4=i.data,console.log("dataReturned::207",i),o.FormCheckListPaso1.controls.supervisor.setValue(o.dataReturned4.nombres),o.FormCheckListPaso1.controls.idsuper.setValue(o.dataReturned4.id))}),yield a.present()})()}open_popup_area(){var t=this;return(0,d.Z)(function*(){const o=yield t.modalCtrl.create({component:A.RrhhPopupAreaPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{}});return o.onDidDismiss().then(a=>{null!=a.data&&(t.dataReturned4=a.data,console.log("dataReturned::207",a),t.FormCheckListPaso1.controls.area.setValue(t.dataReturned4.nombres),t.FormCheckListPaso1.controls.idarea.setValue(t.dataReturned4.id))}),yield o.present()})()}FOpenModalActividad(t){var o=this;return(0,d.Z)(function*(){const a=yield o.modalCtrl.create({component:f.RrhhPopupActividadPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{id_categoria:t}});return a.onDidDismiss().then(i=>{null!=i.data&&(o.dataReturned2=i.data,console.log("dataReturned::206",i),o.FormCheckListPaso1.controls.actividad.setValue(o.dataReturned2.nombres),o.FormCheckListPaso1.controls.idactivi.setValue(o.dataReturned2.id))}),yield a.present()})()}cancelar_ejecucion(){this.navCtrl.navigateForward("rrhh-list-horas-compensadas")}SaveFormTerminadoPaso1(t){var o=this;return(0,d.Z)(function*(){o.FormCheckListPaso1.valid?(o.FormCheckListPaso1.controls.button.setValue(t),yield o.ApiService.GuardarInfPaso1(o.FormCheckListPaso1.value).then(function(){var a=(0,d.Z)(function*(i){o.loadingController.dismiss();let _="0"==i[0].o_nres?"alerta-error":"alerta-ok";yield(yield o.alertController.create({header:"ALERTA",subHeader:"Confirmacion",cssClass:_,mode:"ios",animated:!0,message:i[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==i[0].o_nres&&o.navCtrl.navigateForward(["rrhh-list-horas-compensadas"])}}]})).present()});return function(i){return a.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394")}).catch(a=>{console.log("errror:::>>>>>>>>>",a)})):(console.log("entraaaaa al elseeee"),o.showAlert())})()}actTerminadoPaso1(){var t=this;return(0,d.Z)(function*(){t.FormCheckListPaso1.valid?yield t.ApiService.GuardarActPaso1(t.FormCheckListPaso1.value).then(function(){var o=(0,d.Z)(function*(a){t.loadingController.dismiss();let i="0"==a[0].o_nres?"alerta-error":"alerta-ok";yield(yield t.alertController.create({header:"ALERTA",subHeader:"Confirmacion",cssClass:i,mode:"ios",animated:!0,message:a[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==a[0].o_nres&&t.navCtrl.navigateForward(["rrhh-list-horas-compensadas"])}}]})).present()});return function(a){return o.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394")}).catch(o=>{console.log("errror:::>>>>>>>>>",o)}):(console.log("entraaaaa al elseeee"),t.showAlert())})()}showAlert(){var t=this;return(0,d.Z)(function*(){yield(yield t.alertController.create({header:"ALERTA",subHeader:"Confirmacion",cssClass:"alerta-error",mode:"ios",animated:!0,message:"Error falta completar datos",buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada")}}]})).present()})()}onFechaChangeInicio(t){console.log("Fecha cambiada:",t.detail.value),this.FormCheckListPaso1.controls.fch_ini.setValue(t.detail.value)}onFechaChangeFin(t){console.log("Fecha cambiada:",t.detail.value),this.FormCheckListPaso1.controls.fch_fin.setValue(t.detail.value)}consult_sub_area(){var t=this;return(0,d.Z)(function*(){yield t.ApiService.GuardarInfPaso1(t.FormCheckListPaso1.controls.idarea.value)})()}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(o=>{o.present(),this.ApiService.FormFindinftab1(this.navParamsAny.idreghoex).then(a=>{console.log(this.navParamsAny.idreghoex),this.EditDataRest=a.form,console.log("hrlppp",this.EditDataRest);try{this.FormCheckListPaso1.setValue({nom_serv:this.EditDataRest[0].program,actividad:this.EditDataRest[0].actividad,motivo:this.EditDataRest[0].motivo,supervisor:this.EditDataRest[0].supervisor,area:this.EditDataRest[0].area,descrip:this.EditDataRest[0].descrip_he,cantidad:this.EditDataRest[0].cantidad,tip_horas:this.EditDataRest[0].tip_horahe,button:this.EditDataRest[0].estado_reg_hhee,nom_tecni:this.NombresUsuarioLocal,idtecni:this.IdUsuarioLocal,idactivi:this.EditDataRest[0].actividad_he,idprogra:this.EditDataRest[0].idprogram_prod,idmotivo:this.EditDataRest[0].idmotivo_he,idarea:this.EditDataRest[0].idarea_he,idsuper:this.EditDataRest[0].idsupervisor_he,id_documento:this.EditDataRest[0].idreghoex,maquina:this.EditDataRest[0].maquina,idmaquina:this.EditDataRest[0].idmaquina_he,fch_ini:this.EditDataRest[0].fech_registro_ini,fch_fin:this.EditDataRest[0].fech_registro_fin}),this.fechaini_he=this.EditDataRest[0].fech_registro_ini,this.fechafin_he=this.EditDataRest[0].fech_registro_fin}catch(i){console.log("error:::>",i)}}).finally(()=>{this.loadingController.dismiss()})})}}return(l=h).\u0275fac=function(t){return new(t||l)(e.Y36(E.F0),e.Y36(r.IN),e.Y36(c.QS),e.Y36(Z.z),e.Y36(r.HT),e.Y36(r.Br),e.Y36(R.SH),e.Y36(T.K))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-rrhh-horas-compensadas"]],standalone:!0,features:[e.jDz],decls:80,vars:11,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","grid-entrega-bombas",3,"text"],[3,"formGroup"],["f","ngForm"],[3,"hidden"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],["required","true","color","primary","mode","ios","formControlName","nom_tecni","readonly",""],["size","9",1,"ion-text-start"],["type","text","placeholder","Seleccionar Area","mode","ios","formControlName","area",3,"click"],["type","text","placeholder","Seleccionar Sub-Area","mode","ios","formControlName","nom_serv",3,"click"],["hidden","",1,"ion-align-items-center"],["type","text","placeholder","Ingrese su Detalle","mode","ios","formControlName","descrip"],["type","text","placeholder","Seleccionar Supervisor","mode","ios","formControlName","supervisor",3,"click"],["size","2"],["locale","es-PE","datetime","datetime1",1,"custom-datetime"],["trigger","popover-button","animated","true","arrow","true","mode","ios",3,"keepContentsMounted"],["size","1",1,"ion-text-end"],["locale","es-PE","datetime","datetime2"],["placeholder","Seleccionar el tipo de Horas","formControlName","tip_horas"],["value","2"],[2,"text-align","center"],[3,"click"],["color","danger",3,"click"],["name","close-outline"],["color","primary",3,"click",4,"ngIf"],["color","success",3,"click",4,"ngIf"],["locale","es-ES","id","datetime1","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelOptions","ngModelChange","ionChange"],["locale","es-ES","id","datetime2","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelOptions","ngModelChange","ionChange"],["color","primary",3,"click"],["name","save-outline"],["color","success",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Formulario Horas Extras"),e.qZA(),e.TgZ(4,"ion-buttons",2),e._UZ(5,"ion-back-button",3),e.qZA()()(),e.TgZ(6,"ion-content")(7,"form",4,5)(9,"ion-list")(10,"ion-item",6)(11,"ion-grid",6)(12,"ion-row",7)(13,"ion-col")(14,"ion-grid")(15,"ion-row",7)(16,"ion-col",8),e._uU(17," Tecnico: "),e.qZA(),e.TgZ(18,"ion-col",9)(19,"ion-item"),e._UZ(20,"ion-input",10),e.qZA(),e._UZ(21,"div"),e.qZA()(),e.TgZ(22,"ion-row",7)(23,"ion-col",8),e._uU(24,"Area Solicitante: "),e.qZA(),e.TgZ(25,"ion-col",11)(26,"ion-item")(27,"ion-searchbar",12),e.NdJ("click",function(){return o.open_popup_area()}),e.qZA()()()(),e.TgZ(28,"ion-row",7)(29,"ion-col",8),e._uU(30,"Sub-Area: "),e.qZA(),e.TgZ(31,"ion-col",11)(32,"ion-item")(33,"ion-searchbar",13),e.NdJ("click",function(){return o.open_popup_servicios(o.FormCheckListPaso1.get("idarea").value)}),e.qZA()()()()()()(),e.TgZ(34,"ion-row",14)(35,"ion-col",8),e._uU(36," Motivo : "),e.qZA(),e.TgZ(37,"ion-col",9)(38,"ion-item"),e._UZ(39,"ion-input",15),e.qZA()()(),e.TgZ(40,"ion-row",7)(41,"ion-col",8),e._uU(42,"Aprobador: "),e.qZA(),e.TgZ(43,"ion-col",11)(44,"ion-item")(45,"ion-searchbar",16),e.NdJ("click",function(){return o.open_popup_supervisor(o.FormCheckListPaso1.get("idarea").value)}),e.qZA()()()(),e.TgZ(46,"ion-row",7)(47,"ion-col",8),e._uU(48,"Inicio: "),e.qZA(),e.TgZ(49,"ion-col",17),e._UZ(50,"ion-datetime-button",18),e.TgZ(51,"ion-popover",19),e.YNc(52,k,1,5,"ng-template"),e.qZA()(),e.TgZ(53,"ion-col",20),e._uU(54,"Fin: "),e.qZA(),e.TgZ(55,"ion-col",17),e._UZ(56,"ion-datetime-button",21),e.TgZ(57,"ion-popover",19),e.YNc(58,F,1,5,"ng-template"),e.qZA()()(),e.TgZ(59,"ion-row",7)(60,"ion-col",8),e._uU(61,"Tipo de Horas: "),e.qZA(),e.TgZ(62,"ion-col",11)(63,"ion-item")(64,"ion-select",22)(65,"ion-select-option",23),e._uU(66,"H. Compensada"),e.qZA()()()()()()()()()(),e.TgZ(67,"ion-footer")(68,"ion-grid",6)(69,"ion-row"),e._UZ(70,"ion-col"),e.TgZ(71,"ion-col",24)(72,"ion-buttons",25),e.NdJ("click",function(){return o.cancelar_ejecucion()}),e.TgZ(73,"ion-button",26),e.NdJ("click",function(){return o.cancelar_ejecucion}),e._UZ(74,"ion-icon",27),e._uU(75,"\xa0 Cancelar "),e.qZA(),e._uU(76," \xa0\xa0\xa0\xa0 "),e.YNc(77,M,3,0,"ion-button",28)(78,b,3,0,"ion-button",29),e.qZA()(),e._UZ(79,"ion-col"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("text",o.Cancelar),e.xp6(2),e.Q6J("formGroup",o.FormCheckListPaso1),e.xp6(2),e.Udp("--background",o.scanActive?"#00000000":"#fff"),e.xp6(1),e.Q6J("hidden",o.scanActive),e.xp6(1),e.Q6J("hidden",o.scanActive),e.xp6(40),e.Q6J("keepContentsMounted",!0),e.xp6(6),e.Q6J("keepContentsMounted",!0),e.xp6(11),e.Q6J("hidden",o.scanActive),e.xp6(9),e.Q6J("ngIf",!o.disableButton1),e.xp6(1),e.Q6J("ngIf",!o.disableButton))},dependencies:[r.Pc,r.YG,r.Sm,r.wI,r.W2,r.x4,r.Mj,r.fr,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.q_,r.Nd,r.VI,r.t9,r.n0,r.wd,r.sr,r.d8,r.QI,r.j9,r.oU,m.ez,m.O5,c.u5,c._Y,c.JJ,c.JL,c.Q7,c.On,c.UX,c.sg,c.u]}),h})()}}]);