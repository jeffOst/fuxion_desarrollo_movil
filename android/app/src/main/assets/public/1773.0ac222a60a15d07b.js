"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1773,1811],{1773:(A,u,s)=>{s.r(u),s.d(u,{ProdAteServDejarPiezaCalidadPage:()=>F});var P=s(5861),h=s(6814),p=s(95),t=s(6728),n=s(1811),o=s(6242),M=s(5472),C=s(4248),v=s(6485);let F=(()=>{var l;class m{constructor(r,e,i,a,d,g,c){this.navCtrl=r,this.router=e,this.modalCtrl=i,this.alertController=a,this.loadingController=d,this.ApiServices=g,this.location=c,this.Cancelar="Cancelar",this.readonly_qr=!1,this.FormModel={},this.navParams=this.router.getCurrentNavigation().extras.state,console.log(this.navParams),console.log("this.FormModel",this.FormModel),this.navParams&&(this.FormModel.correorden=this.navParams.correorden,console.log("this.navParams",this.navParams),this.FormModel.idofpterminado=this.navParams.idofpterminado,this.FormModel.codigo_pt=this.navParams.Y04001,this.FormModel.descripcion_pt=this.navParams.descripcion_pt,this.FormModel.nombres_tecnico=this.navParams.nombres_tecnico,this.FormModel.EQUIPOID=this.navParams.EQUIPOID,this.FormModel.idsolicitante_scc=this.navParams.idsolicitante_scc,this.FormModel.cantidad=this.navParams.cantidad,this.FormModel.cantidad_atendido=this.navParams.cantidad_atendido,console.log("this.FormModel",this.FormModel),this.CssReproceso=1==this.navParams.flag_reproceso?"CssReproceso":"",console.log("this.CssReproceso=",this.CssReproceso),this.hide_div_reproceso=1==this.navParams.flag_reproceso,this.FormModel.fecha_reproceso=this.navParams.fecha_reproceso,this.FormModel.cantidad_reproceso=this.navParams.cantidad_reproceso,this.FormModel.idrevisiondet_reproceso=this.navParams.idrevisiondet_reproceso)}ngOnInit(){this.FormModel.cantidad_scc=0,this.hide_div_reproceso||this.listServiciosPendientes()}FCancelarForm(){this.location.back()}FSaveForm(){let r="",i=0;this.CssNotiTecnico="field_required_ok",(null==this.FormModel.nombres_tecnico||""==this.FormModel.nombres_tecnico)&&(i=2,r=" Fala seleccionar  Tecnico",this.CssNotiTecnico="field_required"),this.CssNotiCantidad="field_required_ok",(null==this.FormModel.cantidad_scc||""==this.FormModel.cantidad_scc)&&(i=2,r=" Fala agregar cantidad",this.CssNotiCantidad="field_required"),1==i||2==i?this.alertController.create({header:"Solicita Control Calidad",cssClass:"success",subHeader:"",mode:"ios",message:""+r,buttons:[{text:"Aceptar",cssClass:"bgcolor:danger",handler:()=>{}}]}).then(d=>{d.present()}):this.loadingController.create({message:"Cargando...",translucent:!0}).then(d=>{d.present(),this.FormModel.acc="13",this.ApiServices.SaveControlCalidadByOf(this.FormModel).then(g=>{let c;if(this.loadingController.dismiss(),c=g[0],console.log(c),console.log(c.o_nres),0==c.o_nres)alert("Error, "+c.o_msj);else{this.FormModel.idsolicitudcontrolcab=c.o_nres;let f={state:this.FormModel};console.log("navigationExtras",f),this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],f),alert(c.o_msj)}}).finally(()=>{console.log("finalyyyy")})})}FOpenModalTecnico(r){var e=this;return(0,P.Z)(function*(){let i,a;i=e.FormModel.nombres_tecnico,a=e.FormModel.idsolicitante_scc;const g=yield e.modalCtrl.create({component:n.ProdAteServPopPersonalPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{nombre_tecnico:i,titulo_modal:"Lista de Tecnicos",id_personal:a}});return g.onDidDismiss().then(c=>{null!=c.data&&(e.FormModel.nombres_tecnico=c.data.nombres,e.FormModel.idsolicitante_scc=c.data.id)}),yield g.present()})()}listServiciosPendientes(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(e=>{e.present(),this.ApiServices.LoadFormDejarPiezasCalidad(this.FormModel.idofpterminado).then(i=>{console.log("this.results=>>>",i),this.FormModel.cantidad_atendido=i[0].cnt_recibo,this.FormModel.cantidad_scc=this.FormModel.cantidad-this.FormModel.cantidad_atendido,console.log("this.results=>>>",i)}).finally(()=>{this.loadingController.dismiss()})})}}return(l=m).\u0275fac=function(r){return new(r||l)(o.Y36(M.SH),o.Y36(C.F0),o.Y36(t.IN),o.Y36(t.Br),o.Y36(t.HT),o.Y36(v.Z),o.Y36(h.Ye))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-prod-ate-serv-dejar-pieza-calidad"]],standalone:!0,features:[o.jDz],decls:63,vars:19,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],[3,"ngModel","ngModelChange"],["type","text","readonly","",3,"ngModel","value","ngModelChange"],["size","9",1,"ion-text-start"],["readonly","",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[2,"text-align","center"],["color","danger",3,"disabled","click"],["name","close-outline"],["color","primary",3,"disabled","click"],["name","save-outline"]],template:function(r,e){1&r&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),o._uU(3,"Solicitud Revisi\xf3n Q.C."),o.qZA(),o.TgZ(4,"ion-buttons",2),o._UZ(5,"ion-back-button",3),o.qZA()()(),o.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item")(9,"ion-grid")(10,"ion-row",4)(11,"ion-col",5),o._uU(12," Orden de Fabricaci\xf3n \xa0:"),o.qZA(),o.TgZ(13,"ion-col",6)(14,"ion-input",7),o.NdJ("ngModelChange",function(a){return e.FormModel.correorden=a}),o.qZA()()(),o.TgZ(15,"ion-row",4)(16,"ion-col",5),o._uU(17," Codigo P.T. \xa0:"),o.qZA(),o.TgZ(18,"ion-col",6)(19,"ion-input",7),o.NdJ("ngModelChange",function(a){return e.FormModel.codigo_pt=a}),o.qZA()()(),o.TgZ(20,"ion-row",4)(21,"ion-col",5),o._uU(22," Descripci\xf3n del Componente \xa0:"),o.qZA(),o.TgZ(23,"ion-col",6)(24,"ion-input",7),o.NdJ("ngModelChange",function(a){return e.FormModel.descripcion_pt=a}),o.qZA()()(),o.TgZ(25,"ion-row",4)(26,"ion-col",5),o._uU(27," Tecnico: "),o.qZA(),o.TgZ(28,"ion-col",6)(29,"ion-input",8),o.NdJ("ngModelChange",function(a){return e.FormModel.nombres_tecnico=a}),o.qZA(),o._UZ(30,"div"),o.qZA()(),o.TgZ(31,"ion-row",4)(32,"ion-col",5),o._uU(33,"Total Piezas: "),o.qZA(),o.TgZ(34,"ion-col",9)(35,"ion-input",10),o.NdJ("ngModelChange",function(a){return e.FormModel.cantidad=a}),o.qZA()()(),o.TgZ(36,"ion-row",4)(37,"ion-col",5),o._uU(38,"Atendido Piezas: "),o.qZA(),o.TgZ(39,"ion-col",9)(40,"ion-input",10),o.NdJ("ngModelChange",function(a){return e.FormModel.cantidad_atendido=a}),o.qZA()()(),o.TgZ(41,"ion-row",4)(42,"ion-col",5),o._uU(43," Cantidad: "),o.qZA(),o.TgZ(44,"ion-col",9)(45,"ion-input",11),o.NdJ("ngModelChange",function(a){return e.FormModel.cantidad_scc=a}),o.qZA(),o._UZ(46,"div"),o.qZA()()()()()(),o.TgZ(47,"ion-footer")(48,"ion-grid")(49,"ion-row"),o._UZ(50,"ion-col"),o.TgZ(51,"ion-col",12)(52,"ion-buttons")(53,"ion-button",13),o.NdJ("click",function(){return e.FCancelarForm()}),o._UZ(54,"ion-icon",14),o._uU(55,"\xa0 Cancelar "),o.qZA(),o._uU(56," \xa0\xa0\xa0\xa0 "),o.TgZ(57,"ion-button",15),o.NdJ("click",function(){return e.FSaveForm()}),o._UZ(58,"ion-icon",16),o._uU(59,"\xa0 "),o.TgZ(60,"strong"),o._uU(61," Iniciar "),o.qZA()()()(),o._UZ(62,"ion-col"),o.qZA()()()),2&r&&(o.xp6(5),o.Q6J("text",e.Cancelar),o.xp6(9),o.Q6J("ngModel",e.FormModel.correorden),o.xp6(5),o.Q6J("ngModel",e.FormModel.codigo_pt),o.uIk("disabled",e.readonly_qr),o.xp6(5),o.Q6J("ngModel",e.FormModel.descripcion_pt),o.uIk("disabled",e.readonly_qr),o.xp6(5),o.s9C("value",e.FormModel.nombres_tecnico),o.Q6J("ngModel",e.FormModel.nombres_tecnico),o.xp6(1),o.Tol(e.CssNotiTecnico),o.xp6(5),o.Q6J("ngModel",e.FormModel.cantidad),o.xp6(5),o.Q6J("ngModel",e.FormModel.cantidad_atendido),o.xp6(5),o.Q6J("ngModel",e.FormModel.cantidad_scc),o.xp6(1),o.Tol(e.CssNotiCantidad),o.xp6(7),o.Q6J("disabled",e.disableButton),o.xp6(4),o.Q6J("disabled",e.disableButton))},dependencies:[t.Pc,t.YG,t.Sm,t.wI,t.W2,t.fr,t.jY,t.Gu,t.gu,t.pK,t.Ie,t.q_,t.Nd,t.wd,t.sr,t.as,t.j9,t.oU,h.ez,p.u5,p.JJ,p.On]}),m})()},1811:(A,u,s)=>{s.r(u),s.d(u,{ProdAteServPopPersonalPage:()=>F});var P=s(5861),h=s(6814),p=s(95),t=s(6728),n=s(6242),o=s(6485),M=s(2014);const C=["IdHtmlInputSearch"];function v(l,m){if(1&l){const _=n.EpF();n.TgZ(0,"ion-list",7)(1,"ion-item",8),n.NdJ("click",function(){const e=n.CHM(_),i=e.$implicit,a=e.index,d=n.oxw();return n.KtG(d.FSelectedItem(i.id_personal,i.nombres_tecnico,a))}),n.TgZ(2,"ion-label")(3,"strong"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA()()()()}if(2&l){const _=m.$implicit,e=m.even;n.ekj("odd",m.odd)("even",e),n.xp6(4),n.Oqu(_.nombres_tecnico),n.xp6(2),n.Oqu(_.cargo)}}let F=(()=>{var l;class m{constructor(r,e,i,a){let d;this.ApiService=r,this.loadingCtrl=e,this.modalCtrl=i,this.storage=a,this.storage.get("USER_INFO").then(g=>{d=g,this.NombresUsuarioLocal=d.user_name,this.IdUsuarioLocal=d.user_id}),this.storage.get("DEVICE_INFO").then(g=>{d=g,this.NombreDispositivo=d.name,this.IdDispositivo=d.uuid})}ngOnInit(){this.nombre_tecnico=null==this.nombre_tecnico?"":this.nombre_tecnico,this.FFindRows()}FOnCloseModel(r,e,i){var a=this;return(0,P.Z)(function*(){const d={id:r,nombres:e};console.log(d),yield a.modalCtrl.dismiss(d)})()}FSelectedItem(r,e,i){this.FOnCloseModel(r,e,i)}FCloseModal(){this.nombre_tecnico=null==this.nombre_tecnico?"":this.nombre_tecnico,this.id_personal=null==this.id_personal?"":this.id_personal,this.FOnCloseModel(this.id_personal,this.nombre_tecnico,0)}FFindRows(){this.loadingCtrl.create({message:"Cargando lista...",translucent:!0}).then(e=>{e.present(),this.ApiService.ListFindPersonal(this.NgModInputSearch,this.IdUsuarioLocal,this.IdDispositivo).then(i=>{this.DataSetGrid=i}).finally(()=>{this.loadingCtrl.dismiss()})})}}return(l=m).\u0275fac=function(r){return new(r||l)(n.Y36(o.Z),n.Y36(t.HT),n.Y36(t.IN),n.Y36(M.K))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-prod-ate-serv-pop-personal"]],viewQuery:function(r,e){if(1&r&&n.Gf(C,5),2&r){let i;n.iGM(i=n.CRH())&&(e.IdHtmlInputSearch=i.first)}},inputs:{titulo_modal:"titulo_modal",nombre_tecnico:"nombre_tecnico",id_personal:"id_personal"},standalone:!0,features:[n.jDz],decls:13,vars:3,consts:[["mode","ios"],["slot","start"],[1,"",3,"click"],["part","icon","aria-hidden","true","role","img","name","chevron-back-outline",1,"md","hydrated"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar parametros",2,"width","100%",3,"ngModel","ngModelChange","ionChange"],["IdHtmlInputSearch",""],["lines","full","inset","true",3,"odd","even",4,"ngFor","ngForOf"],["lines","full","inset","true"],["button","",3,"click"]],template:function(r,e){1&r&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",1)(5,"ion-button",2),n.NdJ("click",function(){return e.FCloseModal()}),n._UZ(6,"ion-icon",3),n._uU(7," Cancelar "),n.qZA()()()(),n.TgZ(8,"ion-content")(9,"ion-item")(10,"ion-searchbar",4,5),n.NdJ("ngModelChange",function(a){return e.NgModInputSearch=a})("ionChange",function(){return e.FFindRows()}),n.qZA()(),n.YNc(12,v,7,6,"ion-list",6),n.qZA()),2&r&&(n.xp6(3),n.Oqu(e.titulo_modal),n.xp6(7),n.Q6J("ngModel",e.NgModInputSearch),n.xp6(2),n.Q6J("ngForOf",e.DataSetGrid))},dependencies:[t.Pc,t.YG,t.Sm,t.W2,t.Gu,t.gu,t.Ie,t.Q$,t.q_,t.VI,t.wd,t.sr,t.j9,h.ez,h.sg,p.u5,p.JJ,p.On],styles:[".back_button_geo[_ngcontent-%COMP%]{--background-hover: transparent;--background-hover-opacity: 1;--background-focused: currentColor;--background-focused-opacity: .1;--border-radius: 4px;--color: var(--ion-color-primary, #3880ff);--icon-margin-end: -5px;--icon-margin-start: -4px;--icon-font-size: 1.85em;--min-height: 32px;font-size:17px;--background: transparent;--color-focused: currentColor;--color-hover: currentColor;--icon-margin-top: 0;--icon-margin-bottom: 0;--icon-padding-top: 0;--icon-padding-end: 0;--icon-padding-bottom: 0;--icon-padding-start: 0;--margin-top: 0;--margin-end: 0;--margin-bottom: 0;--margin-start: 0;--min-width: auto;--min-height: auto;--padding-top: 0;--padding-end: 0;--padding-bottom: 0;--padding-start: 0;--opacity: 1;--ripple-color: currentColor;--transition: background-color, opacity .1s linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;user-select:none;font-kerning:none}"]}),m})()}}]);