"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1079],{719:(m,d,o)=>{o.d(d,{G:()=>l});const l={FRONT:"front",BACK:"back"}},947:(m,d,o)=>{o.d(d,{mR:()=>l});var _=o(7423);o(719);const l=(0,_.fo)("BarcodeScanner",{web:()=>o.e(2155).then(o.bind(o,2155)).then(s=>new s.BarcodeScannerWeb)})},1079:(m,d,o)=>{o.r(d),o.d(d,{AlmIngListRecepOcPage:()=>I});var _=o(5861),h=o(6895),l=o(433),s=o(5562),p=o(947),A=o(3646),e=o(8256),C=o(4147);const E=["IdHtmlInputSearch"];function O(c,r){if(1&c){const t=e.EpF();e.TgZ(0,"ion-list",15)(1,"ion-item",16),e.NdJ("click",function(){const i=e.CHM(t),a=i.$implicit,u=i.index,g=e.oxw();return e.KtG(g.FSelectedItem(a,u))}),e.TgZ(2,"ion-label")(3,"strong"),e._uU(4),e.qZA(),e.TgZ(5,"p")(6,"ion-text",17),e._uU(7),e.qZA(),e.TgZ(8,"ion-text",18),e._uU(9),e.qZA(),e.TgZ(10,"ion-text",17),e._uU(11),e.qZA()()()()()}if(2&c){const t=r.$implicit,n=r.odd,i=r.even,a=e.oxw();e.ekj("odd",n)("even",i),e.Q6J("hidden",a.scanActive),e.xp6(1),e.Q6J("hidden",a.scanActive),e.xp6(3),e.Oqu(t.CORRESMG),e.xp6(3),e.hij("N\xb0Req.:",t.NROREQUISION,""),e.xp6(2),e.hij(" \xa0",t.Y20012,""),e.xp6(2),e.hij("\xa0F.Emi.O.C.:",t.Y20006,"")}}let I=(()=>{class c{constructor(t,n,i,a){this.ApiService=t,this.loadingCtrl=n,this.alertController=i,this.navCtrl=a,this.scanActive=!1,this.ContentCss=""}ngOnInit(){}ionViewDidEnter(){console.log(this.idclase),this.idclase=null==this.idclase?"":this.idclase,this.FFindRows(0,"")}FFindRows(t,n){console.log("nomclase()::",this.nomclase),this.loadingCtrl.create({message:"Cargando lista...",translucent:!0}).then(a=>{a.present(),1==t&&(this.NgModInputSearch=n),this.ApiService.ListFindQrByOc(this.NgModInputSearch,this.idclase,this.id_actividad,this.IdUsuarioLocal,this.IdDispositivo,this.nomclase).then(u=>{if(this.DataSetGrid=u,console.log("this.DataSetGrid.count:::>",this.DataSetGrid.length),1==t&&this.DataSetGrid.length>0){let g=this.DataSetGrid[0];console.log("this.DataSetGrid:::>",g),this.FSelectedItem(g,"0"),this.NgModInputSearch=""}}).finally(()=>{this.loadingCtrl.dismiss()})})}FSelectedItem(t,n){console.log(":::::OJO:::",t);let i={state:t};console.log(i),this.navCtrl.navigateForward(["alm-ing-win-recep-oc"],i)}start_scan_qr(t){var n=this;return(0,_.Z)(function*(){if(n.IdHtmlInputSearch.getInputElement().then(a=>{}),yield n.checkPermiso()){n.scanActive=!0,n.ContentCss="ion_content_qr";const a=yield p.mR.startScan();a.hasContent&&(console.log(a),n.FFindRows(1,a.content),console.log("result.hasContent:::",a.hasContent),n.scanActive=!1,n.ContentCss="",n.IdHtmlInputSearch.readonly=!1,console.log("this.DataSetGrid:::>",n.DataSetGrid))}})()}checkPermiso(){var t=this;return(0,_.Z)(function*(){return new Promise(function(){var n=(0,_.Z)(function*(i,a){const u=yield p.mR.checkPermission({force:!0});u.granted?i(!0):u.denied?yield(yield t.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{p.mR.openAppSettings(),i(!1)}}]})).present():i(!1)});return function(i,a){return n.apply(this,arguments)}}())})()}stopScanner(){p.mR.stopScan(),this.scanActive=!1,this.ContentCss=""}}return c.\u0275fac=function(t){return new(t||c)(e.Y36(C.x),e.Y36(s.HT),e.Y36(s.Br),e.Y36(s.SH))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-alm-ing-list-recep-oc-page"]],viewQuery:function(t,n){if(1&t&&e.Gf(E,5),2&t){let i;e.iGM(i=e.CRH())&&(n.IdHtmlInputSearch=i.first)}},inputs:{titulo_modal:"titulo_modal",idclase:"idclase",id_actividad:"id_actividad",nomclase:"nomclase"},standalone:!0,features:[e.jDz],decls:19,vars:8,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],["titulo","O.C. Pendientes de Recepcion"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],[3,"hidden"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar parametros",2,"width","100%",3,"ngModel","ngModelChange"],["IdHtmlInputSearch",""],["slot","end","color","primary","title","Buscar por Codigo de Barras","name","qr-code-outline","size","large",3,"click"],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],["color","danger","expand","full",3,"hidden","click"],["lines","full","inset","true",3,"odd","even","hidden",4,"ngFor","ngForOf"],[1,"scan-box",3,"hidden"],["lines","full","inset","true",3,"hidden"],["button","","mode","ios",3,"hidden","click"],["color","secondary"],["color","primary"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),e._UZ(4,"app-header",3),e.qZA(),e.TgZ(5,"ion-col",4),e._UZ(6,"ion-label",5),e.qZA()()()(),e.TgZ(7,"ion-item",6)(8,"ion-searchbar",7,8),e.NdJ("ngModelChange",function(a){return n.NgModInputSearch=a}),e.qZA(),e.TgZ(10,"ion-icon",9),e.NdJ("click",function(){return n.start_scan_qr(0)}),e.qZA(),e.TgZ(11,"ion-icon",10,11),e.NdJ("click",function(){return n.FFindRows(0,"")}),e.qZA()(),e.TgZ(13,"ion-item",6)(14,"ion-button",12),e.NdJ("click",function(){return n.stopScanner()}),e._uU(15," \xa0Detener\n"),e.qZA()(),e.TgZ(16,"ion-content"),e.YNc(17,O,12,10,"ion-list",13),e._UZ(18,"div",14),e.qZA()),2&t&&(e.xp6(7),e.Q6J("hidden",n.scanActive),e.xp6(1),e.Q6J("ngModel",n.NgModInputSearch),e.xp6(5),e.Q6J("hidden",!n.scanActive),e.xp6(1),e.Q6J("hidden",!n.scanActive),e.xp6(2),e.Tol(n.ContentCss),e.xp6(1),e.Q6J("ngForOf",n.DataSetGrid),e.xp6(1),e.Q6J("hidden",!n.scanActive))},dependencies:[s.Pc,s.YG,s.wI,s.W2,s.jY,s.gu,s.Ie,s.Q$,s.q_,s.Nd,s.VI,s.yW,s.sr,s.j9,h.ez,h.sg,l.u5,l.JJ,l.On,A.G]}),c})()}}]);