"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4992],{4992:(_i,P,g)=>{g.r(P),g.d(P,{ProdAteServIniciaActividadPage:()=>ri});var v=g(5861),p=g(6814),A=g(95),r=g(6728),Z=g(4874),T=g(4229),x=g(7512),i=g(6242),D=g(6485),M=g(5472),C=g(4248),q=g(2014);function U(t,s){1&t&&(i.TgZ(0,"ion-row")(1,"ion-col",25)(2,"ion-label",26),i._uU(3,"No Hay Hoja de Ruta asignada"),i.qZA()()())}function b(t,s){1&t&&(i.TgZ(0,"ion-button",33)(1,"ion-text",34),i._uU(2,"\xa0EN REVISION \xa0"),i.qZA(),i._UZ(3,"ion-icon",35),i.qZA())}function S(t,s){if(1&t&&(i.TgZ(0,"ion-row")(1,"ion-item",27)(2,"ion-col",28),i._uU(3),i.qZA(),i.TgZ(4,"ion-col",28),i._uU(5),i.qZA(),i.TgZ(6,"ion-col",29),i._uU(7),i.qZA(),i.TgZ(8,"ion-col",28),i._uU(9),i.qZA(),i.TgZ(10,"ion-col",30),i._uU(11),i.qZA(),i.TgZ(12,"ion-col",31),i._uU(13),i.qZA(),i.TgZ(14,"ion-col",28),i._uU(15),i.qZA(),i.YNc(16,b,4,0,"ion-button",32),i.qZA()()),2&t){const n=s.$implicit,e=i.oxw();i.xp6(3),i.hij("",n.secuencia_proc_of," "),i.xp6(2),i.Oqu(n.nombre_maquina),i.xp6(2),i.Oqu(n.descripcion_proceso_ofd),i.xp6(2),i.Oqu(n.cnt_pieza),i.xp6(2),i.Oqu(n.nombre_estado),i.xp6(2),i.Oqu(n.cantidad_revisada),i.xp6(2),i.Oqu(n.cantidad_baja),i.xp6(1),i.Q6J("ngIf",e.DsIniciaActividad.codhru==n.codHojaRuta)}}function E(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"C\xf3digo Q.R."),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.codigo_qr)}}function y(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"C\xf3digo Producto Terminado"),i.qZA(),i.TgZ(4,"b"),i._uU(5),i.qZA(),i._uU(6," \xa0 "),i.TgZ(7,"ion-button",36),i.NdJ("click",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.visualizar_pdf(a.DsIniciaActividad.plano_diseno))}),i._UZ(8,"ion-icon",37),i._uU(9," Ver Plano "),i.qZA()()()}if(2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.codigo_pt)}}function z(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"Descripci\xf3n Versi\xf3n"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.descripcion_pt)}}function F(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"Codigo de Bomba"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.codsmg)}}function O(t,s){if(1&t&&(i.TgZ(0,"ion-select-option",40),i._uU(1),i.qZA()),2&t){const n=s.$implicit;i.Q6J("value",n.SEQMASERV),i.xp6(1),i.hij("",n.Y04002," ")}}function w(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"Servicio Asignado (Ejes)*"),i.qZA(),i.TgZ(4,"ion-select",38),i.NdJ("ionChange",function(a){i.CHM(n);const o=i.oxw();return i.KtG(o.select_change_eje(a))})("ngModelChange",function(a){i.CHM(n);const o=i.oxw();return i.KtG(o.DsIniciaActividad.idservicio_x_eje_ofd=a)}),i.YNc(5,O,2,2,"ion-select-option",39),i.qZA()()()}if(2&t){const n=i.oxw();i.xp6(4),i.Q6J("selectedText",n.DsIniciaActividad.servicio_eje)("ngModel",n.DsIniciaActividad.idservicio_x_eje_ofd),i.xp6(1),i.Q6J("ngForOf",n.rest_serv_eje)}}function B(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"Tipo Proceso Metalizado:"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.proceso_metalizado)}}function R(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"Servicio Metalizado"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.servicio_metalizado)}}function N(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"N. Metalizados Observados"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.cnt_metalizado_obs)}}function Y(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"MRTACERAM 29012 Peso Inicial(g)"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.cnt_29012_peso_ini)}}function J(t,s){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"ULTRABON 50000 Peso Inicial(g)"),i.qZA(),i.TgZ(4,"h1"),i._uU(5),i.qZA()()()),2&t){const n=i.oxw();i.xp6(5),i.Oqu(n.DsIniciaActividad.cnt_50000_peso_ini)}}function H(t,s){if(1&t&&(i.TgZ(0,"h1"),i._uU(1),i.qZA()),2&t){const n=i.oxw();i.xp6(1),i.Oqu(n.DsIniciaActividad.estado)}}function Q(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-button",44),i.NdJ("click",function(){i.CHM(n);const a=i.oxw(2);return i.KtG(a.FEstadoActividad(2))}),i._uU(1,"PAUSAR"),i.qZA()}}function k(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-button",44),i.NdJ("click",function(){i.CHM(n);const a=i.oxw(2);return i.KtG(a.FEstadoActividad(3))}),i._uU(1,"FINALIZAR"),i.qZA()}}function j(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-button",45),i.NdJ("click",function(){i.CHM(n);const a=i.oxw(2);return i.KtG(a.FEstadoActividad(4))}),i._uU(1,"REANUDAR"),i.qZA()}}function G(t,s){if(1&t&&(i.TgZ(0,"ion-item",41),i.YNc(1,Q,2,0,"ion-button",42)(2,k,2,0,"ion-button",42)(3,j,2,0,"ion-button",43),i.qZA()),2&t){const n=i.oxw();i.xp6(1),i.Q6J("ngIf",n.hideBtnInicio),i.xp6(1),i.Q6J("ngIf",n.hideBtnInicio),i.xp6(1),i.Q6J("ngIf",n.hideBtnReanuda)}}function K(t,s){1&t&&(i.TgZ(0,"ion-row")(1,"ion-col",25)(2,"ion-label",26),i._uU(3,"No Hay Paradas de Maquinas Registradas"),i.qZA()()())}function L(t,s){1&t&&i._UZ(0,"ion-icon",53)}function W(t,s){if(1&t&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"date"),i.qZA()),2&t){const n=i.oxw(2);i.xp6(1),i.Oqu(i.xi3(2,1,n.currentDateTime,"yyyy-MM-dd HH:mm:ss"))}}function V(t,s){if(1&t&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&t){const n=i.oxw().$implicit;i.xp6(1),i.Oqu(n.fch_fin_pausa)}}function X(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-item-options",54),i.NdJ("ionSwipe",function(){i.CHM(n);const a=i.oxw().$implicit,o=i.oxw();return i.KtG(o.editRow(a))}),i.TgZ(1,"ion-item-option",55),i._uU(2," Editar "),i.qZA()()}}const I=t=>({color:t});function $(t,s){if(1&t&&(i.TgZ(0,"ion-item-sliding")(1,"ion-item",46)(2,"ion-col",47),i.YNc(3,L,1,0,"ion-icon",48),i.qZA(),i.TgZ(4,"ion-col",49),i._uU(5),i.qZA(),i.TgZ(6,"ion-col",50),i._uU(7),i.qZA(),i.TgZ(8,"ion-col",50),i.YNc(9,W,3,4,"span",9)(10,V,2,1,"span",9),i.qZA(),i.TgZ(11,"ion-col",51),i._uU(12),i.qZA()(),i.YNc(13,X,3,0,"ion-item-options",52),i.qZA()),2&t){const n=s.$implicit;i.xp6(3),i.Q6J("ngIf",1===n.flag_activo),i.xp6(1),i.Q6J("ngStyle",i.VKq(10,I,1===n.flag_activo?"var(--ion-color-primary)":"black")),i.xp6(1),i.hij(" ",n.tecnico," "),i.xp6(1),i.Q6J("ngStyle",i.VKq(12,I,1===n.flag_activo?"var(--ion-color-primary)":"black")),i.xp6(1),i.hij(" ",n.fch_inicio_pausa," "),i.xp6(1),i.Q6J("ngStyle",i.VKq(14,I,1===n.flag_activo?"var(--ion-color-primary)":"black")),i.xp6(1),i.Q6J("ngIf",1===n.flag_activo),i.xp6(1),i.Q6J("ngIf",1!==n.flag_activo),i.xp6(2),i.Oqu(n.motivo_pausa_acti_ofap),i.xp6(1),i.Q6J("ngIf",1!==n.flag_activo)}}function ii(t,s){1&t&&(i.TgZ(0,"ion-col",56),i._uU(1,"Fecha y Hora de Inicio:"),i.qZA())}const ai=()=>({standalone:!0});function ei(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-datetime",58),i.NdJ("ngModelChange",function(a){i.CHM(n);const o=i.oxw(2);return i.KtG(o.fechainicio_prod=a)})("ionChange",function(a){i.CHM(n);const o=i.oxw(2);return i.KtG(o.onFechaInicioChange(a,o.DsIniciaActividad.pk_idservicio,o.DsIniciaActividad.avatar))}),i.qZA()}if(2&t){const n=i.oxw(2);i.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",n.fechainicio_prod)("ngModelOptions",i.DdM(4,ai))}}function ti(t,s){if(1&t&&i.YNc(0,ei,1,5,"ion-datetime",57),2&t){const n=i.oxw();i.Q6J("ngIf",n.hideBtnModificaFecha)}}function ni(t,s){1&t&&(i.TgZ(0,"ion-col",56),i._uU(1,"Fecha y Hora de Finalizacion:"),i.qZA())}function oi(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-datetime",60),i.NdJ("ngModelChange",function(a){i.CHM(n);const o=i.oxw(2);return i.KtG(o.fechafin_prod=a)})("ionChange",function(a){i.CHM(n);const o=i.oxw(2);return i.KtG(o.onFechaFinChange(a,o.DsIniciaActividad.pk_idservicio,o.DsIniciaActividad.avatar))}),i.qZA()}if(2&t){const n=i.oxw(2);i.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",n.fechafin_prod)}}function si(t,s){if(1&t&&i.YNc(0,oi,1,3,"ion-datetime",59),2&t){const n=i.oxw();i.Q6J("ngIf",n.hideBtnModificaFecha)}}function di(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"MRTACERAM 29012 Peso Final(g):"),i.qZA(),i.TgZ(4,"app-input-with-button",61),i.NdJ("ngModelChange",function(a){i.CHM(n);const o=i.oxw();return i.KtG(o.DsIniciaActividad.cnt_29012_peso_fin=a)})("call_click_padre",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.unCheckFocus(1))}),i.qZA()()()}if(2&t){const n=i.oxw();i.xp6(4),i.Q6J("ngModel",n.DsIniciaActividad.cnt_29012_peso_fin)}}function ci(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label")(2,"p"),i._uU(3,"ULTRABON 50000 Peso Final(g):"),i.qZA(),i.TgZ(4,"app-input-with-button",61),i.NdJ("ngModelChange",function(a){i.CHM(n);const o=i.oxw();return i.KtG(o.DsIniciaActividad.cnt_50000_peso_fin=a)})("call_click_padre",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.unCheckFocus(2))}),i.qZA()()()}if(2&t){const n=i.oxw();i.xp6(4),i.Q6J("ngModel",n.DsIniciaActividad.cnt_50000_peso_fin)}}let ri=(()=>{var t;class s{constructor(e,a,o,d,c,_,l,u){let h;this.prodservice=e,this.navCtrl=a,this.router=o,this.storage=d,this.loadingController=c,this.ApiServices=_,this.modalCtrl=l,this.alertController=u,this.flagUpdatedObsOK=!0,this.CantItemsMotivoPausa=0,this.DsGridMotivoPausa=[],this.pdfSrc="https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf",this.currentDateTime=new Date,this.DsGridHojaRuta=[],this.CantItemsHojaRuta=0,this.storage.get("USER_INFO").then(m=>{h=m,this.NombresUsuarioLocal=h.user_name,this.IdUsuarioLocal=h.user_id}),this.navParams=this.router.getCurrentNavigation().extras.state,this.flagResumenDiario=this.navParams.flag,console.log("this.navParams::>",this.navParams),this.flagUpdatedObsOK=!0,this.navParams&&(this.DsIniciaActividad={},this.DsIniciaActividad.maquina=this.navParams.maquina,this.DsIniciaActividad.idmaquina=this.navParams.idmaquina,this.DsIniciaActividad.idofpterminado=this.navParams.idofpterminado,this.DsIniciaActividad.EQUIPOID=this.navParams.EQUIPOID,this.DsIniciaActividad.flag_historico_actividad=this.navParams.flag_historico_actividad,this.DsIniciaActividad.fasignado=this.navParams.fasignado,this.DsIniciaActividad.avatar=this.navParams.avatar,this.DsIniciaActividad.correorden=this.navParams.correorden,this.DsIniciaActividad.Y04002=this.navParams.Y04002,this.DsIniciaActividad.cantidad=this.navParams.cantidad,this.DsIniciaActividad.idestado=this.navParams.idestado,this.DsIniciaActividad.nomclase=this.navParams.nomclase,this.DsIniciaActividad.codigo_qr=this.navParams.codigo_qr,this.DsIniciaActividad.codsmg=this.navParams.codsmg,this.DsIniciaActividad.idclase_pt=this.navParams.idclase,this.DsIniciaActividad.material=this.navParams.material,this.DsIniciaActividad.idmaterial=this.navParams.idmaterial,this.DsIniciaActividad.nombres_tecnico=this.navParams.nombres_tecnico,this.DsIniciaActividad.id_personal=this.navParams.id_personal,this.DsIniciaActividad.fecha_inicio=this.navParams.fecha_inicio,this.DsIniciaActividad.fecha_fin=this.navParams.fecha_fin,this.DsIniciaActividad.pk_idservicio=this.navParams.pk_idservicio,this.DsIniciaActividad.actividad=this.navParams.actividad,this.idTipoActividad=parseInt(this.navParams.actividad),this.idEstadoActividad=parseInt(this.navParams.idestado),this.idTargetMenu=this.navParams.idTargetMenu,this.DsIniciaActividad.codigo_pt=this.navParams.codigo_pt,this.DsIniciaActividad.descripcion_pt=this.navParams.descripcion_pt,this.DsIniciaActividad.nomsubfam=this.navParams.nomsubfam,this.DsIniciaActividad.proceso=this.navParams.proceso,this.DsIniciaActividad.observacion=this.navParams.observacion,this.DsIniciaActividad.proceso_metalizado=this.navParams.proceso_metalizado,this.DsIniciaActividad.servicio_metalizado=this.navParams.servicio_metalizado,this.DsIniciaActividad.cnt_metalizado_obs=this.navParams.cnt_metalizado_obs,this.DsIniciaActividad.cnt_29012_peso_ini=this.navParams.cnt_29012_peso_ini,this.DsIniciaActividad.cnt_50000_peso_ini=this.navParams.cnt_50000_peso_ini,this.DsIniciaActividad.cnt_50000_peso_fin=this.navParams.cnt_50000_peso_fin,this.DsIniciaActividad.cnt_29012_peso_fin=this.navParams.cnt_29012_peso_fin,this.DsIniciaActividad.servi0000cio_eje=this.navParams.servicio_eje,this.DsIniciaActividad.idservicio_x_eje_otd=this.navParams.idservicio_x_eje_otd,this.DsIniciaActividad.flag_serv_eje_ms=this.navParams.flag_serv_eje_ms,this.DsIniciaActividad.plano_diseno=this.navParams.plano_diseno,this.fechainicio_prod=this.navParams.fecha_inicio_formato_iso,this.fechafin_prod=this.navParams.fecha_fin_formato_iso,0!=this.navParams.codhru?(this.DsIniciaActividad.cantidad_revisada=this.navParams.cnt_pieza_rev_hru,this.DsIniciaActividad.cantidad_total=this.navParams.cnt_pieza_pend_hru):(this.DsIniciaActividad.cantidad_revisada=this.navParams.cantidad_revisada,this.DsIniciaActividad.cantidad_total=this.navParams.cantidad_total),console.log(this.navParams.cantidad_revisada),this.DsIniciaActividad.cantidad_pendiente=this.navParams.cantidad_pendiente,this.DsIniciaActividad.cantidad_ingresar=0,this.DsIniciaActividad.codhru=this.navParams.codhru,null!=this.DsIniciaActividad.flag_serv_eje_ms?1==this.DsIniciaActividad.flag_serv_eje_ms&&(this.hideItemByRevisionEje=!0):this.hideItemByRevisionEje=!1,null!=this.DsIniciaActividad.proceso_metalizado?this.DsIniciaActividad.proceso_metalizado.length>4&&(this.hideItemByMetalizado=!0):this.hideItemByMetalizado=!1,"0"!=this.navParams.idproceso&&(this.hideItemByProceso=!0),console.log("this.navParams::43:::>",this.DsIniciaActividad),0==this.navParams.index?console.log("nuevooooo"):(console.log("editarrrrrr"),this.UpdateFormEdit()))}ngOnInit(){this.hideBtnInicio=!0,this.hideItemByRevisionEje&&this.load_cbos_any(),this.FCondicionarEstado(this.idEstadoActividad),1==this.idTipoActividad?(this.hideItemByTipoRep=!1,this.hideItemByTipoSer=!0,this.hideItemByTipoTal=!1):2==this.idTipoActividad||3==this.idTipoActividad?(this.hideItemByTipoRep=!0,this.hideItemByTipoSer=!1,this.hideItemByTipoTal=!1):4==this.idTipoActividad&&(this.hideItemByTipoRep=!1,this.hideItemByTipoSer=!1,this.hideItemByTipoTal=!0),setInterval(()=>{this.currentDateTime=new Date},1e3)}ionViewDidEnter(){this.prodservice.ListFindHojaRuta("",this.DsIniciaActividad.idofpterminado,this.id_usuario_local,this.id_dispositivo).then(e=>{console.log(e),this.DsGridHojaRuta=e,this.CantItemsHojaRuta=this.DsGridHojaRuta.length}).finally(()=>{}),this.refreshGridData()}refreshGridData(){console.log("Refrescando datos de la grilla..."),this.ApiServices.HistoricoMotivoParada(this.DsIniciaActividad.pk_idservicio).then(e=>{console.log(e),this.DsGridMotivoPausa=e,this.CantItemsMotivoPausa=this.DsGridMotivoPausa.length}).catch(e=>{console.error("Error al refrescar los datos:",e)})}UpdateFormEdit(){this.ApiServices.LoadFormIniciaActividad(this.DsIniciaActividad.pk_idservicio,this.DsIniciaActividad.actividad).then(e=>{console.log("this.results=>>>",e),this.DsIniciaActividad.cantidad=e[0].cantidad,this.DsIniciaActividad.observacion=e[0].obs,console.log("this.results=>>>",e)}).finally(()=>{})}plus(){this.DsIniciaActividad.cantidad++}minus(){this.DsIniciaActividad.cantidad--}FCloseWin(e){console.log("VERIFICAR EL FLAG DEL BOTON CANCELAR"),console.log(this.flagResumenDiario),this.navCtrl.navigateForward(1==e?"prod-list-acti-historico":1==this.idTargetMenu?"prod-list-acti-programada":"prod-ate-serv-list-actividades")}FCondicionarEstado(e){switch(e){case 1:this.hideBtnInicio=!0,this.hideBtnModificaFecha=!1,console.log("inicio 1",e);break;case 2:this.hideBtnReanuda=!0,this.hideBtnInicio=!1,this.hideNomEstado=!1,this.hideBtnModificaFecha=!1,this.DsIniciaActividad.estado="PAUSA",console.log("PAUSA",e);break;case 3:this.hideBtnReanuda=!1,this.hideBtnInicio=!1,this.hideNomEstado=!0,this.hideBtnModificaFecha=!0,this.DsIniciaActividad.estado="FINALIZAR",console.log("FINALIZAR",e);break;case 4:this.hideBtnReanuda=!1,this.hideBtnInicio=!0,this.hideNomEstado=!1,this.hideBtnModificaFecha=!1,this.DsIniciaActividad.estado="REANUDAR",console.log("REANUDAR",e);break;default:console.log("default",e)}}openObservacionesPausaModal(e,a,o,d){var c=this;return(0,v.Z)(function*(){const _=yield c.modalCtrl.create({component:T.MotivoPausaPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{valorModal:c.DsIniciaActividad.pk_idservicio,idusuario:c.IdUsuarioLocal,tituloModal:e,flag_edit_pausa:a,fecha_ini_formato_iso:o,fecha_fin_formato_iso:d}});return new Promise(l=>{_.onDidDismiss().then(u=>{l(null!==u&&void 0!==u.data?u.data:{flag_guardar:0,observaciones:"",fechafin_pausa:"",fechainicio_pausa:""})}),_.present()})})()}openFinalizaReprocesoModal(){var e=this;return(0,v.Z)(function*(){const a=yield e.modalCtrl.create({component:x.FinalizaReprocesoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios",componentProps:{valorModal:e.DsIniciaActividad.pk_idservicio,idusuario:e.IdUsuarioLocal}});return new Promise(o=>{a.onDidDismiss().then(d=>{o(null!==d&&void 0!==d.data?d.data:{flag_guardar:0,observaciones:""})}),a.present()})})()}procesarFinalizacion(){var e=this;return(0,v.Z)(function*(){let a=null,o=null,d=null,c="";const _=yield e.openFinalizaReprocesoModal();var l,u,h,m;null!==_?(a=null!==(l=_.flagReproceso)&&void 0!==l?l:0,d=null!==(u=_.codMaquina)&&void 0!==u?u:"",c=null!==(h=_.descripcionRepro)&&void 0!==h?h:"",o=null!==(m=_.flag_guardar)&&void 0!==m?m:0):(a=0,d=0,c="",o=0),1==o&&(e.hideBtnReanuda=!1,e.hideBtnInicio=!1,e.hideNomEstado=!0,e.DsIniciaActividad.estado="FINALIZAR",e.DsIniciaActividad.flag_reproceso=a,e.DsIniciaActividad.maquina_reproceso=d,e.DsIniciaActividad.descripcion_reproceso=c,e.FSaveEstado(3)),console.log("revisarrr aqui la maquina:"),console.log(e.DsIniciaActividad.maquina),console.log(e.DsIniciaActividad.idmaquina);const f=String(e.DsIniciaActividad.maquina),li=String(e.DsIniciaActividad.idmaquina);e.goto_menu("prod-list-acti-programada",li,f)})()}goto_menu(e,a,o){console.log("revisar aqui"),console.log(e),console.log(a),console.log(o),console.log("--------------------------------------");let c=[];console.log(a),a&&(c=a.split(",")),c.push(o),"prod-list-acti-programada"==e?(this.router.navigate(["home"]),setTimeout(()=>{this.router.navigate([e],{queryParams:c,queryParamsHandling:"merge"})},1)):this.router.navigate([e],{queryParams:c,queryParamsHandling:"merge"})}FEstadoActividad(e){var a=this;return(0,v.Z)(function*(){switch(console.log("FEstadoActividad",e),e){case 2:a.hideBtnReanuda=!0,a.hideBtnInicio=!1,a.hideNomEstado=!1,a.DsIniciaActividad.estado="PAUSA",a.FSaveEstado(e);break;case 3:0===a.DsIniciaActividad.cantidad_ingresar?yield(yield a.alertController.create({header:"Confirmaci\xf3n",message:"\xbfDesea finalizar el registro con cantidad 0?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Registro cancelado por el usuario.")}},{text:"Aceptar",handler:(l=(0,v.Z)(function*(){yield a.procesarFinalizacion()}),function(){return l.apply(this,arguments)})}]})).present():yield a.procesarFinalizacion();break;case 4:let o=null,d="";const c=yield a.openObservacionesPausaModal("Ingresar",0,"","");null!==c?(o=void 0!==c.flag_guardar?c.flag_guardar:0,d=void 0!==c.observaciones?c.observaciones:""):(o=0,d=""),1==o&&(a.hideBtnReanuda=!1,a.hideBtnInicio=!0,a.hideNomEstado=!1,a.DsIniciaActividad.estado="REANUDAR",a.DsIniciaActividad.motivoPausa=d,a.DsIniciaActividad.iduser=a.IdUsuarioLocal,console.log("verificar aqui el usuario actual"),console.log(a.IdUsuarioLocal),a.FSaveEstado(e))}var l})()}FSaveEstado(e){this.loadingController.create({message:"Cargando...",translucent:!0}).then(o=>{o.present(),this.DsIniciaActividad.acc="8",this.DsIniciaActividad.idestado=e,this.DsIniciaActividad.iduser=this.IdUsuarioLocal,this.ApiServices.SaveInicioActividad(this.DsIniciaActividad).then(d=>{let c;if(c=d[0],console.log(c),console.log(c.o_nres),0==c.o_nres)alert("Error, no se pudo guardar correctamente.");else{this.DsIniciaActividad.fecha_fin=c.p1;let _={state:this.DsIniciaActividad};this.loadingController.dismiss(),console.log("navigationExtras",_),(2===e||4===e)&&this.refreshGridData()}}).finally(()=>{console.log("finalyyyy")})})}onCantPendChange(e){var a=this;return(0,v.Z)(function*(){return a.DsIniciaActividad.cantidad_ingresar<0?(yield(yield a.alertController.create({header:"Error",message:"La cantidad a ingresar no puede ser menor a 0",buttons:["OK"]})).present(),void(a.DsIniciaActividad.cantidad_ingresar=0)):null==a.DsIniciaActividad.cantidad_ingresar?(yield(yield a.alertController.create({header:"Error",message:"La cantidad a ingresar no puede ser igual a vacio.",buttons:["OK"]})).present(),void(a.DsIniciaActividad.cantidad_ingresar=0)):void console.log("ingresa a else")})()}unCheckFocus(e){if(this.flagUpdatedObsOK){if(3==e&&this.DsIniciaActividad.observacion==this.obs_aux)return!1;this.flagUpdatedObsOK=!1,this.DsIniciaActividad.acc="21",this.ApiServices.SaveInicioActividad(this.DsIniciaActividad).then(a=>{let o;o=a[0],this.obs_aux=this.DsIniciaActividad.observacion,0==o.o_nres?alert("Error, no se pudo guardar correctamente."):this.flagUpdatedObsOK=!0})}}select_change_eje(e){for(const a of this.rest_serv_eje)console.log(a.SEQMASERV),a.SEQMASERV==e.detail.value&&(this.DsIniciaActividad.servicio_eje=a.Y04002,this.DsIniciaActividad.idservicio_x_eje_ofd=a.SEQMASERV,this.unCheckFocus(4))}load_cbos_any(){this.loadingController.create({message:"Cargando listas...",translucent:!0}).then(a=>{a.present(),this.ApiServices.load_cbos_any_edit_ini_actvidad(this.DsIniciaActividad.actividad,"","").then(o=>{this.rest_serv_eje=o.servicio_eje}).finally(()=>{this.loadingController.dismiss()})})}onFechaInicioChange(e,a,o){console.log("Fecha inicio cambiada | actualizar:",e.detail.value),console.log(a);var d=e.detail.value,c=a,_=o;console.log("verifica aquiii id"),console.log(this.IdUsuarioLocal),this.ApiServices.UpdateFechaInicioProd(d,c,_,this.IdUsuarioLocal).then(l=>{let u;u=l[0],0==u.o_nres?alert("Error, no se pudo guardar correctamente."):this.loadingController.dismiss()}).finally(()=>{console.log("finalyyyy")})}onFechaFinChange(e,a,o){console.log("Fecha fin cambiada | actualizar:",e.detail.value),console.log(a),this.ApiServices.UpdateFechaFinProd(e.detail.value,a,o,this.IdUsuarioLocal).then(l=>{let u;u=l[0],0==u.o_nres?alert("Error, no se pudo guardar correctamente."):this.loadingController.dismiss()}).finally(()=>{console.log("finalyyyy")})}visualizar_pdf(e){this.navCtrl.navigateForward("pdf-viewer",{queryParams:{valor:e,flaglistaprod:2}})}editRow(e){var a=this;return(0,v.Z)(function*(){let o=null,d="",c="",_="";const l=yield a.openObservacionesPausaModal("Modificar",1,e.fecha_ini_formato_iso,e.fecha_fin_formato_iso);if(null!==l?(o=void 0!==l.flag_guardar?l.flag_guardar:0,d=void 0!==l.observaciones?l.observaciones:"",_=void 0!==l.observaciones?l.fechainicio_pausa:"",c=void 0!==l.observaciones?l.fechafin_pausa:""):(o=0,d="",_="",c=""),1==o){const u=String(e.idofactividadpausa);a.loadingController.create({message:"Regsitrando...",translucent:!0}).then(h=>{h.present(),a.ApiServices.updateMotivoParada(u,d,_,c).then(m=>{let f;f=m[0],0==f.o_nres&&alert("Error, no se pudo guardar correctamente.")}).finally(()=>{h.dismiss(),a.refreshGridData()})})}})()}}return(t=s).\u0275fac=function(e){return new(e||t)(i.Y36(D.Z),i.Y36(M.SH),i.Y36(C.F0),i.Y36(q.K),i.Y36(r.HT),i.Y36(D.Z),i.Y36(r.IN),i.Y36(r.Br))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-prod-ate-serv-inicia-actividad"]],standalone:!0,features:[i.jDz],decls:128,vars:33,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],[1,"",3,"click"],["part","icon","aria-hidden","true","role","img","name","chevron-back-outline",1,"md","hydrated"],["color","secondary"],["size-sm","1","size-md","1","size-xl","1",1,"headgrid"],["size-sm","2","size-md","2","size-xl","2",1,"headgrid"],["size-sm","1.5","size-md","1.5","size-xl","1.5",1,"headgrid"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"color","rgb(74, 204, 81)"],["type","number","label","Ingresar Cantidad Terminada:","labelPlacement","floating",3,"clearInput","ngModel","ngModelChange","ionChange"],["lines","none","style","padding: 0px !important",4,"ngIf"],["size-sm","0.6","size-md","0.6","size-xl","0.6",1,"headgrid"],["size-sm","3","size-md","3","size-xl","3",1,"headgrid"],["size-sm","1.4","size-md","1.4","size-xl","1.4",1,"headgrid"],["size-sm","5","size-md","5","size-xl","5",1,"headgrid"],["size","4","class","ion-text-end",4,"ngIf"],["locale","es-ES","datetime","datetime1"],["trigger","popover-button","animated","true","arrow","true","mode","ios",3,"keepContentsMounted"],["locale","es-ES","datetime","datetime2"],["position","floating"],["mode","ios","maxlength","800","spellcheck","true",3,"ngModel","ngModelChange","ionBlur"],["type","hidden",3,"ngModel","ngModelChange"],["size","12",1,"ion-text-center"],[1,"texto-rojo"],["mode","ios","button","",2,"width","100% !important"],["size-sm","1","size-md","1","size-xl","1"],["size-sm","2.2","size-md","2.2","size-xl","2.2"],["size-sm","2","size-md","2","size-xl","2"],["size-sm","1.5","size-md","1.5","size-xl","1.5"],["color","warning","size","small",4,"ngIf"],["color","warning","size","small"],["color","danger"],["expand","block","color","dark","size","small","name","play-forward"],["size","default",3,"click"],["slot","start","name","star"],["cancelText","Cancelar","placeholder","Seleccionar servicio","color","primary","interface","action-sheet","mode","ios",3,"selectedText","ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["lines","none",2,"padding","0px !important"],["style","width: 50% !important","expand","full","size","large","color","light",3,"click",4,"ngIf"],["style","width: 99% !important","expand","full","size","large","color","light",3,"click",4,"ngIf"],["expand","full","size","large","color","light",2,"width","50% !important",3,"click"],["expand","full","size","large","color","light",2,"width","99% !important",3,"click"],["mode","ios","button",""],["size-sm","0.6","size-md","0.6","size-xl","0.6"],["name","timer","color","primary","size","large",4,"ngIf"],["size-sm","3","size-md","3","size-xl","3",3,"ngStyle"],["size-sm","1.5","size-md","1.5","size-xl","1.5",3,"ngStyle"],["size-sm","4","size-md","4","size-xl","4"],["side","end",3,"ionSwipe",4,"ngIf"],["name","timer","color","primary","size","large"],["side","end",3,"ionSwipe"],["color","primary","expandable",""],["size","4",1,"ion-text-end"],["locale","es-ES","id","datetime1","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelOptions","ngModelChange","ionChange",4,"ngIf"],["locale","es-ES","id","datetime1","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelOptions","ngModelChange","ionChange"],["locale","es-ES","id","datetime2","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelChange","ionChange",4,"ngIf"],["locale","es-ES","id","datetime2","mode","ios","displayFormat","YYYY-MM-DD HH:mm","presentation","date-time","pickerFormat","YYYY-MM-DD HH:mm",3,"preferWheel","showDefaultButtons","ngModel","ngModelChange","ionChange"],["ngDefaultControl","",3,"ngModel","ngModelChange","call_click_padre"]],template:function(e,a){1&e&&(i.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),i._uU(3,"Iniciar Servicio"),i.qZA(),i.TgZ(4,"ion-buttons",2)(5,"ion-button",3),i.NdJ("click",function(){return a.FCloseWin(a.DsIniciaActividad.flag_historico_actividad)}),i._UZ(6,"ion-icon",4),i._uU(7," Cancelar "),i.qZA()()()(),i.TgZ(8,"ion-content")(9,"ion-list")(10,"ion-item")(11,"ion-label")(12,"p"),i._uU(13,"Nro. OF/OT"),i.qZA(),i.TgZ(14,"h2"),i._uU(15),i.qZA()()(),i.TgZ(16,"ion-item")(17,"ion-label"),i._uU(18," Historico Hoja de Ruta "),i.TgZ(19,"ion-chip")(20,"ion-label",5),i._uU(21),i.qZA()()()(),i.TgZ(22,"ion-item")(23,"ion-grid")(24,"ion-row")(25,"ion-col",6),i._uU(26,"Secuencia "),i.qZA(),i.TgZ(27,"ion-col",6),i._uU(28,"Maquina"),i.qZA(),i.TgZ(29,"ion-col",7),i._uU(30,"Descripcion"),i.qZA(),i.TgZ(31,"ion-col",6),i._uU(32,"Cant Piezas"),i.qZA(),i.TgZ(33,"ion-col",7),i._uU(34,"Estado"),i.qZA(),i.TgZ(35,"ion-col",8),i._uU(36,"Piezas Completadas"),i.qZA(),i.TgZ(37,"ion-col",6),i._uU(38,"De Baja"),i.qZA(),i.TgZ(39,"ion-col",7),i._uU(40,"Acciones"),i.qZA()(),i.YNc(41,U,4,0,"ion-row",9)(42,S,17,8,"ion-row",10),i.qZA()(),i.YNc(43,E,6,1,"ion-item",9)(44,y,10,1,"ion-item",9)(45,z,6,1,"ion-item",9)(46,F,6,1,"ion-item",9),i.TgZ(47,"ion-item")(48,"ion-label")(49,"p"),i._uU(50,"Maquina"),i.qZA(),i.TgZ(51,"h1"),i._uU(52),i.qZA()()(),i.TgZ(53,"ion-item")(54,"ion-label")(55,"p"),i._uU(56,"Servicio"),i.qZA(),i.TgZ(57,"h1"),i._uU(58),i.qZA()()(),i.YNc(59,w,6,3,"ion-item",9)(60,B,6,1,"ion-item",9)(61,R,6,1,"ion-item",9)(62,N,6,1,"ion-item",9)(63,Y,6,1,"ion-item",9)(64,J,6,1,"ion-item",9),i.TgZ(65,"ion-item")(66,"ion-label")(67,"p")(68,"b"),i._uU(69,"Cantidad:"),i.qZA()(),i.TgZ(70,"h1")(71,"b"),i._uU(72),i.qZA()()()(),i.TgZ(73,"ion-item")(74,"ion-label")(75,"p")(76,"b"),i._uU(77,"Cantidad Terminado:"),i.qZA()(),i.TgZ(78,"h1",11)(79,"b"),i._uU(80),i.qZA()()()(),i.TgZ(81,"ion-item")(82,"ion-input",12),i.NdJ("ngModelChange",function(d){return a.DsIniciaActividad.cantidad_ingresar=d})("ionChange",function(d){return a.onCantPendChange(d)}),i.qZA()(),i.TgZ(83,"ion-item")(84,"ion-label")(85,"p"),i._uU(86,"Estado"),i.qZA(),i.YNc(87,H,2,1,"h1",9)(88,G,4,3,"ion-item",13),i.qZA()(),i.TgZ(89,"ion-item")(90,"ion-label"),i._uU(91," Historico de Registro de Paradas de Maquina "),i.TgZ(92,"ion-chip")(93,"ion-label",5),i._uU(94),i.qZA()()()(),i.TgZ(95,"ion-item")(96,"ion-grid")(97,"ion-row"),i._UZ(98,"ion-col",14),i.TgZ(99,"ion-col",15),i._uU(100,"Tecnico"),i.qZA(),i.TgZ(101,"ion-col",16),i._uU(102,"Inicio"),i.qZA(),i.TgZ(103,"ion-col",16),i._uU(104,"Fin"),i.qZA(),i.TgZ(105,"ion-col",17),i._uU(106,"Motivo"),i.qZA()(),i.YNc(107,K,4,0,"ion-row",9)(108,$,14,16,"ion-item-sliding",10),i.qZA()(),i.TgZ(109,"ion-item"),i.YNc(110,ii,2,0,"ion-col",18),i._UZ(111,"ion-datetime-button",19),i.TgZ(112,"ion-popover",20),i.YNc(113,ti,1,1,"ng-template"),i.qZA()(),i.TgZ(114,"ion-item"),i.YNc(115,ni,2,0,"ion-col",18),i._UZ(116,"ion-datetime-button",21),i.TgZ(117,"ion-popover",20),i.YNc(118,si,1,1,"ng-template"),i.qZA()(),i.YNc(119,di,5,1,"ion-item",9)(120,ci,5,1,"ion-item",9),i.TgZ(121,"ion-item")(122,"ion-label",22)(123,"p"),i._uU(124,"OBSERVACI\xd3N (ESCRIBA AQUI PARA GUARDAR LA OBSERVACI\xd3N)"),i.qZA()(),i.TgZ(125,"ion-textarea",23),i.NdJ("ngModelChange",function(d){return a.DsIniciaActividad.observacion=d})("ionBlur",function(){return a.unCheckFocus(3)}),i.qZA()(),i.TgZ(126,"ion-input",24),i.NdJ("ngModelChange",function(d){return a.DsIniciaActividad.id_personal=d}),i.qZA()()(),i._UZ(127,"ion-footer")),2&e&&(i.xp6(15),i.Oqu(a.DsIniciaActividad.correorden),i.xp6(6),i.hij(" ",a.CantItemsHojaRuta," "),i.xp6(20),i.Q6J("ngIf",0===a.DsGridHojaRuta.length),i.xp6(1),i.Q6J("ngForOf",a.DsGridHojaRuta),i.xp6(1),i.Q6J("ngIf",a.hideItemByTipoSer),i.xp6(1),i.Q6J("ngIf",a.hideItemByTipoRep),i.xp6(1),i.Q6J("ngIf",a.hideItemByTipoRep),i.xp6(1),i.Q6J("ngIf",a.hideItemByTipoSer),i.xp6(6),i.Oqu(a.DsIniciaActividad.maquina),i.xp6(6),i.Oqu(a.DsIniciaActividad.Y04002),i.xp6(1),i.Q6J("ngIf",a.hideItemByRevisionEje),i.xp6(1),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(1),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(1),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(1),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(1),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(8),i.Oqu(a.DsIniciaActividad.cantidad_total),i.xp6(8),i.Oqu(a.DsIniciaActividad.cantidad_revisada),i.xp6(2),i.Q6J("clearInput",!0)("ngModel",a.DsIniciaActividad.cantidad_ingresar),i.xp6(5),i.Q6J("ngIf",a.hideNomEstado),i.xp6(1),i.Q6J("ngIf",1!==(null==a.DsIniciaActividad?null:a.DsIniciaActividad.flag_historico_actividad)),i.xp6(6),i.hij(" ",a.CantItemsMotivoPausa," "),i.xp6(13),i.Q6J("ngIf",0===a.DsGridMotivoPausa.length),i.xp6(1),i.Q6J("ngForOf",a.DsGridMotivoPausa),i.xp6(2),i.Q6J("ngIf",a.hideBtnModificaFecha),i.xp6(2),i.Q6J("keepContentsMounted",!0),i.xp6(3),i.Q6J("ngIf",a.hideBtnModificaFecha),i.xp6(2),i.Q6J("keepContentsMounted",!0),i.xp6(2),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(1),i.Q6J("ngIf",a.hideItemByMetalizado),i.xp6(5),i.Q6J("ngModel",a.DsIniciaActividad.observacion),i.xp6(1),i.Q6J("ngModel",a.DsIniciaActividad.id_personal))},dependencies:[r.Pc,r.YG,r.Sm,r.hM,r.wI,r.W2,r.x4,r.Mj,r.fr,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.u8,r.IK,r.td,r.Q$,r.q_,r.Nd,r.t9,r.n0,r.yW,r.g2,r.wd,r.sr,r.d8,r.as,r.QI,r.j9,p.ez,p.sg,p.O5,p.PC,p.uU,A.u5,A.Fj,A.JJ,A.nD,A.On,Z.xC],styles:[".highlight-green[_ngcontent-%COMP%]{background-color:#d4edda!important;color:#155724!important;--ion-item-background: #d4edda}"]}),s})()}}]);