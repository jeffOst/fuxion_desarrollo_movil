"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2437],{2437:(L,u,a)=>{a.r(u),a.d(u,{RrhhWinHorasExtrasPage:()=>U});var l=a(5861),p=a(6814),s=a(95),r=a(6728),g=a(5483),v=a(7766),P=a(5259),f=a(7904),E=a(1756),o=a(6242),A=a(4248),C=a(5472),Z=a(8715),R=a(2014);function D(n,_){if(1&n){const d=o.EpF();o.TgZ(0,"ion-button",29),o.NdJ("click",function(){o.CHM(d);const t=o.oxw();return o.KtG(t.SaveFormTerminadoPaso1(1))}),o._UZ(1,"ion-icon",30),o._uU(2,"\xa0 Iniciar "),o.qZA()}}function T(n,_){if(1&n){const d=o.EpF();o.TgZ(0,"ion-button",31),o.NdJ("click",function(){o.CHM(d);const t=o.oxw();return o.KtG(t.SaveFormTerminadoPaso1(2))}),o._UZ(1,"ion-icon",30),o._uU(2,"\xa0 Finalizar "),o.qZA()}}let U=(()=>{var n;class _{constructor(e,t,i,c,h,m,b,k){this.router=e,this.modalCtrl=t,this.formBuilder=i,this.ApiService=c,this.loadingController=h,this.alertController=m,this.navCtrl=b,this.storage=k,this.Cancelar="Cancelar",this.scanActive=!1,this.estaCargando=!1,this.FormCheckListPaso1=this.formBuilder.group({nom_tecni:[""],nom_serv:[""],actividad:[""],motivo:[""],supervisor:[""],area:[""],descrip:[""],cantidad:[""],tip_horas:[""],button:[""],idtecni:[""],idactivi:[""],idprogra:[""],idmotivo:[""],idarea:[""],idsuper:[""],id_documento:[""]})}ngOnInit(){let e;this.estaCargando=!0,this.storage.get("USER_INFO").then(t=>{e=t,this.NombresUsuarioLocal=e.user_name,this.IdUsuarioLocal=e.user_id,console.log("localStorage",this.NombresUsuarioLocal),console.log("localStorage",this.IdUsuarioLocal)}),this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row,console.log("this.navParamsAny",this.navParamsAny.idreghoex),this.disabledbuton=this.navParamsAny.estado_reg_hhee,2==this.disabledbuton?(this.disableButton=!0,this.disableButton1=!0):0==this.disabledbuton?(this.disableButton=!0,this.disableButton1=!1):(this.disableButton=!1,this.disableButton1=!0),this.FormCheckListPaso1.controls.id_documento.setValue(this.navParamsAny.idreghoex)}ionViewWillEnter(){0!=this.navParamsAny.idreghoex&&this.FLoadForms(),console.log("carga mas lento?",this.NombresUsuarioLocal),this.FormCheckListPaso1.controls.nom_tecni.setValue(this.NombresUsuarioLocal),this.FormCheckListPaso1.controls.idtecni.setValue(this.IdUsuarioLocal)}open_popup_servicios(){var e=this;return(0,l.Z)(function*(){const t=yield e.modalCtrl.create({component:v.RrhhPopupServiciosPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios"});return t.onDidDismiss().then(i=>{null!=i.data&&(e.dataReturned1=i.data,console.log("dataReturned::207",i),e.FormCheckListPaso1.controls.nom_serv.setValue(e.dataReturned1.nombres),e.FormCheckListPaso1.controls.idprogra.setValue(e.dataReturned1.id))}),yield t.present()})()}open_popup_motivo(){var e=this;return(0,l.Z)(function*(){const t=yield e.modalCtrl.create({component:P.RrhhPopupMotivoPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios"});return t.onDidDismiss().then(i=>{null!=i.data&&(e.dataReturned3=i.data,console.log("dataReturned::207",i),e.FormCheckListPaso1.controls.motivo.setValue(e.dataReturned3.nombres),e.FormCheckListPaso1.controls.idmotivo.setValue(e.dataReturned3.id))}),yield t.present()})()}open_popup_supervisor(){var e=this;return(0,l.Z)(function*(){const t=yield e.modalCtrl.create({component:E.RrhhPopupSupervisorPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios"});return t.onDidDismiss().then(i=>{null!=i.data&&(e.dataReturned4=i.data,console.log("dataReturned::207",i),e.FormCheckListPaso1.controls.supervisor.setValue(e.dataReturned4.nombres),e.FormCheckListPaso1.controls.idsuper.setValue(e.dataReturned4.id))}),yield t.present()})()}open_popup_area(){var e=this;return(0,l.Z)(function*(){const t=yield e.modalCtrl.create({component:f.RrhhPopupAreaPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios"});return t.onDidDismiss().then(i=>{null!=i.data&&(e.dataReturned4=i.data,console.log("dataReturned::207",i),e.FormCheckListPaso1.controls.area.setValue(e.dataReturned4.nombres),e.FormCheckListPaso1.controls.idarea.setValue(e.dataReturned4.id))}),yield t.present()})()}FOpenModalActividad(){var e=this;return(0,l.Z)(function*(){const t=yield e.modalCtrl.create({component:g.RrhhPopupActividadPage,backdropDismiss:!0,showBackdrop:!0,mode:"ios"});return t.onDidDismiss().then(i=>{null!=i.data&&(e.dataReturned2=i.data,console.log("dataReturned::206",i),e.FormCheckListPaso1.controls.actividad.setValue(e.dataReturned2.nombres),e.FormCheckListPaso1.controls.idactivi.setValue(e.dataReturned2.id))}),yield t.present()})()}cancelar_ejecucion(){this.navCtrl.navigateForward("rrhh-horas-extras")}SaveFormTerminadoPaso1(e){var t=this;return(0,l.Z)(function*(){t.FormCheckListPaso1.controls.button.setValue(e),yield t.ApiService.GuardarInfPaso1(t.FormCheckListPaso1.value).then(function(){var i=(0,l.Z)(function*(c){t.loadingController.dismiss();let h="0"==c[0].o_nres?"alerta-error":"alerta-ok";yield(yield t.alertController.create({header:"ALERTA",subHeader:"Confirmacion",cssClass:h,mode:"ios",animated:!0,message:c[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{console.log("Operaci\xf3n confirmada"),"1"==c[0].o_nres&&t.navCtrl.navigateForward(["rrhh-horas-extras"])}}]})).present()});return function(c){return i.apply(this,arguments)}}()).finally(()=>{console.log("finally:::>>LN:394")}).catch(i=>{console.log("errror:::>>>>>>>>>",i)})})()}FLoadForms(){this.loadingController.create({message:"Cargando lista....",translucent:!0}).then(t=>{t.present(),this.ApiService.FormFindinftab1(this.navParamsAny.idreghoex).then(i=>{console.log(this.navParamsAny.idreghoex),this.EditDataRest=i.form,console.log("hrlppp",this.EditDataRest);try{this.FormCheckListPaso1.setValue({nom_serv:this.EditDataRest[0].program,actividad:this.EditDataRest[0].actividad,motivo:this.EditDataRest[0].motivo,supervisor:this.EditDataRest[0].supervisor,area:this.EditDataRest[0].area,descrip:this.EditDataRest[0].descrip_he,cantidad:this.EditDataRest[0].cantidad,tip_horas:this.EditDataRest[0].tip_horahe,button:this.EditDataRest[0].estado_reg_hhee,nom_tecni:this.NombresUsuarioLocal,idtecni:this.IdUsuarioLocal,idactivi:this.EditDataRest[0].actividad_he,idprogra:this.EditDataRest[0].idprogram_prod,idmotivo:this.EditDataRest[0].idmotivo_he,idarea:this.EditDataRest[0].idarea_he,idsuper:this.EditDataRest[0].idsupervisor_he,id_documento:this.EditDataRest[0].idreghoex})}catch(c){console.log("error:::>",c)}}).finally(()=>{this.loadingController.dismiss()})})}}return(n=_).\u0275fac=function(e){return new(e||n)(o.Y36(A.F0),o.Y36(r.IN),o.Y36(s.QS),o.Y36(Z.z),o.Y36(r.HT),o.Y36(r.Br),o.Y36(C.SH),o.Y36(R.K))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-rrhh-win-horas-extras"]],standalone:!0,features:[o.jDz],decls:88,vars:9,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],[3,"formGroup"],["f","ngForm"],[3,"hidden"],[1,"ion-align-items-center"],["size","3",1,"ion-text-end"],["size","9"],["required","true","color","primary","mode","ios","formControlName","nom_tecni","readonly",""],["type","text","placeholder","Buscar Actividad","mode","ios","formControlName","actividad",3,"click"],["size","9",1,"ion-text-start"],["type","text","placeholder","Seleccionar Programa","mode","ios","formControlName","nom_serv",3,"click"],["hidden","",1,"ion-align-items-center"],["required","true","color","primary","type","number","mode","ios","formControlName","cantidad"],["type","text","placeholder","Seleccionar Descripcion","mode","ios","formControlName","descrip"],["type","text","placeholder","Seleccionar Motivo","mode","ios","formControlName","motivo",3,"click"],["type","text","placeholder","Seleccionar Area","mode","ios","formControlName","area",3,"click"],["type","text","placeholder","Seleccionar Supervisor","mode","ios","formControlName","supervisor",3,"click"],["placeholder","Seleccionar el tipo de Horas","formControlName","tip_horas"],["value","1"],["value","2"],[2,"text-align","center"],[3,"click"],["color","danger"],["name","close-outline"],["color","success",3,"click",4,"ngIf"],["color","primary",3,"click",4,"ngIf"],["color","success",3,"click"],["name","save-outline"],["color","primary",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),o._uU(3,"Formulario Horas Extras"),o.qZA(),o.TgZ(4,"ion-buttons",2),o._UZ(5,"ion-back-button",3),o.qZA()()(),o.TgZ(6,"ion-content")(7,"form",4,5)(9,"ion-list")(10,"ion-item",6)(11,"ion-grid",6)(12,"ion-row",7)(13,"ion-col")(14,"ion-grid")(15,"ion-row",7)(16,"ion-col",8),o._uU(17," Tecnico: "),o.qZA(),o.TgZ(18,"ion-col",9)(19,"ion-item"),o._UZ(20,"ion-input",10),o.qZA(),o._UZ(21,"div"),o.qZA()(),o.TgZ(22,"ion-row",7)(23,"ion-col",8),o._uU(24," Actividad: "),o.qZA(),o.TgZ(25,"ion-col",9)(26,"ion-item")(27,"ion-searchbar",11),o.NdJ("click",function(){return t.FOpenModalActividad()}),o.qZA()(),o._UZ(28,"div"),o.qZA()()()()(),o.TgZ(29,"ion-row",7)(30,"ion-col",8),o._uU(31,"Programa: "),o.qZA(),o.TgZ(32,"ion-col",12)(33,"ion-item")(34,"ion-searchbar",13),o.NdJ("click",function(){return t.open_popup_servicios()}),o.qZA()()()(),o.TgZ(35,"ion-row",14)(36,"ion-col",8),o._uU(37," Cantidad: "),o.qZA(),o.TgZ(38,"ion-col",9)(39,"ion-item"),o._UZ(40,"ion-input",15),o.qZA()()(),o.TgZ(41,"ion-row",14)(42,"ion-col",8),o._uU(43," Descripcion: "),o.qZA(),o.TgZ(44,"ion-col",9)(45,"ion-item"),o._UZ(46,"ion-input",16),o.qZA()()(),o.TgZ(47,"ion-row",14)(48,"ion-col",8),o._uU(49," Motivo: "),o.qZA(),o.TgZ(50,"ion-col",9)(51,"ion-item")(52,"ion-searchbar",17),o.NdJ("click",function(){return t.open_popup_motivo()}),o.qZA()()()(),o.TgZ(53,"ion-row",7)(54,"ion-col",8),o._uU(55,"Area: "),o.qZA(),o.TgZ(56,"ion-col",12)(57,"ion-item")(58,"ion-searchbar",18),o.NdJ("click",function(){return t.open_popup_area()}),o.qZA()()()(),o.TgZ(59,"ion-row",7)(60,"ion-col",8),o._uU(61,"Supervisor: "),o.qZA(),o.TgZ(62,"ion-col",12)(63,"ion-item")(64,"ion-searchbar",19),o.NdJ("click",function(){return t.open_popup_supervisor()}),o.qZA()()()(),o.TgZ(65,"ion-row",7)(66,"ion-col",8),o._uU(67,"Tipo de Horas: "),o.qZA(),o.TgZ(68,"ion-col",12)(69,"ion-item")(70,"ion-select",20)(71,"ion-select-option",21),o._uU(72,"H. Extras"),o.qZA(),o.TgZ(73,"ion-select-option",22),o._uU(74,"H. Compensada"),o.qZA()()()()()()()()()(),o.TgZ(75,"ion-footer")(76,"ion-grid",6)(77,"ion-row"),o._UZ(78,"ion-col"),o.TgZ(79,"ion-col",23)(80,"ion-buttons",24),o.NdJ("click",function(){return t.cancelar_ejecucion()}),o.TgZ(81,"ion-button",25),o._UZ(82,"ion-icon",26),o._uU(83,"\xa0 Cancelar "),o.qZA(),o._uU(84," \xa0\xa0\xa0\xa0 "),o.YNc(85,D,3,0,"ion-button",27)(86,T,3,0,"ion-button",28),o.qZA()(),o._UZ(87,"ion-col"),o.qZA()()()),2&e&&(o.xp6(5),o.Q6J("text",t.Cancelar),o.xp6(2),o.Q6J("formGroup",t.FormCheckListPaso1),o.xp6(2),o.Udp("--background",t.scanActive?"#00000000":"#fff"),o.xp6(1),o.Q6J("hidden",t.scanActive),o.xp6(1),o.Q6J("hidden",t.scanActive),o.xp6(65),o.Q6J("hidden",t.scanActive),o.xp6(9),o.Q6J("ngIf",!t.disableButton1),o.xp6(1),o.Q6J("ngIf",!t.disableButton))},dependencies:[r.Pc,r.YG,r.Sm,r.wI,r.W2,r.fr,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.q_,r.Nd,r.VI,r.t9,r.n0,r.wd,r.sr,r.as,r.QI,r.j9,r.oU,p.ez,p.O5,s.u5,s._Y,s.JJ,s.JL,s.Q7,s.UX,s.sg,s.u]}),_})()}}]);