"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7549],{7549:(H,p,r)=>{r.r(p),r.d(p,{AlmIngWinRecepOcPage:()=>J});var C=r(5861),h=r(6895),_=r(433),n=r(5562),e=r(8256),F=r(1407),Z=r(4147),A=r(849);function O(s,c){if(1&s){const o=e.EpF();e.TgZ(0,"ion-datetime",22),e.NdJ("ngModelChange",function(l){e.CHM(o);const i=e.oxw();return e.KtG(i.FormHtmlJs.FCHMOV=l)}),e.qZA()}if(2&s){const o=e.oxw();e.Q6J("preferWheel",!0)("showDefaultButtons",!0)("ngModel",o.FormHtmlJs.FCHMOV)}}function T(s,c){if(1&s){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",23),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",24),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",23),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",23),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",23),e._uU(10),e.qZA(),e.TgZ(11,"ion-col",25)(12,"ion-input",26),e.NdJ("ngModelChange",function(l){const a=e.CHM(o).index,m=e.oxw();return e.KtG(m.FormHtmlJs.detalle[a].cant_recepcion=l)})("ionChange",function(l){const a=e.CHM(o).index,m=e.oxw();return e.KtG(m.onTouched(l,a,"ionChange"))}),e.qZA()(),e.TgZ(13,"ion-col",23)(14,"ion-item",27),e.NdJ("click",function(){const i=e.CHM(o).$implicit,a=e.oxw();return e.KtG(a.showDetailIngreso(i))}),e.qZA()()()}if(2&s){const o=c.index,t=e.oxw();e.xp6(2),e.Oqu(t.FormHtmlJs.detalle[o].Y20001),e.xp6(2),e.Oqu(t.FormHtmlJs.detalle[o].Y20002),e.xp6(2),e.Oqu(t.FormHtmlJs.detalle[o].Y20033),e.xp6(2),e.Oqu(t.FormHtmlJs.detalle[o].Y20084),e.xp6(2),e.Oqu(t.FormHtmlJs.detalle[o].cant_atendido),e.xp6(2),e.Q6J("ngModel",t.FormHtmlJs.detalle[o].cant_recepcion)}}let J=(()=>{class s{constructor(o,t,l,i,a,m){let g;this.toastController=o,this.router=t,this.ApiService=l,this.navCtrl=i,this.storage=a,this.loadingController=m,this.Cancelar="Cancelar",this.FormHtmlJs={},this.navParams=this.router.getCurrentNavigation().extras.state,this.FormHtmlJs=this.navParams,console.log("this.navParams::>",this.FormHtmlJs),this.IdOrdenCompra=this.navParams.Y20005,this.storage.get("USER_INFO").then(d=>{g=d,this.NombresUsuarioLocal=g.user_name,this.IdUsuarioLocal=g.user_id})}ngOnInit(){}ionViewDidEnter(){this.FormHtmlJs.FCHMOV=(new Date).toISOString(),this.ListDetalleGuia()}ListDetalleGuia(){console.log(this.IdOrdenCompra),this.ApiService.ListDetalleGuia(this.IdOrdenCompra,this.id_usuario_local,this.id_dispositivo).then(o=>{console.log(o),this.FormHtmlJs.detalle=o,this.CantFilas=o.length,console.log("this.FormHtmlJs:::>>>",this.FormHtmlJs),console.log("FormHtmlJs.detalle",this.FormHtmlJs.detalle)}).finally(()=>{})}onTouched(o,t,l){o.preventDefault(),console.log("fuente",l),console.log("i",t),console.log("e",o),console.log(this.FormHtmlJs.detalle[t].cant_recepcion),console.log(this.FormHtmlJs.detalle[t].Y20084),this.FormHtmlJs.detalle[t].cant_recepcion>this.FormHtmlJs.detalle[t].Y20084-this.FormHtmlJs.detalle[t].cant_atendido&&(this.FormHtmlJs.detalle[t].cant_recepcion=0,this.presentToast("Ingrese Cantidad igual o menor a la pedida...","danger"))}presentToast(o,t="primary"){var l=this;return(0,C.Z)(function*(){(yield l.toastController.create({message:o,duration:2e3,position:"top",color:t})).present()})()}FSaveFormulario(){let i="",m=0;return this.CssNotiFecha="field_required_ok",null==this.FormHtmlJs.Y10077||""==this.FormHtmlJs.Y10077?(m=2,i=" Fala ingresar n\xfamero de guia",this.CssNotiNroGuia="field_required",this.presentToast(i,"danger"),!1):(this.CssNotiFecha="field_required_ok",null==this.FormHtmlJs.FCHMOV||""==this.FormHtmlJs.FCHMOV?(m=2,i=" Fala seleccionar fecha de ingreso",this.CssNotiFecha="field_required",this.presentToast(i,"danger"),!1):(this.FormHtmlJs.acc="3",this.FormHtmlJs.IdUsuarioLocal=this.IdUsuarioLocal,void this.loadingController.create({message:"Guardando Guia...",translucent:!0}).then(d=>{d.present(),this.ApiService.FSaveFormIngreso(this.FormHtmlJs).then(x=>{let u;this.loadingController.dismiss(),u=x[0],0==u.o_nres?alert("Error, no se pudo guardar correctamente."):(this.navCtrl.navigateForward(["alm-ing-list-recep-oc"]),this.presentToast(u.o_msj))}).finally(()=>{console.log("finalyyyy")})})))}showDetailIngreso(o){this.navCtrl.navigateForward(["alm-ing-win-det-recep-oc"],{state:o})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(n.yF),e.Y36(F.F0),e.Y36(Z.x),e.Y36(n.SH),e.Y36(A.K),e.Y36(n.HT))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-alm-ing-win-recep-oc"]],standalone:!0,features:[e.jDz],decls:72,vars:9,consts:[["mode","ios"],["text-capitalize",""],["slot","start"],["defaultHref","prod-list-acti-programada",3,"text"],["label","F.Registro Guia:","locale","es-ES","datetime","datetime"],["trigger","popover-button","animated","true","arrow","true","mode","ios",3,"keepContentsMounted"],["fixed",""],[2,"width","100%","height","20px"],["size","12"],[2,"width","100%"],["size","2",2,"align-items","flex-end"],[2,"width","80%","height","30px",3,"ngModel","ngModelChange"],["size","8",2,"align-items","flex-start"],[2,"width","90%","height","30px",3,"ngModel","ngModelChange"],["size-sm","1","size-md","1","size-xl","1",1,"headgrid"],["size-sm","5","size-md","5","size-xl","5",1,"headgrid"],["size-sm","2","size-md","2","size-xl","2",1,"headgrid"],[4,"ngFor","ngForOf"],[2,"text-align","center"],["color","danger","mode","ios",3,"text"],["color","primary",3,"click"],["name","save-outline"],["locale","es-ES","id","datetime","mode","ios","displayFormat","YYYY-MM-DD","presentation","date","name","FormHtmlJs.FCHMOV",3,"preferWheel","showDefaultButtons","ngModel","ngModelChange"],["size-sm","1","size-md","1","size-xl","1",2,"font-size","9px"],["size-sm","5","size-md","5","size-xl","5",2,"font-size","9px"],["size-sm","2","size-md","2","size-xl","2",2,"font-size","9px"],[2,"width","80%","height","30px",3,"ngModel","ngModelChange","ionChange"],["button","","mode","ios",2,"width","100% !important",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Recepcion de O.C."),e.qZA(),e.TgZ(4,"ion-buttons",2),e._UZ(5,"ion-back-button",3),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-item")(9,"ion-label")(10,"p"),e._uU(11,"Nro. O.C."),e.qZA(),e.TgZ(12,"h1"),e._uU(13),e.qZA()(),e.TgZ(14,"ion-label")(15,"p"),e._uU(16,"Nro.Requision"),e.qZA(),e.TgZ(17,"h1"),e._uU(18),e.qZA()()(),e.TgZ(19,"ion-item")(20,"ion-label")(21,"p"),e._uU(22,"Razon Social"),e.qZA(),e.TgZ(23,"h1"),e._uU(24),e.qZA()()(),e.TgZ(25,"ion-item")(26,"ion-label"),e._uU(27,"F.Registro Guia:"),e.qZA(),e._UZ(28,"ion-datetime-button",4),e.TgZ(29,"ion-popover",5),e.YNc(30,O,1,3,"ng-template"),e.qZA()(),e.TgZ(31,"ion-item")(32,"ion-grid",6)(33,"ion-row",7)(34,"ion-col",8),e._uU(35,"Nro Guia:"),e.qZA()(),e.TgZ(36,"ion-row",9)(37,"ion-col",10)(38,"ion-input",11),e.NdJ("ngModelChange",function(i){return t.FormHtmlJs.SERIE=i}),e.qZA()(),e.TgZ(39,"ion-col",12)(40,"ion-input",13),e.NdJ("ngModelChange",function(i){return t.FormHtmlJs.Y10077=i}),e.qZA()()()()(),e._UZ(41,"ion-item"),e.TgZ(42,"ion-item")(43,"ion-grid")(44,"ion-row")(45,"ion-col",14),e._uU(46,"Codigo"),e.qZA(),e.TgZ(47,"ion-col",15),e._uU(48,"Descripcion"),e.qZA(),e.TgZ(49,"ion-col",14),e._uU(50,"Unidad"),e.qZA(),e.TgZ(51,"ion-col",14),e._uU(52,"Cnt.O.C."),e.qZA(),e.TgZ(53,"ion-col",14),e._uU(54,"Cnt.Recibido"),e.qZA(),e.TgZ(55,"ion-col",16),e._uU(56,"Cnt.Recepcion"),e.qZA(),e._UZ(57,"ion-col",14),e.qZA(),e.YNc(58,T,15,6,"ion-row",17),e.qZA()()()(),e.TgZ(59,"ion-footer")(60,"ion-grid")(61,"ion-row"),e._UZ(62,"ion-col"),e.TgZ(63,"ion-col",18)(64,"ion-buttons")(65,"ion-back-button",19),e._uU(66,"Cancelar "),e.qZA(),e._uU(67," \xa0\xa0\xa0\xa0 "),e.TgZ(68,"ion-button",20),e.NdJ("click",function(){return t.FSaveFormulario()}),e._UZ(69,"ion-icon",21),e._uU(70,"\xa0 Guardar "),e.qZA()()(),e._UZ(71,"ion-col"),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("text",t.Cancelar),e.xp6(8),e.Oqu(t.FormHtmlJs.CORRESMG),e.xp6(5),e.Oqu(t.FormHtmlJs.NROREQUISION),e.xp6(6),e.Oqu(t.FormHtmlJs.Y20012),e.xp6(5),e.Q6J("keepContentsMounted",!0),e.xp6(9),e.Q6J("ngModel",t.FormHtmlJs.SERIE),e.xp6(2),e.Q6J("ngModel",t.FormHtmlJs.Y10077),e.xp6(18),e.Q6J("ngForOf",t.FormHtmlJs.detalle),e.xp6(7),e.Q6J("text",t.Cancelar))},dependencies:[n.Pc,n.oU,n.YG,n.Sm,n.wI,n.W2,n.x4,n.Mj,n.fr,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.q_,n.Nd,n.wd,n.sr,n.d8,n.QI,n.j9,n.cs,h.ez,h.sg,_.u5,_.JJ,_.On]}),s})()}}]);