"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7384],{7384:(D,p,l)=>{l.r(p),l.d(p,{MttoGeneraSolsePage:()=>Z});var _=l(5861),S=l(6814),g=l(95),n=l(6728),u=l(6466),t=l(6242),C=l(5472),P=l(1991),v=l(2014),A=l(4248);const M=["idContent"];function T(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"ion-card",15)(1,"ion-card-header")(2,"ion-row")(3,"ion-col",16),t._uU(4," Correlativo: "),t.qZA(),t.TgZ(5,"ion-col",17)(6,"ion-input",18),t.NdJ("ngModelChange",function(e){const s=t.CHM(r).$implicit;return t.KtG(s.corre_otss=e)}),t.qZA()()()(),t.TgZ(7,"ion-card-content")(8,"ion-grid")(9,"ion-row")(10,"ion-col",16),t._uU(11," Pieza: "),t.qZA(),t.TgZ(12,"ion-col",17)(13,"ion-input",19),t.NdJ("ngModelChange",function(e){const s=t.CHM(r).$implicit;return t.KtG(s.nomclase_os=e)}),t.qZA()()(),t.TgZ(14,"ion-row")(15,"ion-col",16),t._uU(16," Cantidad: "),t.qZA(),t.TgZ(17,"ion-col",17)(18,"ion-input",20),t.NdJ("ngModelChange",function(e){const s=t.CHM(r).$implicit;return t.KtG(s.cantidad_otss=e)}),t.qZA()()(),t.TgZ(19,"ion-row")(20,"ion-col",16),t._uU(21," Codigo QR: "),t.qZA(),t.TgZ(22,"ion-col",21)(23,"ion-input",22),t.NdJ("ngModelChange",function(e){const s=t.CHM(r).$implicit;return t.KtG(s.codigo_qr_os=e)}),t.qZA()()(),t.TgZ(24,"ion-row")(25,"ion-col",23)(26,"ion-button",24),t.NdJ("click",function(){const i=t.CHM(r).index,s=t.oxw();return t.KtG(s.start_scan_qr(i))}),t.TgZ(27,"ion-text",25),t._uU(28,"Iniciar Scaneo Q.R."),t.qZA(),t._UZ(29,"ion-icon",26),t.qZA()()(),t.TgZ(30,"ion-row")(31,"ion-col",23)(32,"ion-button",24),t.NdJ("click",function(){const e=t.CHM(r),i=e.$implicit,s=e.index,d=t.oxw();return t.KtG(d.actulizar_solse_qr(i.idotsolse,s))}),t.TgZ(33,"ion-text",27),t._uU(34,"Actualizar Q.R."),t.qZA(),t._UZ(35,"ion-icon",26),t.qZA()()()()()()}if(2&a){const r=h.$implicit,o=t.oxw();t.Q6J("hidden",o.scanActive),t.xp6(6),t.s9C("value",r.corre_otss),t.Q6J("hidden",o.scanActive)("ngModel",r.corre_otss),t.xp6(2),t.Udp("--background",o.scanActive?"#00000000":"#fff"),t.xp6(5),t.s9C("value",r.nomclase_os),t.Q6J("hidden",o.scanActive)("ngModel",r.nomclase_os),t.xp6(5),t.s9C("value",r.cantidad_otss),t.Q6J("hidden",o.scanActive)("ngModel",r.cantidad_otss),t.xp6(5),t.s9C("value",r.codigo_qr_os),t.Q6J("ngModel",r.codigo_qr_os),t.xp6(3),t.Q6J("hidden",o.scanActive),t.xp6(6),t.Q6J("hidden",o.scanActive)}}let Z=(()=>{var a;class h{constructor(o,e,i,s,d,f,x,O,y,E){this.navCtrl=o,this.loadingController=e,this.serviceApi=i,this.storage=s,this.route=d,this.router=f,this.alertController=x,this.modalCtrl=O,this.platform=y,this.toastController=E,this.idtablet_="",this.ArrayItemsSelectedDesti=[],this.NroOtHtml="",this.CodEquipoHtml="",this.FchCreaOtHtml="",this.IdOtHtml="",this.result=null,this.scanActive=!1,this.realPositionYScroll=0,this.realPositionYScrollAux=0,this.idotsolse_otd="";let m,c=this.router.getCurrentNavigation().extras.state;c&&(console.log(c),this.NroOtHtml=c.NroOtHtml,this.CodEquipoHtml=c.CodEquipoHtml,this.FchCreaOtHtml=c.FchCreaOtHtml,this.IdOtHtml=c.IdOtHtml,this.idotsolse_otd=c.idotsolse_otd),this.storage.get("USER_INFO").then(I=>{m=I,this.NomUsuario=m.user_name,this.idtablet_=m.imei})}ngOnInit(){this.ArrayItemsSelectedDesti=[],this.actulizar_solse(this.IdOtHtml),this.storage.get("DEVICE_INFO").then(o=>{this.id_device=o.uuid,console.log("this.id_device::>",this.id_device)})}ngAfterViewInit(){}ngOnDestroy(){}logScrollStart(){console.log("inicio scroool")}logScrolling(o){this.realPositionYScroll=o.detail.scrollTop,this.platform.height()}ionScrollEnd(){console.log("fin  de scroool")}start_scan_qr(o){var e=this;return(0,_.Z)(function*(){if(e.realPositionYScrollAux=e.realPositionYScroll,console.log("this.realPositionYScrollAux::",e.realPositionYScrollAux),console.log("this.realPositionYScroll::",e.realPositionYScroll),yield e.checkPermiso()){e.scanActive=!0;const s=yield u.mR.startScan();console.log("this.realPositionYScrollAux::",e.realPositionYScrollAux),console.log("this.realPositionYScroll::",e.realPositionYScroll),s.hasContent&&(console.log(s),e.ArrayItemsSelectedDesti[o].codigo_qr_os=s.content,console.log(e.ArrayItemsSelectedDesti[o]),console.log(e.ArrayItemsSelectedDesti),console.log("result.hasContent:::",s.hasContent),e.content.scrollByPoint(0,e.realPositionYScrollAux,1200),e.scanActive=!1)}})()}checkPermiso(){var o=this;return(0,_.Z)(function*(){return new Promise(function(){var e=(0,_.Z)(function*(i,s){const d=yield u.mR.checkPermission({force:!0});d.granted?i(!0):d.denied?yield(yield o.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{u.mR.openAppSettings(),i(!1)}}]})).present():i(!1)});return function(i,s){return e.apply(this,arguments)}}())})()}stopScanner(){u.mR.stopScan(),this.scanActive=!1}load_lista_servicios(o){this.serviceApi.load_lista_solse(o,this.idotsolse_otd).then(e=>{console.log("DENTO SOLSE REST",e),this.ArrayItemsSelectedDesti=e,console.log("DENTO SOLSE ArrayItemsSelectedDesti",this.ArrayItemsSelectedDesti),console.log("finally::this.realPositionYScroll>",this.realPositionYScroll),this.content.scrollByPoint(0,this.realPositionYScroll,1e3)}).finally(()=>{})}actulizar_solse(o){this.loadingController.create({message:"Cargando servicios...",translucent:!0}).then(i=>{i.present(),this.serviceApi.update_solse_ot(this.ArrayItemsSelectedDesti,o).then(s=>{console.log("res::::::>",s),this.results=s,console.log(this.results[0]),this.load_lista_servicios(o),0!=this.results[0].o_nres?(this.load_lista_servicios(this.IdOtHtml),this.ArrayItemsSelectedDesti=[]):alert(this.results[0].o_msj)}).finally(()=>{this.loadingController.dismiss()})})}actulizar_solse_qr(o,e){let i;if(this.CssNotiTipoProceso="field_required_ok",console.log(this.ArrayItemsSelectedDesti[e].codigo_qr_os),null==this.ArrayItemsSelectedDesti[e].codigo_qr_os||""==this.ArrayItemsSelectedDesti[e].codigo_qr_os)return i=" Fala ingresar el c\xf3digo QR ",this.CssNotiTipoProceso="field_required",this.presentToast(" Fala ingresar el c\xf3digo QR ","danger"),!1;this.serviceApi.update_solse_ot_qr(this.ArrayItemsSelectedDesti,o).then(s=>{console.log("res::::::>",s),this.results=s,console.log(this.results[0]),this.load_lista_servicios(o),0!=this.results[0].o_nres?(this.load_lista_servicios(this.IdOtHtml),alert(this.results[0].o_msj),this.ArrayItemsSelectedDesti=[]):alert(this.results[0].o_msj)}).finally(()=>{})}presentToast(o,e="primary"){var i=this;return(0,_.Z)(function*(){(yield i.toastController.create({message:o,duration:2e3,position:"top",color:e})).present()})()}regresar_listado_servicios(){this.navCtrl.navigateForward("winprincipal")}}return(a=h).\u0275fac=function(o){return new(o||a)(t.Y36(C.SH),t.Y36(n.HT),t.Y36(P.k),t.Y36(v.K),t.Y36(A.gz),t.Y36(A.F0),t.Y36(n.Br),t.Y36(n.IN),t.Y36(C.t4),t.Y36(n.yF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-mtto-genera-solse"]],viewQuery:function(o,e){if(1&o&&t.Gf(M,5),2&o){let i;t.iGM(i=t.CRH())&&(e.content=i.first)}},standalone:!0,features:[t.jDz],decls:35,vars:10,consts:[[3,"hidden"],["mode","ios"],["text-capitalize",""],["slot","start"],["color","danger",3,"click"],["name","close"],[3,"scrollEvents","ionScrollStart","ionScroll"],["idContent",""],["size-sm","6","size-md","2","size-xl","1"],[1,"text-align:","right"],["size-sm","6","size-md","2","size-xl","2"],[1,"text-align:","left"],["style","\n          border: black;\n          border: 2px solid;\n          background-color: white;\n          border-radius: 25px;\n          width: 95% !important;\n          margin: 2ch !important;\n          padding:0px;","mode","ios","type","button",3,"hidden",4,"ngFor","ngForOf"],["color","success","expand","full",3,"hidden","click"],[1,"scan-box",3,"hidden"],["mode","ios","type","button",2,"border","black","border","2px solid","background-color","white","border-radius","25px","width","95% !important","margin","2ch !important","padding","0px",3,"hidden"],["size","2"],["size","10"],["required","true","color","primary","type","text","mode","ios","disabled","",3,"hidden","ngModel","value","ngModelChange"],["type","text","disabled","","placeholder","Ingrese Solse",3,"hidden","ngModel","value","ngModelChange"],["required","true","color","primary","type","number","mode","ios","disabled","",3,"hidden","ngModel","value","ngModelChange"],["size","10",2,"padding","1px"],["type","text","placeholder","Ingrese Codigo Q.R.",3,"ngModel","value","ngModelChange"],["size","12"],["color","light","expand","full",3,"hidden","click"],["color","primary"],["ios","ios-add-circle","md","md-add-circle"],["color","success"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),t._uU(3,"Lista SOLSE"),t.qZA(),t.TgZ(4,"ion-buttons",3)(5,"ion-button",4),t.NdJ("click",function(){return e.regresar_listado_servicios()}),t._UZ(6,"ion-icon",5),t._uU(7," Regresar "),t.qZA()()()(),t.TgZ(8,"ion-content",6,7),t.NdJ("ionScrollStart",function(){return e.logScrollStart()})("ionScroll",function(s){return e.logScrolling(s)}),t.TgZ(10,"ion-item")(11,"ion-grid")(12,"ion-row")(13,"ion-col",8)(14,"div",9),t._uU(15,"Nro. O.T.:"),t.qZA()(),t.TgZ(16,"ion-col",10)(17,"div",11)(18,"strong"),t._uU(19),t.qZA()()(),t.TgZ(20,"ion-col",8),t._uU(21,"Equipo: "),t.qZA(),t.TgZ(22,"ion-col",10)(23,"strong"),t._uU(24),t.qZA()(),t.TgZ(25,"ion-col",10),t._uU(26,"F.Creacion O.T.:"),t.qZA(),t.TgZ(27,"ion-col",10)(28,"strong"),t._uU(29),t.qZA()()()()(),t.TgZ(30,"ion-list"),t.YNc(31,T,36,16,"ion-card",12),t.qZA(),t.TgZ(32,"ion-button",13),t.NdJ("click",function(){return e.stopScanner()}),t._uU(33," \xa0Detener "),t.qZA(),t._UZ(34,"div",14),t.qZA()),2&o&&(t.Q6J("hidden",e.scanActive),t.xp6(8),t.Udp("--background",e.scanActive?"#00000000":"#fff"),t.Q6J("scrollEvents",!0),t.xp6(11),t.Oqu(e.NroOtHtml),t.xp6(5),t.Oqu(e.CodEquipoHtml),t.xp6(5),t.Oqu(e.FchCreaOtHtml),t.xp6(2),t.Q6J("ngForOf",e.ArrayItemsSelectedDesti),t.xp6(1),t.Q6J("hidden",!e.scanActive),t.xp6(2),t.Q6J("hidden",!e.scanActive))},dependencies:[n.Pc,n.YG,n.Sm,n.PM,n.FN,n.Zi,n.wI,n.W2,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.q_,n.Nd,n.yW,n.wd,n.sr,n.as,n.j9,S.ez,S.sg,g.u5,g.JJ,g.Q7,g.On]}),h})()}}]);