"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7261],{7261:(I,P,c)=>{c.r(P),c.d(P,{ProdListActiProgramadaPage:()=>y});var m=c(5861),p=c(6814),v=c(95),a=c(6728),h=c(6466),f=c(6471),i=c(6242),A=c(5472),C=c(6485),E=c(4248),x=c(2014);const T=["idinputsearch_equipo"];function L(r,_){1&r&&i._UZ(0,"ion-icon",22)}function M(r,_){1&r&&i._UZ(0,"ion-icon",23)}function O(r,_){1&r&&i._UZ(0,"ion-icon",24)}function w(r,_){if(1&r){const s=i.EpF();i.TgZ(0,"ion-item",25)(1,"ion-card",26)(2,"ion-item",25)(3,"ion-item",27),i.NdJ("click",function(){const e=i.CHM(s).$implicit,n=i.oxw(2);return i.KtG(n.FSetEstado(e))}),i.TgZ(4,"ion-label",25)(5,"strong")(6,"div"),i._uU(7),i.qZA()(),i.TgZ(8,"p"),i._uU(9),i.TgZ(10,"ion-text",28),i._uU(11),i.qZA(),i.TgZ(12,"ion-text",29),i._uU(13),i.qZA(),i._uU(14,"\xa0 "),i._uU(15),i.qZA()()(),i.TgZ(16,"ion-item")(17,"ion-button",30),i.NdJ("click",function(){const e=i.CHM(s).$implicit,n=i.oxw(2);return i.KtG(n.FIniciarActvividad(e))}),i._UZ(18,"ion-icon",31),i.qZA()()()()()}if(2&r){const s=_.$implicit,o=i.oxw(2);i.Q6J("hidden",o.scanActive),i.xp6(1),i.Q6J("hidden",o.scanActive),i.xp6(1),i.Q6J("hidden",o.scanActive),i.xp6(2),i.Q6J("hidden",o.scanActive),i.xp6(2),i.Jzz("color:",s.color_reproceso,";"),i.xp6(1),i.Oqu(s.descripcion_pt),i.xp6(2),i.hij(" ",s.EQUIPOID," "),i.xp6(2),i.AsE("Cantidad: ",s.cantidad," \xa0 | Cnt. Pendiente: ",s.cantidad_pendiente," \xa0"),i.xp6(2),i.Oqu(s.correorden),i.xp6(2),i.hij(" ",s.avatar," "),i.xp6(3),i.Q6J("hidden",o.scanActive)}}function D(r,_){if(1&r&&(i.TgZ(0,"ion-item-group")(1,"ion-item-divider",17),i.YNc(2,L,1,0,"ion-icon",18)(3,M,1,0,"ion-icon",19)(4,O,1,0,"ion-icon",20),i._uU(5),i.qZA(),i.YNc(6,w,19,14,"ion-item",21),i.qZA()),2&r){const s=_.$implicit,o=i.oxw();i.xp6(1),i.Q6J("hidden",o.scanActive),i.xp6(1),i.Q6J("ngIf","ASIGNADO"==s.key),i.xp6(1),i.Q6J("ngIf","EN PROCESO"==s.key),i.xp6(1),i.Q6J("ngIf","COMPLETADO"==s.key),i.xp6(1),i.hij(" ",s.key," "),i.xp6(1),i.Q6J("ngForOf",s.values)}}let y=(()=>{var r;class _{constructor(o,t,e,n,l,g,u){this.loadingController=o,this.prodGestionServicioService=t,this.router=e,this.navCtrl=n,this.changeRef=l,this.alertController=g,this.storage=u,this.switchButtonSegmento="",this.search_term_equipo="",this.TituloDinamico="",this.idMenu="",this.scanActive=!1;try{let d=this.router.getCurrentNavigation().extras.queryParams;console.log("navParams 00",this.router.getCurrentNavigation()),console.log("navParams 1",d),d&&(console.log("navParams 2",d[0]),this.TituloDinamico=d[1],this.idMenu=d[0])}catch{}}ngOnInit(){let o;this.changeRef.detectChanges(),this.storage.get("USER_INFO").then(t=>{o=t,console.log("localStorage_user",o),this.NombresUsuarioLocal=o.user_name,this.IdUsuarioLocal=o.user_id,console.log("ngoninit",this.NombresUsuarioLocal),""==this.NombresUsuarioLocal&&this.navCtrl.navigateForward("login")}).catch(t=>{console.log("errrr",t)})}asigna_titulo(o){this.TituloDinamico=o,this.load_list_principal(),console.log("asigna_titulo",this.TituloDinamico)}ionViewDidLoad(){let o=this.router.getCurrentNavigation();console.log("ionViewDidLoad::",o)}ionViewWillLeave(){let o=this.router.getCurrentNavigation();console.log("ionViewWillLeave::",o)}ionViewDidLeave(){let o=this.router.getCurrentNavigation();console.log("ionViewDidLeave::",o)}ionViewWillUnload(){let o=this.router.getCurrentNavigation();console.log("ionViewWillUnload::",o)}ionViewCanLeave(){let o=this.router.getCurrentNavigation();console.log("ionViewCanLeave::",o)}ionViewDidEnter(){console.log(this.TituloDinamico);let o=this.router.getCurrentNavigation();console.log("ionViewDidEnter",o)}ionViewWillEnter(){this.changeRef.detectChanges(),this.load_list_principal()}ionViewCanEnter(){let o=this.router.getCurrentNavigation();console.log("ionViewCanEnter",o)}start_scan_qr(o){var t=this;return(0,m.Z)(function*(){if(t.idinputsearch_equipo.getInputElement().then(n=>{n.blur()}),yield t.checkPermiso()){t.scanActive=!0;const n=yield h.mR.startScan();n.hasContent&&(console.log(n),t.search_term_equipo=n.content,console.log("result.hasContent:::",n.hasContent),t.scanActive=!1,t.idinputsearch_equipo.readonly=!1)}})()}checkPermiso(){var o=this;return(0,m.Z)(function*(){return new Promise(function(){var t=(0,m.Z)(function*(e,n){const l=yield h.mR.checkPermission({force:!0});l.granted?e(!0):l.denied?yield(yield o.alertController.create({header:"No Permiso",message:"Por favor dar permiso al acceso de camara en configuraciones",buttons:[{text:"No",role:"Cancelar"},{text:"Abrir Configuracions",handler:()=>{h.mR.openAppSettings(),e(!1)}}]})).present():e(!1)});return function(e,n){return t.apply(this,arguments)}}())})()}stopScanner(){h.mR.stopScan(),this.scanActive=!1}load_list_principal(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(t=>{t.present(),this.prodGestionServicioService.ListDatos(this.search_term_equipo,this.switchButtonSegmento,"1",this.idMenu).then(e=>{this.MultiArrayServicios=e;let n=this.MultiArrayServicios;console.log(n),this.MultiArrayServicios=this.groupByArray(n,"estado","estado"),console.log(this.MultiArrayServicios)}).finally(()=>{this.loadingController.dismiss()})})}FIniciarActvividad(o){console.log("verifica aqui la maquinaaaaaaaaaaa"),console.log(o.maquina),this.navCtrl.navigateForward(["addserviciostodet"],{state:o})}FNuevaActvividadNp(){let o;o={},o.CONCOMPONENTE=1,this.navCtrl.navigateForward(["addserviciostodet"],{state:o})}FListarActvidades(){console.log("VERIFCAR AQUI, ENVIA ESTAS VARIABLES"),console.log(this.idMenu),console.log(this.TituloDinamico),this.navCtrl.navigateForward(["prod-ate-serv-list-actividades"],{state:{idmenu:this.idMenu,menu:this.TituloDinamico}})}FSetEstado(o){console.log("maquina aquiiiii"),console.log(o.maquina),this.navCtrl.navigateForward(["prod-ate-serv-asigna-estado"],{state:o})}groupByArray(o,t,e){return o.reduce(function(n,l){let g=t instanceof Function?t(l):l[t],u=n.find(d=>d&&d.key===g);return u?(u.values.push(l),u.values.sort(function(d,Z){return d[e].toLowerCase().localeCompare(Z[e].toLowerCase())})):n.push({key:g,values:[l]}),n},[])}sortArray(o,t,e){return e=e||1,o.sort(function(l,g){let u=0;return l[t]>g[t]?u=1*e:l[t]<g[t]&&(u=-1*e),u}),o}}return(r=_).\u0275fac=function(o){return new(o||r)(i.Y36(a.HT),i.Y36(C.Z),i.Y36(E.F0),i.Y36(A.SH),i.Y36(i.sBO),i.Y36(a.Br),i.Y36(x.K))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-prod-list-acti-programada"]],viewQuery:function(o,t){if(1&o&&i.Gf(T,5),2&o){let e;i.iGM(e=i.CRH())&&(t.idinputsearch_equipo=e.first)}},standalone:!0,features:[i.jDz],decls:23,vars:3,consts:[[1,"ion-no-border"],[1,"ion-justify-content-start"],["size","10",1,"ion-align-self-start"],[3,"titulo"],["size","2",1,"ion-align-self-end"],["position","fixed","color","secondary",1,"label-nameusuario"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros",3,"ngModel","ngModelChange","ionChange"],["idinputsearch_equipo",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["title","Nueva Actividad",3,"click"],["name","grid-outline"],["mode","ios",2,"align-items","center"],["fill","clear","expand","block",2,"width","50%",3,"click"],["color","primary",2,"font","size 6px"],["color","light",3,"hidden"],["name","ellipse","color","warning","slot","start",4,"ngIf"],["name","ellipse","color","tertiary","slot","start",4,"ngIf"],["name","ellipse","color","success","slot","start",4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf"],["name","ellipse","color","warning","slot","start"],["name","ellipse","color","tertiary","slot","start"],["name","ellipse","color","success","slot","start"],[3,"hidden"],["expand","full","color","light","size","large","button","true",3,"hidden"],[2,"width","100%",3,"click"],["color","secondary"],["color","primary"],["expand","block","color","white","size","small","slot","end","title","Iniciar Actividad",3,"click"],["expand","block","color","dark","size","small","name","play-forward",3,"hidden"]],template:function(o,t){1&o&&(i.TgZ(0,"ion-toolbar",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2),i._UZ(4,"app-header",3),i.qZA(),i.TgZ(5,"ion-col",4),i._UZ(6,"ion-label",5),i.qZA()()()(),i.TgZ(7,"ion-content")(8,"ion-item")(9,"ion-searchbar",6,7),i.NdJ("ngModelChange",function(n){return t.search_term_equipo=n})("ionChange",function(){return t.load_list_principal()}),i.qZA(),i.TgZ(11,"ion-icon",8,9),i.NdJ("click",function(){return t.load_list_principal()}),i.qZA()(),i.YNc(13,D,7,6,"ion-item-group",10),i.TgZ(14,"ion-fab",11)(15,"ion-fab-button",12),i.NdJ("click",function(){return t.FNuevaActvividadNp()}),i._UZ(16,"ion-icon",13),i.qZA()()(),i.TgZ(17,"ion-footer")(18,"ion-card",14)(19,"ion-button",15),i.NdJ("click",function(){return t.FListarActvidades()}),i.TgZ(20,"ion-label",16),i._UZ(21,"ion-icon",13),i._uU(22," Orden de Fabricacion en Proceso "),i.qZA()()()()),2&o&&(i.xp6(4),i.MGl("titulo","Trabajos Programados ",t.TituloDinamico,""),i.xp6(5),i.Q6J("ngModel",t.search_term_equipo),i.xp6(4),i.Q6J("ngForOf",t.MultiArrayServicios))},dependencies:[a.Pc,a.YG,a.PM,a.wI,a.W2,a.IJ,a.W4,a.fr,a.jY,a.gu,a.Ie,a.rH,a.Ub,a.Q$,a.Nd,a.VI,a.yW,a.sr,a.j9,p.ez,p.sg,p.O5,v.u5,v.JJ,v.On,f.G],styles:['ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.scanner-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:100px;width:100vw;height:50px;z-index:11}.scan-box[_ngcontent-%COMP%]{border:2px solid #fff;box-shadow:0 0 0 100vmax #00000080;content:"";display:block;left:50%;height:300px;position:absolute;top:50%;transform:translate(-50%,-50%);width:300px}']}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),_})()}}]);