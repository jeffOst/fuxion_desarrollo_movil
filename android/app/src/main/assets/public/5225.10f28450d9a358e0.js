"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5225],{5225:(P,m,n)=>{n.r(m),n.d(m,{MttoListMantoGuiaOtPage:()=>A});var u=n(5861),h=n(6814),C=n(95),e=n(6728),t=n(6242),b=n(5472),p=n(4248),f=n(2014),O=n(1991);function M(l,c){if(1&l){const r=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label",14),t.NdJ("click",function(){const o=t.CHM(r).$implicit,s=t.oxw();return t.KtG(s.FNavigatePageDetalleGuiaOT(o))}),t.TgZ(3,"ion-label")(4,"strong")(5,"div"),t._uU(6),t.qZA()(),t.TgZ(7,"p"),t._uU(8," Site: \xa0"),t.TgZ(9,"ion-text",15),t._uU(10),t.qZA(),t._uU(11," Fecha Registro: \xa0"),t.TgZ(12,"ion-text",16),t._uU(13),t.qZA()()()(),t.TgZ(14,"ion-badge",17),t._uU(15),t.qZA()(),t.TgZ(16,"ion-item-options",17)(17,"ion-item-option",18),t.NdJ("click",function(){const o=t.CHM(r).$implicit,s=t.oxw();return t.KtG(s.DeleteRowGuiaCab(o))}),t._UZ(18,"ion-icon",19),t.qZA()()()}if(2&l){const r=c.$implicit;t.xp6(6),t.hij("Correlativo: ",r.correguia," "),t.xp6(4),t.hij("",r.Y06002," \xa0"),t.xp6(3),t.hij("",r["block_guiaremi_cab#FCHMOV"]," \xa0"),t.xp6(2),t.Oqu(r["ma00estado#nombre"])}}let A=(()=>{var l;class c{constructor(a,i,o,s,g,_){this.navCtrl=a,this.router=i,this.alertController=o,this.loadingController=s,this.storage=g,this.ApiService=_,this.Cancelar="Cancelar",this.disableButton=!1,this.estaCargando=!1,this.selectedItems=[],this.navParamsAny=this.router.getCurrentNavigation().extras.state.Row}ngOnInit(){let a;this.estaCargando=!0,this.storage.get("USER_INFO").then(i=>{a=i,this.NombresUsuarioLocal=a.user_name,this.IdUsuarioLocal=a.user_id})}ionViewWillEnter(){this.codsmg=this.navParamsAny.codsmg,this.id_orden_trab_cab=this.navParamsAny.id_orden_trab_cab,this.id_orden_trab_fis_cab=this.navParamsAny.id_orden_trab_fis_cab,this.ListBlockGuiasRemiCabOtis()}ListBlockGuiasRemiCabOtis(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(i=>{i.present(),this.ApiService.FListBlockGuiasRemiCabOtis("47",this.id_orden_trab_cab).then(o=>{this.DataSetGrid=o,this.loadingController.dismiss(),this.estaCargando=!1}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(o=>{i.dismiss()})})}DeleteRowGuiaCab(a){var i=this;return(0,u.Z)(function*(){var s;yield(yield i.alertController.create({header:"Confirmaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar el registro?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Operaci\xf3n cancelada")}},{text:"Aceptar",handler:(s=(0,u.Z)(function*(){yield(yield i.loadingController.create({message:"Procesando..."})).present(),yield i.ApiService.FDeleteRowGuiaCabOtis("48",a.idblockguiaremicab).then(function(){var _=(0,u.Z)(function*(d){i.loadingController.dismiss();let v="0"==d[0].o_nres?"alerta-error":"alerta-ok";yield(yield i.alertController.create({header:"ALERTA",subHeader:"Confirmaci\xf3n",cssClass:v,mode:"ios",animated:!0,message:d[0].o_msj,buttons:[{text:"Aceptar",handler:()=>{"1"==d[0].o_nres&&i.ListBlockGuiasRemiCabOtis()}}]})).present()});return function(d){return _.apply(this,arguments)}}()).finally(()=>{}).catch(_=>{i.loadingController.dismiss()})}),function(){return s.apply(this,arguments)})}]})).present()})()}FNavigatePageDetalleGuiaOT(a){this.navCtrl.navigateForward(["/mtto-win-manto-pend"],{state:{Row:a}})}FBtnCrearCabeceraGuia(){this.loadingController.create({message:"Cargando lista...",translucent:!0}).then(i=>{i.present(),this.ApiService.FCreaCabeceraGuiaOti("45",this.id_orden_trab_cab,this.IdUsuarioLocal).then(o=>{this.loadingController.dismiss(),this.estaCargando=!1,this.navCtrl.navigateForward(["/mtto-win-manto-pend"],{state:{Row:{cod_bomba:this.codsmg,nro_oti:this.id_orden_trab_fis_cab,id_ot_vale_salida_bgc:this.id_orden_trab_cab,idblockguiaremicab:o[0].o_nres,correguia:o[0].o_msj}}})}).finally(()=>{this.loadingController.dismiss(),setTimeout(()=>{},600)}).catch(()=>{}).then(o=>{i.dismiss()})})}}return(l=c).\u0275fac=function(a){return new(a||l)(t.Y36(b.SH),t.Y36(p.F0),t.Y36(e.Br),t.Y36(e.HT),t.Y36(f.K),t.Y36(O.k))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-mtto-list-manto-guia-ot"]],standalone:!0,features:[t.jDz],decls:26,vars:6,consts:[[3,"translucent"],["mode","ios","color","primary"],["text-capitalize",""],["slot","start"],[3,"text","disabled"],[1,"ion-no-border"],["mode","ios","debounce","1700","cancelButtonText","Cancelar","enterkeyhint","done","placeholder","Filtrar Parametros"],["IdHtmlInputSearch",""],["slot","end","name","sync-outline",3,"click"],["idIconButtonSync",""],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","danger","title","Ver Guias Atendidas",3,"click"],["name","add-outline"],[3,"click"],["color","danger"],["color","secondary"],["slot","end"],["color","danger","expandable","true",3,"click"],["slot","icon-only","name","trash"]],template:function(a,i){1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),t._uU(3,"Listado Guia"),t.qZA(),t.TgZ(4,"ion-buttons",3),t._UZ(5,"ion-back-button",4),t.qZA()()(),t.TgZ(6,"ion-toolbar",5)(7,"ion-list")(8,"ion-item")(9,"ion-label")(10,"h1"),t._uU(11),t.qZA()(),t.TgZ(12,"ion-label")(13,"h1"),t._uU(14),t.qZA()()()()(),t.TgZ(15,"ion-content")(16,"ion-card")(17,"ion-item"),t._UZ(18,"ion-searchbar",6,7),t.TgZ(20,"ion-icon",8,9),t.NdJ("click",function(){return i.ListBlockGuiasRemiCabOtis()}),t.qZA()(),t.YNc(22,M,19,4,"ion-item-sliding",10),t.qZA()(),t.TgZ(23,"ion-fab",11)(24,"ion-fab-button",12),t.NdJ("click",function(){return i.FBtnCrearCabeceraGuia()}),t._UZ(25,"ion-icon",13),t.qZA()()),2&a&&(t.Q6J("translucent",!0),t.xp6(5),t.Q6J("text",i.Cancelar)("disabled",i.disableButton),t.xp6(6),t.Oqu(i.codsmg),t.xp6(3),t.hij("N\xb0 O.T: ",i.id_orden_trab_fis_cab,""),t.xp6(8),t.Q6J("ngForOf",i.DataSetGrid))},dependencies:[e.Pc,e.yp,e.Sm,e.PM,e.W2,e.IJ,e.W4,e.Gu,e.gu,e.Ie,e.u8,e.IK,e.td,e.Q$,e.q_,e.VI,e.yW,e.wd,e.sr,e.j9,e.oU,h.ez,h.sg,C.u5]}),c})()}}]);